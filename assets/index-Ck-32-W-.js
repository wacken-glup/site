const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SwiperView-DDWU9dvu.js","assets/SwiperView-IKc99Z-z.css","assets/MembersView-CjqJzKzY.js","assets/MembersView-BBqMQnHy.css"])))=>i.map(i=>d[i]);
var dI=Object.defineProperty;var fI=(t,e,n)=>e in t?dI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var he=(t,e,n)=>fI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();let Co,uu,hu,du;const gn={light:"",dark:""},km=[];async function mI(t){await new Promise(e=>setTimeout(e,t))}function gI(){return"fxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function fa(t,e){try{return typeof t=="string"?(e??document).querySelector(t):t}catch{return null}}function In(t,e){try{return typeof t=="string"?(e??document).querySelectorAll(t):t??km}catch{return km}}function pn(t,e){var n;return((n=t==null?void 0:t.classList)==null?void 0:n.contains(e))??!1}function Sl(t,e){var n;return((n=t==null?void 0:t.tagName)==null?void 0:n.toLowerCase())===e}function Ko(t,e){var n;return((n=t==null?void 0:t.type)==null?void 0:n.toLowerCase())===e}function ts(t,e){var n;(n=t==null?void 0:t.classList)==null||n.add(e)}function an(t,e){var n;(n=t==null?void 0:t.classList)==null||n.remove(e)}function Rn(t,e,n,r=!0){t==null||t.addEventListener(e,n,r)}function W_(t,e,n,r=!0){t==null||t.removeEventListener(e,n,r)}function pI(t,e){var n;(n=e==null?void 0:e.parentNode)==null||n.insertBefore(t,e)}function Xh(t){return t==null?void 0:t.previousElementSibling}function q_(t){return t==null?void 0:t.nextElementSibling}function Hs(t){return t==null?void 0:t.parentElement}function _I(t){const e=document.createElement("div");for(let n=0,r=Object.keys(t),s=r.length;n<s;n++){const i=r[n],o=t[i];e.setAttribute(i,o)}return e}function ma(t){const e=t;Ko(e,"number")&&!e.value&&(e.value=""),e.placeholder||(e.placeholder=" "),t.getAttribute("data-ui")&&td(t,null)}function yI(t){td(t.currentTarget,null,null,t)}function vI(t){const e=t.currentTarget,n=Hs(e),r=fa("input:not([type=file], [type=checkbox], [type=radio]), select, textarea",n);r&&r.focus()}function EI(t){const e=t.currentTarget;ma(e)}function II(t){const e=t.currentTarget;ma(e)}function K_(t){W_(document.body,"click",K_);const e=t.target,n=In("menu.active");for(let r=0,s=n.length;r<s;r++)z_(e,n[r],t)}function wI(t){const e=t.currentTarget;an(e,"active"),Co&&clearTimeout(Co)}function TI(t){const e=t.currentTarget;Zh(e)}function bI(t){const e=t.currentTarget;ed(e)}function AI(t){const e=t.currentTarget;Zh(e,t)}function CI(t){const e=t.currentTarget;ed(e,t)}function SI(t){const e=t.currentTarget;G_(e)}function Dm(){uu&&clearTimeout(uu),uu=setTimeout(()=>{ic()},180)}function Zh(t,e){if(e&&e.key==="Enter"){const s=Xh(t);if(!Ko(s,"file"))return;s.click();return}const n=t,r=q_(t);Ko(r,"text")&&(r.value=n.files?Array.from(n.files).map(s=>s.name).join(", "):"",r.readOnly=!0,Rn(r,"keydown",AI,!1),ma(r))}function ed(t,e){if(e&&e.key==="Enter"){const s=Xh(t);if(!Ko(s,"color"))return;s.click();return}const n=t,r=q_(t);Ko(r,"text")&&(r.readOnly=!0,r.value=n.value,Rn(r,"keydown",CI,!1),ma(r))}function G_(t){const e=Hs(t),n=Hs(t);e.removeAttribute("style"),pn(e,"min")&&e.style.setProperty("---size",`${Math.max(t.scrollHeight,n.offsetHeight)}px`)}function Nm(t){const e=Hs(t),n=fa("span",e),r=In("input",e);if(!r.length||!n)return;const s=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--size"))||16,i=pn(e,"max")?0:.25*s*100/r[0].offsetWidth,o=[],a=[];for(let g=0,E=r.length;g<E;g++){const A=parseFloat(r[g].min)||0,D=parseFloat(r[g].max)||100,L=parseFloat(r[g].value)||0,k=(L-A)*100/(D-A),I=i/2-i*k/100;o.push(k+I),a.push(L)}let l=o[0],u=0,h=100-u-l,d=a[0],m=a[1]||0;r.length>1&&(l=Math.abs(o[1]-o[0]),u=o[1]>o[0]?o[0]:o[1],h=100-u-l,m>d&&(d=a[1]||0,m=a[0])),e.style.setProperty("---start",`${u}%`),e.style.setProperty("---end",`${h}%`),e.style.setProperty("---value1",`'${d}'`),e.style.setProperty("---value2",`'${m}'`)}function Wu(t){if(t){const n=t.target;if(n.type==="range"){Nm(n);return}}const e=In(".slider > input[type=range]");e.length?Rn(globalThis,"input",Wu,!1):W_(globalThis,"input",Wu,!1);for(let n=0,r=e.length;n<r;n++)Nm(e[n])}async function td(t,e,n,r){if(!(!e&&(e=fa(t.getAttribute("data-ui")),!e))){if(Sl(e,"dialog")){await PI(t,e);return}if(Sl(e,"menu")){z_(t,e,r);return}if(pn(e,"snackbar")){kI(t,e,n);return}if(pn(e,"page")){RI(t,e);return}if(ga(t),pn(e,"active")){an(e,"active");return}ts(e,"active")}}function ga(t){t.id&&pn(t,"page")&&(t=fa(`[data-ui="#${t.id}"]`)??t);const e=Hs(t);if(!pn(e,"tabs"))return;const n=In("a",e);for(let r=0,s=n.length;r<s;r++)an(n[r],"active");ts(t,"active")}function RI(t,e){ga(t);const n=Hs(e);if(n)for(let r=0,s=n.children.length;r<s;r++)pn(n.children[r],"page")&&an(n.children[r],"active");ts(e,"active")}function z_(t,e,n){hu&&clearTimeout(hu),hu=setTimeout(()=>{var r;Rn(document.body,"click",K_),(r=document.activeElement)==null||r.blur(),ga(t);const s=pn(e,"active"),i=(n==null?void 0:n.target)===t,o=!!t.closest("menu");if(!s&&o||s&&i){an(e,"active");return}const a=In("menu.active");for(let l=0,u=a.length;l<u;l++)an(a[l],"active");ts(e,"active")},90)}async function PI(t,e){var n;(n=document.activeElement)==null||n.blur(),ga(t);let r=Xh(e);const s=e,i=pn(e,"active")||s.open,o=pn(e,"modal"),a=Hs(e),l=Sl(a,"nav");if(pn(r,"overlay")||(r=_I({class:"overlay"}),pI(r,e),await mI(90)),r.onclick=()=>{o||(an(t,"active"),an(e,"active"),an(r,"active"),s.close())},l){const u=In("dialog, a, .overlay",a);for(let h=0,d=u.length;h<d;h++){const m=u[h];an(m,"active"),m.open&&m.close()}}i?(an(t,"active"),an(r,"active"),an(e,"active"),s.close()):(!Sl(t,"button")&&!pn(t,"button")&&!pn(t,"chip")&&ts(t,"active"),ts(r,"active"),ts(e,"active"),o?s.showModal():s.show())}function kI(t,e,n){var r;(r=document.activeElement)==null||r.blur(),ga(t);const s=In(".snackbar.active");for(let i=0,o=s.length;i<o;i++)an(s[i],"active");ts(e,"active"),Rn(e,"click",wI),Co&&clearTimeout(Co),n!==-1&&(Co=setTimeout(()=>{an(e,"active")},n??6e3))}function DI(){if(gn.light&&gn.dark)return gn;const t=document.createElement("body");t.className="light",document.body.appendChild(t);const e=document.createElement("body");e.className="dark",document.body.appendChild(e);const n=getComputedStyle(t),r=getComputedStyle(e),s=["--primary","--on-primary","--primary-container","--on-primary-container","--secondary","--on-secondary","--secondary-container","--on-secondary-container","--tertiary","--on-tertiary","--tertiary-container","--on-tertiary-container","--error","--on-error","--error-container","--on-error-container","--background","--on-background","--surface","--on-surface","--surface-variant","--on-surface-variant","--outline","--outline-variant","--shadow","--scrim","--inverse-surface","--inverse-on-surface","--inverse-primary","--surface-dim","--surface-bright","--surface-container-lowest","--surface-container-low","--surface-container","--surface-container-high","--surface-container-highest"];for(let i=0,o=s.length;i<o;i++)gn.light+=s[i]+":"+n.getPropertyValue(s[i])+";",gn.dark+=s[i]+":"+r.getPropertyValue(s[i])+";";return document.body.removeChild(t),document.body.removeChild(e),gn}function NI(t){if(!t||!globalThis.materialDynamicColors)return DI();const e=/dark/i.test(document.body.className)?"dark":"light";return t.light&&t.dark?(gn.light=t.light,gn.dark=t.dark,document.body.setAttribute("style",t[e]),t):globalThis.materialDynamicColors(t).then(n=>{const r=s=>{let i="";for(let o=0,a=Object.keys(s),l=a.length;o<l;o++){const u=a[o],h=s[u],d=u.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();i+="--"+d+":"+h+";"}return i};return gn.light=r(n.light),gn.dark=r(n.dark),document.body.setAttribute("style",gn[e]),gn})}function OI(t){if(!t)return/dark/i.test(document.body.className)?"dark":"light";document.body.classList.remove("light","dark"),document.body.classList.add(t);const e=t==="light"?gn.light:gn.dark;return globalThis.materialDynamicColors&&document.body.setAttribute("style",e),t}function LI(){du||(du=new MutationObserver(Dm),du.observe(document.body,{childList:!0,subtree:!0}),Dm())}function ic(t,e){if(t){if(t==="setup"){LI();return}if(t==="guid")return gI();if(t==="mode")return OI(e);if(t==="theme")return NI(e);const l=fa(t);if(!l)return;td(l,l,e)}const n=In("[data-ui]");for(let l=0,u=n.length;l<u;l++)Rn(n[l],"click",yI);const r=In(".field > label");for(let l=0,u=r.length;l<u;l++)Rn(r[l],"click",vI);const s=In(".field > input:not([type=file], [type=color], [type=range]), .field > select, .field > textarea");for(let l=0,u=s.length;l<u;l++){const h=s[l];Rn(h,"focus",EI),Rn(h,"blur",II),ma(h)}const i=In(".field > input[type=file]");for(let l=0,u=i.length;l<u;l++){const h=i[l];Rn(h,"change",TI),Zh(h)}const o=In(".field > input[type=color]");for(let l=0,u=o.length;l<u;l++){const h=o[l];Rn(h,"change",bI),ed(h)}const a=In(".field.textarea > textarea");for(let l=0,u=a.length;l<u;l++){const h=a[l];Rn(h,"input",SI),G_(h)}Wu()}globalThis.addEventListener&&globalThis.addEventListener("load",async()=>await ic("setup"));globalThis.beercss=ic;globalThis.ui=ic;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){return t<0?-1:t===0?0:1}function So(t,e,n){return(1-n)*t+n*e}function MI(t,e,n){return n<t?t:n>e?e:n}function Rl(t,e,n){return n<t?t:n>e?e:n}function Om(t){return t=t%360,t<0&&(t=t+360),t}function nd(t){return t=t%360,t<0&&(t=t+360),t}function xI(t,e){return nd(e-t)<=180?1:-1}function Y_(t,e){return 180-Math.abs(Math.abs(t-e)-180)}function qu(t,e){const n=t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],r=t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],s=t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2];return[n,r,s]}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q_=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],VI=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],rd=[95.047,100,108.883];function oc(t,e,n){return(255<<24|(t&255)<<16|(e&255)<<8|n&255)>>>0}function Lm(t){const e=Vs(t[0]),n=Vs(t[1]),r=Vs(t[2]);return oc(e,n,r)}function FI(t){return t>>24&255}function ac(t){return t>>16&255}function lc(t){return t>>8&255}function cc(t){return t&255}function J_(t,e,n){const r=VI,s=r[0][0]*t+r[0][1]*e+r[0][2]*n,i=r[1][0]*t+r[1][1]*e+r[1][2]*n,o=r[2][0]*t+r[2][1]*e+r[2][2]*n,a=Vs(s),l=Vs(i),u=Vs(o);return oc(a,l,u)}function UI(t){const e=wr(ac(t)),n=wr(lc(t)),r=wr(cc(t));return qu([e,n,r],Q_)}function $I(t,e,n){const r=rd,s=(t+16)/116,i=e/500+s,o=s-n/200,a=hl(i),l=hl(s),u=hl(o),h=a*r[0],d=l*r[1],m=u*r[2];return J_(h,d,m)}function BI(t){const e=wr(ac(t)),n=wr(lc(t)),r=wr(cc(t)),s=Q_,i=s[0][0]*e+s[0][1]*n+s[0][2]*r,o=s[1][0]*e+s[1][1]*n+s[1][2]*r,a=s[2][0]*e+s[2][1]*n+s[2][2]*r,l=rd,u=i/l[0],h=o/l[1],d=a/l[2],m=Ro(u),g=Ro(h),E=Ro(d),A=116*g-16,D=500*(m-g),L=200*(g-E);return[A,D,L]}function jI(t){const e=Jr(t),n=Vs(e);return oc(n,n,n)}function Ku(t){const e=UI(t)[1];return 116*Ro(e/100)-16}function Jr(t){return 100*hl((t+16)/116)}function Gu(t){return Ro(t/100)*116-16}function wr(t){const e=t/255;return e<=.040449936?e/12.92*100:Math.pow((e+.055)/1.055,2.4)*100}function Vs(t){const e=t/100;let n=0;return e<=.0031308?n=e*12.92:n=1.055*Math.pow(e,1/2.4)-.055,MI(0,255,Math.round(n*255))}function HI(){return rd}function Ro(t){const e=.008856451679035631,n=24389/27;return t>e?Math.pow(t,1/3):(n*t+16)/116}function hl(t){const e=.008856451679035631,n=24389/27,r=t*t*t;return r>e?r:(116*t-16)/n}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let yr=class X_{static make(e=HI(),n=200/Math.PI*Jr(50)/100,r=50,s=2,i=!1){const o=e,a=o[0]*.401288+o[1]*.650173+o[2]*-.051461,l=o[0]*-.250268+o[1]*1.204414+o[2]*.045854,u=o[0]*-.002079+o[1]*.048952+o[2]*.953127,h=.8+s/10,d=h>=.9?So(.59,.69,(h-.9)*10):So(.525,.59,(h-.8)*10);let m=i?1:h*(1-1/3.6*Math.exp((-n-42)/92));m=m>1?1:m<0?0:m;const g=h,E=[m*(100/a)+1-m,m*(100/l)+1-m,m*(100/u)+1-m],A=1/(5*n+1),D=A*A*A*A,L=1-D,k=D*n+.1*L*L*Math.cbrt(5*n),I=Jr(r)/e[1],S=1.48+Math.sqrt(I),B=.725/Math.pow(I,.2),V=B,y=[Math.pow(k*E[0]*a/100,.42),Math.pow(k*E[1]*l/100,.42),Math.pow(k*E[2]*u/100,.42)],_=[400*y[0]/(y[0]+27.13),400*y[1]/(y[1]+27.13),400*y[2]/(y[2]+27.13)],v=(2*_[0]+_[1]+.05*_[2])*B;return new X_(I,v,B,V,d,g,E,k,Math.pow(k,.25),S)}constructor(e,n,r,s,i,o,a,l,u,h){this.n=e,this.aw=n,this.nbb=r,this.ncb=s,this.c=i,this.nc=o,this.rgbD=a,this.fl=l,this.fLRoot=u,this.z=h}};yr.DEFAULT=yr.make();/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nt{constructor(e,n,r,s,i,o,a,l,u){this.hue=e,this.chroma=n,this.j=r,this.q=s,this.m=i,this.s=o,this.jstar=a,this.astar=l,this.bstar=u}distance(e){const n=this.jstar-e.jstar,r=this.astar-e.astar,s=this.bstar-e.bstar,i=Math.sqrt(n*n+r*r+s*s);return 1.41*Math.pow(i,.63)}static fromInt(e){return Nt.fromIntInViewingConditions(e,yr.DEFAULT)}static fromIntInViewingConditions(e,n){const r=(e&16711680)>>16,s=(e&65280)>>8,i=e&255,o=wr(r),a=wr(s),l=wr(i),u=.41233895*o+.35762064*a+.18051042*l,h=.2126*o+.7152*a+.0722*l,d=.01932141*o+.11916382*a+.95034478*l,m=.401288*u+.650173*h-.051461*d,g=-.250268*u+1.204414*h+.045854*d,E=-.002079*u+.048952*h+.953127*d,A=n.rgbD[0]*m,D=n.rgbD[1]*g,L=n.rgbD[2]*E,k=Math.pow(n.fl*Math.abs(A)/100,.42),I=Math.pow(n.fl*Math.abs(D)/100,.42),S=Math.pow(n.fl*Math.abs(L)/100,.42),B=fn(A)*400*k/(k+27.13),V=fn(D)*400*I/(I+27.13),y=fn(L)*400*S/(S+27.13),_=(11*B+-12*V+y)/11,v=(B+V-2*y)/9,N=(20*B+20*V+21*y)/20,x=(40*B+20*V+y)/20,M=Math.atan2(v,_)*180/Math.PI,R=M<0?M+360:M>=360?M-360:M,Te=R*Math.PI/180,Ke=x*n.nbb,Pe=100*Math.pow(Ke/n.aw,n.c*n.z),Ce=4/n.c*Math.sqrt(Pe/100)*(n.aw+4)*n.fLRoot,Ie=R<20.14?R+360:R,at=.25*(Math.cos(Ie*Math.PI/180+2)+3.8),mt=5e4/13*at*n.nc*n.ncb*Math.sqrt(_*_+v*v)/(N+.305),Je=Math.pow(mt,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),Fe=Je*Math.sqrt(Pe/100),We=Fe*n.fLRoot,xt=50*Math.sqrt(Je*n.c/(n.aw+4)),St=(1+100*.007)*Pe/(1+.007*Pe),ut=1/.0228*Math.log(1+.0228*We),z=ut*Math.cos(Te),ie=ut*Math.sin(Te);return new Nt(R,Fe,Pe,Ce,We,xt,St,z,ie)}static fromJch(e,n,r){return Nt.fromJchInViewingConditions(e,n,r,yr.DEFAULT)}static fromJchInViewingConditions(e,n,r,s){const i=4/s.c*Math.sqrt(e/100)*(s.aw+4)*s.fLRoot,o=n*s.fLRoot,a=n/Math.sqrt(e/100),l=50*Math.sqrt(a*s.c/(s.aw+4)),u=r*Math.PI/180,h=(1+100*.007)*e/(1+.007*e),d=1/.0228*Math.log(1+.0228*o),m=d*Math.cos(u),g=d*Math.sin(u);return new Nt(r,n,e,i,o,l,h,m,g)}static fromUcs(e,n,r){return Nt.fromUcsInViewingConditions(e,n,r,yr.DEFAULT)}static fromUcsInViewingConditions(e,n,r,s){const i=n,o=r,a=Math.sqrt(i*i+o*o),l=(Math.exp(a*.0228)-1)/.0228/s.fLRoot;let u=Math.atan2(o,i)*(180/Math.PI);u<0&&(u+=360);const h=e/(1-(e-100)*.007);return Nt.fromJchInViewingConditions(h,l,u,s)}toInt(){return this.viewed(yr.DEFAULT)}viewed(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),s=this.hue*Math.PI/180,i=.25*(Math.cos(s+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),a=i*(5e4/13)*e.nc*e.ncb,l=o/e.nbb,u=Math.sin(s),h=Math.cos(s),d=23*(l+.305)*r/(23*a+11*r*h+108*r*u),m=d*h,g=d*u,E=(460*l+451*m+288*g)/1403,A=(460*l-891*m-261*g)/1403,D=(460*l-220*m-6300*g)/1403,L=Math.max(0,27.13*Math.abs(E)/(400-Math.abs(E))),k=fn(E)*(100/e.fl)*Math.pow(L,1/.42),I=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),S=fn(A)*(100/e.fl)*Math.pow(I,1/.42),B=Math.max(0,27.13*Math.abs(D)/(400-Math.abs(D))),V=fn(D)*(100/e.fl)*Math.pow(B,1/.42),y=k/e.rgbD[0],_=S/e.rgbD[1],v=V/e.rgbD[2],N=1.86206786*y-1.01125463*_+.14918677*v,x=.38752654*y+.62144744*_-.00897398*v,M=-.0158415*y-.03412294*_+1.04996444*v;return J_(N,x,M)}static fromXyzInViewingConditions(e,n,r,s){const i=.401288*e+.650173*n-.051461*r,o=-.250268*e+1.204414*n+.045854*r,a=-.002079*e+.048952*n+.953127*r,l=s.rgbD[0]*i,u=s.rgbD[1]*o,h=s.rgbD[2]*a,d=Math.pow(s.fl*Math.abs(l)/100,.42),m=Math.pow(s.fl*Math.abs(u)/100,.42),g=Math.pow(s.fl*Math.abs(h)/100,.42),E=fn(l)*400*d/(d+27.13),A=fn(u)*400*m/(m+27.13),D=fn(h)*400*g/(g+27.13),L=(11*E+-12*A+D)/11,k=(E+A-2*D)/9,I=(20*E+20*A+21*D)/20,S=(40*E+20*A+D)/20,B=Math.atan2(k,L)*180/Math.PI,V=B<0?B+360:B>=360?B-360:B,y=V*Math.PI/180,_=S*s.nbb,v=100*Math.pow(_/s.aw,s.c*s.z),N=4/s.c*Math.sqrt(v/100)*(s.aw+4)*s.fLRoot,x=V<20.14?V+360:V,M=1/4*(Math.cos(x*Math.PI/180+2)+3.8),R=5e4/13*M*s.nc*s.ncb*Math.sqrt(L*L+k*k)/(I+.305),Te=Math.pow(R,.9)*Math.pow(1.64-Math.pow(.29,s.n),.73),Ke=Te*Math.sqrt(v/100),Pe=Ke*s.fLRoot,Ce=50*Math.sqrt(Te*s.c/(s.aw+4)),Ie=(1+100*.007)*v/(1+.007*v),at=Math.log(1+.0228*Pe)/.0228,mt=at*Math.cos(y),Je=at*Math.sin(y);return new Nt(V,Ke,v,N,Pe,Ce,Ie,mt,Je)}xyzInViewingConditions(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),s=this.hue*Math.PI/180,i=.25*(Math.cos(s+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),a=i*(5e4/13)*e.nc*e.ncb,l=o/e.nbb,u=Math.sin(s),h=Math.cos(s),d=23*(l+.305)*r/(23*a+11*r*h+108*r*u),m=d*h,g=d*u,E=(460*l+451*m+288*g)/1403,A=(460*l-891*m-261*g)/1403,D=(460*l-220*m-6300*g)/1403,L=Math.max(0,27.13*Math.abs(E)/(400-Math.abs(E))),k=fn(E)*(100/e.fl)*Math.pow(L,1/.42),I=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),S=fn(A)*(100/e.fl)*Math.pow(I,1/.42),B=Math.max(0,27.13*Math.abs(D)/(400-Math.abs(D))),V=fn(D)*(100/e.fl)*Math.pow(B,1/.42),y=k/e.rgbD[0],_=S/e.rgbD[1],v=V/e.rgbD[2],N=1.86206786*y-1.01125463*_+.14918677*v,x=.38752654*y+.62144744*_-.00897398*v,M=-.0158415*y-.03412294*_+1.04996444*v;return[N,x,M]}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Xr=class Se{static sanitizeRadians(e){return(e+Math.PI*8)%(Math.PI*2)}static trueDelinearized(e){const n=e/100;let r=0;return n<=.0031308?r=n*12.92:r=1.055*Math.pow(n,1/2.4)-.055,r*255}static chromaticAdaptation(e){const n=Math.pow(Math.abs(e),.42);return fn(e)*400*n/(n+27.13)}static hueOf(e){const n=qu(e,Se.SCALED_DISCOUNT_FROM_LINRGB),r=Se.chromaticAdaptation(n[0]),s=Se.chromaticAdaptation(n[1]),i=Se.chromaticAdaptation(n[2]),o=(11*r+-12*s+i)/11,a=(r+s-2*i)/9;return Math.atan2(a,o)}static areInCyclicOrder(e,n,r){const s=Se.sanitizeRadians(n-e),i=Se.sanitizeRadians(r-e);return s<i}static intercept(e,n,r){return(n-e)/(r-e)}static lerpPoint(e,n,r){return[e[0]+(r[0]-e[0])*n,e[1]+(r[1]-e[1])*n,e[2]+(r[2]-e[2])*n]}static setCoordinate(e,n,r,s){const i=Se.intercept(e[s],n,r[s]);return Se.lerpPoint(e,i,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,n){const r=Se.Y_FROM_LINRGB[0],s=Se.Y_FROM_LINRGB[1],i=Se.Y_FROM_LINRGB[2],o=n%4<=1?0:100,a=n%2===0?0:100;if(n<4){const l=o,u=a,h=(e-l*s-u*i)/r;return Se.isBounded(h)?[h,l,u]:[-1,-1,-1]}else if(n<8){const l=o,u=a,h=(e-u*r-l*i)/s;return Se.isBounded(h)?[u,h,l]:[-1,-1,-1]}else{const l=o,u=a,h=(e-l*r-u*s)/i;return Se.isBounded(h)?[l,u,h]:[-1,-1,-1]}}static bisectToSegment(e,n){let r=[-1,-1,-1],s=r,i=0,o=0,a=!1,l=!0;for(let u=0;u<12;u++){const h=Se.nthVertex(e,u);if(h[0]<0)continue;const d=Se.hueOf(h);if(!a){r=h,s=h,i=d,o=d,a=!0;continue}(l||Se.areInCyclicOrder(i,d,o))&&(l=!1,Se.areInCyclicOrder(i,n,d)?(s=h,o=d):(r=h,i=d))}return[r,s]}static midpoint(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2,(e[2]+n[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,n){const r=Se.bisectToSegment(e,n);let s=r[0],i=Se.hueOf(s),o=r[1];for(let a=0;a<3;a++)if(s[a]!==o[a]){let l=-1,u=255;s[a]<o[a]?(l=Se.criticalPlaneBelow(Se.trueDelinearized(s[a])),u=Se.criticalPlaneAbove(Se.trueDelinearized(o[a]))):(l=Se.criticalPlaneAbove(Se.trueDelinearized(s[a])),u=Se.criticalPlaneBelow(Se.trueDelinearized(o[a])));for(let h=0;h<8&&!(Math.abs(u-l)<=1);h++){const d=Math.floor((l+u)/2),m=Se.CRITICAL_PLANES[d],g=Se.setCoordinate(s,m,o,a),E=Se.hueOf(g);Se.areInCyclicOrder(i,n,E)?(o=g,u=d):(s=g,i=E,l=d)}}return Se.midpoint(s,o)}static inverseChromaticAdaptation(e){const n=Math.abs(e),r=Math.max(0,27.13*n/(400-n));return fn(e)*Math.pow(r,1/.42)}static findResultByJ(e,n,r){let s=Math.sqrt(r)*11;const i=yr.DEFAULT,o=1/Math.pow(1.64-Math.pow(.29,i.n),.73),a=.25*(Math.cos(e+2)+3.8)*(5e4/13)*i.nc*i.ncb,l=Math.sin(e),u=Math.cos(e);for(let h=0;h<5;h++){const d=s/100,m=n===0||s===0?0:n/Math.sqrt(d),g=Math.pow(m*o,1/.9),E=i.aw*Math.pow(d,1/i.c/i.z)/i.nbb,A=23*(E+.305)*g/(23*a+11*g*u+108*g*l),D=A*u,L=A*l,k=(460*E+451*D+288*L)/1403,I=(460*E-891*D-261*L)/1403,S=(460*E-220*D-6300*L)/1403,B=Se.inverseChromaticAdaptation(k),V=Se.inverseChromaticAdaptation(I),y=Se.inverseChromaticAdaptation(S),_=qu([B,V,y],Se.LINRGB_FROM_SCALED_DISCOUNT);if(_[0]<0||_[1]<0||_[2]<0)return 0;const v=Se.Y_FROM_LINRGB[0],N=Se.Y_FROM_LINRGB[1],x=Se.Y_FROM_LINRGB[2],M=v*_[0]+N*_[1]+x*_[2];if(M<=0)return 0;if(h===4||Math.abs(M-r)<.002)return _[0]>100.01||_[1]>100.01||_[2]>100.01?0:Lm(_);s=s-(M-r)*s/(2*M)}return 0}static solveToInt(e,n,r){if(n<1e-4||r<1e-4||r>99.9999)return jI(r);e=nd(e);const s=e/180*Math.PI,i=Jr(r),o=Se.findResultByJ(s,n,i);if(o!==0)return o;const a=Se.bisectToLimit(i,s);return Lm(a)}static solveToCam(e,n,r){return Nt.fromInt(Se.solveToInt(e,n,r))}};Xr.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]];Xr.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]];Xr.Y_FROM_LINRGB=[.2126,.7152,.0722];Xr.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class It{static from(e,n,r){return new It(Xr.solveToInt(e,n,r))}static fromInt(e){return new It(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(Xr.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(Xr.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(Xr.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const n=Nt.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=Ku(e),this.argb=e}setInternalState(e){const n=Nt.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=Ku(e),this.argb=e}inViewingConditions(e){const n=Nt.fromInt(this.toInt()).xyzInViewingConditions(e),r=Nt.fromXyzInViewingConditions(n[0],n[1],n[2],yr.make());return It.from(r.hue,r.chroma,Gu(n[1]))}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sd{static harmonize(e,n){const r=It.fromInt(e),s=It.fromInt(n),i=Y_(r.hue,s.hue),o=Math.min(i*.5,15),a=nd(r.hue+o*xI(r.hue,s.hue));return It.from(a,r.chroma,r.tone).toInt()}static hctHue(e,n,r){const s=sd.cam16Ucs(e,n,r),i=Nt.fromInt(s),o=Nt.fromInt(e);return It.from(i.hue,o.chroma,Ku(e)).toInt()}static cam16Ucs(e,n,r){const s=Nt.fromInt(e),i=Nt.fromInt(n),o=s.jstar,a=s.astar,l=s.bstar,u=i.jstar,h=i.astar,d=i.bstar,m=o+(u-o)*r,g=a+(h-a)*r,E=l+(d-l)*r;return Nt.fromUcs(m,g,E).toInt()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pt{static ratioOfTones(e,n){return e=Rl(0,100,e),n=Rl(0,100,n),Pt.ratioOfYs(Jr(e),Jr(n))}static ratioOfYs(e,n){const r=e>n?e:n,s=r===n?e:n;return(r+5)/(s+5)}static lighter(e,n){if(e<0||e>100)return-1;const r=Jr(e),s=n*(r+5)-5,i=Pt.ratioOfYs(s,r),o=Math.abs(i-n);if(i<n&&o>.04)return-1;const a=Gu(s)+.4;return a<0||a>100?-1:a}static darker(e,n){if(e<0||e>100)return-1;const r=Jr(e),s=(r+5)/n-5,i=Pt.ratioOfYs(r,s),o=Math.abs(i-n);if(i<n&&o>.04)return-1;const a=Gu(s)-.4;return a<0||a>100?-1:a}static lighterUnsafe(e,n){const r=Pt.lighter(e,n);return r<0?100:r}static darkerUnsafe(e,n){const r=Pt.darker(e,n);return r<0?0:r}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class id{static isDisliked(e){const n=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,s=Math.round(e.tone)<65;return n&&r&&s}static fixIfDisliked(e){return id.isDisliked(e)?It.from(e.hue,e.chroma,70):e}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ae{static fromPalette(e){return new ae(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,n,r,s,i,o,a,l){if(this.name=e,this.palette=n,this.tone=r,this.isBackground=s,this.background=i,this.secondBackground=o,this.contrastCurve=a,this.toneDeltaPair=l,this.hctCache=new Map,!i&&o)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&a)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!a)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const n=this.hctCache.get(e);if(n!=null)return n;const r=this.getTone(e),s=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,s),s}getTone(e){const n=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),s=r.roleA,i=r.roleB,o=r.delta,a=r.polarity,l=r.stayTogether,u=this.background(e).getTone(e),h=a==="nearer"||a==="lighter"&&!e.isDark||a==="darker"&&e.isDark,d=h?s:i,m=h?i:s,g=this.name===d.name,E=e.isDark?1:-1,A=d.contrastCurve.getContrast(e.contrastLevel),D=m.contrastCurve.getContrast(e.contrastLevel),L=d.tone(e);let k=Pt.ratioOfTones(u,L)>=A?L:ae.foregroundTone(u,A);const I=m.tone(e);let S=Pt.ratioOfTones(u,I)>=D?I:ae.foregroundTone(u,D);return n&&(k=ae.foregroundTone(u,A),S=ae.foregroundTone(u,D)),(S-k)*E>=o||(S=Rl(0,100,k+o*E),(S-k)*E>=o||(k=Rl(0,100,S-o*E))),50<=k&&k<60?E>0?(k=60,S=Math.max(S,k+o*E)):(k=49,S=Math.min(S,k+o*E)):50<=S&&S<60&&(l?E>0?(k=60,S=Math.max(S,k+o*E)):(k=49,S=Math.min(S,k+o*E)):E>0?S=60:S=49),g?k:S}else{let r=this.tone(e);if(this.background==null)return r;const s=this.background(e).getTone(e),i=this.contrastCurve.getContrast(e.contrastLevel);if(Pt.ratioOfTones(s,r)>=i||(r=ae.foregroundTone(s,i)),n&&(r=ae.foregroundTone(s,i)),this.isBackground&&50<=r&&r<60&&(Pt.ratioOfTones(49,s)>=i?r=49:r=60),this.secondBackground){const[o,a]=[this.background,this.secondBackground],[l,u]=[o(e).getTone(e),a(e).getTone(e)],[h,d]=[Math.max(l,u),Math.min(l,u)];if(Pt.ratioOfTones(h,r)>=i&&Pt.ratioOfTones(d,r)>=i)return r;const m=Pt.lighter(h,i),g=Pt.darker(d,i),E=[];return m!==-1&&E.push(m),g!==-1&&E.push(g),ae.tonePrefersLightForeground(l)||ae.tonePrefersLightForeground(u)?m<0?100:m:E.length===1?E[0]:g<0?0:g}return r}}static foregroundTone(e,n){const r=Pt.lighterUnsafe(e,n),s=Pt.darkerUnsafe(e,n),i=Pt.ratioOfTones(r,e),o=Pt.ratioOfTones(s,e);if(ae.tonePrefersLightForeground(e)){const a=Math.abs(i-o)<.1&&i<n&&o<n;return i>=n||i>=o||a?r:s}else return o>=n||o>=i?s:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return ae.tonePrefersLightForeground(e)&&!ae.toneAllowsLightForeground(e)?49:e}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Go;(function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"})(Go||(Go={}));/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ve{constructor(e,n,r,s){this.low=e,this.normal=n,this.medium=r,this.high=s}getContrast(e){return e<=-1?this.low:e<0?So(this.low,this.normal,(e- -1)/1):e<.5?So(this.normal,this.medium,(e-0)/.5):e<1?So(this.medium,this.high,(e-.5)/.5):this.high}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vn{constructor(e,n,r,s,i){this.roleA=e,this.roleB=n,this.delta=r,this.polarity=s,this.stayTogether=i}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wi(t){return t.variant===Go.FIDELITY||t.variant===Go.CONTENT}function pt(t){return t.variant===Go.MONOCHROME}function WI(t,e,n,r){let s=n,i=It.from(t,e,n);if(i.chroma<e){let o=i.chroma;for(;i.chroma<e;){s+=r?-1:1;const a=It.from(t,e,s);if(o>a.chroma||Math.abs(a.chroma-e)<.4)break;const l=Math.abs(a.chroma-e),u=Math.abs(i.chroma-e);l<u&&(i=a),o=Math.max(o,a.chroma)}}return s}function qI(t){return yr.make(void 0,void 0,t.isDark?30:80,void 0,void 0)}function od(t,e){const n=t.inViewingConditions(qI(e));return ae.tonePrefersLightForeground(t.tone)&&!ae.toneAllowsLightForeground(n.tone)?ae.enableLightForeground(t.tone):ae.enableLightForeground(n.tone)}class q{static highestSurface(e){return e.isDark?q.surfaceBright:q.surfaceDim}}q.contentAccentToneDelta=15;q.primaryPaletteKeyColor=ae.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone});q.secondaryPaletteKeyColor=ae.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone});q.tertiaryPaletteKeyColor=ae.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone});q.neutralPaletteKeyColor=ae.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone});q.neutralVariantPaletteKeyColor=ae.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone});q.background=ae.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});q.onBackground=ae.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>q.background,contrastCurve:new Ve(3,3,4.5,7)});q.surface=ae.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});q.surfaceDim=ae.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:87,isBackground:!0});q.surfaceBright=ae.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?24:98,isBackground:!0});q.surfaceContainerLowest=ae.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?4:100,isBackground:!0});q.surfaceContainerLow=ae.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?10:96,isBackground:!0});q.surfaceContainer=ae.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?12:94,isBackground:!0});q.surfaceContainerHigh=ae.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?17:92,isBackground:!0});q.surfaceContainerHighest=ae.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?22:90,isBackground:!0});q.onSurface=ae.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>q.highestSurface(t),contrastCurve:new Ve(4.5,7,11,21)});q.surfaceVariant=ae.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0});q.onSurfaceVariant=ae.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>q.highestSurface(t),contrastCurve:new Ve(3,4.5,7,11)});q.inverseSurface=ae.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20});q.inverseOnSurface=ae.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>q.inverseSurface,contrastCurve:new Ve(4.5,7,11,21)});q.outline=ae.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>q.highestSurface(t),contrastCurve:new Ve(1.5,3,4.5,7)});q.outlineVariant=ae.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7)});q.shadow=ae.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0});q.scrim=ae.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0});q.surfaceTint=ae.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0});q.primary=ae.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>pt(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(3,4.5,7,11),toneDeltaPair:t=>new vn(q.primaryContainer,q.primary,15,"nearer",!1)});q.onPrimary=ae.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>pt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>q.primary,contrastCurve:new Ve(4.5,7,11,21)});q.primaryContainer=ae.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>Wi(t)?od(t.sourceColorHct,t):pt(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.primaryContainer,q.primary,15,"nearer",!1)});q.onPrimaryContainer=ae.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>Wi(t)?ae.foregroundTone(q.primaryContainer.tone(t),4.5):pt(t)?t.isDark?0:100:t.isDark?90:10,background:t=>q.primaryContainer,contrastCurve:new Ve(4.5,7,11,21)});q.inversePrimary=ae.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>q.inverseSurface,contrastCurve:new Ve(3,4.5,7,11)});q.secondary=ae.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(3,4.5,7,11),toneDeltaPair:t=>new vn(q.secondaryContainer,q.secondary,15,"nearer",!1)});q.onSecondary=ae.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>pt(t)?t.isDark?10:100:t.isDark?20:100,background:t=>q.secondary,contrastCurve:new Ve(4.5,7,11,21)});q.secondaryContainer=ae.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;if(pt(t))return t.isDark?30:85;if(!Wi(t))return e;let n=WI(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark);return n=od(t.secondaryPalette.getHct(n),t),n},isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.secondaryContainer,q.secondary,15,"nearer",!1)});q.onSecondaryContainer=ae.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>Wi(t)?ae.foregroundTone(q.secondaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>q.secondaryContainer,contrastCurve:new Ve(4.5,7,11,21)});q.tertiary=ae.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(3,4.5,7,11),toneDeltaPair:t=>new vn(q.tertiaryContainer,q.tertiary,15,"nearer",!1)});q.onTertiary=ae.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>q.tertiary,contrastCurve:new Ve(4.5,7,11,21)});q.tertiaryContainer=ae.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if(pt(t))return t.isDark?60:49;if(!Wi(t))return t.isDark?30:90;const e=od(t.tertiaryPalette.getHct(t.sourceColorHct.tone),t),n=t.tertiaryPalette.getHct(e);return id.fixIfDisliked(n).tone},isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.tertiaryContainer,q.tertiary,15,"nearer",!1)});q.onTertiaryContainer=ae.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?0:100:Wi(t)?ae.foregroundTone(q.tertiaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>q.tertiaryContainer,contrastCurve:new Ve(4.5,7,11,21)});q.error=ae.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(3,4.5,7,11),toneDeltaPair:t=>new vn(q.errorContainer,q.error,15,"nearer",!1)});q.onError=ae.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>q.error,contrastCurve:new Ve(4.5,7,11,21)});q.errorContainer=ae.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.errorContainer,q.error,15,"nearer",!1)});q.onErrorContainer=ae.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?90:10,background:t=>q.errorContainer,contrastCurve:new Ve(4.5,7,11,21)});q.primaryFixed=ae.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>pt(t)?40:90,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.primaryFixed,q.primaryFixedDim,10,"lighter",!0)});q.primaryFixedDim=ae.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>pt(t)?30:80,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.primaryFixed,q.primaryFixedDim,10,"lighter",!0)});q.onPrimaryFixed=ae.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>pt(t)?100:10,background:t=>q.primaryFixedDim,secondBackground:t=>q.primaryFixed,contrastCurve:new Ve(4.5,7,11,21)});q.onPrimaryFixedVariant=ae.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>pt(t)?90:30,background:t=>q.primaryFixedDim,secondBackground:t=>q.primaryFixed,contrastCurve:new Ve(3,4.5,7,11)});q.secondaryFixed=ae.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>pt(t)?80:90,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.secondaryFixed,q.secondaryFixedDim,10,"lighter",!0)});q.secondaryFixedDim=ae.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>pt(t)?70:80,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.secondaryFixed,q.secondaryFixedDim,10,"lighter",!0)});q.onSecondaryFixed=ae.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>q.secondaryFixedDim,secondBackground:t=>q.secondaryFixed,contrastCurve:new Ve(4.5,7,11,21)});q.onSecondaryFixedVariant=ae.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>pt(t)?25:30,background:t=>q.secondaryFixedDim,secondBackground:t=>q.secondaryFixed,contrastCurve:new Ve(3,4.5,7,11)});q.tertiaryFixed=ae.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?40:90,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.tertiaryFixed,q.tertiaryFixedDim,10,"lighter",!0)});q.tertiaryFixedDim=ae.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?30:80,isBackground:!0,background:t=>q.highestSurface(t),contrastCurve:new Ve(1,1,3,7),toneDeltaPair:t=>new vn(q.tertiaryFixed,q.tertiaryFixedDim,10,"lighter",!0)});q.onTertiaryFixed=ae.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?100:10,background:t=>q.tertiaryFixedDim,secondBackground:t=>q.tertiaryFixed,contrastCurve:new Ve(4.5,7,11,21)});q.onTertiaryFixedVariant=ae.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?90:30,background:t=>q.tertiaryFixedDim,secondBackground:t=>q.tertiaryFixed,contrastCurve:new Ve(3,4.5,7,11)});/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zt{static fromInt(e){const n=It.fromInt(e);return zt.fromHct(n)}static fromHct(e){return new zt(e.hue,e.chroma,e)}static fromHueAndChroma(e,n){return new zt(e,n,zt.createKeyColor(e,n))}constructor(e,n,r){this.hue=e,this.chroma=n,this.keyColor=r,this.cache=new Map}static createKeyColor(e,n){let r=It.from(e,n,50),s=Math.abs(r.chroma-n);for(let i=1;i<50;i+=1){if(Math.round(n)===Math.round(r.chroma))return r;const o=It.from(e,n,50+i),a=Math.abs(o.chroma-n);a<s&&(s=a,r=o);const l=It.from(e,n,50-i),u=Math.abs(l.chroma-n);u<s&&(s=u,r=l)}return r}tone(e){let n=this.cache.get(e);return n===void 0&&(n=It.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,n)),n}getHct(e){return It.fromInt(this.tone(e))}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let fi=class xn{static of(e){return new xn(e,!1)}static contentOf(e){return new xn(e,!0)}static fromColors(e){return xn.createPaletteFromColors(!1,e)}static contentFromColors(e){return xn.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,n){const r=new xn(n.primary,e);if(n.secondary){const s=new xn(n.secondary,e);r.a2=s.a1}if(n.tertiary){const s=new xn(n.tertiary,e);r.a3=s.a1}if(n.error){const s=new xn(n.error,e);r.error=s.a1}if(n.neutral){const s=new xn(n.neutral,e);r.n1=s.n1}if(n.neutralVariant){const s=new xn(n.neutralVariant,e);r.n2=s.n2}return r}constructor(e,n){const r=It.fromInt(e),s=r.hue,i=r.chroma;n?(this.a1=zt.fromHueAndChroma(s,i),this.a2=zt.fromHueAndChroma(s,i/3),this.a3=zt.fromHueAndChroma(s+60,i/2),this.n1=zt.fromHueAndChroma(s,Math.min(i/12,4)),this.n2=zt.fromHueAndChroma(s,Math.min(i/6,8))):(this.a1=zt.fromHueAndChroma(s,Math.max(48,i)),this.a2=zt.fromHueAndChroma(s,16),this.a3=zt.fromHueAndChroma(s+60,24),this.n1=zt.fromHueAndChroma(s,4),this.n2=zt.fromHueAndChroma(s,8)),this.error=zt.fromHueAndChroma(25,84)}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KI{fromInt(e){return BI(e)}toInt(e){return $I(e[0],e[1],e[2])}distance(e,n){const r=e[0]-n[0],s=e[1]-n[1],i=e[2]-n[2];return r*r+s*s+i*i}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GI=10,zI=3;let YI=class{static quantize(e,n,r){const s=new Map,i=new Array,o=new Array,a=new KI;let l=0;for(let k=0;k<e.length;k++){const I=e[k],S=s.get(I);S===void 0?(l++,i.push(a.fromInt(I)),o.push(I),s.set(I,1)):s.set(I,S+1)}const u=new Array;for(let k=0;k<l;k++){const I=o[k],S=s.get(I);S!==void 0&&(u[k]=S)}let h=Math.min(r,l);n.length>0&&(h=Math.min(h,n.length));const d=new Array;for(let k=0;k<n.length;k++)d.push(a.fromInt(n[k]));const m=h-d.length;if(n.length===0&&m>0)for(let k=0;k<m;k++){const I=Math.random()*100,S=Math.random()*201+-100,B=Math.random()*201+-100;d.push(new Array(I,S,B))}const g=new Array;for(let k=0;k<l;k++)g.push(Math.floor(Math.random()*h));const E=new Array;for(let k=0;k<h;k++){E.push(new Array);for(let I=0;I<h;I++)E[k].push(0)}const A=new Array;for(let k=0;k<h;k++){A.push(new Array);for(let I=0;I<h;I++)A[k].push(new QI)}const D=new Array;for(let k=0;k<h;k++)D.push(0);for(let k=0;k<GI;k++){for(let y=0;y<h;y++){for(let _=y+1;_<h;_++){const v=a.distance(d[y],d[_]);A[_][y].distance=v,A[_][y].index=y,A[y][_].distance=v,A[y][_].index=_}A[y].sort();for(let _=0;_<h;_++)E[y][_]=A[y][_].index}let I=0;for(let y=0;y<l;y++){const _=i[y],v=g[y],N=d[v],x=a.distance(_,N);let M=x,R=-1;for(let Te=0;Te<h;Te++){if(A[v][Te].distance>=4*x)continue;const Ke=a.distance(_,d[Te]);Ke<M&&(M=Ke,R=Te)}R!==-1&&Math.abs(Math.sqrt(M)-Math.sqrt(x))>zI&&(I++,g[y]=R)}if(I===0&&k!==0)break;const S=new Array(h).fill(0),B=new Array(h).fill(0),V=new Array(h).fill(0);for(let y=0;y<h;y++)D[y]=0;for(let y=0;y<l;y++){const _=g[y],v=i[y],N=u[y];D[_]+=N,S[_]+=v[0]*N,B[_]+=v[1]*N,V[_]+=v[2]*N}for(let y=0;y<h;y++){const _=D[y];if(_===0){d[y]=[0,0,0];continue}const v=S[y]/_,N=B[y]/_,x=V[y]/_;d[y]=[v,N,x]}}const L=new Map;for(let k=0;k<h;k++){const I=D[k];if(I===0)continue;const S=a.toInt(d[k]);L.has(S)||L.set(S,I)}return L}},QI=class{constructor(){this.distance=-1,this.index=-1}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let JI=class{static quantize(e){const n=new Map;for(let r=0;r<e.length;r++){const s=e[r];FI(s)<255||n.set(s,(n.get(s)??0)+1)}return n}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ya=5,Ln=33,mo=35937,rn={RED:"red",GREEN:"green",BLUE:"blue"};let XI=class{constructor(e=[],n=[],r=[],s=[],i=[],o=[]){this.weights=e,this.momentsR=n,this.momentsG=r,this.momentsB=s,this.moments=i,this.cubes=o}quantize(e,n){this.constructHistogram(e),this.computeMoments();const r=this.createBoxes(n);return this.createResult(r.resultCount)}constructHistogram(e){this.weights=Array.from({length:mo}).fill(0),this.momentsR=Array.from({length:mo}).fill(0),this.momentsG=Array.from({length:mo}).fill(0),this.momentsB=Array.from({length:mo}).fill(0),this.moments=Array.from({length:mo}).fill(0);const n=JI.quantize(e);for(const[r,s]of n.entries()){const i=ac(r),o=lc(r),a=cc(r),l=8-Ya,u=(i>>l)+1,h=(o>>l)+1,d=(a>>l)+1,m=this.getIndex(u,h,d);this.weights[m]=(this.weights[m]??0)+s,this.momentsR[m]+=s*i,this.momentsG[m]+=s*o,this.momentsB[m]+=s*a,this.moments[m]+=s*(i*i+o*o+a*a)}}computeMoments(){for(let e=1;e<Ln;e++){const n=Array.from({length:Ln}).fill(0),r=Array.from({length:Ln}).fill(0),s=Array.from({length:Ln}).fill(0),i=Array.from({length:Ln}).fill(0),o=Array.from({length:Ln}).fill(0);for(let a=1;a<Ln;a++){let l=0,u=0,h=0,d=0,m=0;for(let g=1;g<Ln;g++){const E=this.getIndex(e,a,g);l+=this.weights[E],u+=this.momentsR[E],h+=this.momentsG[E],d+=this.momentsB[E],m+=this.moments[E],n[g]+=l,r[g]+=u,s[g]+=h,i[g]+=d,o[g]+=m;const A=this.getIndex(e-1,a,g);this.weights[E]=this.weights[A]+n[g],this.momentsR[E]=this.momentsR[A]+r[g],this.momentsG[E]=this.momentsG[A]+s[g],this.momentsB[E]=this.momentsB[A]+i[g],this.moments[E]=this.moments[A]+o[g]}}}}createBoxes(e){this.cubes=Array.from({length:e}).fill(0).map(()=>new ZI);const n=Array.from({length:e}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=Ln-1,this.cubes[0].g1=Ln-1,this.cubes[0].b1=Ln-1;let r=e,s=0;for(let i=1;i<e;i++){this.cut(this.cubes[s],this.cubes[i])?(n[s]=this.cubes[s].vol>1?this.variance(this.cubes[s]):0,n[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0):(n[s]=0,i--),s=0;let o=n[0];for(let a=1;a<=i;a++)n[a]>o&&(o=n[a],s=a);if(o<=0){r=i+1;break}}return new ew(e,r)}createResult(e){const n=[];for(let r=0;r<e;++r){const s=this.cubes[r],i=this.volume(s,this.weights);if(i>0){const o=Math.round(this.volume(s,this.momentsR)/i),a=Math.round(this.volume(s,this.momentsG)/i),l=Math.round(this.volume(s,this.momentsB)/i),u=255<<24|(o&255)<<16|(a&255)<<8|l&255;n.push(u)}}return n}variance(e){const n=this.volume(e,this.momentsR),r=this.volume(e,this.momentsG),s=this.volume(e,this.momentsB),i=this.moments[this.getIndex(e.r1,e.g1,e.b1)]-this.moments[this.getIndex(e.r1,e.g1,e.b0)]-this.moments[this.getIndex(e.r1,e.g0,e.b1)]+this.moments[this.getIndex(e.r1,e.g0,e.b0)]-this.moments[this.getIndex(e.r0,e.g1,e.b1)]+this.moments[this.getIndex(e.r0,e.g1,e.b0)]+this.moments[this.getIndex(e.r0,e.g0,e.b1)]-this.moments[this.getIndex(e.r0,e.g0,e.b0)],o=n*n+r*r+s*s,a=this.volume(e,this.weights);return i-o/a}cut(e,n){const r=this.volume(e,this.momentsR),s=this.volume(e,this.momentsG),i=this.volume(e,this.momentsB),o=this.volume(e,this.weights),a=this.maximize(e,rn.RED,e.r0+1,e.r1,r,s,i,o),l=this.maximize(e,rn.GREEN,e.g0+1,e.g1,r,s,i,o),u=this.maximize(e,rn.BLUE,e.b0+1,e.b1,r,s,i,o);let h;const d=a.maximum,m=l.maximum,g=u.maximum;if(d>=m&&d>=g){if(a.cutLocation<0)return!1;h=rn.RED}else m>=d&&m>=g?h=rn.GREEN:h=rn.BLUE;switch(n.r1=e.r1,n.g1=e.g1,n.b1=e.b1,h){case rn.RED:e.r1=a.cutLocation,n.r0=e.r1,n.g0=e.g0,n.b0=e.b0;break;case rn.GREEN:e.g1=l.cutLocation,n.r0=e.r0,n.g0=e.g1,n.b0=e.b0;break;case rn.BLUE:e.b1=u.cutLocation,n.r0=e.r0,n.g0=e.g0,n.b0=e.b1;break;default:throw new Error("unexpected direction "+h)}return e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),n.vol=(n.r1-n.r0)*(n.g1-n.g0)*(n.b1-n.b0),!0}maximize(e,n,r,s,i,o,a,l){const u=this.bottom(e,n,this.momentsR),h=this.bottom(e,n,this.momentsG),d=this.bottom(e,n,this.momentsB),m=this.bottom(e,n,this.weights);let g=0,E=-1,A=0,D=0,L=0,k=0;for(let I=r;I<s;I++){if(A=u+this.top(e,n,I,this.momentsR),D=h+this.top(e,n,I,this.momentsG),L=d+this.top(e,n,I,this.momentsB),k=m+this.top(e,n,I,this.weights),k===0)continue;let S=(A*A+D*D+L*L)*1,B=k*1,V=S/B;A=i-A,D=o-D,L=a-L,k=l-k,k!==0&&(S=(A*A+D*D+L*L)*1,B=k*1,V+=S/B,V>g&&(g=V,E=I))}return new tw(E,g)}volume(e,n){return n[this.getIndex(e.r1,e.g1,e.b1)]-n[this.getIndex(e.r1,e.g1,e.b0)]-n[this.getIndex(e.r1,e.g0,e.b1)]+n[this.getIndex(e.r1,e.g0,e.b0)]-n[this.getIndex(e.r0,e.g1,e.b1)]+n[this.getIndex(e.r0,e.g1,e.b0)]+n[this.getIndex(e.r0,e.g0,e.b1)]-n[this.getIndex(e.r0,e.g0,e.b0)]}bottom(e,n,r){switch(n){case rn.RED:return-r[this.getIndex(e.r0,e.g1,e.b1)]+r[this.getIndex(e.r0,e.g1,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case rn.GREEN:return-r[this.getIndex(e.r1,e.g0,e.b1)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case rn.BLUE:return-r[this.getIndex(e.r1,e.g1,e.b0)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g1,e.b0)]-r[this.getIndex(e.r0,e.g0,e.b0)];default:throw new Error("unexpected direction $direction")}}top(e,n,r,s){switch(n){case rn.RED:return s[this.getIndex(r,e.g1,e.b1)]-s[this.getIndex(r,e.g1,e.b0)]-s[this.getIndex(r,e.g0,e.b1)]+s[this.getIndex(r,e.g0,e.b0)];case rn.GREEN:return s[this.getIndex(e.r1,r,e.b1)]-s[this.getIndex(e.r1,r,e.b0)]-s[this.getIndex(e.r0,r,e.b1)]+s[this.getIndex(e.r0,r,e.b0)];case rn.BLUE:return s[this.getIndex(e.r1,e.g1,r)]-s[this.getIndex(e.r1,e.g0,r)]-s[this.getIndex(e.r0,e.g1,r)]+s[this.getIndex(e.r0,e.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(e,n,r){return(e<<Ya*2)+(e<<Ya+1)+e+(n<<Ya)+n+r}};class ZI{constructor(e=0,n=0,r=0,s=0,i=0,o=0,a=0){this.r0=e,this.r1=n,this.g0=r,this.g1=s,this.b0=i,this.b1=o,this.vol=a}}let ew=class{constructor(e,n){this.requestedCount=e,this.resultCount=n}},tw=class{constructor(e,n){this.cutLocation=e,this.maximum=n}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let nw=class{static quantize(e,n){const r=new XI().quantize(e,n);return YI.quantize(e,r,n)}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mr{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return mr.lightFromCorePalette(fi.of(e))}static dark(e){return mr.darkFromCorePalette(fi.of(e))}static lightContent(e){return mr.lightFromCorePalette(fi.contentOf(e))}static darkContent(e){return mr.darkFromCorePalette(fi.contentOf(e))}static lightFromCorePalette(e){return new mr({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new mr({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rw={desired:4,fallbackColorARGB:4282549748,filter:!0};function sw(t,e){return t.score>e.score?-1:t.score<e.score?1:0}class ln{constructor(){}static score(e,n){const{desired:r,fallbackColorARGB:s,filter:i}={...rw,...n},o=[],a=new Array(360).fill(0);let l=0;for(const[g,E]of e.entries()){const A=It.fromInt(g);o.push(A);const D=Math.floor(A.hue);a[D]+=E,l+=E}const u=new Array(360).fill(0);for(let g=0;g<360;g++){const E=a[g]/l;for(let A=g-14;A<g+16;A++){const D=Om(A);u[D]+=E}}const h=new Array;for(const g of o){const E=Om(Math.round(g.hue)),A=u[E];if(i&&(g.chroma<ln.CUTOFF_CHROMA||A<=ln.CUTOFF_EXCITED_PROPORTION))continue;const D=A*100*ln.WEIGHT_PROPORTION,L=g.chroma<ln.TARGET_CHROMA?ln.WEIGHT_CHROMA_BELOW:ln.WEIGHT_CHROMA_ABOVE,k=(g.chroma-ln.TARGET_CHROMA)*L,I=D+k;h.push({hct:g,score:I})}h.sort(sw);const d=[];for(let g=90;g>=15;g--){d.length=0;for(const{hct:E}of h)if(d.find(A=>Y_(E.hue,A.hue)<g)||d.push(E),d.length>=r)break;if(d.length>=r)break}const m=[];d.length===0&&m.push(s);for(const g of d)m.push(g.toInt());return m}}ln.TARGET_CHROMA=48;ln.WEIGHT_PROPORTION=.7;ln.WEIGHT_CHROMA_ABOVE=.3;ln.WEIGHT_CHROMA_BELOW=.1;ln.CUTOFF_CHROMA=5;ln.CUTOFF_EXCITED_PROPORTION=.01;/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function it(t){const e=ac(t),n=lc(t),r=cc(t),s=[e.toString(16),n.toString(16),r.toString(16)];for(const[i,o]of s.entries())o.length===1&&(s[i]="0"+o);return"#"+s.join("")}function iw(t){t=t.replace("#","");const e=t.length===3,n=t.length===6,r=t.length===8;if(!e&&!n&&!r)throw new Error("unexpected hex "+t);let s=0,i=0,o=0;return e?(s=cr(t.slice(0,1).repeat(2)),i=cr(t.slice(1,2).repeat(2)),o=cr(t.slice(2,3).repeat(2))):n?(s=cr(t.slice(0,2)),i=cr(t.slice(2,4)),o=cr(t.slice(4,6))):r&&(s=cr(t.slice(2,4)),i=cr(t.slice(4,6)),o=cr(t.slice(6,8))),(255<<24|(s&255)<<16|(i&255)<<8|o&255)>>>0}function cr(t){return parseInt(t,16)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ow(t){const e=await new Promise((s,i)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!a){i(new Error("Could not get canvas context"));return}const l=()=>{o.width=t.width,o.height=t.height,a.drawImage(t,0,0);let u=[0,0,t.width,t.height];const h=t.dataset.area;h&&/^\d+(\s*,\s*\d+){3}$/.test(h)&&(u=h.split(/\s*,\s*/).map(A=>parseInt(A,10)));const[d,m,g,E]=u;s(a.getImageData(d,m,g,E).data)};t.complete?l():t.onload=l}),n=[];for(let s=0;s<e.length;s+=4){const i=e[s],o=e[s+1],a=e[s+2];if(e[s+3]<255)continue;const l=oc(i,o,a);n.push(l)}const r=nw.quantize(n,128);return ln.score(r)[0]}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Z_(t,e=[]){const n=fi.of(t);return{source:t,schemes:{light:mr.light(t),dark:mr.dark(t)},palettes:{primary:n.a1,secondary:n.a2,tertiary:n.a3,neutral:n.n1,neutralVariant:n.n2,error:n.error},customColors:e.map(r=>aw(t,r))}}async function Mm(t,e=[]){const n=await ow(t);return Z_(n,e)}function aw(t,e){let n=e.value;const r=n,s=t;e.blend&&(n=sd.harmonize(r,s));const i=fi.of(n).a1;return{color:e,value:n,light:{color:i.tone(40),onColor:i.tone(100),colorContainer:i.tone(90),onColorContainer:i.tone(10)},dark:{color:i.tone(80),onColor:i.tone(20),colorContainer:i.tone(30),onColorContainer:i.tone(90)}}}function fu(t){let e=JSON.parse(JSON.stringify(t.schemes));for(let n in e)for(let r in e[n])e[n][r]=it(e[n][r]);return e.dark.surfaceDim=it(t.palettes.neutral.tone(6)),e.dark.surface=it(t.palettes.neutral.tone(6)),e.dark.surfaceBright=it(t.palettes.neutral.tone(24)),e.dark.surfaceContainerLowest=it(t.palettes.neutral.tone(4)),e.dark.surfaceContainerLow=it(t.palettes.neutral.tone(10)),e.dark.surfaceContainer=it(t.palettes.neutral.tone(12)),e.dark.surfaceContainerHigh=it(t.palettes.neutral.tone(17)),e.dark.surfaceContainerHighest=it(t.palettes.neutral.tone(22)),e.dark.onSurface=it(t.palettes.neutral.tone(90)),e.dark.onSurfaceVariant=it(t.palettes.neutralVariant.tone(80)),e.dark.outline=it(t.palettes.neutralVariant.tone(60)),e.dark.outlineVariant=it(t.palettes.neutralVariant.tone(30)),e.light.surfaceDim=it(t.palettes.neutral.tone(87)),e.light.surface=it(t.palettes.neutral.tone(98)),e.light.surfaceBright=it(t.palettes.neutral.tone(98)),e.light.surfaceContainerLowest=it(t.palettes.neutral.tone(100)),e.light.surfaceContainerLow=it(t.palettes.neutral.tone(96)),e.light.surfaceContainer=it(t.palettes.neutral.tone(94)),e.light.surfaceContainerHigh=it(t.palettes.neutral.tone(92)),e.light.surfaceContainerHighest=it(t.palettes.neutral.tone(90)),e.light.onSurface=it(t.palettes.neutral.tone(10)),e.light.onSurfaceVariant=it(t.palettes.neutralVariant.tone(30)),e.light.outline=it(t.palettes.neutralVariant.tone(50)),e.light.outlineVariant=it(t.palettes.neutralVariant.tone(80)),e}async function lw(t){const e=t,n={light:{},dark:{}};try{if(typeof e=="string"&&/^\#[0-9a-f]+$/i.test(e)){let o=Z_(iw(e));return fu(o)}if(e.src){let o=await Mm(e);return fu(o)}let r=new Blob;if(typeof e=="string"&&(r=await fetch(e).then(o=>o.blob())),e.size&&(r=e),e.files&&e.files[0]&&(r=e.files[0]),e.target&&e.target.files&&e.target.files[0]&&(r=e.target.files[0]),!r.size)return n;let s=new Image(64);s.src=URL.createObjectURL(r);let i=await Mm(s);return fu(i)}catch{return n}}globalThis.materialDynamicColors=lw;/**
* @vue/shared v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ad(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const lt={},gi=[],kn=()=>{},cw=()=>!1,uc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ld=t=>t.startsWith("onUpdate:"),Zt=Object.assign,cd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uw=Object.prototype.hasOwnProperty,je=(t,e)=>uw.call(t,e),pe=Array.isArray,pi=t=>pa(t)==="[object Map]",qi=t=>pa(t)==="[object Set]",xm=t=>pa(t)==="[object Date]",De=t=>typeof t=="function",Ct=t=>typeof t=="string",tr=t=>typeof t=="symbol",rt=t=>t!==null&&typeof t=="object",ey=t=>(rt(t)||De(t))&&De(t.then)&&De(t.catch),ty=Object.prototype.toString,pa=t=>ty.call(t),hw=t=>pa(t).slice(8,-1),ny=t=>pa(t)==="[object Object]",ud=t=>Ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Po=ad(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},dw=/-(\w)/g,jn=hc(t=>t.replace(dw,(e,n)=>n?n.toUpperCase():"")),fw=/\B([A-Z])/g,Js=hc(t=>t.replace(fw,"-$1").toLowerCase()),dc=hc(t=>t.charAt(0).toUpperCase()+t.slice(1)),mu=hc(t=>t?`on${dc(t)}`:""),ls=(t,e)=>!Object.is(t,e),dl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ry=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Pl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vm;const sy=()=>Vm||(Vm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hd(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ct(r)?_w(r):hd(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ct(t)||rt(t))return t}const mw=/;(?![^(]*\))/g,gw=/:([^]+)/,pw=/\/\*[^]*?\*\//g;function _w(t){const e={};return t.replace(pw,"").split(mw).forEach(n=>{if(n){const r=n.split(gw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function $e(t){let e="";if(Ct(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const r=$e(t[n]);r&&(e+=r+" ")}else if(rt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const yw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vw=ad(yw);function iy(t){return!!t||t===""}function Ew(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=_a(t[r],e[r]);return n}function _a(t,e){if(t===e)return!0;let n=xm(t),r=xm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=tr(t),r=tr(e),n||r)return t===e;if(n=pe(t),r=pe(e),n||r)return n&&r?Ew(t,e):!1;if(n=rt(t),r=rt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!_a(t[o],e[o]))return!1}}return String(t)===String(e)}function dd(t,e){return t.findIndex(n=>_a(n,e))}const oy=t=>!!(t&&t.__v_isRef===!0),ue=t=>Ct(t)?t:t==null?"":pe(t)||rt(t)&&(t.toString===ty||!De(t.toString))?oy(t)?ue(t.value):JSON.stringify(t,ay,2):String(t),ay=(t,e)=>oy(e)?ay(t,e.value):pi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[gu(r,i)+" =>"]=s,n),{})}:qi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>gu(n))}:tr(e)?gu(e):rt(e)&&!pe(e)&&!ny(e)?String(e):e,gu=(t,e="")=>{var n;return tr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;class ly{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vn,!e&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Vn;try{return Vn=this,e()}finally{Vn=n}}}on(){Vn=this}off(){Vn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Iw(t){return new ly(t)}function ww(t,e=Vn){e&&e.active&&e.effects.push(t)}function Tw(){return Vn}let Fs;class fd{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ww(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,gs();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(bw(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ps()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ns,n=Fs;try{return ns=!0,Fs=this,this._runnings++,Fm(this),this.fn()}finally{Um(this),this._runnings--,Fs=n,ns=e}}stop(){this.active&&(Fm(this),Um(this),this.onStop&&this.onStop(),this.active=!1)}}function bw(t){return t.value}function Fm(t){t._trackId++,t._depsLength=0}function Um(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)cy(t.deps[e],t);t.deps.length=t._depsLength}}function cy(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ns=!0,zu=0;const uy=[];function gs(){uy.push(ns),ns=!1}function ps(){const t=uy.pop();ns=t===void 0?!0:t}function md(){zu++}function gd(){for(zu--;!zu&&Yu.length;)Yu.shift()()}function hy(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&cy(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Yu=[];function dy(t,e,n){md();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Yu.push(r.scheduler)))}gd()}const fy=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Qu=new WeakMap,Us=Symbol(""),Ju=Symbol("");function yn(t,e,n){if(ns&&Fs){let r=Qu.get(t);r||Qu.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=fy(()=>r.delete(n))),hy(Fs,s)}}function Tr(t,e,n,r,s,i){const o=Qu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&pe(t)){const l=Number(r);o.forEach((u,h)=>{(h==="length"||!tr(h)&&h>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":pe(t)?ud(n)&&a.push(o.get("length")):(a.push(o.get(Us)),pi(t)&&a.push(o.get(Ju)));break;case"delete":pe(t)||(a.push(o.get(Us)),pi(t)&&a.push(o.get(Ju)));break;case"set":pi(t)&&a.push(o.get(Us));break}md();for(const l of a)l&&dy(l,4);gd()}const Aw=ad("__proto__,__v_isRef,__isVue"),my=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(tr)),$m=Cw();function Cw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Qe(this);for(let i=0,o=this.length;i<o;i++)yn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Qe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){gs(),md();const r=Qe(this)[e].apply(this,n);return gd(),ps(),r}}),t}function Sw(t){tr(t)||(t=String(t));const e=Qe(this);return yn(e,"has",t),e.hasOwnProperty(t)}class gy{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?$w:vy:i?yy:_y).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=pe(e);if(!s){if(o&&je($m,n))return Reflect.get($m,n,r);if(n==="hasOwnProperty")return Sw}const a=Reflect.get(e,n,r);return(tr(n)?my.has(n):Aw(n))||(s||yn(e,"get",n),i)?a:hn(a)?o&&ud(n)?a:a.value:rt(a)?s?Iy(a):Ot(a):a}}class py extends gy{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Ws(i);if(!Ti(r)&&!Ws(r)&&(i=Qe(i),r=Qe(r)),!pe(e)&&hn(i)&&!hn(r))return l?!1:(i.value=r,!0)}const o=pe(e)&&ud(n)?Number(n)<e.length:je(e,n),a=Reflect.set(e,n,r,s);return e===Qe(s)&&(o?ls(r,i)&&Tr(e,"set",n,r):Tr(e,"add",n,r)),a}deleteProperty(e,n){const r=je(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Tr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!tr(n)||!my.has(n))&&yn(e,"has",n),r}ownKeys(e){return yn(e,"iterate",pe(e)?"length":Us),Reflect.ownKeys(e)}}class Rw extends gy{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Pw=new py,kw=new Rw,Dw=new py(!0);const pd=t=>t,fc=t=>Reflect.getPrototypeOf(t);function Qa(t,e,n=!1,r=!1){t=t.__v_raw;const s=Qe(t),i=Qe(e);n||(ls(e,i)&&yn(s,"get",e),yn(s,"get",i));const{has:o}=fc(s),a=r?pd:n?vd:zo;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Ja(t,e=!1){const n=this.__v_raw,r=Qe(n),s=Qe(t);return e||(ls(t,s)&&yn(r,"has",t),yn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Xa(t,e=!1){return t=t.__v_raw,!e&&yn(Qe(t),"iterate",Us),Reflect.get(t,"size",t)}function Bm(t,e=!1){!e&&!Ti(t)&&!Ws(t)&&(t=Qe(t));const n=Qe(this);return fc(n).has.call(n,t)||(n.add(t),Tr(n,"add",t,t)),this}function jm(t,e,n=!1){!n&&!Ti(e)&&!Ws(e)&&(e=Qe(e));const r=Qe(this),{has:s,get:i}=fc(r);let o=s.call(r,t);o||(t=Qe(t),o=s.call(r,t));const a=i.call(r,t);return r.set(t,e),o?ls(e,a)&&Tr(r,"set",t,e):Tr(r,"add",t,e),this}function Hm(t){const e=Qe(this),{has:n,get:r}=fc(e);let s=n.call(e,t);s||(t=Qe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Tr(e,"delete",t,void 0),i}function Wm(){const t=Qe(this),e=t.size!==0,n=t.clear();return e&&Tr(t,"clear",void 0,void 0),n}function Za(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Qe(o),l=e?pd:t?vd:zo;return!t&&yn(a,"iterate",Us),o.forEach((u,h)=>r.call(s,l(u),l(h),i))}}function el(t,e,n){return function(...r){const s=this.__v_raw,i=Qe(s),o=pi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?pd:e?vd:zo;return!e&&yn(i,"iterate",l?Ju:Us),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:a?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Fr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Nw(){const t={get(i){return Qa(this,i)},get size(){return Xa(this)},has:Ja,add:Bm,set:jm,delete:Hm,clear:Wm,forEach:Za(!1,!1)},e={get(i){return Qa(this,i,!1,!0)},get size(){return Xa(this)},has:Ja,add(i){return Bm.call(this,i,!0)},set(i,o){return jm.call(this,i,o,!0)},delete:Hm,clear:Wm,forEach:Za(!1,!0)},n={get(i){return Qa(this,i,!0)},get size(){return Xa(this,!0)},has(i){return Ja.call(this,i,!0)},add:Fr("add"),set:Fr("set"),delete:Fr("delete"),clear:Fr("clear"),forEach:Za(!0,!1)},r={get(i){return Qa(this,i,!0,!0)},get size(){return Xa(this,!0)},has(i){return Ja.call(this,i,!0)},add:Fr("add"),set:Fr("set"),delete:Fr("delete"),clear:Fr("clear"),forEach:Za(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=el(i,!1,!1),n[i]=el(i,!0,!1),e[i]=el(i,!1,!0),r[i]=el(i,!0,!0)}),[t,n,e,r]}const[Ow,Lw,Mw,xw]=Nw();function _d(t,e){const n=e?t?xw:Mw:t?Lw:Ow;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(je(n,s)&&s in r?n:r,s,i)}const Vw={get:_d(!1,!1)},Fw={get:_d(!1,!0)},Uw={get:_d(!0,!1)};const _y=new WeakMap,yy=new WeakMap,vy=new WeakMap,$w=new WeakMap;function Bw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jw(t){return t.__v_skip||!Object.isExtensible(t)?0:Bw(hw(t))}function Ot(t){return Ws(t)?t:yd(t,!1,Pw,Vw,_y)}function Ey(t){return yd(t,!1,Dw,Fw,yy)}function Iy(t){return yd(t,!0,kw,Uw,vy)}function yd(t,e,n,r,s){if(!rt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=jw(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function ko(t){return Ws(t)?ko(t.__v_raw):!!(t&&t.__v_isReactive)}function Ws(t){return!!(t&&t.__v_isReadonly)}function Ti(t){return!!(t&&t.__v_isShallow)}function wy(t){return t?!!t.__v_raw:!1}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function Hw(t){return Object.isExtensible(t)&&ry(t,"__v_skip",!0),t}const zo=t=>rt(t)?Ot(t):t,vd=t=>rt(t)?Iy(t):t;class Ty{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new fd(()=>e(this._value),()=>fl(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&ls(e._value,e._value=e.effect.run())&&fl(e,4),by(e),e.effect._dirtyLevel>=2&&fl(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Ww(t,e,n=!1){let r,s;const i=De(t);return i?(r=t,s=kn):(r=t.get,s=t.set),new Ty(r,s,i||!s,n)}function by(t){var e;ns&&Fs&&(t=Qe(t),hy(Fs,(e=t.dep)!=null?e:t.dep=fy(()=>t.dep=void 0,t instanceof Ty?t:void 0)))}function fl(t,e=4,n,r){t=Qe(t);const s=t.dep;s&&dy(s,e)}function hn(t){return!!(t&&t.__v_isRef===!0)}function et(t){return Ay(t,!1)}function Ed(t){return Ay(t,!0)}function Ay(t,e){return hn(t)?t:new qw(t,e)}class qw{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Qe(e),this._value=n?e:zo(e)}get value(){return by(this),this._value}set value(e){const n=this.__v_isShallow||Ti(e)||Ws(e);e=n?e:Qe(e),ls(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:zo(e),fl(this,4))}}function _i(t){return hn(t)?t.value:t}const Kw={get:(t,e,n)=>_i(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return hn(s)&&!hn(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Cy(t){return ko(t)?t:new Proxy(t,Kw)}/**
* @vue/runtime-core v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function rs(t,e,n,r){try{return r?t(...r):t()}catch(s){mc(s,e,n)}}function Un(t,e,n,r){if(De(t)){const s=rs(t,e,n,r);return s&&ey(s)&&s.catch(i=>{mc(i,e,n)}),s}if(pe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Un(t[i],e,n,r));return s}}function mc(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){gs(),rs(l,null,10,[t,o,a]),ps();return}}Gw(t,n,s,r)}function Gw(t,e,n,r=!0){console.error(t)}let Yo=!1,Xu=!1;const Xt=[];let Gn=0;const yi=[];let jr=null,Os=0;const Sy=Promise.resolve();let Id=null;function wd(t){const e=Id||Sy;return t?e.then(this?t.bind(this):t):e}function zw(t){let e=Gn+1,n=Xt.length;for(;e<n;){const r=e+n>>>1,s=Xt[r],i=Qo(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Td(t){(!Xt.length||!Xt.includes(t,Yo&&t.allowRecurse?Gn+1:Gn))&&(t.id==null?Xt.push(t):Xt.splice(zw(t.id),0,t),Ry())}function Ry(){!Yo&&!Xu&&(Xu=!0,Id=Sy.then(ky))}function Yw(t){const e=Xt.indexOf(t);e>Gn&&Xt.splice(e,1)}function Qw(t){pe(t)?yi.push(...t):(!jr||!jr.includes(t,t.allowRecurse?Os+1:Os))&&yi.push(t),Ry()}function qm(t,e,n=Yo?Gn+1:0){for(;n<Xt.length;n++){const r=Xt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Xt.splice(n,1),n--,r()}}}function Py(t){if(yi.length){const e=[...new Set(yi)].sort((n,r)=>Qo(n)-Qo(r));if(yi.length=0,jr){jr.push(...e);return}for(jr=e,Os=0;Os<jr.length;Os++){const n=jr[Os];n.active!==!1&&n()}jr=null,Os=0}}const Qo=t=>t.id==null?1/0:t.id,Jw=(t,e)=>{const n=Qo(t)-Qo(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ky(t){Xu=!1,Yo=!0,Xt.sort(Jw);try{for(Gn=0;Gn<Xt.length;Gn++){const e=Xt[Gn];e&&e.active!==!1&&rs(e,e.i,e.i?15:14)}}finally{Gn=0,Xt.length=0,Py(),Yo=!1,Id=null,(Xt.length||yi.length)&&ky()}}let Lt=null,Dy=null;function kl(t){const e=Lt;return Lt=t,Dy=t&&t.type.__scopeId||null,e}function gc(t,e=Lt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&rg(-1);const i=kl(e);let o;try{o=t(...s)}finally{kl(i),r._d&&rg(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Do(t,e){if(Lt===null)return t;const n=vc(Lt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=lt]=e[s];i&&(De(i)&&(i={mounted:i,updated:i}),i.deep&&qr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Rs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(gs(),Un(l,n,8,[t.el,a,t,e]),ps())}}function Ny(t,e){t.shapeFlag&6&&t.component?Ny(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ki(t,e){return De(t)?Zt({name:t.name},e,{setup:t}):t}const No=t=>!!t.type.__asyncLoader,Oy=t=>t.type.__isKeepAlive;function Xw(t,e){Ly(t,"a",e)}function Zw(t,e){Ly(t,"da",e)}function Ly(t,e,n=Ut){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(pc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Oy(s.parent.vnode)&&eT(r,e,n,s),s=s.parent}}function eT(t,e,n,r){const s=pc(e,t,r,!0);bd(()=>{cd(r[e],s)},n)}function pc(t,e,n=Ut,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{gs();const a=va(n),l=Un(e,n,t,o);return a(),ps(),l});return r?s.unshift(i):s.push(i),i}}const Dr=t=>(e,n=Ut)=>{(!yc||t==="sp")&&pc(t,(...r)=>e(...r),n)},My=Dr("bm"),xy=Dr("m"),tT=Dr("bu"),nT=Dr("u"),rT=Dr("bum"),bd=Dr("um"),sT=Dr("sp"),iT=Dr("rtg"),oT=Dr("rtc");function aT(t,e=Ut){pc("ec",t,e)}const Vy="components",lT="directives";function ht(t,e){return Uy(Vy,t,!0,e)||t}const cT=Symbol.for("v-ndc");function Fy(t){return Uy(lT,t)}function Uy(t,e,n=!0,r=!1){const s=Lt||Ut;if(s){const i=s.type;if(t===Vy){const a=ZT(i,!1);if(a&&(a===e||a===jn(e)||a===dc(jn(e))))return i}const o=Km(s[t]||i[t],e)||Km(s.appContext[t],e);return!o&&r?i:o}}function Km(t,e){return t&&(t[e]||t[jn(e)]||t[dc(jn(e))])}function Qt(t,e,n,r){let s;const i=n;if(pe(t)||Ct(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i)}else if(rt(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,i)}}else s=[];return s}function uT(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(pe(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function $y(t,e,n={},r,s){if(Lt.isCE||Lt.parent&&No(Lt.parent)&&Lt.parent.isCE)return e!=="default"&&(n.name=e),He("slot",n,r);let i=t[e];i&&i._c&&(i._d=!1),ee();const o=i&&By(i(n)),a=cn(ye,{key:(n.key||o&&o.key||`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function By(t){return t.some(e=>Nl(e)?!(e.type===cs||e.type===ye&&!By(e.children)):!0)?t:null}const Zu=t=>t?o0(t)?vc(t):Zu(t.parent):null,Oo=Zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zu(t.parent),$root:t=>Zu(t.root),$emit:t=>t.emit,$options:t=>Ad(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Td(t.update)}),$nextTick:t=>t.n||(t.n=wd.bind(t.proxy)),$watch:t=>OT.bind(t)}),pu=(t,e)=>t!==lt&&!t.__isScriptSetup&&je(t,e),hT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(pu(r,e))return o[e]=1,r[e];if(s!==lt&&je(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&je(u,e))return o[e]=3,i[e];if(n!==lt&&je(n,e))return o[e]=4,n[e];eh&&(o[e]=0)}}const h=Oo[e];let d,m;if(h)return e==="$attrs"&&yn(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==lt&&je(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,je(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return pu(s,e)?(s[e]=n,!0):r!==lt&&je(r,e)?(r[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==lt&&je(t,o)||pu(e,o)||(a=i[0])&&je(a,o)||je(r,o)||je(Oo,o)||je(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gm(t){return pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let eh=!0;function dT(t){const e=Ad(t),n=t.proxy,r=t.ctx;eh=!1,e.beforeCreate&&zm(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:g,updated:E,activated:A,deactivated:D,beforeDestroy:L,beforeUnmount:k,destroyed:I,unmounted:S,render:B,renderTracked:V,renderTriggered:y,errorCaptured:_,serverPrefetch:v,expose:N,inheritAttrs:x,components:M,directives:R,filters:Te}=e;if(u&&fT(u,r,null),o)for(const Ce in o){const Ie=o[Ce];De(Ie)&&(r[Ce]=Ie.bind(n))}if(s){const Ce=s.call(n,n);rt(Ce)&&(t.data=Ot(Ce))}if(eh=!0,i)for(const Ce in i){const Ie=i[Ce],at=De(Ie)?Ie.bind(n,n):De(Ie.get)?Ie.get.bind(n,n):kn,mt=!De(Ie)&&De(Ie.set)?Ie.set.bind(n):kn,Je=gt({get:at,set:mt});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Je.value,set:Fe=>Je.value=Fe})}if(a)for(const Ce in a)jy(a[Ce],r,n,Ce);if(l){const Ce=De(l)?l.call(n):l;Reflect.ownKeys(Ce).forEach(Ie=>{ml(Ie,Ce[Ie])})}h&&zm(h,t,"c");function Pe(Ce,Ie){pe(Ie)?Ie.forEach(at=>Ce(at.bind(n))):Ie&&Ce(Ie.bind(n))}if(Pe(My,d),Pe(xy,m),Pe(tT,g),Pe(nT,E),Pe(Xw,A),Pe(Zw,D),Pe(aT,_),Pe(oT,V),Pe(iT,y),Pe(rT,k),Pe(bd,S),Pe(sT,v),pe(N))if(N.length){const Ce=t.exposed||(t.exposed={});N.forEach(Ie=>{Object.defineProperty(Ce,Ie,{get:()=>n[Ie],set:at=>n[Ie]=at})})}else t.exposed||(t.exposed={});B&&t.render===kn&&(t.render=B),x!=null&&(t.inheritAttrs=x),M&&(t.components=M),R&&(t.directives=R)}function fT(t,e,n=kn){pe(t)&&(t=th(t));for(const r in t){const s=t[r];let i;rt(s)?"default"in s?i=Qn(s.from||r,s.default,!0):i=Qn(s.from||r):i=Qn(s),hn(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function zm(t,e,n){Un(pe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function jy(t,e,n,r){const s=r.includes(".")?n0(n,r):()=>n[r];if(Ct(t)){const i=e[t];De(i)&&$s(s,i)}else if(De(t))$s(s,t.bind(n));else if(rt(t))if(pe(t))t.forEach(i=>jy(i,e,n,r));else{const i=De(t.handler)?t.handler.bind(n):e[t.handler];De(i)&&$s(s,i,t)}}function Ad(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Dl(l,u,o,!0)),Dl(l,e,o)),rt(e)&&i.set(e,l),l}function Dl(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Dl(t,i,n,!0),s&&s.forEach(o=>Dl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=mT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const mT={data:Ym,props:Qm,emits:Qm,methods:vo,computed:vo,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:vo,directives:vo,watch:pT,provide:Ym,inject:gT};function Ym(t,e){return e?t?function(){return Zt(De(t)?t.call(this,this):t,De(e)?e.call(this,this):e)}:e:t}function gT(t,e){return vo(th(t),th(e))}function th(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function sn(t,e){return t?[...new Set([].concat(t,e))]:e}function vo(t,e){return t?Zt(Object.create(null),t,e):e}function Qm(t,e){return t?pe(t)&&pe(e)?[...new Set([...t,...e])]:Zt(Object.create(null),Gm(t),Gm(e??{})):e}function pT(t,e){if(!t)return e;if(!e)return t;const n=Zt(Object.create(null),t);for(const r in e)n[r]=sn(t[r],e[r]);return n}function Hy(){return{app:null,config:{isNativeTag:cw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _T=0;function yT(t,e){return function(r,s=null){De(r)||(r=Zt({},r)),s!=null&&!rt(s)&&(s=null);const i=Hy(),o=new WeakSet;let a=!1;const l=i.app={_uid:_T++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:tb,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&De(u.install)?(o.add(u),u.install(l,...h)):De(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,d){if(!a){const m=He(r,s);return m.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),h&&e?e(m,u):t(m,u,d),a=!0,l._container=u,u.__vue_app__=l,vc(m.component)}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Lo;Lo=l;try{return u()}finally{Lo=h}}};return l}}let Lo=null;function ml(t,e){if(Ut){let n=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===n&&(n=Ut.provides=Object.create(r)),n[t]=e}}function Qn(t,e,n=!1){const r=Ut||Lt;if(r||Lo){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Lo._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&De(e)?e.call(r&&r.proxy):e}}const Wy={},qy=()=>Object.create(Wy),Ky=t=>Object.getPrototypeOf(t)===Wy;function vT(t,e,n,r=!1){const s={},i=qy();t.propsDefaults=Object.create(null),Gy(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Ey(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function ET(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Qe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(_c(t.emitsOptions,m))continue;const g=e[m];if(l)if(je(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const E=jn(m);s[E]=nh(l,a,E,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{Gy(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!je(e,d)&&((h=Js(d))===d||!je(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=nh(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!je(e,d))&&(delete i[d],u=!0)}u&&Tr(t.attrs,"set","")}function Gy(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Po(l))continue;const u=e[l];let h;s&&je(s,h=jn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:_c(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Qe(n),u=a||lt;for(let h=0;h<i.length;h++){const d=i[h];n[d]=nh(s,l,d,u[d],t,!je(u,d))}}return o}function nh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=je(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&De(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=va(s);r=u[n]=l.call(null,e),h()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Js(n))&&(r=!0))}return r}const IT=new WeakMap;function zy(t,e,n=!1){const r=n?IT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!De(t)){const h=d=>{l=!0;const[m,g]=zy(d,e,!0);Zt(o,m),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return rt(t)&&r.set(t,gi),gi;if(pe(i))for(let h=0;h<i.length;h++){const d=jn(i[h]);Jm(d)&&(o[d]=lt)}else if(i)for(const h in i){const d=jn(h);if(Jm(d)){const m=i[h],g=o[d]=pe(m)||De(m)?{type:m}:Zt({},m);if(g){const E=eg(Boolean,g.type),A=eg(String,g.type);g[0]=E>-1,g[1]=A<0||E<A,(E>-1||je(g,"default"))&&a.push(d)}}}const u=[o,a];return rt(t)&&r.set(t,u),u}function Jm(t){return t[0]!=="$"&&!Po(t)}function Xm(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Zm(t,e){return Xm(t)===Xm(e)}function eg(t,e){return pe(e)?e.findIndex(n=>Zm(n,t)):De(e)&&Zm(e,t)?0:-1}const Yy=t=>t[0]==="_"||t==="$stable",Cd=t=>pe(t)?t.map(Kn):[Kn(t)],wT=(t,e,n)=>{if(e._n)return e;const r=gc((...s)=>Cd(e(...s)),n);return r._c=!1,r},Qy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Yy(s))continue;const i=t[s];if(De(i))e[s]=wT(s,i,r);else if(i!=null){const o=Cd(i);e[s]=()=>o}}},Jy=(t,e)=>{const n=Cd(e);t.slots.default=()=>n},Xy=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},TT=(t,e,n)=>{const r=t.slots=qy();if(t.vnode.shapeFlag&32){const s=e._;s?(Xy(r,e,n),n&&ry(r,"_",s,!0)):Qy(e,r)}else e&&Jy(t,e)},bT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=lt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Xy(s,e,n):(i=!e.$stable,Qy(e,s)),o=e}else e&&(Jy(t,e),o={default:1});if(i)for(const a in s)!Yy(a)&&o[a]==null&&delete s[a]};function rh(t,e,n,r,s=!1){if(pe(t)){t.forEach((m,g)=>rh(m,e&&(pe(e)?e[g]:e),n,r,s));return}if(No(r)&&!s)return;const i=r.shapeFlag&4?vc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===lt?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Ct(u)?(h[u]=null,je(d,u)&&(d[u]=null)):hn(u)&&(u.value=null)),De(l))rs(l,a,12,[o,h]);else{const m=Ct(l),g=hn(l);if(m||g){const E=()=>{if(t.f){const A=m?je(d,l)?d[l]:h[l]:l.value;s?pe(A)&&cd(A,i):pe(A)?A.includes(i)||A.push(i):m?(h[l]=[i],je(d,l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else m?(h[l]=o,je(d,l)&&(d[l]=o)):g&&(l.value=o,t.k&&(h[t.k]=o))};o?(E.id=-1,mn(E,n)):E()}}}const AT=Symbol("_vte"),CT=t=>t.__isTeleport,mn=BT;function ST(t){return RT(t)}function RT(t,e){const n=sy();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:g=kn,insertStaticContent:E}=t,A=(P,T,$,Y=null,G=null,J=null,se=void 0,b=null,C=!!T.dynamicChildren)=>{if(P===T)return;P&&!go(P,T)&&(Y=z(P),Fe(P,G,J,!0),P=null),T.patchFlag===-2&&(C=!1,T.dynamicChildren=null);const{type:F,ref:K,shapeFlag:te}=T;switch(F){case ya:D(P,T,$,Y);break;case cs:L(P,T,$,Y);break;case vu:P==null&&k(T,$,Y,se);break;case ye:M(P,T,$,Y,G,J,se,b,C);break;default:te&1?B(P,T,$,Y,G,J,se,b,C):te&6?R(P,T,$,Y,G,J,se,b,C):(te&64||te&128)&&F.process(P,T,$,Y,G,J,se,b,C,ce)}K!=null&&G&&rh(K,P&&P.ref,J,T||P,!T)},D=(P,T,$,Y)=>{if(P==null)r(T.el=a(T.children),$,Y);else{const G=T.el=P.el;T.children!==P.children&&u(G,T.children)}},L=(P,T,$,Y)=>{P==null?r(T.el=l(T.children||""),$,Y):T.el=P.el},k=(P,T,$,Y)=>{[P.el,P.anchor]=E(P.children,T,$,Y,P.el,P.anchor)},I=({el:P,anchor:T},$,Y)=>{let G;for(;P&&P!==T;)G=m(P),r(P,$,Y),P=G;r(T,$,Y)},S=({el:P,anchor:T})=>{let $;for(;P&&P!==T;)$=m(P),s(P),P=$;s(T)},B=(P,T,$,Y,G,J,se,b,C)=>{T.type==="svg"?se="svg":T.type==="math"&&(se="mathml"),P==null?V(T,$,Y,G,J,se,b,C):v(P,T,G,J,se,b,C)},V=(P,T,$,Y,G,J,se,b)=>{let C,F;const{props:K,shapeFlag:te,transition:Q,dirs:U}=P;if(C=P.el=o(P.type,J,K&&K.is,K),te&8?h(C,P.children):te&16&&_(P.children,C,null,Y,G,_u(P,J),se,b),U&&Rs(P,null,Y,"created"),y(C,P,P.scopeId,se,Y),K){for(const fe in K)fe!=="value"&&!Po(fe)&&i(C,fe,null,K[fe],J,Y);"value"in K&&i(C,"value",null,K.value,J),(F=K.onVnodeBeforeMount)&&Wn(F,Y,P)}U&&Rs(P,null,Y,"beforeMount");const H=PT(G,Q);H&&Q.beforeEnter(C),r(C,T,$),((F=K&&K.onVnodeMounted)||H||U)&&mn(()=>{F&&Wn(F,Y,P),H&&Q.enter(C),U&&Rs(P,null,Y,"mounted")},G)},y=(P,T,$,Y,G)=>{if($&&g(P,$),Y)for(let J=0;J<Y.length;J++)g(P,Y[J]);if(G){let J=G.subTree;if(T===J){const se=G.vnode;y(P,se,se.scopeId,se.slotScopeIds,G.parent)}}},_=(P,T,$,Y,G,J,se,b,C=0)=>{for(let F=C;F<P.length;F++){const K=P[F]=b?Hr(P[F]):Kn(P[F]);A(null,K,T,$,Y,G,J,se,b)}},v=(P,T,$,Y,G,J,se)=>{const b=T.el=P.el;let{patchFlag:C,dynamicChildren:F,dirs:K}=T;C|=P.patchFlag&16;const te=P.props||lt,Q=T.props||lt;let U;if($&&Ps($,!1),(U=Q.onVnodeBeforeUpdate)&&Wn(U,$,T,P),K&&Rs(T,P,$,"beforeUpdate"),$&&Ps($,!0),(te.innerHTML&&Q.innerHTML==null||te.textContent&&Q.textContent==null)&&h(b,""),F?N(P.dynamicChildren,F,b,$,Y,_u(T,G),J):se||Ie(P,T,b,null,$,Y,_u(T,G),J,!1),C>0){if(C&16)x(b,te,Q,$,G);else if(C&2&&te.class!==Q.class&&i(b,"class",null,Q.class,G),C&4&&i(b,"style",te.style,Q.style,G),C&8){const H=T.dynamicProps;for(let fe=0;fe<H.length;fe++){const ge=H[fe],ze=te[ge],Rt=Q[ge];(Rt!==ze||ge==="value")&&i(b,ge,ze,Rt,G,$)}}C&1&&P.children!==T.children&&h(b,T.children)}else!se&&F==null&&x(b,te,Q,$,G);((U=Q.onVnodeUpdated)||K)&&mn(()=>{U&&Wn(U,$,T,P),K&&Rs(T,P,$,"updated")},Y)},N=(P,T,$,Y,G,J,se)=>{for(let b=0;b<T.length;b++){const C=P[b],F=T[b],K=C.el&&(C.type===ye||!go(C,F)||C.shapeFlag&70)?d(C.el):$;A(C,F,K,null,Y,G,J,se,!0)}},x=(P,T,$,Y,G)=>{if(T!==$){if(T!==lt)for(const J in T)!Po(J)&&!(J in $)&&i(P,J,T[J],null,G,Y);for(const J in $){if(Po(J))continue;const se=$[J],b=T[J];se!==b&&J!=="value"&&i(P,J,b,se,G,Y)}"value"in $&&i(P,"value",T.value,$.value,G)}},M=(P,T,$,Y,G,J,se,b,C)=>{const F=T.el=P?P.el:a(""),K=T.anchor=P?P.anchor:a("");let{patchFlag:te,dynamicChildren:Q,slotScopeIds:U}=T;U&&(b=b?b.concat(U):U),P==null?(r(F,$,Y),r(K,$,Y),_(T.children||[],$,K,G,J,se,b,C)):te>0&&te&64&&Q&&P.dynamicChildren?(N(P.dynamicChildren,Q,$,G,J,se,b),(T.key!=null||G&&T===G.subTree)&&Zy(P,T,!0)):Ie(P,T,$,K,G,J,se,b,C)},R=(P,T,$,Y,G,J,se,b,C)=>{T.slotScopeIds=b,P==null?T.shapeFlag&512?G.ctx.activate(T,$,Y,se,C):Te(T,$,Y,G,J,se,C):Ke(P,T,C)},Te=(P,T,$,Y,G,J,se)=>{const b=P.component=zT(P,Y,G);if(Oy(P)&&(b.ctx.renderer=ce),YT(b,!1,se),b.asyncDep){if(G&&G.registerDep(b,Pe,se),!P.el){const C=b.subTree=He(cs);L(null,C,T,$)}}else Pe(b,P,T,$,G,J,se)},Ke=(P,T,$)=>{const Y=T.component=P.component;if(FT(P,T,$))if(Y.asyncDep&&!Y.asyncResolved){Ce(Y,T,$);return}else Y.next=T,Yw(Y.update),Y.effect.dirty=!0,Y.update();else T.el=P.el,Y.vnode=T},Pe=(P,T,$,Y,G,J,se)=>{const b=()=>{if(P.isMounted){let{next:K,bu:te,u:Q,parent:U,vnode:H}=P;{const Et=e0(P);if(Et){K&&(K.el=H.el,Ce(P,K,se)),Et.asyncDep.then(()=>{P.isUnmounted||b()});return}}let fe=K,ge;Ps(P,!1),K?(K.el=H.el,Ce(P,K,se)):K=H,te&&dl(te),(ge=K.props&&K.props.onVnodeBeforeUpdate)&&Wn(ge,U,K,H),Ps(P,!0);const ze=yu(P),Rt=P.subTree;P.subTree=ze,A(Rt,ze,d(Rt.el),z(Rt),P,G,J),K.el=ze.el,fe===null&&UT(P,ze.el),Q&&mn(Q,G),(ge=K.props&&K.props.onVnodeUpdated)&&mn(()=>Wn(ge,U,K,H),G)}else{let K;const{el:te,props:Q}=T,{bm:U,m:H,parent:fe}=P,ge=No(T);if(Ps(P,!1),U&&dl(U),!ge&&(K=Q&&Q.onVnodeBeforeMount)&&Wn(K,fe,T),Ps(P,!0),te&&Be){const ze=()=>{P.subTree=yu(P),Be(te,P.subTree,P,G,null)};ge?T.type.__asyncLoader().then(()=>!P.isUnmounted&&ze()):ze()}else{const ze=P.subTree=yu(P);A(null,ze,$,Y,P,G,J),T.el=ze.el}if(H&&mn(H,G),!ge&&(K=Q&&Q.onVnodeMounted)){const ze=T;mn(()=>Wn(K,fe,ze),G)}(T.shapeFlag&256||fe&&No(fe.vnode)&&fe.vnode.shapeFlag&256)&&P.a&&mn(P.a,G),P.isMounted=!0,T=$=Y=null}},C=P.effect=new fd(b,kn,()=>Td(F),P.scope),F=P.update=()=>{C.dirty&&C.run()};F.i=P,F.id=P.uid,Ps(P,!0),F()},Ce=(P,T,$)=>{T.component=P;const Y=P.vnode.props;P.vnode=T,P.next=null,ET(P,T.props,Y,$),bT(P,T.children,$),gs(),qm(P),ps()},Ie=(P,T,$,Y,G,J,se,b,C=!1)=>{const F=P&&P.children,K=P?P.shapeFlag:0,te=T.children,{patchFlag:Q,shapeFlag:U}=T;if(Q>0){if(Q&128){mt(F,te,$,Y,G,J,se,b,C);return}else if(Q&256){at(F,te,$,Y,G,J,se,b,C);return}}U&8?(K&16&&ut(F,G,J),te!==F&&h($,te)):K&16?U&16?mt(F,te,$,Y,G,J,se,b,C):ut(F,G,J,!0):(K&8&&h($,""),U&16&&_(te,$,Y,G,J,se,b,C))},at=(P,T,$,Y,G,J,se,b,C)=>{P=P||gi,T=T||gi;const F=P.length,K=T.length,te=Math.min(F,K);let Q;for(Q=0;Q<te;Q++){const U=T[Q]=C?Hr(T[Q]):Kn(T[Q]);A(P[Q],U,$,null,G,J,se,b,C)}F>K?ut(P,G,J,!0,!1,te):_(T,$,Y,G,J,se,b,C,te)},mt=(P,T,$,Y,G,J,se,b,C)=>{let F=0;const K=T.length;let te=P.length-1,Q=K-1;for(;F<=te&&F<=Q;){const U=P[F],H=T[F]=C?Hr(T[F]):Kn(T[F]);if(go(U,H))A(U,H,$,null,G,J,se,b,C);else break;F++}for(;F<=te&&F<=Q;){const U=P[te],H=T[Q]=C?Hr(T[Q]):Kn(T[Q]);if(go(U,H))A(U,H,$,null,G,J,se,b,C);else break;te--,Q--}if(F>te){if(F<=Q){const U=Q+1,H=U<K?T[U].el:Y;for(;F<=Q;)A(null,T[F]=C?Hr(T[F]):Kn(T[F]),$,H,G,J,se,b,C),F++}}else if(F>Q)for(;F<=te;)Fe(P[F],G,J,!0),F++;else{const U=F,H=F,fe=new Map;for(F=H;F<=Q;F++){const tn=T[F]=C?Hr(T[F]):Kn(T[F]);tn.key!=null&&fe.set(tn.key,F)}let ge,ze=0;const Rt=Q-H+1;let Et=!1,Ts=0;const or=new Array(Rt);for(F=0;F<Rt;F++)or[F]=0;for(F=U;F<=te;F++){const tn=P[F];if(ze>=Rt){Fe(tn,G,J,!0);continue}let Sn;if(tn.key!=null)Sn=fe.get(tn.key);else for(ge=H;ge<=Q;ge++)if(or[ge-H]===0&&go(tn,T[ge])){Sn=ge;break}Sn===void 0?Fe(tn,G,J,!0):(or[Sn-H]=F+1,Sn>=Ts?Ts=Sn:Et=!0,A(tn,T[Sn],$,null,G,J,se,b,C),ze++)}const ei=Et?kT(or):gi;for(ge=ei.length-1,F=Rt-1;F>=0;F--){const tn=H+F,Sn=T[tn],ti=tn+1<K?T[tn+1].el:Y;or[F]===0?A(null,Sn,$,ti,G,J,se,b,C):Et&&(ge<0||F!==ei[ge]?Je(Sn,$,ti,2):ge--)}}},Je=(P,T,$,Y,G=null)=>{const{el:J,type:se,transition:b,children:C,shapeFlag:F}=P;if(F&6){Je(P.component.subTree,T,$,Y);return}if(F&128){P.suspense.move(T,$,Y);return}if(F&64){se.move(P,T,$,ce);return}if(se===ye){r(J,T,$);for(let te=0;te<C.length;te++)Je(C[te],T,$,Y);r(P.anchor,T,$);return}if(se===vu){I(P,T,$);return}if(Y!==2&&F&1&&b)if(Y===0)b.beforeEnter(J),r(J,T,$),mn(()=>b.enter(J),G);else{const{leave:te,delayLeave:Q,afterLeave:U}=b,H=()=>r(J,T,$),fe=()=>{te(J,()=>{H(),U&&U()})};Q?Q(J,H,fe):fe()}else r(J,T,$)},Fe=(P,T,$,Y=!1,G=!1)=>{const{type:J,props:se,ref:b,children:C,dynamicChildren:F,shapeFlag:K,patchFlag:te,dirs:Q,cacheIndex:U}=P;if(te===-2&&(G=!1),b!=null&&rh(b,null,$,P,!0),U!=null&&(T.renderCache[U]=void 0),K&256){T.ctx.deactivate(P);return}const H=K&1&&Q,fe=!No(P);let ge;if(fe&&(ge=se&&se.onVnodeBeforeUnmount)&&Wn(ge,T,P),K&6)St(P.component,$,Y);else{if(K&128){P.suspense.unmount($,Y);return}H&&Rs(P,null,T,"beforeUnmount"),K&64?P.type.remove(P,T,$,ce,Y):F&&!F.hasOnce&&(J!==ye||te>0&&te&64)?ut(F,T,$,!1,!0):(J===ye&&te&384||!G&&K&16)&&ut(C,T,$),Y&&We(P)}(fe&&(ge=se&&se.onVnodeUnmounted)||H)&&mn(()=>{ge&&Wn(ge,T,P),H&&Rs(P,null,T,"unmounted")},$)},We=P=>{const{type:T,el:$,anchor:Y,transition:G}=P;if(T===ye){xt($,Y);return}if(T===vu){S(P);return}const J=()=>{s($),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(P.shapeFlag&1&&G&&!G.persisted){const{leave:se,delayLeave:b}=G,C=()=>se($,J);b?b(P.el,J,C):C()}else J()},xt=(P,T)=>{let $;for(;P!==T;)$=m(P),s(P),P=$;s(T)},St=(P,T,$)=>{const{bum:Y,scope:G,update:J,subTree:se,um:b,m:C,a:F}=P;tg(C),tg(F),Y&&dl(Y),G.stop(),J&&(J.active=!1,Fe(se,P,T,$)),b&&mn(b,T),mn(()=>{P.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ut=(P,T,$,Y=!1,G=!1,J=0)=>{for(let se=J;se<P.length;se++)Fe(P[se],T,$,Y,G)},z=P=>{if(P.shapeFlag&6)return z(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const T=m(P.anchor||P.el),$=T&&T[AT];return $?m($):T};let ie=!1;const re=(P,T,$)=>{P==null?T._vnode&&Fe(T._vnode,null,null,!0):A(T._vnode||null,P,T,null,null,null,$),ie||(ie=!0,qm(),Py(),ie=!1),T._vnode=P},ce={p:A,um:Fe,m:Je,r:We,mt:Te,mc:_,pc:Ie,pbc:N,n:z,o:t};let Oe,Be;return{render:re,hydrate:Oe,createApp:yT(re,Oe)}}function _u({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ps({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function PT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Zy(t,e,n=!1){const r=t.children,s=e.children;if(pe(r)&&pe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Hr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Zy(o,a)),a.type===ya&&(a.el=o.el)}}function kT(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function e0(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:e0(e)}function tg(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const DT=Symbol.for("v-scx"),NT=()=>Qn(DT),tl={};function $s(t,e,n){return t0(t,e,n)}function t0(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=lt){if(e&&i){const V=e;e=(...y)=>{V(...y),B()}}const l=Ut,u=V=>r===!0?V:qr(V,r===!1?1:void 0);let h,d=!1,m=!1;if(hn(t)?(h=()=>t.value,d=Ti(t)):ko(t)?(h=()=>u(t),d=!0):pe(t)?(m=!0,d=t.some(V=>ko(V)||Ti(V)),h=()=>t.map(V=>{if(hn(V))return V.value;if(ko(V))return u(V);if(De(V))return rs(V,l,2)})):De(t)?e?h=()=>rs(t,l,2):h=()=>(g&&g(),Un(t,l,3,[E])):h=kn,e&&r){const V=h;h=()=>qr(V())}let g,E=V=>{g=I.onStop=()=>{rs(V,l,4),g=I.onStop=void 0}},A;if(yc)if(E=kn,e?n&&Un(e,l,3,[h(),m?[]:void 0,E]):h(),s==="sync"){const V=NT();A=V.__watcherHandles||(V.__watcherHandles=[])}else return kn;let D=m?new Array(t.length).fill(tl):tl;const L=()=>{if(!(!I.active||!I.dirty))if(e){const V=I.run();(r||d||(m?V.some((y,_)=>ls(y,D[_])):ls(V,D)))&&(g&&g(),Un(e,l,3,[V,D===tl?void 0:m&&D[0]===tl?[]:D,E]),D=V)}else I.run()};L.allowRecurse=!!e;let k;s==="sync"?k=L:s==="post"?k=()=>mn(L,l&&l.suspense):(L.pre=!0,l&&(L.id=l.uid),k=()=>Td(L));const I=new fd(h,kn,k),S=Tw(),B=()=>{I.stop(),S&&cd(S.effects,I)};return e?n?L():D=I.run():s==="post"?mn(I.run.bind(I),l&&l.suspense):I.run(),A&&A.push(B),B}function OT(t,e,n){const r=this.proxy,s=Ct(t)?t.includes(".")?n0(r,t):()=>r[t]:t.bind(r,r);let i;De(e)?i=e:(i=e.handler,n=e);const o=va(this),a=t0(s,i.bind(r),n);return o(),a}function n0(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function qr(t,e=1/0,n){if(e<=0||!rt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,hn(t))qr(t.value,e,n);else if(pe(t))for(let r=0;r<t.length;r++)qr(t[r],e,n);else if(qi(t)||pi(t))t.forEach(r=>{qr(r,e,n)});else if(ny(t)){for(const r in t)qr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&qr(t[r],e,n)}return t}const LT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jn(e)}Modifiers`]||t[`${Js(e)}Modifiers`];function MT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||lt;let s=n;const i=e.startsWith("update:"),o=i&&LT(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ct(h)?h.trim():h)),o.number&&(s=n.map(Pl)));let a,l=r[a=mu(e)]||r[a=mu(jn(e))];!l&&i&&(l=r[a=mu(Js(e))]),l&&Un(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Un(u,t,6,s)}}function r0(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!De(t)){const l=u=>{const h=r0(u,e,!0);h&&(a=!0,Zt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(rt(t)&&r.set(t,null),null):(pe(i)?i.forEach(l=>o[l]=null):Zt(o,i),rt(t)&&r.set(t,o),o)}function _c(t,e){return!t||!uc(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,Js(e))||je(t,e))}function yu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:m,setupState:g,ctx:E,inheritAttrs:A}=t,D=kl(t);let L,k;try{if(n.shapeFlag&4){const S=s||r,B=S;L=Kn(u.call(B,S,h,d,g,m,E)),k=a}else{const S=e;L=Kn(S.length>1?S(d,{attrs:a,slots:o,emit:l}):S(d,null)),k=e.props?a:xT(a)}}catch(S){Mo.length=0,mc(S,t,1),L=He(cs)}let I=L;if(k&&A!==!1){const S=Object.keys(k),{shapeFlag:B}=I;S.length&&B&7&&(i&&S.some(ld)&&(k=VT(k,i)),I=bi(I,k,!1,!0))}return n.dirs&&(I=bi(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),L=I,kl(D),L}const xT=t=>{let e;for(const n in t)(n==="class"||n==="style"||uc(n))&&((e||(e={}))[n]=t[n]);return e},VT=(t,e)=>{const n={};for(const r in t)(!ld(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function FT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ng(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!_c(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ng(r,o,u):!0:!!o;return!1}function ng(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!_c(n,i))return!0}return!1}function UT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const $T=t=>t.__isSuspense;function BT(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):Qw(t)}const ye=Symbol.for("v-fgt"),ya=Symbol.for("v-txt"),cs=Symbol.for("v-cmt"),vu=Symbol.for("v-stc"),Mo=[];let Tn=null;function ee(t=!1){Mo.push(Tn=t?null:[])}function jT(){Mo.pop(),Tn=Mo[Mo.length-1]||null}let Jo=1;function rg(t){Jo+=t,t<0&&Tn&&(Tn.hasOnce=!0)}function s0(t){return t.dynamicChildren=Jo>0?Tn||gi:null,jT(),Jo>0&&Tn&&Tn.push(t),t}function oe(t,e,n,r,s,i){return s0(O(t,e,n,r,s,i,!0))}function cn(t,e,n,r,s){return s0(He(t,e,n,r,s,!0))}function Nl(t){return t?t.__v_isVNode===!0:!1}function go(t,e){return t.type===e.type&&t.key===e.key}const i0=({key:t})=>t??null,gl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ct(t)||hn(t)||De(t)?{i:Lt,r:t,k:e,f:!!n}:t:null);function O(t,e=null,n=null,r=0,s=null,i=t===ye?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&i0(e),ref:e&&gl(e),scopeId:Dy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Lt};return a?(Sd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ct(n)?8:16),Jo>0&&!o&&Tn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Tn.push(l),l}const He=HT;function HT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===cT)&&(t=cs),Nl(t)){const a=bi(t,e,!0);return n&&Sd(a,n),Jo>0&&!i&&Tn&&(a.shapeFlag&6?Tn[Tn.indexOf(t)]=a:Tn.push(a)),a.patchFlag=-2,a}if(eb(t)&&(t=t.__vccOpts),e){e=WT(e);let{class:a,style:l}=e;a&&!Ct(a)&&(e.class=$e(a)),rt(l)&&(wy(l)&&!pe(l)&&(l=Zt({},l)),e.style=hd(l))}const o=Ct(t)?1:$T(t)?128:CT(t)?64:rt(t)?4:De(t)?2:0;return O(t,e,n,r,s,o,i,!0)}function WT(t){return t?wy(t)||Ky(t)?Zt({},t):t:null}function bi(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?qT(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&i0(u),ref:e&&e.ref?n&&i?pe(i)?i.concat(gl(e)):[i,gl(e)]:gl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ye?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&bi(t.ssContent),ssFallback:t.ssFallback&&bi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ny(h,l.clone(h)),h}function sh(t=" ",e=0){return He(ya,null,t,e)}function Ne(t="",e=!1){return e?(ee(),cn(cs,null,t)):He(cs,null,t)}function Kn(t){return t==null||typeof t=="boolean"?He(cs):pe(t)?He(ye,null,t.slice()):typeof t=="object"?Hr(t):He(ya,null,String(t))}function Hr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:bi(t)}function Sd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Sd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Ky(e)?e._ctx=Lt:s===3&&Lt&&(Lt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else De(e)?(e={default:e,_ctx:Lt},n=32):(e=String(e),r&64?(n=16,e=[sh(e)]):n=8);t.children=e,t.shapeFlag|=n}function qT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=$e([e.class,r.class]));else if(s==="style")e.style=hd([e.style,r.style]);else if(uc(s)){const i=e[s],o=r[s];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Wn(t,e,n,r=null){Un(t,e,7,[n,r])}const KT=Hy();let GT=0;function zT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||KT,i={uid:GT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ly(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zy(r,s),emitsOptions:r0(r,s),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=MT.bind(null,i),t.ce&&t.ce(i),i}let Ut=null;const Xo=()=>Ut||Lt;let Ol,ih;{const t=sy(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ol=e("__VUE_INSTANCE_SETTERS__",n=>Ut=n),ih=e("__VUE_SSR_SETTERS__",n=>yc=n)}const va=t=>{const e=Ut;return Ol(t),t.scope.on(),()=>{t.scope.off(),Ol(e)}},sg=()=>{Ut&&Ut.scope.off(),Ol(null)};function o0(t){return t.vnode.shapeFlag&4}let yc=!1;function YT(t,e=!1,n=!1){e&&ih(e);const{props:r,children:s}=t.vnode,i=o0(t);vT(t,r,i,e),TT(t,s,n);const o=i?QT(t,e):void 0;return e&&ih(!1),o}function QT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hT);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?XT(t):null,i=va(t);gs();const o=rs(r,t,0,[t.props,s]);if(ps(),i(),ey(o)){if(o.then(sg,sg),e)return o.then(a=>{ig(t,a,e)}).catch(a=>{mc(a,t,0)});t.asyncDep=o}else ig(t,o,e)}else a0(t,e)}function ig(t,e,n){De(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:rt(e)&&(t.setupState=Cy(e)),a0(t,n)}let og;function a0(t,e,n){const r=t.type;if(!t.render){if(!e&&og&&!r.render){const s=r.template||Ad(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Zt(Zt({isCustomElement:i,delimiters:a},o),l);r.render=og(s,u)}}t.render=r.render||kn}{const s=va(t);gs();try{dT(t)}finally{ps(),s()}}}const JT={get(t,e){return yn(t,"get",""),t[e]}};function XT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,JT),slots:t.slots,emit:t.emit,expose:e}}function vc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cy(Hw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Oo)return Oo[n](t)},has(e,n){return n in e||n in Oo}})):t.proxy}function ZT(t,e=!0){return De(t)?t.displayName||t.name:t.name||e&&t.__name}function eb(t){return De(t)&&"__vccOpts"in t}const gt=(t,e)=>Ww(t,e,yc);function Ea(t,e,n){const r=arguments.length;return r===2?rt(e)&&!pe(e)?Nl(e)?He(t,null,[e]):He(t,e):He(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Nl(n)&&(n=[n]),He(t,e,n))}const tb="3.4.34";/**
* @vue/runtime-dom v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const nb="http://www.w3.org/2000/svg",rb="http://www.w3.org/1998/Math/MathML",fr=typeof document<"u"?document:null,ag=fr&&fr.createElement("template"),sb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?fr.createElementNS(nb,t):e==="mathml"?fr.createElementNS(rb,t):n?fr.createElement(t,{is:n}):fr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>fr.createTextNode(t),createComment:t=>fr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ag.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=ag.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ib=Symbol("_vtc");function ob(t,e,n){const r=t[ib];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const lg=Symbol("_vod"),ab=Symbol("_vsh"),lb=Symbol(""),cb=/(^|;)\s*display\s*:/;function ub(t,e,n){const r=t.style,s=Ct(n);let i=!1;if(n&&!s){if(e)if(Ct(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&pl(r,a,"")}else for(const o in e)n[o]==null&&pl(r,o,"");for(const o in n)o==="display"&&(i=!0),pl(r,o,n[o])}else if(s){if(e!==n){const o=r[lb];o&&(n+=";"+o),r.cssText=n,i=cb.test(n)}}else e&&t.removeAttribute("style");lg in t&&(t[lg]=i?r.display:"",t[ab]&&(r.display="none"))}const cg=/\s*!important$/;function pl(t,e,n){if(pe(n))n.forEach(r=>pl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=hb(t,e);cg.test(n)?t.setProperty(Js(r),n.replace(cg,""),"important"):t[r]=n}}const ug=["Webkit","Moz","ms"],Eu={};function hb(t,e){const n=Eu[e];if(n)return n;let r=jn(e);if(r!=="filter"&&r in t)return Eu[e]=r;r=dc(r);for(let s=0;s<ug.length;s++){const i=ug[s]+r;if(i in t)return Eu[e]=i}return e}const hg="http://www.w3.org/1999/xlink";function dg(t,e,n,r,s,i=vw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hg,e.slice(6,e.length)):t.setAttributeNS(hg,e,n):n==null||i&&!iy(n)?t.removeAttribute(e):t.setAttribute(e,i?"":tr(n)?String(n):n)}function db(t,e,n,r){if(e==="innerHTML"||e==="textContent"){if(n==null)return;t[e]=n;return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?"":String(n);(o!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=iy(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function Kr(t,e,n,r){t.addEventListener(e,n,r)}function fb(t,e,n,r){t.removeEventListener(e,n,r)}const fg=Symbol("_vei");function mb(t,e,n,r,s=null){const i=t[fg]||(t[fg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=gb(e);if(r){const u=i[e]=yb(r,s);Kr(t,a,u,l)}else o&&(fb(t,a,o,l),i[e]=void 0)}}const mg=/(?:Once|Passive|Capture)$/;function gb(t){let e;if(mg.test(t)){e={};let r;for(;r=t.match(mg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Js(t.slice(2)),e]}let Iu=0;const pb=Promise.resolve(),_b=()=>Iu||(pb.then(()=>Iu=0),Iu=Date.now());function yb(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Un(vb(r,n.value),e,5,[r])};return n.value=t,n.attached=_b(),n}function vb(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const gg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Eb=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?ob(t,r,o):e==="style"?ub(t,n,r):uc(e)?ld(e)||mb(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ib(t,e,r,o))?(db(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&dg(t,e,r,o,i,e!=="value")):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),dg(t,e,r,o))};function Ib(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&gg(e)&&De(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gg(e)&&Ct(n)?!1:e in t}const Ai=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pe(e)?n=>dl(e,n):e};function wb(t){t.target.composing=!0}function pg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const br=Symbol("_assign"),Tb={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[br]=Ai(s);const i=r||s.props&&s.props.type==="number";Kr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Pl(a)),t[br](a)}),n&&Kr(t,"change",()=>{t.value=t.value.trim()}),e||(Kr(t,"compositionstart",wb),Kr(t,"compositionend",pg),Kr(t,"change",pg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[br]=Ai(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Pl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},_g={deep:!0,created(t,e,n){t[br]=Ai(n),Kr(t,"change",()=>{const r=t._modelValue,s=Zo(t),i=t.checked,o=t[br];if(pe(r)){const a=dd(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(qi(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(l0(t,i))})},mounted:yg,beforeUpdate(t,e,n){t[br]=Ai(n),yg(t,e,n)}};function yg(t,{value:e,oldValue:n},r){t._modelValue=e,pe(e)?t.checked=dd(e,r.props.value)>-1:qi(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=_a(e,l0(t,!0)))}const O6={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=qi(e);Kr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Pl(Zo(o)):Zo(o));t[br](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,wd(()=>{t._assigning=!1})}),t[br]=Ai(r)},mounted(t,{value:e,modifiers:{number:n}}){vg(t,e)},beforeUpdate(t,e,n){t[br]=Ai(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||vg(t,e)}};function vg(t,e,n){const r=t.multiple,s=pe(e);if(!(r&&!s&&!qi(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=Zo(a);if(r)if(s){const u=typeof l;u==="string"||u==="number"?a.selected=e.some(h=>String(h)===String(l)):a.selected=dd(e,l)>-1}else a.selected=e.has(l);else if(_a(Zo(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Zo(t){return"_value"in t?t._value:t.value}function l0(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const bb=Zt({patchProp:Eb},sb);let Eg;function Ab(){return Eg||(Eg=ST(bb))}const Cb=(...t)=>{const e=Ab().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Rb(r);if(!s)return;const i=e._component;!De(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Sb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Sb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Rb(t){return Ct(t)?document.querySelector(t):t}var Pb=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},c0={},Cn={};let Rd;const kb=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Cn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Cn.getSymbolTotalCodewords=function(e){return kb[e]};Cn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Cn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Rd=e};Cn.isKanjiModeEnabled=function(){return typeof Rd<"u"};Cn.toSJIS=function(e){return Rd(e)};var Ec={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(Ec);function u0(){this.buffer=[],this.length=0}u0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Db=u0;function Ia(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ia.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};Ia.prototype.get=function(t,e){return this.data[t*this.size+e]};Ia.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ia.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Nb=Ia,h0={};(function(t){const e=Cn.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let l=1;l<s-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||s.push([i[a],i[l]]);return s}})(h0);var d0={};const Ob=Cn.getSymbolSize,Ig=7;d0.getPositions=function(e){const n=Ob(e);return[[0,0],[n-Ig,0],[0,n-Ig]]};var f0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,l=0,u=null,h=null;for(let d=0;d<i;d++){a=l=0,u=h=null;for(let m=0;m<i;m++){let g=s.get(d,m);g===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=g,a=1),g=s.get(m,d),g===h?l++:(l>=5&&(o+=e.N1+(l-5)),h=g,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let l=0;l<i-1;l++){const u=s.get(a,l)+s.get(a,l+1)+s.get(a+1,l)+s.get(a+1,l+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,l=0;for(let u=0;u<i;u++){a=l=0;for(let h=0;h<i;h++)a=a<<1&2047|s.get(u,h),h>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|s.get(h,u),h>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let l=0;l<o;l++)i+=s.data[l];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)i.isReserved(l,a)||i.xor(l,a,n(s,l,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let u=0;u<o;u++){i(u),t.applyMask(u,s);const h=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),h<l&&(l=h,a=u)}return a}})(f0);var Ic={};const Zr=Ec,nl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ic.getBlocksCount=function(e,n){switch(n){case Zr.L:return nl[(e-1)*4+0];case Zr.M:return nl[(e-1)*4+1];case Zr.Q:return nl[(e-1)*4+2];case Zr.H:return nl[(e-1)*4+3];default:return}};Ic.getTotalCodewordsCount=function(e,n){switch(n){case Zr.L:return rl[(e-1)*4+0];case Zr.M:return rl[(e-1)*4+1];case Zr.Q:return rl[(e-1)*4+2];case Zr.H:return rl[(e-1)*4+3];default:return}};var m0={},wc={};const xo=new Uint8Array(512),Ll=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)xo[n]=e,Ll[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)xo[n]=xo[n-255]})();wc.log=function(e){if(e<1)throw new Error("log("+e+")");return Ll[e]};wc.exp=function(e){return xo[e]};wc.mul=function(e,n){return e===0||n===0?0:xo[Ll[e]+Ll[n]]};(function(t){const e=wc;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let l=0;l<s.length;l++)i[l]^=e.mul(s[l],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(m0);const g0=m0;function Pd(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Pd.prototype.initialize=function(e){this.degree=e,this.genPoly=g0.generateECPolynomial(this.degree)};Pd.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=g0.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var Lb=Pd,p0={},_s={},kd={};kd.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var sr={};const _0="[0-9]+",Mb="[A-Z $%*+\\-./:]+";let ea="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ea=ea.replace(/u/g,"\\u");const xb="(?:(?![A-Z0-9 $%*+\\-./:]|"+ea+`)(?:.|[\r
]))+`;sr.KANJI=new RegExp(ea,"g");sr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");sr.BYTE=new RegExp(xb,"g");sr.NUMERIC=new RegExp(_0,"g");sr.ALPHANUMERIC=new RegExp(Mb,"g");const Vb=new RegExp("^"+ea+"$"),Fb=new RegExp("^"+_0+"$"),Ub=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");sr.testKanji=function(e){return Vb.test(e)};sr.testNumeric=function(e){return Fb.test(e)};sr.testAlphanumeric=function(e){return Ub.test(e)};(function(t){const e=kd,n=sr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return r(i)}catch{return o}}})(_s);(function(t){const e=Cn,n=Ic,r=Ec,s=_s,i=kd,o=7973,a=e.getBCHDigit(o);function l(m,g,E){for(let A=1;A<=40;A++)if(g<=t.getCapacity(A,E,m))return A}function u(m,g){return s.getCharCountIndicator(m,g)+4}function h(m,g){let E=0;return m.forEach(function(A){const D=u(A.mode,g);E+=D+A.getBitsLength()}),E}function d(m,g){for(let E=1;E<=40;E++)if(h(m,E)<=t.getCapacity(E,g,s.MIXED))return E}t.from=function(g,E){return i.isValid(g)?parseInt(g,10):E},t.getCapacity=function(g,E,A){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=s.BYTE);const D=e.getSymbolTotalCodewords(g),L=n.getTotalCodewordsCount(g,E),k=(D-L)*8;if(A===s.MIXED)return k;const I=k-u(A,g);switch(A){case s.NUMERIC:return Math.floor(I/10*3);case s.ALPHANUMERIC:return Math.floor(I/11*2);case s.KANJI:return Math.floor(I/13);case s.BYTE:default:return Math.floor(I/8)}},t.getBestVersionForData=function(g,E){let A;const D=r.from(E,r.M);if(Array.isArray(g)){if(g.length>1)return d(g,D);if(g.length===0)return 1;A=g[0]}else A=g;return l(A.mode,A.getLength(),D)},t.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let E=g<<12;for(;e.getBCHDigit(E)-a>=0;)E^=o<<e.getBCHDigit(E)-a;return g<<12|E}})(p0);var y0={};const oh=Cn,v0=1335,$b=21522,wg=oh.getBCHDigit(v0);y0.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;oh.getBCHDigit(s)-wg>=0;)s^=v0<<oh.getBCHDigit(s)-wg;return(r<<10|s)^$b};var E0={};const Bb=_s;function Ci(t){this.mode=Bb.NUMERIC,this.data=t.toString()}Ci.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ci.prototype.getLength=function(){return this.data.length};Ci.prototype.getBitsLength=function(){return Ci.getBitsLength(this.data.length)};Ci.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var jb=Ci;const Hb=_s,wu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Si(t){this.mode=Hb.ALPHANUMERIC,this.data=t}Si.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Si.prototype.getLength=function(){return this.data.length};Si.prototype.getBitsLength=function(){return Si.getBitsLength(this.data.length)};Si.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=wu.indexOf(this.data[n])*45;r+=wu.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(wu.indexOf(this.data[n]),6)};var Wb=Si,qb=function(e){for(var n=[],r=e.length,s=0;s<r;s++){var i=e.charCodeAt(s);if(i>=55296&&i<=56319&&r>s+1){var o=e.charCodeAt(s+1);o>=56320&&o<=57343&&(i=(i-55296)*1024+o-56320+65536,s+=1)}if(i<128){n.push(i);continue}if(i<2048){n.push(i>>6|192),n.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128);continue}if(i>=65536&&i<=1114111){n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(i&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const Kb=qb,Gb=_s;function Ri(t){this.mode=Gb.BYTE,typeof t=="string"&&(t=Kb(t)),this.data=new Uint8Array(t)}Ri.getBitsLength=function(e){return e*8};Ri.prototype.getLength=function(){return this.data.length};Ri.prototype.getBitsLength=function(){return Ri.getBitsLength(this.data.length)};Ri.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var zb=Ri;const Yb=_s,Qb=Cn;function Pi(t){this.mode=Yb.KANJI,this.data=t}Pi.getBitsLength=function(e){return e*13};Pi.prototype.getLength=function(){return this.data.length};Pi.prototype.getBitsLength=function(){return Pi.getBitsLength(this.data.length)};Pi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=Qb.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var Jb=Pi,I0={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,u,h,d,m,g,E,A,D;!a.empty();){l=a.pop(),u=l.value,d=l.cost,m=n[u]||{};for(h in m)m.hasOwnProperty(h)&&(g=m[h],E=d+g,A=o[h],D=typeof o[h]>"u",(D||A>E)&&(o[h]=E,a.push(h,E),i[h]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var L=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(L)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(I0);var Xb=I0.exports;(function(t){const e=_s,n=jb,r=Wb,s=zb,i=Jb,o=sr,a=Cn,l=Xb;function u(L){return unescape(encodeURIComponent(L)).length}function h(L,k,I){const S=[];let B;for(;(B=L.exec(I))!==null;)S.push({data:B[0],index:B.index,mode:k,length:B[0].length});return S}function d(L){const k=h(o.NUMERIC,e.NUMERIC,L),I=h(o.ALPHANUMERIC,e.ALPHANUMERIC,L);let S,B;return a.isKanjiModeEnabled()?(S=h(o.BYTE,e.BYTE,L),B=h(o.KANJI,e.KANJI,L)):(S=h(o.BYTE_KANJI,e.BYTE,L),B=[]),k.concat(I,S,B).sort(function(y,_){return y.index-_.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function m(L,k){switch(k){case e.NUMERIC:return n.getBitsLength(L);case e.ALPHANUMERIC:return r.getBitsLength(L);case e.KANJI:return i.getBitsLength(L);case e.BYTE:return s.getBitsLength(L)}}function g(L){return L.reduce(function(k,I){const S=k.length-1>=0?k[k.length-1]:null;return S&&S.mode===I.mode?(k[k.length-1].data+=I.data,k):(k.push(I),k)},[])}function E(L){const k=[];for(let I=0;I<L.length;I++){const S=L[I];switch(S.mode){case e.NUMERIC:k.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:k.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:k.push([S,{data:S.data,mode:e.BYTE,length:u(S.data)}]);break;case e.BYTE:k.push([{data:S.data,mode:e.BYTE,length:u(S.data)}])}}return k}function A(L,k){const I={},S={start:{}};let B=["start"];for(let V=0;V<L.length;V++){const y=L[V],_=[];for(let v=0;v<y.length;v++){const N=y[v],x=""+V+v;_.push(x),I[x]={node:N,lastCount:0},S[x]={};for(let M=0;M<B.length;M++){const R=B[M];I[R]&&I[R].node.mode===N.mode?(S[R][x]=m(I[R].lastCount+N.length,N.mode)-m(I[R].lastCount,N.mode),I[R].lastCount+=N.length):(I[R]&&(I[R].lastCount=N.length),S[R][x]=m(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,k))}}B=_}for(let V=0;V<B.length;V++)S[B[V]].end=0;return{map:S,table:I}}function D(L,k){let I;const S=e.getBestModeForData(L);if(I=e.from(k,S),I!==e.BYTE&&I.bit<S.bit)throw new Error('"'+L+'" cannot be encoded with mode '+e.toString(I)+`.
 Suggested mode is: `+e.toString(S));switch(I===e.KANJI&&!a.isKanjiModeEnabled()&&(I=e.BYTE),I){case e.NUMERIC:return new n(L);case e.ALPHANUMERIC:return new r(L);case e.KANJI:return new i(L);case e.BYTE:return new s(L)}}t.fromArray=function(k){return k.reduce(function(I,S){return typeof S=="string"?I.push(D(S,null)):S.data&&I.push(D(S.data,S.mode)),I},[])},t.fromString=function(k,I){const S=d(k,a.isKanjiModeEnabled()),B=E(S),V=A(B,I),y=l.find_path(V.map,"start","end"),_=[];for(let v=1;v<y.length-1;v++)_.push(V.table[y[v]].node);return t.fromArray(g(_))},t.rawSplit=function(k){return t.fromArray(d(k,a.isKanjiModeEnabled()))}})(E0);const Tc=Cn,Tu=Ec,Zb=Db,eA=Nb,tA=h0,nA=d0,ah=f0,lh=Ic,rA=Lb,Ml=p0,sA=y0,iA=_s,bu=E0;function oA(t,e){const n=t.size,r=nA.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||n<=i+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(i+a,o+l,!0,!0):t.set(i+a,o+l,!1,!0))}}function aA(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function lA(t,e){const n=tA.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(s+o,i+a,!0,!0):t.set(s+o,i+a,!1,!0)}}function cA(t,e){const n=t.size,r=Ml.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+n-8-3,o=(r>>a&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function Au(t,e,n){const r=t.size,s=sA.getEncodedBits(e,n);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(r-15+i,8,o,!0),i<8?t.set(8,r-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(r-8,8,1,!0)}function uA(t,e){const n=t.size;let r=-1,s=n-1,i=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(s,a-l)){let u=!1;o<e.length&&(u=(e[o]>>>i&1)===1),t.set(s,a-l,u),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function hA(t,e,n){const r=new Zb;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),iA.getCharCountIndicator(l.mode,t)),l.write(r)});const s=Tc.getSymbolTotalCodewords(t),i=lh.getTotalCodewordsCount(t,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return dA(r,t,e)}function dA(t,e,n){const r=Tc.getSymbolTotalCodewords(e),s=lh.getTotalCodewordsCount(e,n),i=r-s,o=lh.getBlocksCount(e,n),a=r%o,l=o-a,u=Math.floor(r/o),h=Math.floor(i/o),d=h+1,m=u-h,g=new rA(m);let E=0;const A=new Array(o),D=new Array(o);let L=0;const k=new Uint8Array(t.buffer);for(let y=0;y<o;y++){const _=y<l?h:d;A[y]=k.slice(E,E+_),D[y]=g.encode(A[y]),E+=_,L=Math.max(L,_)}const I=new Uint8Array(r);let S=0,B,V;for(B=0;B<L;B++)for(V=0;V<o;V++)B<A[V].length&&(I[S++]=A[V][B]);for(B=0;B<m;B++)for(V=0;V<o;V++)I[S++]=D[V][B];return I}function fA(t,e,n,r){let s;if(Array.isArray(t))s=bu.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const h=bu.rawSplit(t);u=Ml.getBestVersionForData(h,n)}s=bu.fromString(t,u||40)}else throw new Error("Invalid data");const i=Ml.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=hA(e,n,s),a=Tc.getSymbolSize(e),l=new eA(a);return oA(l,e),aA(l),lA(l,e),Au(l,n,0),e>=7&&cA(l,e),uA(l,o),isNaN(r)&&(r=ah.getBestMask(l,Au.bind(null,l,n))),ah.applyMask(r,l),Au(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}c0.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Tu.M,s,i;return typeof n<"u"&&(r=Tu.from(n.errorCorrectionLevel,Tu.M),s=Ml.from(n.version),i=ah.from(n.maskPattern),n.toSJISFunc&&Tc.setToSJISFunction(n.toSJISFunc)),fA(e,s,r,i)};var w0={},Dd={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,l=t.getScale(o,i),u=Math.floor((o+i.margin*2)*l),h=i.margin*l,d=[i.color.light,i.color.dark];for(let m=0;m<u;m++)for(let g=0;g<u;g++){let E=(m*u+g)*4,A=i.color.light;if(m>=h&&g>=h&&m<u-h&&g<u-h){const D=Math.floor((m-h)/l),L=Math.floor((g-h)/l);A=d[a[D*o+L]?1:0]}r[E++]=A.r,r[E++]=A.g,r[E++]=A.b,r[E]=A.a}}})(Dd);(function(t){const e=Dd;function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let l=a,u=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(u=r()),l=e.getOptions(l);const h=e.getImageWidth(i.modules.size,l),d=u.getContext("2d"),m=d.createImageData(h,h);return e.qrToImageData(m.data,i,l),n(d,u,h),d.putImageData(m,0,0),u},t.renderToDataURL=function(i,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const u=t.render(i,o,l),h=l.type||"image/png",d=l.rendererOpts||{};return u.toDataURL(h,d.quality)}})(w0);var T0={};const mA=Dd;function Tg(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Cu(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function gA(t,e,n){let r="",s=0,i=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!i&&(i=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(r+=i?Cu("M",l+n,.5+u+n):Cu("m",s,0),s=0,i=!1),l+1<e&&t[a+1]||(r+=Cu("h",o),o=0)):s++}return r}T0.render=function(e,n,r){const s=mA.getOptions(n),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,l=s.color.light.a?"<path "+Tg(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+Tg(s.color.dark,"stroke")+' d="'+gA(o,i,s.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,m),m};const pA=Pb,ch=c0,b0=w0,_A=T0;function Nd(t,e,n,r,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!pA())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,u){try{const h=ch.create(n,r);l(t(h,e,r))}catch(h){u(h)}})}try{const l=ch.create(n,r);s(null,t(l,e,r))}catch(l){s(l)}}ch.create;var yA=Nd.bind(null,b0.render),vA=Nd.bind(null,b0.renderToDataURL),EA=Nd.bind(null,function(t,e,n){return _A.render(t,n)});/*! vue-qrcode v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */const bg="ready";var Ag=Ki({name:"VueQrcode",props:{value:{type:String,default:void 0},options:{type:Object,default:void 0},tag:{type:String,default:"canvas"}},emits:[bg],watch:{$props:{deep:!0,immediate:!0,handler(){this.$el&&this.generate()}}},mounted(){this.generate()},methods:{generate(){const t=this.options||{},e=String(this.value),n=()=>{this.$emit(bg,this.$el)};switch(this.tag){case"canvas":yA(this.$el,e,t,r=>{if(r)throw r;n()});break;case"img":vA(e,t,(r,s)=>{if(r)throw r;this.$el.src=s,this.$el.onload=n});break;case"svg":EA(e,t,(r,s)=>{if(r)throw r;const i=document.createElement("div");i.innerHTML=s;const o=i.querySelector("svg");if(o){const{attributes:a,childNodes:l}=o;Object.keys(a).forEach(u=>{const h=a[Number(u)];this.$el.setAttribute(h.name,h.value)}),Object.keys(l).forEach(u=>{const h=l[Number(u)];this.$el.appendChild(h.cloneNode(!0))}),n()}});break}}},render(){return Ea(this.tag,this.$slots.default)}}),qn=(t=>(t.LOADING="loading",t.LOADED="loaded",t.ERROR="error",t))(qn||{});const IA=typeof window<"u"&&window!==null,wA=CA(),TA=Object.prototype.propertyIsEnumerable,Cg=Object.getOwnPropertySymbols;function Vo(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function bA(t){return typeof t=="object"?t===null:typeof t!="function"}function AA(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function CA(){return IA&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function SA(t,...e){if(!Vo(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof Cg!="function")return t;for(const n of e){const r=Cg(n);for(const s of r)TA.call(n,s)&&(t[s]=n[s])}return t}function A0(t,...e){let n=0;for(bA(t)&&(t=e[n++]),t||(t={});n<e.length;n++)if(Vo(e[n])){for(const r of Object.keys(e[n]))AA(r)&&(Vo(t[r])&&Vo(e[n][r])?A0(t[r],e[n][r]):t[r]=e[n][r]);SA(t,e[n])}return t}const Sg="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",RA="",PA={rootMargin:"0px",threshold:0},oi="data-lazy-timeout-id";class kA{constructor(e){this.options={loading:Sg,error:RA,observerOptions:PA,log:!0,lifecycle:{},logLevel:"error"},this._images=new WeakMap,this.config(e)}config(e={}){A0(this.options,e)}mount(e,n){if(!e)return;const{src:r,loading:s,error:i,lifecycle:o,delay:a}=this._valueFormatter(typeof n=="string"?n:n.value);this._lifecycle(qn.LOADING,o,e),e.setAttribute("src",s||Sg),wA||(this.loadImages(e,r,i,o),this._log(()=>{this._logger("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,r,i,o,a)}update(e,n){var a;if(!e)return;(a=this._realObserver(e))==null||a.unobserve(e);const{src:r,error:s,lifecycle:i,delay:o}=this._valueFormatter(typeof n=="string"?n:n.value);this._initIntersectionObserver(e,r,s,i,o)}unmount(e){var n;e&&((n=this._realObserver(e))==null||n.unobserve(e),this._images.delete(e))}loadImages(e,n,r,s){this._setImageSrc(e,n,r,s)}_setImageSrc(e,n,r,s){e.tagName.toLowerCase()==="img"?(n&&e.getAttribute("src")!==n&&e.setAttribute("src",n),this._listenImageStatus(e,()=>{this._lifecycle(qn.LOADED,s,e)},()=>{var i;e.onload=null,this._lifecycle(qn.ERROR,s,e),(i=this._realObserver(e))==null||i.disconnect(),r&&e.getAttribute("src")!==r&&e.setAttribute("src",r),this._log(()=>{this._logger(`Image failed to load!And failed src was: ${n} `)})})):e.style.backgroundImage=`url('${n}')`}_initIntersectionObserver(e,n,r,s,i){var a;const o=this.options.observerOptions;this._images.set(e,new IntersectionObserver(l=>{Array.prototype.forEach.call(l,u=>{i&&i>0?this._delayedIntersectionCallback(e,u,i,n,r,s):this._intersectionCallback(e,u,n,r,s)})},o)),(a=this._realObserver(e))==null||a.observe(e)}_intersectionCallback(e,n,r,s,i){var o;n.isIntersecting&&((o=this._realObserver(e))==null||o.unobserve(n.target),this._setImageSrc(e,r,s,i))}_delayedIntersectionCallback(e,n,r,s,i,o){if(n.isIntersecting){if(n.target.hasAttribute(oi))return;const a=setTimeout(()=>{this._intersectionCallback(e,n,s,i,o),n.target.removeAttribute(oi)},r);n.target.setAttribute(oi,String(a))}else n.target.hasAttribute(oi)&&(clearTimeout(Number(n.target.getAttribute(oi))),n.target.removeAttribute(oi))}_listenImageStatus(e,n,r){e.onload=n,e.onerror=r}_valueFormatter(e){let n=e,r=this.options.loading,s=this.options.error,i=this.options.lifecycle,o=this.options.delay;return Vo(e)&&(n=e.src,r=e.loading||this.options.loading,s=e.error||this.options.error,i=e.lifecycle||this.options.lifecycle,o=e.delay||this.options.delay),{src:n,loading:r,error:s,lifecycle:i,delay:o}}_log(e){this.options.log&&e()}_lifecycle(e,n,r){switch(e){case qn.LOADING:r==null||r.setAttribute("lazy",qn.LOADING),n!=null&&n.loading&&n.loading(r);break;case qn.LOADED:r==null||r.setAttribute("lazy",qn.LOADED),n!=null&&n.loaded&&n.loaded(r);break;case qn.ERROR:r==null||r.setAttribute("lazy",qn.ERROR),n!=null&&n.error&&n.error(r);break}}_realObserver(e){return this._images.get(e)}_logger(e,...n){let r=console.error;switch(this.options.logLevel){case"error":r=console.error;break;case"warn":r=console.warn;break;case"info":r=console.info;break;case"debug":r=console.debug;break}r(e,n)}}const DA={install(t,e){const n=new kA(e);t.config.globalProperties.$Lazyload=n,t.provide("Lazyload",n),t.directive("lazy",{mounted:n.mount.bind(n),updated:n.update.bind(n),unmounted:n.unmount.bind(n)})}},NA="modulepreload",OA=function(t){return"/"+t},Rg={},gr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=OA(a),a in Rg)return;Rg[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":NA,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function LA(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const u=async(d=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await gr(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:e}).then(d=>{i?i("/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return l=h(),u}var Pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},MA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},S0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[h],n[d],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new xA;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VA=function(t){const e=C0(t);return S0.encodeByteArray(e,!0)},xl=function(t){return VA(t).replace(/\./g,"")},R0=function(t){try{return S0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=()=>FA().__FIREBASE_DEFAULTS__,$A=()=>{if(typeof process>"u"||typeof Pg>"u")return;const t=Pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R0(t[1]);return e&&JSON.parse(e)},bc=()=>{try{return UA()||$A()||BA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P0=t=>{var e,n;return(n=(e=bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jA=t=>{const e=P0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k0=()=>{var t;return(t=bc())===null||t===void 0?void 0:t.config},D0=t=>{var e;return(e=bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xl(JSON.stringify(n)),xl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function KA(){var t;const e=(t=bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YA(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QA(){return!KA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JA(){try{return typeof indexedDB=="object"}catch{return!1}}function XA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZA,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wa.prototype.create)}}class wa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?eC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Nr(s,a,r)}}function eC(t,e){return t.replace(tC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tC=/\{\$([^}]+)}/g;function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(kg(i)&&kg(o)){if(!Vl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Io(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rC(t,e){const n=new sC(t,e);return n.subscribe.bind(n)}class sC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Su),s.error===void 0&&(s.error=Su),s.complete===void 0&&(s.complete=Su);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Su(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aC(t){return t===Ns?void 0:t}function lC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const uC={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},hC=xe.INFO,dC={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},fC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Od{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=fC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const mC=(t,e)=>e.some(n=>t instanceof n);let Dg,Ng;function gC(){return Dg||(Dg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pC(){return Ng||(Ng=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N0=new WeakMap,uh=new WeakMap,O0=new WeakMap,Ru=new WeakMap,Ld=new WeakMap;function _C(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&N0.set(n,t)}).catch(()=>{}),Ld.set(e,t),e}function yC(t){if(uh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uh.set(t,e)}let hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vC(t){hh=t(hh)}function EC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return O0.set(r,e.sort?e.sort():[e]),ss(r)}:pC().includes(t)?function(...e){return t.apply(Pu(this),e),ss(N0.get(this))}:function(...e){return ss(t.apply(Pu(this),e))}}function IC(t){return typeof t=="function"?EC(t):(t instanceof IDBTransaction&&yC(t),mC(t,gC())?new Proxy(t,hh):t)}function ss(t){if(t instanceof IDBRequest)return _C(t);if(Ru.has(t))return Ru.get(t);const e=IC(t);return e!==t&&(Ru.set(t,e),Ld.set(e,t)),e}const Pu=t=>Ld.get(t);function wC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ss(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ss(o.result),l.oldVersion,l.newVersion,ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const TC=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],ku=new Map;function Og(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ku.get(e))return ku.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return ku.set(e,i),i}vC(t=>({...t,get:(e,n,r)=>Og(e,n)||t.get(e,n,r),has:(e,n)=>!!Og(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dh="@firebase/app",Lg="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Od("@firebase/app"),SC="@firebase/app-compat",RC="@firebase/analytics-compat",PC="@firebase/analytics",kC="@firebase/app-check-compat",DC="@firebase/app-check",NC="@firebase/auth",OC="@firebase/auth-compat",LC="@firebase/database",MC="@firebase/database-compat",xC="@firebase/functions",VC="@firebase/functions-compat",FC="@firebase/installations",UC="@firebase/installations-compat",$C="@firebase/messaging",BC="@firebase/messaging-compat",jC="@firebase/performance",HC="@firebase/performance-compat",WC="@firebase/remote-config",qC="@firebase/remote-config-compat",KC="@firebase/storage",GC="@firebase/storage-compat",zC="@firebase/firestore",YC="@firebase/vertexai-preview",QC="@firebase/firestore-compat",JC="firebase",XC="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="[DEFAULT]",ZC={[dh]:"fire-core",[SC]:"fire-core-compat",[PC]:"fire-analytics",[RC]:"fire-analytics-compat",[DC]:"fire-app-check",[kC]:"fire-app-check-compat",[NC]:"fire-auth",[OC]:"fire-auth-compat",[LC]:"fire-rtdb",[MC]:"fire-rtdb-compat",[xC]:"fire-fn",[VC]:"fire-fn-compat",[FC]:"fire-iid",[UC]:"fire-iid-compat",[$C]:"fire-fcm",[BC]:"fire-fcm-compat",[jC]:"fire-perf",[HC]:"fire-perf-compat",[WC]:"fire-rc",[qC]:"fire-rc-compat",[KC]:"fire-gcs",[GC]:"fire-gcs-compat",[zC]:"fire-fst",[QC]:"fire-fst-compat",[YC]:"fire-vertex","fire-js":"fire-js",[JC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,eS=new Map,mh=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ki(t){const e=t.name;if(mh.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,t);for(const n of Fl.values())Mg(n,t);for(const n of eS.values())Mg(n,t);return!0}function Md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new wa("app","Firebase",tS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=XC;function L0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw is.create("bad-app-name",{appName:String(s)});if(n||(n=k0()),!n)throw is.create("no-options");const i=Fl.get(s);if(i){if(Vl(n,i.options)&&Vl(r,i.config))return i;throw is.create("duplicate-app",{appName:s})}const o=new cC(s);for(const l of mh.values())o.addComponent(l);const a=new nS(n,r,o);return Fl.set(s,a),a}function M0(t=fh){const e=Fl.get(t);if(!e&&t===fh&&k0())return L0();if(!e)throw is.create("no-app",{appName:t});return e}function os(t,e,n){var r;let s=(r=ZC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(a.join(" "));return}ki(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebase-heartbeat-database",sS=1,ta="firebase-heartbeat-store";let Du=null;function x0(){return Du||(Du=wC(rS,sS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ta)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),Du}async function iS(t){try{const n=(await x0()).transaction(ta),r=await n.objectStore(ta).get(V0(t));return await n.done,r}catch(e){if(e instanceof Nr)Ks.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ks.warn(n.message)}}}async function xg(t,e){try{const r=(await x0()).transaction(ta,"readwrite");await r.objectStore(ta).put(e,V0(t)),await r.done}catch(n){if(n instanceof Nr)Ks.warn(n.message);else{const r=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ks.warn(r.message)}}}function V0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=1024,aS=30*24*60*60*1e3;class lS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=aS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vg(),{heartbeatsToSend:r,unsentEntries:s}=cS(this._heartbeatsCache.heartbeats),i=xl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Vg(){return new Date().toISOString().substring(0,10)}function cS(t,e=oS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Fg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JA()?XA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fg(t){return xl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t){ki(new qs("platform-logger",e=>new AC(e),"PRIVATE")),ki(new qs("heartbeat",e=>new lS(e),"PRIVATE")),os(dh,Lg,t),os(dh,Lg,"esm2017"),os("fire-js","")}hS("");var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,F0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,_){function v(){}v.prototype=_.prototype,y.D=_.prototype,y.prototype=new v,y.prototype.constructor=y,y.C=function(N,x,M){for(var R=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)R[Te-2]=arguments[Te];return _.prototype[x].apply(N,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,_,v){v||(v=0);var N=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)N[x]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(x=0;16>x;++x)N[x]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=y.g[0],v=y.g[1],x=y.g[2];var M=y.g[3],R=_+(M^v&(x^M))+N[0]+3614090360&4294967295;_=v+(R<<7&4294967295|R>>>25),R=M+(x^_&(v^x))+N[1]+3905402710&4294967295,M=_+(R<<12&4294967295|R>>>20),R=x+(v^M&(_^v))+N[2]+606105819&4294967295,x=M+(R<<17&4294967295|R>>>15),R=v+(_^x&(M^_))+N[3]+3250441966&4294967295,v=x+(R<<22&4294967295|R>>>10),R=_+(M^v&(x^M))+N[4]+4118548399&4294967295,_=v+(R<<7&4294967295|R>>>25),R=M+(x^_&(v^x))+N[5]+1200080426&4294967295,M=_+(R<<12&4294967295|R>>>20),R=x+(v^M&(_^v))+N[6]+2821735955&4294967295,x=M+(R<<17&4294967295|R>>>15),R=v+(_^x&(M^_))+N[7]+4249261313&4294967295,v=x+(R<<22&4294967295|R>>>10),R=_+(M^v&(x^M))+N[8]+1770035416&4294967295,_=v+(R<<7&4294967295|R>>>25),R=M+(x^_&(v^x))+N[9]+2336552879&4294967295,M=_+(R<<12&4294967295|R>>>20),R=x+(v^M&(_^v))+N[10]+4294925233&4294967295,x=M+(R<<17&4294967295|R>>>15),R=v+(_^x&(M^_))+N[11]+2304563134&4294967295,v=x+(R<<22&4294967295|R>>>10),R=_+(M^v&(x^M))+N[12]+1804603682&4294967295,_=v+(R<<7&4294967295|R>>>25),R=M+(x^_&(v^x))+N[13]+4254626195&4294967295,M=_+(R<<12&4294967295|R>>>20),R=x+(v^M&(_^v))+N[14]+2792965006&4294967295,x=M+(R<<17&4294967295|R>>>15),R=v+(_^x&(M^_))+N[15]+1236535329&4294967295,v=x+(R<<22&4294967295|R>>>10),R=_+(x^M&(v^x))+N[1]+4129170786&4294967295,_=v+(R<<5&4294967295|R>>>27),R=M+(v^x&(_^v))+N[6]+3225465664&4294967295,M=_+(R<<9&4294967295|R>>>23),R=x+(_^v&(M^_))+N[11]+643717713&4294967295,x=M+(R<<14&4294967295|R>>>18),R=v+(M^_&(x^M))+N[0]+3921069994&4294967295,v=x+(R<<20&4294967295|R>>>12),R=_+(x^M&(v^x))+N[5]+3593408605&4294967295,_=v+(R<<5&4294967295|R>>>27),R=M+(v^x&(_^v))+N[10]+38016083&4294967295,M=_+(R<<9&4294967295|R>>>23),R=x+(_^v&(M^_))+N[15]+3634488961&4294967295,x=M+(R<<14&4294967295|R>>>18),R=v+(M^_&(x^M))+N[4]+3889429448&4294967295,v=x+(R<<20&4294967295|R>>>12),R=_+(x^M&(v^x))+N[9]+568446438&4294967295,_=v+(R<<5&4294967295|R>>>27),R=M+(v^x&(_^v))+N[14]+3275163606&4294967295,M=_+(R<<9&4294967295|R>>>23),R=x+(_^v&(M^_))+N[3]+4107603335&4294967295,x=M+(R<<14&4294967295|R>>>18),R=v+(M^_&(x^M))+N[8]+1163531501&4294967295,v=x+(R<<20&4294967295|R>>>12),R=_+(x^M&(v^x))+N[13]+2850285829&4294967295,_=v+(R<<5&4294967295|R>>>27),R=M+(v^x&(_^v))+N[2]+4243563512&4294967295,M=_+(R<<9&4294967295|R>>>23),R=x+(_^v&(M^_))+N[7]+1735328473&4294967295,x=M+(R<<14&4294967295|R>>>18),R=v+(M^_&(x^M))+N[12]+2368359562&4294967295,v=x+(R<<20&4294967295|R>>>12),R=_+(v^x^M)+N[5]+4294588738&4294967295,_=v+(R<<4&4294967295|R>>>28),R=M+(_^v^x)+N[8]+2272392833&4294967295,M=_+(R<<11&4294967295|R>>>21),R=x+(M^_^v)+N[11]+1839030562&4294967295,x=M+(R<<16&4294967295|R>>>16),R=v+(x^M^_)+N[14]+4259657740&4294967295,v=x+(R<<23&4294967295|R>>>9),R=_+(v^x^M)+N[1]+2763975236&4294967295,_=v+(R<<4&4294967295|R>>>28),R=M+(_^v^x)+N[4]+1272893353&4294967295,M=_+(R<<11&4294967295|R>>>21),R=x+(M^_^v)+N[7]+4139469664&4294967295,x=M+(R<<16&4294967295|R>>>16),R=v+(x^M^_)+N[10]+3200236656&4294967295,v=x+(R<<23&4294967295|R>>>9),R=_+(v^x^M)+N[13]+681279174&4294967295,_=v+(R<<4&4294967295|R>>>28),R=M+(_^v^x)+N[0]+3936430074&4294967295,M=_+(R<<11&4294967295|R>>>21),R=x+(M^_^v)+N[3]+3572445317&4294967295,x=M+(R<<16&4294967295|R>>>16),R=v+(x^M^_)+N[6]+76029189&4294967295,v=x+(R<<23&4294967295|R>>>9),R=_+(v^x^M)+N[9]+3654602809&4294967295,_=v+(R<<4&4294967295|R>>>28),R=M+(_^v^x)+N[12]+3873151461&4294967295,M=_+(R<<11&4294967295|R>>>21),R=x+(M^_^v)+N[15]+530742520&4294967295,x=M+(R<<16&4294967295|R>>>16),R=v+(x^M^_)+N[2]+3299628645&4294967295,v=x+(R<<23&4294967295|R>>>9),R=_+(x^(v|~M))+N[0]+4096336452&4294967295,_=v+(R<<6&4294967295|R>>>26),R=M+(v^(_|~x))+N[7]+1126891415&4294967295,M=_+(R<<10&4294967295|R>>>22),R=x+(_^(M|~v))+N[14]+2878612391&4294967295,x=M+(R<<15&4294967295|R>>>17),R=v+(M^(x|~_))+N[5]+4237533241&4294967295,v=x+(R<<21&4294967295|R>>>11),R=_+(x^(v|~M))+N[12]+1700485571&4294967295,_=v+(R<<6&4294967295|R>>>26),R=M+(v^(_|~x))+N[3]+2399980690&4294967295,M=_+(R<<10&4294967295|R>>>22),R=x+(_^(M|~v))+N[10]+4293915773&4294967295,x=M+(R<<15&4294967295|R>>>17),R=v+(M^(x|~_))+N[1]+2240044497&4294967295,v=x+(R<<21&4294967295|R>>>11),R=_+(x^(v|~M))+N[8]+1873313359&4294967295,_=v+(R<<6&4294967295|R>>>26),R=M+(v^(_|~x))+N[15]+4264355552&4294967295,M=_+(R<<10&4294967295|R>>>22),R=x+(_^(M|~v))+N[6]+2734768916&4294967295,x=M+(R<<15&4294967295|R>>>17),R=v+(M^(x|~_))+N[13]+1309151649&4294967295,v=x+(R<<21&4294967295|R>>>11),R=_+(x^(v|~M))+N[4]+4149444226&4294967295,_=v+(R<<6&4294967295|R>>>26),R=M+(v^(_|~x))+N[11]+3174756917&4294967295,M=_+(R<<10&4294967295|R>>>22),R=x+(_^(M|~v))+N[2]+718787259&4294967295,x=M+(R<<15&4294967295|R>>>17),R=v+(M^(x|~_))+N[9]+3951481745&4294967295,y.g[0]=y.g[0]+_&4294967295,y.g[1]=y.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,y.g[2]=y.g[2]+x&4294967295,y.g[3]=y.g[3]+M&4294967295}r.prototype.u=function(y,_){_===void 0&&(_=y.length);for(var v=_-this.blockSize,N=this.B,x=this.h,M=0;M<_;){if(x==0)for(;M<=v;)s(this,y,M),M+=this.blockSize;if(typeof y=="string"){for(;M<_;)if(N[x++]=y.charCodeAt(M++),x==this.blockSize){s(this,N),x=0;break}}else for(;M<_;)if(N[x++]=y[M++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var _=1;_<y.length-8;++_)y[_]=0;var v=8*this.o;for(_=y.length-8;_<y.length;++_)y[_]=v&255,v/=256;for(this.u(y),y=Array(16),_=v=0;4>_;++_)for(var N=0;32>N;N+=8)y[v++]=this.g[_]>>>N&255;return y};function i(y,_){var v=a;return Object.prototype.hasOwnProperty.call(v,y)?v[y]:v[y]=_(y)}function o(y,_){this.h=_;for(var v=[],N=!0,x=y.length-1;0<=x;x--){var M=y[x]|0;N&&M==_||(v[x]=M,N=!1)}this.g=v}var a={};function l(y){return-128<=y&&128>y?i(y,function(_){return new o([_|0],0>_?-1:0)}):new o([y|0],0>y?-1:0)}function u(y){if(isNaN(y)||!isFinite(y))return d;if(0>y)return D(u(-y));for(var _=[],v=1,N=0;y>=v;N++)_[N]=y/v|0,v*=4294967296;return new o(_,0)}function h(y,_){if(y.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(y.charAt(0)=="-")return D(h(y.substring(1),_));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(_,8)),N=d,x=0;x<y.length;x+=8){var M=Math.min(8,y.length-x),R=parseInt(y.substring(x,x+M),_);8>M?(M=u(Math.pow(_,M)),N=N.j(M).add(u(R))):(N=N.j(v),N=N.add(u(R)))}return N}var d=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-D(this).m();for(var y=0,_=1,v=0;v<this.g.length;v++){var N=this.i(v);y+=(0<=N?N:4294967296+N)*_,_*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E(this))return"0";if(A(this))return"-"+D(this).toString(y);for(var _=u(Math.pow(y,6)),v=this,N="";;){var x=S(v,_).g;v=L(v,x.j(_));var M=((0<v.g.length?v.g[0]:v.h)>>>0).toString(y);if(v=x,E(v))return M+N;for(;6>M.length;)M="0"+M;N=M+N}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function E(y){if(y.h!=0)return!1;for(var _=0;_<y.g.length;_++)if(y.g[_]!=0)return!1;return!0}function A(y){return y.h==-1}t.l=function(y){return y=L(this,y),A(y)?-1:E(y)?0:1};function D(y){for(var _=y.g.length,v=[],N=0;N<_;N++)v[N]=~y.g[N];return new o(v,~y.h).add(m)}t.abs=function(){return A(this)?D(this):this},t.add=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],N=0,x=0;x<=_;x++){var M=N+(this.i(x)&65535)+(y.i(x)&65535),R=(M>>>16)+(this.i(x)>>>16)+(y.i(x)>>>16);N=R>>>16,M&=65535,R&=65535,v[x]=R<<16|M}return new o(v,v[v.length-1]&-2147483648?-1:0)};function L(y,_){return y.add(D(_))}t.j=function(y){if(E(this)||E(y))return d;if(A(this))return A(y)?D(this).j(D(y)):D(D(this).j(y));if(A(y))return D(this.j(D(y)));if(0>this.l(g)&&0>y.l(g))return u(this.m()*y.m());for(var _=this.g.length+y.g.length,v=[],N=0;N<2*_;N++)v[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<y.g.length;x++){var M=this.i(N)>>>16,R=this.i(N)&65535,Te=y.i(x)>>>16,Ke=y.i(x)&65535;v[2*N+2*x]+=R*Ke,k(v,2*N+2*x),v[2*N+2*x+1]+=M*Ke,k(v,2*N+2*x+1),v[2*N+2*x+1]+=R*Te,k(v,2*N+2*x+1),v[2*N+2*x+2]+=M*Te,k(v,2*N+2*x+2)}for(N=0;N<_;N++)v[N]=v[2*N+1]<<16|v[2*N];for(N=_;N<2*_;N++)v[N]=0;return new o(v,0)};function k(y,_){for(;(y[_]&65535)!=y[_];)y[_+1]+=y[_]>>>16,y[_]&=65535,_++}function I(y,_){this.g=y,this.h=_}function S(y,_){if(E(_))throw Error("division by zero");if(E(y))return new I(d,d);if(A(y))return _=S(D(y),_),new I(D(_.g),D(_.h));if(A(_))return _=S(y,D(_)),new I(D(_.g),_.h);if(30<y.g.length){if(A(y)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,N=_;0>=N.l(y);)v=B(v),N=B(N);var x=V(v,1),M=V(N,1);for(N=V(N,2),v=V(v,2);!E(N);){var R=M.add(N);0>=R.l(y)&&(x=x.add(v),M=R),N=V(N,1),v=V(v,1)}return _=L(y,x.j(_)),new I(x,_)}for(x=d;0<=y.l(_);){for(v=Math.max(1,Math.floor(y.m()/_.m())),N=Math.ceil(Math.log(v)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),M=u(v),R=M.j(_);A(R)||0<R.l(y);)v-=N,M=u(v),R=M.j(_);E(M)&&(M=m),x=x.add(M),y=L(y,R)}return new I(x,y)}t.A=function(y){return S(this,y).h},t.and=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],N=0;N<_;N++)v[N]=this.i(N)&y.i(N);return new o(v,this.h&y.h)},t.or=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],N=0;N<_;N++)v[N]=this.i(N)|y.i(N);return new o(v,this.h|y.h)},t.xor=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],N=0;N<_;N++)v[N]=this.i(N)^y.i(N);return new o(v,this.h^y.h)};function B(y){for(var _=y.g.length+1,v=[],N=0;N<_;N++)v[N]=y.i(N)<<1|y.i(N-1)>>>31;return new o(v,y.h)}function V(y,_){var v=_>>5;_%=32;for(var N=y.g.length-v,x=[],M=0;M<N;M++)x[M]=0<_?y.i(M+v)>>>_|y.i(M+v+1)<<32-_:y.i(M+v);return new o(x,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,F0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Bs=o}).apply(typeof Ug<"u"?Ug:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U0,$0,wo,B0,_l,gh,j0,H0,W0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,p){return c==Array.prototype||c==Object.prototype||(c[f]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var f=0;f<c.length;++f){var p=c[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var p=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in p))break e;p=p[j]}c=c[c.length-1],w=p[c],f=f(w),f!=w&&f!=null&&e(p,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var p=0,w=!1,j={next:function(){if(!w&&p<c.length){var W=p++;return{value:f(W,c[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,p){return c.call.apply(c.bind,arguments)}function d(c,f,p){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(f,j)}}return function(){return c.apply(f,arguments)}}function m(c,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function g(c,f){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function E(c,f){function p(){}p.prototype=f.prototype,c.aa=f.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(w,j,W){for(var ne=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ne[Ze-2]=arguments[Ze];return f.prototype[j].apply(w,ne)}}function A(c){const f=c.length;if(0<f){const p=Array(f);for(let w=0;w<f;w++)p[w]=c[w];return p}return[]}function D(c,f){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(l(w)){const j=c.length||0,W=w.length||0;c.length=j+W;for(let ne=0;ne<W;ne++)c[j+ne]=w[ne]}else c.push(w)}}class L{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function S(c){return S[" "](c),c}S[" "]=function(){};var B=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(c,f,p){for(const w in c)f.call(p,c[w],w,c)}function y(c,f){for(const p in c)f.call(void 0,c[p],p,c)}function _(c){const f={};for(const p in c)f[p]=c[p];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,f){let p,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(p in w)c[p]=w[p];for(let W=0;W<v.length;W++)p=v[W],Object.prototype.hasOwnProperty.call(w,p)&&(c[p]=w[p])}}function x(c){var f=1;c=c.split(":");const p=[];for(;0<f&&c.length;)p.push(c.shift()),f--;return c.length&&p.push(c.join(":")),p}function M(c){a.setTimeout(()=>{throw c},0)}function R(){var c=at;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Te{constructor(){this.h=this.g=null}add(f,p){const w=Ke.get();w.set(f,p),this.h?this.h.next=w:this.g=w,this.h=w}}var Ke=new L(()=>new Pe,c=>c.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,Ie=!1,at=new Te,mt=()=>{const c=a.Promise.resolve(void 0);Ce=()=>{c.then(Je)}};var Je=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(p){M(p)}var f=Ke;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}Ie=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return c}();function St(c,f){if(We.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(B){e:{try{S(f.nodeName);var j=!0;break e}catch{}j=!1}j||(f=null)}}else p=="mouseover"?f=c.fromElement:p=="mouseout"&&(f=c.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ut[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&St.aa.h.call(this)}}E(St,We);var ut={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),ie=0;function re(c,f,p,w,j){this.listener=c,this.proxy=null,this.src=f,this.type=p,this.capture=!!w,this.ha=j,this.key=++ie,this.da=this.fa=!1}function ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Oe(c){this.src=c,this.g={},this.h=0}Oe.prototype.add=function(c,f,p,w,j){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ne=P(c,f,w,j);return-1<ne?(f=c[ne],p||(f.fa=!1)):(f=new re(f,this.src,W,!!w,j),f.fa=p,c.push(f)),f};function Be(c,f){var p=f.type;if(p in c.g){var w=c.g[p],j=Array.prototype.indexOf.call(w,f,void 0),W;(W=0<=j)&&Array.prototype.splice.call(w,j,1),W&&(ce(f),c.g[p].length==0&&(delete c.g[p],c.h--))}}function P(c,f,p,w){for(var j=0;j<c.length;++j){var W=c[j];if(!W.da&&W.listener==f&&W.capture==!!p&&W.ha==w)return j}return-1}var T="closure_lm_"+(1e6*Math.random()|0),$={};function Y(c,f,p,w,j){if(Array.isArray(f)){for(var W=0;W<f.length;W++)Y(c,f[W],p,w,j);return null}return p=Q(p),c&&c[z]?c.K(f,p,u(w)?!!w.capture:!!w,j):G(c,f,p,!1,w,j)}function G(c,f,p,w,j,W){if(!f)throw Error("Invalid event type");var ne=u(j)?!!j.capture:!!j,Ze=K(c);if(Ze||(c[T]=Ze=new Oe(c)),p=Ze.add(f,p,w,ne,W),p.proxy)return p;if(w=J(),p.proxy=w,w.src=c,w.listener=p,c.addEventListener)xt||(j=ne),j===void 0&&(j=!1),c.addEventListener(f.toString(),w,j);else if(c.attachEvent)c.attachEvent(C(f.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function J(){function c(p){return f.call(c.src,c.listener,p)}const f=F;return c}function se(c,f,p,w,j){if(Array.isArray(f))for(var W=0;W<f.length;W++)se(c,f[W],p,w,j);else w=u(w)?!!w.capture:!!w,p=Q(p),c&&c[z]?(c=c.i,f=String(f).toString(),f in c.g&&(W=c.g[f],p=P(W,p,w,j),-1<p&&(ce(W[p]),Array.prototype.splice.call(W,p,1),W.length==0&&(delete c.g[f],c.h--)))):c&&(c=K(c))&&(f=c.g[f.toString()],c=-1,f&&(c=P(f,p,w,j)),(p=-1<c?f[c]:null)&&b(p))}function b(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[z])Be(f.i,c);else{var p=c.type,w=c.proxy;f.removeEventListener?f.removeEventListener(p,w,c.capture):f.detachEvent?f.detachEvent(C(p),w):f.addListener&&f.removeListener&&f.removeListener(w),(p=K(f))?(Be(p,c),p.h==0&&(p.src=null,f[T]=null)):ce(c)}}}function C(c){return c in $?$[c]:$[c]="on"+c}function F(c,f){if(c.da)c=!0;else{f=new St(f,this);var p=c.listener,w=c.ha||c.src;c.fa&&b(c),c=p.call(w,f)}return c}function K(c){return c=c[T],c instanceof Oe?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function U(){Fe.call(this),this.i=new Oe(this),this.M=this,this.F=null}E(U,Fe),U.prototype[z]=!0,U.prototype.removeEventListener=function(c,f,p,w){se(this,c,f,p,w)};function H(c,f){var p,w=c.F;if(w)for(p=[];w;w=w.F)p.push(w);if(c=c.M,w=f.type||f,typeof f=="string")f=new We(f,c);else if(f instanceof We)f.target=f.target||c;else{var j=f;f=new We(w,c),N(f,j)}if(j=!0,p)for(var W=p.length-1;0<=W;W--){var ne=f.g=p[W];j=fe(ne,w,!0,f)&&j}if(ne=f.g=c,j=fe(ne,w,!0,f)&&j,j=fe(ne,w,!1,f)&&j,p)for(W=0;W<p.length;W++)ne=f.g=p[W],j=fe(ne,w,!1,f)&&j}U.prototype.N=function(){if(U.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var p=c.g[f],w=0;w<p.length;w++)ce(p[w]);delete c.g[f],c.h--}}this.F=null},U.prototype.K=function(c,f,p,w){return this.i.add(String(c),f,!1,p,w)},U.prototype.L=function(c,f,p,w){return this.i.add(String(c),f,!0,p,w)};function fe(c,f,p,w){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var j=!0,W=0;W<f.length;++W){var ne=f[W];if(ne&&!ne.da&&ne.capture==p){var Ze=ne.listener,Vt=ne.ha||ne.src;ne.fa&&Be(c.i,ne),j=Ze.call(Vt,w)!==!1&&j}}return j&&!w.defaultPrevented}function ge(c,f,p){if(typeof c=="function")p&&(c=m(c,p));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function ze(c){c.g=ge(()=>{c.g=null,c.i&&(c.i=!1,ze(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Rt extends Fe{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(c){Fe.call(this),this.h=c,this.g={}}E(Et,Fe);var Ts=[];function or(c){V(c.g,function(f,p){this.g.hasOwnProperty(p)&&b(f)},c),c.g={}}Et.prototype.N=function(){Et.aa.N.call(this),or(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=a.JSON.stringify,tn=a.JSON.parse,Sn=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ti(){}ti.prototype.h=null;function Uf(c){return c.h||(c.h=c.i())}function $f(){}var eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qc(){We.call(this,"d")}E(Qc,We);function Jc(){We.call(this,"c")}E(Jc,We);var bs={},Bf=null;function Ma(){return Bf=Bf||new U}bs.La="serverreachability";function jf(c){We.call(this,bs.La,c)}E(jf,We);function to(c){const f=Ma();H(f,new jf(f))}bs.STAT_EVENT="statevent";function Hf(c,f){We.call(this,bs.STAT_EVENT,c),this.stat=f}E(Hf,We);function nn(c){const f=Ma();H(f,new Hf(f,c))}bs.Ma="timingevent";function Wf(c,f){We.call(this,bs.Ma,c),this.size=f}E(Wf,We);function no(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function ro(){this.g=!0}ro.prototype.xa=function(){this.g=!1};function HE(c,f,p,w,j,W){c.info(function(){if(c.g)if(W)for(var ne="",Ze=W.split("&"),Vt=0;Vt<Ze.length;Vt++){var qe=Ze[Vt].split("=");if(1<qe.length){var qt=qe[0];qe=qe[1];var Kt=qt.split("_");ne=2<=Kt.length&&Kt[1]=="type"?ne+(qt+"="+qe+"&"):ne+(qt+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+f+`
`+p+`
`+ne})}function WE(c,f,p,w,j,W,ne){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+f+`
`+p+`
`+W+" "+ne})}function ni(c,f,p,w){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+KE(c,p)+(w?" "+w:"")})}function qE(c,f){c.info(function(){return"TIMEOUT: "+f})}ro.prototype.info=function(){};function KE(c,f){if(!c.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var w=p[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<j.length;ne++)j[ne]=""}}}}return ei(p)}catch{return f}}var xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xc;function Va(){}E(Va,ti),Va.prototype.g=function(){return new XMLHttpRequest},Va.prototype.i=function(){return{}},Xc=new Va;function Mr(c,f,p,w){this.j=c,this.i=f,this.l=p,this.R=w||1,this.U=new Et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kf}function Kf(){this.i=null,this.g="",this.h=!1}var Gf={},Zc={};function eu(c,f,p){c.L=1,c.v=Ba(ar(f)),c.m=p,c.P=!0,zf(c,null)}function zf(c,f){c.F=Date.now(),Fa(c),c.A=ar(c.v);var p=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),lm(p.i,"t",w),c.C=0,p=c.j.J,c.h=new Kf,c.g=Cm(c.j,p?f:null,!c.m),0<c.O&&(c.M=new Rt(m(c.Y,c,c.g),c.O)),f=c.U,p=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ts[0]=j.toString()),j=Ts);for(var W=0;W<j.length;W++){var ne=Y(p,j[W],w||f.handleEvent,!1,f.h||f);if(!ne)break;f.g[ne.key]=ne}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),to(),HE(c.i,c.u,c.A,c.l,c.R,c.m)}Mr.prototype.ca=function(c){c=c.target;const f=this.M;f&&lr(c)==3?f.j():this.Y(c)},Mr.prototype.Y=function(c){try{if(c==this.g)e:{const Kt=lr(this.g);var f=this.g.Ba();const ii=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||gm(this.g)))){this.J||Kt!=4||f==7||(f==8||0>=ii?to(3):to(2)),tu(this);var p=this.g.Z();this.X=p;t:if(Yf(this)){var w=gm(this.g);c="";var j=w.length,W=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),so(this);var ne="";break t}this.h.i=new a.TextDecoder}for(f=0;f<j;f++)this.h.h=!0,c+=this.h.i.decode(w[f],{stream:!(W&&f==j-1)});w.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=p==200,WE(this.i,this.u,this.A,this.l,this.R,Kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Vt=this.g;if((Ze=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ze)){var qe=Ze;break t}}qe=null}if(p=qe)ni(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nu(this,p);else{this.o=!1,this.s=3,nn(12),As(this),so(this);break e}}if(this.P){p=!0;let On;for(;!this.J&&this.C<ne.length;)if(On=GE(this,ne),On==Zc){Kt==4&&(this.s=4,nn(14),p=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Gf){this.s=4,nn(15),ni(this.i,this.l,ne,"[Invalid Chunk]"),p=!1;break}else ni(this.i,this.l,On,null),nu(this,On);if(Yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||ne.length!=0||this.h.h||(this.s=1,nn(16),p=!1),this.o=this.o&&p,!p)ni(this.i,this.l,ne,"[Invalid Chunked Response]"),As(this),so(this);else if(0<ne.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),lu(qt),qt.M=!0,nn(11))}}else ni(this.i,this.l,ne,null),nu(this,ne);Kt==4&&As(this),this.o&&!this.J&&(Kt==4?wm(this.j,this):(this.o=!1,Fa(this)))}else uI(this.g),p==400&&0<ne.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),As(this),so(this)}}}catch{}finally{}};function Yf(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function GE(c,f){var p=c.C,w=f.indexOf(`
`,p);return w==-1?Zc:(p=Number(f.substring(p,w)),isNaN(p)?Gf:(w+=1,w+p>f.length?Zc:(f=f.slice(w,w+p),c.C=w+p,f)))}Mr.prototype.cancel=function(){this.J=!0,As(this)};function Fa(c){c.S=Date.now()+c.I,Qf(c,c.I)}function Qf(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=no(m(c.ba,c),f)}function tu(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Mr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(qE(this.i,this.A),this.L!=2&&(to(),nn(17)),As(this),this.s=2,so(this)):Qf(this,this.S-c)};function so(c){c.j.G==0||c.J||wm(c.j,c)}function As(c){tu(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,or(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function nu(c,f){try{var p=c.j;if(p.G!=0&&(p.g==c||ru(p.h,c))){if(!c.K&&ru(p.h,c)&&p.G==3){try{var w=p.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Ka(p),Wa(p);else break e;au(p),nn(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=no(m(p.Za,p),6e3));if(1>=Zf(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ss(p,11)}else if((c.K||p.g==c)&&Ka(p),!k(f))for(j=p.Da.g.parse(f),f=0;f<j.length;f++){let qe=j[f];if(p.T=qe[0],qe=qe[1],p.G==2)if(qe[0]=="c"){p.K=qe[1],p.ia=qe[2];const qt=qe[3];qt!=null&&(p.la=qt,p.j.info("VER="+p.la));const Kt=qe[4];Kt!=null&&(p.Aa=Kt,p.j.info("SVER="+p.Aa));const ii=qe[5];ii!=null&&typeof ii=="number"&&0<ii&&(w=1.5*ii,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const On=c.g;if(On){const za=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var W=w.h;W.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(su(W,W.h),W.h=null))}if(w.D){const cu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;cu&&(w.ya=cu,st(w.I,w.D,cu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var ne=c;if(w.qa=Am(w,w.J?w.ia:null,w.W),ne.K){em(w.h,ne);var Ze=ne,Vt=w.L;Vt&&(Ze.I=Vt),Ze.B&&(tu(Ze),Fa(Ze)),w.g=ne}else Em(w);0<p.i.length&&qa(p)}else qe[0]!="stop"&&qe[0]!="close"||Ss(p,7);else p.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Ss(p,7):ou(p):qe[0]!="noop"&&p.l&&p.l.ta(qe),p.v=0)}}to(4)}catch{}}var zE=class{constructor(c,f){this.g=c,this.map=f}};function Jf(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xf(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zf(c){return c.h?1:c.g?c.g.size:0}function ru(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function su(c,f){c.g?c.g.add(f):c.h=f}function em(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Jf.prototype.cancel=function(){if(this.i=tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tm(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const p of c.g.values())f=f.concat(p.D);return f}return A(c.i)}function YE(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],p=c.length,w=0;w<p;w++)f.push(c[w]);return f}f=[],p=0;for(w in c)f[p++]=c[w];return f}function QE(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var p=0;p<c;p++)f.push(p);return f}f=[],p=0;for(const w in c)f[p++]=w;return f}}}function nm(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var p=QE(c),w=YE(c),j=w.length,W=0;W<j;W++)f.call(void 0,w[W],p&&p[W],c)}var rm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JE(c,f){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var w=c[p].indexOf("="),j=null;if(0<=w){var W=c[p].substring(0,w);j=c[p].substring(w+1)}else W=c[p];f(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Cs){this.h=c.h,Ua(this,c.j),this.o=c.o,this.g=c.g,$a(this,c.s),this.l=c.l;var f=c.i,p=new ao;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),sm(this,p),this.m=c.m}else c&&(f=String(c).match(rm))?(this.h=!1,Ua(this,f[1]||"",!0),this.o=io(f[2]||""),this.g=io(f[3]||"",!0),$a(this,f[4]),this.l=io(f[5]||"",!0),sm(this,f[6]||"",!0),this.m=io(f[7]||"")):(this.h=!1,this.i=new ao(null,this.h))}Cs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(oo(f,im,!0),":");var p=this.g;return(p||f=="file")&&(c.push("//"),(f=this.o)&&c.push(oo(f,im,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(oo(p,p.charAt(0)=="/"?eI:ZE,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",oo(p,nI)),c.join("")};function ar(c){return new Cs(c)}function Ua(c,f,p){c.j=p?io(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function $a(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function sm(c,f,p){f instanceof ao?(c.i=f,rI(c.i,c.h)):(p||(f=oo(f,tI)),c.i=new ao(f,c.h))}function st(c,f,p){c.i.set(f,p)}function Ba(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function io(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oo(c,f,p){return typeof c=="string"?(c=encodeURI(c).replace(f,XE),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function XE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var im=/[#\/\?@]/g,ZE=/[#\?:]/g,eI=/[#\?]/g,tI=/[#\?@]/g,nI=/#/g;function ao(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function xr(c){c.g||(c.g=new Map,c.h=0,c.i&&JE(c.i,function(f,p){c.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=ao.prototype,t.add=function(c,f){xr(this),this.i=null,c=ri(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(f),this.h+=1,this};function om(c,f){xr(c),f=ri(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function am(c,f){return xr(c),f=ri(c,f),c.g.has(f)}t.forEach=function(c,f){xr(this),this.g.forEach(function(p,w){p.forEach(function(j){c.call(f,j,w,this)},this)},this)},t.na=function(){xr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let w=0;w<f.length;w++){const j=c[w];for(let W=0;W<j.length;W++)p.push(f[w])}return p},t.V=function(c){xr(this);let f=[];if(typeof c=="string")am(this,c)&&(f=f.concat(this.g.get(ri(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)f=f.concat(c[p])}return f},t.set=function(c,f){return xr(this),this.i=null,c=ri(this,c),am(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function lm(c,f,p){om(c,f),0<p.length&&(c.i=null,c.g.set(ri(c,f),A(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var w=f[p];const W=encodeURIComponent(String(w)),ne=this.V(w);for(w=0;w<ne.length;w++){var j=W;ne[w]!==""&&(j+="="+encodeURIComponent(String(ne[w]))),c.push(j)}}return this.i=c.join("&")};function ri(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function rI(c,f){f&&!c.j&&(xr(c),c.i=null,c.g.forEach(function(p,w){var j=w.toLowerCase();w!=j&&(om(this,w),lm(this,j,p))},c)),c.j=f}function sI(c,f){const p=new ro;if(a.Image){const w=new Image;w.onload=g(Vr,p,"TestLoadImage: loaded",!0,f,w),w.onerror=g(Vr,p,"TestLoadImage: error",!1,f,w),w.onabort=g(Vr,p,"TestLoadImage: abort",!1,f,w),w.ontimeout=g(Vr,p,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else f(!1)}function iI(c,f){const p=new ro,w=new AbortController,j=setTimeout(()=>{w.abort(),Vr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:w.signal}).then(W=>{clearTimeout(j),W.ok?Vr(p,"TestPingServer: ok",!0,f):Vr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),Vr(p,"TestPingServer: error",!1,f)})}function Vr(c,f,p,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(p)}catch{}}function oI(){this.g=new Sn}function aI(c,f,p){const w=p||"";try{nm(c,function(j,W){let ne=j;u(j)&&(ne=ei(j)),f.push(w+W+"="+encodeURIComponent(ne))})}catch(j){throw f.push(w+"type="+encodeURIComponent("_badmap")),j}}function lo(c){this.l=c.Ub||null,this.j=c.eb||!1}E(lo,ti),lo.prototype.g=function(){return new ja(this.l,this.j)},lo.prototype.i=function(c){return function(){return c}}({});function ja(c,f){U.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(ja,U),t=ja.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,uo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cm(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function cm(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?co(this):uo(this),this.readyState==3&&cm(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,co(this))},t.Qa=function(c){this.g&&(this.response=c,co(this))},t.ga=function(){this.g&&co(this)};function co(c){c.readyState=4,c.l=null,c.j=null,c.v=null,uo(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=f.next();return c.join(`\r
`)};function uo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function um(c){let f="";return V(c,function(p,w){f+=w,f+=":",f+=p,f+=`\r
`}),f}function iu(c,f,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=um(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):st(c,f,p))}function ft(c){U.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ft,U);var lI=/^https?$/i,cI=["POST","PUT"];t=ft.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xc.g(),this.v=this.o?Uf(this.o):Uf(Xc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(W){hm(this,W);return}if(c=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)p.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())p.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(W=>W.toLowerCase()=="content-type"),j=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cI,f,void 0))||w||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of p)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mm(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){hm(this,W)}};function hm(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,dm(c),Ha(c)}function dm(c){c.A||(c.A=!0,H(c,"complete"),H(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,H(this,"complete"),H(this,"abort"),Ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fm(this):this.bb())},t.bb=function(){fm(this)};function fm(c){if(c.h&&typeof o<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)ge(c.Ea,0,c);else if(H(c,"readystatechange"),lr(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var w;if(w=ne===0){var j=String(c.D).match(rm)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),w=!lI.test(j?j.toLowerCase():"")}p=w}if(p)H(c,"complete"),H(c,"success");else{c.m=6;try{var W=2<lr(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",dm(c)}}finally{Ha(c)}}}}function Ha(c,f){if(c.g){mm(c);const p=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||H(c,"ready");try{p.onreadystatechange=w}catch{}}}function mm(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),tn(f)}};function gm(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function uI(c){const f={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(k(c[w]))continue;var p=x(c[w]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const W=f[j]||[];f[j]=W,W.push(p)}y(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(c,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||f}function pm(c){this.Aa=0,this.i=[],this.j=new ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,c),this.cb=ho("retryDelaySeedMs",1e4,c),this.Wa=ho("forwardChannelMaxRetries",2,c),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Jf(c&&c.concurrentRequestLimit),this.Da=new oI,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pm.prototype,t.la=8,t.G=1,t.connect=function(c,f,p,w){nn(0),this.W=c,this.H=f||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=Am(this,null,this.W),qa(this)};function ou(c){if(_m(c),c.G==3){var f=c.U++,p=ar(c.I);if(st(p,"SID",c.K),st(p,"RID",f),st(p,"TYPE","terminate"),fo(c,p),f=new Mr(c,c.j,f),f.L=2,f.v=Ba(ar(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=Cm(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Fa(f)}bm(c)}function Wa(c){c.g&&(lu(c),c.g.cancel(),c.g=null)}function _m(c){Wa(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ka(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qa(c){if(!Xf(c.h)&&!c.s){c.s=!0;var f=c.Ga;Ce||mt(),Ie||(Ce(),Ie=!0),at.add(f,c),c.B=0}}function hI(c,f){return Zf(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=no(m(c.Ga,c,f),Tm(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Mr(this,this.j,c);let W=this.o;if(this.S&&(W?(W=_(W),N(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=vm(this,j,f),p=ar(this.I),st(p,"RID",c),st(p,"CVER",22),this.D&&st(p,"X-HTTP-Session-Id",this.D),fo(this,p),W&&(this.O?f="headers="+encodeURIComponent(String(um(W)))+"&"+f:this.m&&iu(p,this.m,W)),su(this.h,j),this.Ua&&st(p,"TYPE","init"),this.P?(st(p,"$req",f),st(p,"SID","null"),j.T=!0,eu(j,p,null)):eu(j,p,f),this.G=2}}else this.G==3&&(c?ym(this,c):this.i.length==0||Xf(this.h)||ym(this))};function ym(c,f){var p;f?p=f.l:p=c.U++;const w=ar(c.I);st(w,"SID",c.K),st(w,"RID",p),st(w,"AID",c.T),fo(c,w),c.m&&c.o&&iu(w,c.m,c.o),p=new Mr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),f&&(c.i=f.D.concat(c.i)),f=vm(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),su(c.h,p),eu(p,w,f)}function fo(c,f){c.H&&V(c.H,function(p,w){st(f,w,p)}),c.l&&nm({},function(p,w){st(f,w,p)})}function vm(c,f,p){p=Math.min(c.i.length,p);var w=c.l?m(c.l.Na,c.l,c):null;e:{var j=c.i;let W=-1;for(;;){const ne=["count="+p];W==-1?0<p?(W=j[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let Ze=!0;for(let Vt=0;Vt<p;Vt++){let qe=j[Vt].g;const qt=j[Vt].map;if(qe-=W,0>qe)W=Math.max(0,j[Vt].g-100),Ze=!1;else try{aI(qt,ne,"req"+qe+"_")}catch{w&&w(qt)}}if(Ze){w=ne.join("&");break e}}}return c=c.i.splice(0,p),f.D=c,w}function Em(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Ce||mt(),Ie||(Ce(),Ie=!0),at.add(f,c),c.v=0}}function au(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=no(m(c.Fa,c),Tm(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Im(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=no(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Wa(this),Im(this))};function lu(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Im(c){c.g=new Mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=ar(c.qa);st(f,"RID","rpc"),st(f,"SID",c.K),st(f,"AID",c.T),st(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(f,"TO",c.ja),st(f,"TYPE","xmlhttp"),fo(c,f),c.m&&c.o&&iu(f,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Ba(ar(f)),p.m=null,p.P=!0,zf(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Wa(this),au(this),nn(19))};function Ka(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function wm(c,f){var p=null;if(c.g==f){Ka(c),lu(c),c.g=null;var w=2}else if(ru(c.h,f))p=f.D,em(c.h,f),w=1;else return;if(c.G!=0){if(f.o)if(w==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var j=c.B;w=Ma(),H(w,new Wf(w,p)),qa(c)}else Em(c);else if(j=f.s,j==3||j==0&&0<f.X||!(w==1&&hI(c,f)||w==2&&au(c)))switch(p&&0<p.length&&(f=c.h,f.i=f.i.concat(p)),j){case 1:Ss(c,5);break;case 4:Ss(c,10);break;case 3:Ss(c,6);break;default:Ss(c,2)}}}function Tm(c,f){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*f}function Ss(c,f){if(c.j.info("Error code "+f),f==2){var p=m(c.fb,c),w=c.Xa;const j=!w;w=new Cs(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ua(w,"https"),Ba(w),j?sI(w.toString(),p):iI(w.toString(),p)}else nn(2);c.G=0,c.l&&c.l.sa(f),bm(c),_m(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function bm(c){if(c.G=0,c.ka=[],c.l){const f=tm(c.h);(f.length!=0||c.i.length!=0)&&(D(c.ka,f),D(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Am(c,f,p){var w=p instanceof Cs?ar(p):new Cs(p);if(w.g!="")f&&(w.g=f+"."+w.g),$a(w,w.s);else{var j=a.location;w=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;var W=new Cs(null);w&&Ua(W,w),f&&(W.g=f),j&&$a(W,j),p&&(W.l=p),w=W}return p=c.D,f=c.ya,p&&f&&st(w,p,f),st(w,"VER",c.la),fo(c,w),w}function Cm(c,f,p){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ft(new lo({eb:p})):new ft(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sm(){}t=Sm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ga(){}Ga.prototype.g=function(c,f){return new En(c,f)};function En(c,f){U.call(this),this.g=new pm(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!k(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new si(this)}E(En,U),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){ou(this.g)},En.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=ei(c),c=p);f.i.push(new zE(f.Ya++,c)),f.G==3&&qa(f)},En.prototype.N=function(){this.g.l=null,delete this.j,ou(this.g),delete this.g,En.aa.N.call(this)};function Rm(c){Qc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const p in f){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(Rm,Qc);function Pm(){Jc.call(this),this.status=1}E(Pm,Jc);function si(c){this.g=c}E(si,Sm),si.prototype.ua=function(){H(this.g,"a")},si.prototype.ta=function(c){H(this.g,new Rm(c))},si.prototype.sa=function(c){H(this.g,new Pm)},si.prototype.ra=function(){H(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,W0=function(){return new Ga},H0=function(){return Ma()},j0=bs,gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,_l=xa,qf.COMPLETE="complete",B0=qf,$f.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",U.prototype.listen=U.prototype.K,wo=$f,$0=lo,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,U0=ft}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});const $g="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Od("@firebase/firestore");function po(){return Gs.logLevel}function de(t,...e){if(Gs.logLevel<=xe.DEBUG){const n=e.map(xd);Gs.debug(`Firestore (${zi}): ${t}`,...n)}}function Cr(t,...e){if(Gs.logLevel<=xe.ERROR){const n=e.map(xd);Gs.error(`Firestore (${zi}): ${t}`,...n)}}function Di(t,...e){if(Gs.logLevel<=xe.WARN){const n=e.map(xd);Gs.warn(`Firestore (${zi}): ${t}`,...n)}}function xd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: `+t;throw Cr(e),new Error(e)}function nt(t,e){t||we()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class fS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mS{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ar,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new Yt(e)}}class gS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new _S(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ge(t,e){return t<e?-1:t>e?1:0}function Ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new bt(0,0))}static max(){return new Re(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ct extends na{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const ES=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends na{construct(e,n,r){return new $t(e,n,r)}static isValidIdentifier(e){return ES.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new me(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new me(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new me(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new me(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ct.fromString(e))}static fromName(e){return new _e(ct.fromString(e).popFirst(5))}static empty(){return new _e(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ct(e.slice()))}}function IS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new us(s,_e.empty(),e)}function wS(t){return new us(t.readTime,t.key,-1)}class us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new us(Re.min(),_e.empty(),-1)}static max(){return new us(Re.max(),_e.empty(),-1)}}function TS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==bS)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(s=>s?Z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new Z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vd.oe=-1;function Ac(t){return t==null}function Ul(t){return t===0&&1/t==-1/0}function SS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jg(this.data.getIterator())}getIteratorFrom(e){return new jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class jg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Bt($t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new z0("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(nt(!!t),typeof t=="string"){let e=0;const n=RS.exec(t);if(nt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ud(t){const e=t.mapValue.fields.__previous_value__;return Fd(e)?Ud(e):e}function ra(t){const e=hs(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fd(t)?4:kS(t)?9007199254740991:10:we()}function nr(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ra(t).isEqual(ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hs(s.timestampValue),a=hs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zs(s.bytesValue).isEqual(zs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return yt(s.geoPointValue.latitude)===yt(i.geoPointValue.latitude)&&yt(s.geoPointValue.longitude)===yt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return yt(s.integerValue)===yt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=yt(s.doubleValue),a=yt(i.doubleValue);return o===a?Ul(o)===Ul(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ni(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Bg(o)!==Bg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return we()}}function ia(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=yt(i.integerValue||i.doubleValue),l=yt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Hg(t.timestampValue,e.timestampValue);case 4:return Hg(ra(t),ra(e));case 5:return Ge(t.stringValue,e.stringValue);case 6:return function(i,o){const a=zs(i),l=zs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ge(a[u],l[u]);if(h!==0)return h}return Ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ge(yt(i.latitude),yt(o.latitude));return a!==0?a:Ge(yt(i.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=Oi(a[u],l[u]);if(h)return h}return Ge(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ol.mapValue&&o===ol.mapValue)return 0;if(i===ol.mapValue)return 1;if(o===ol.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=Ge(l[d],h[d]);if(m!==0)return m;const g=Oi(a[l[d]],u[h[d]]);if(g!==0)return g}return Ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function Hg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=hs(t),r=hs(e),s=Ge(n.seconds,r.seconds);return s!==0?s:Ge(n.nanos,r.nanos)}function Li(t){return ph(t)}function ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ph(n.fields[o])}`;return s+"}"}(t.mapValue):we()}function _h(t){return!!t&&"integerValue"in t}function $d(t){return!!t&&"arrayValue"in t}function Wg(t){return!!t&&"nullValue"in t}function qg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function Fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fo(n)}setAll(e){let n=$t.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Fo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _n(Fo(this.value))}}function Y0(t){const e=[];return Xs(t.fields,(n,r)=>{const s=new $t([n]);if(yl(r)){const i=Y0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Jt(e,0,Re.min(),Re.min(),Re.min(),_n.empty(),0)}static newFoundDocument(e,n,r,s){return new Jt(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new Jt(e,2,n,Re.min(),Re.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Re.min(),Re.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.position=e,this.inclusive=n}}function Kg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function DS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{}class wt extends Q0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OS(e,n,r):n==="array-contains"?new xS(e,r):n==="in"?new VS(e,r):n==="not-in"?new FS(e,r):n==="array-contains-any"?new US(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LS(e,r):new MS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oi(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends Q0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return J0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J0(t){return t.op==="and"}function X0(t){return NS(t)&&J0(t)}function NS(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function yh(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(X0(t))return t.filters.map(e=>yh(e)).join(",");{const e=t.filters.map(n=>yh(n)).join(",");return`${t.op}(${e})`}}function Z0(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Z0(o,s.filters[a]),!0):!1}(t,e):void we()}function ev(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(ev).join(" ,")+"}"}(t):"Filter"}class OS extends wt{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class LS extends wt{constructor(e,n){super(e,"in",n),this.keys=tv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MS extends wt{constructor(e,n){super(e,"not-in",n),this.keys=tv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class xS extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $d(n)&&ia(n.arrayValue,this.value)}}class VS extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class FS extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}}class US extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$d(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ia(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function zg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $S(t,e,n,r,s,i,o)}function Bd(t){const e=ke(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.ue=n}return e.ue}function jd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Z0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gg(t.startAt,e.startAt)&&Gg(t.endAt,e.endAt)}function vh(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BS(t,e,n,r,s,i,o,a){return new Cc(t,e,n,r,s,i,o,a)}function Sc(t){return new Cc(t)}function Yg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jS(t){return t.collectionGroup!==null}function Uo(t){const e=ke(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bt($t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Bl(i,r))}),n.has($t.keyField().canonicalString())||e.ce.push(new Bl($t.keyField(),r))}return e.ce}function Jn(t){const e=ke(t);return e.le||(e.le=HS(e,Uo(t))),e.le}function HS(t,e){if(t.limitType==="F")return zg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Bl(s.field,i)});const n=t.endAt?new $l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $l(t.startAt.position,t.startAt.inclusive):null;return zg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Eh(t,e,n){return new Cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rc(t,e){return jd(Jn(t),Jn(e))&&t.limitType===e.limitType}function nv(t){return`${Bd(Jn(t))}|lt:${t.limitType}`}function ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ev(s)).join(", ")}]`),Ac(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Li(s)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function Pc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):_e.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Uo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=Kg(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Uo(r),s)||r.endAt&&!function(o,a,l){const u=Kg(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Uo(r),s))}(t,e)}function WS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rv(t){return(e,n)=>{let r=!1;for(const s of Uo(t)){const i=qS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qS(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Oi(l,u):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return G0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new dt(_e.comparator);function Sr(){return KS}const sv=new dt(_e.comparator);function To(...t){let e=sv;for(const n of t)e=e.insert(n.key,n);return e}function iv(t){let e=sv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return $o()}function ov(){return $o()}function $o(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const GS=new dt(_e.comparator),zS=new Bt(_e.comparator);function Me(...t){let e=zS;for(const n of t)e=e.add(n);return e}const YS=new Bt(Ge);function QS(){return YS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ul(e)?"-0":e}}function lv(t){return{integerValue:""+t}}function JS(t,e){return SS(e)?lv(e):av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this._=void 0}}function XS(t,e,n){return t instanceof jl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fd(i)&&(i=Ud(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof oa?uv(t,e):t instanceof aa?hv(t,e):function(s,i){const o=cv(s,i),a=Qg(o)+Qg(s.Pe);return _h(o)&&_h(s.Pe)?lv(a):av(s.serializer,a)}(t,e)}function ZS(t,e,n){return t instanceof oa?uv(t,e):t instanceof aa?hv(t,e):n}function cv(t,e){return t instanceof Hl?function(r){return _h(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class jl extends kc{}class oa extends kc{constructor(e){super(),this.elements=e}}function uv(t,e){const n=dv(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class aa extends kc{constructor(e){super(),this.elements=e}}function hv(t,e){let n=dv(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class Hl extends kc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qg(t){return yt(t.integerValue||t.doubleValue)}function dv(t){return $d(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function eR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof oa&&s instanceof oa||r instanceof aa&&s instanceof aa?Ni(r.elements,s.elements,nr):r instanceof Hl&&s instanceof Hl?nr(r.Pe,s.Pe):r instanceof jl&&s instanceof jl}(t.transform,e.transform)}class tR{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dc{}function fv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hd(t.key,$n.none()):new Ca(t.key,t.data,$n.none());{const n=t.data,r=_n.empty();let s=new Bt($t.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ys(t.key,r,new bn(s.toArray()),$n.none())}}function nR(t,e,n){t instanceof Ca?function(s,i,o){const a=s.value.clone(),l=Xg(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(s,i,o){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Xg(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(mv(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bo(t,e,n,r){return t instanceof Ca?function(i,o,a,l){if(!vl(i.precondition,o))return a;const u=i.value.clone(),h=Zg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(i,o,a,l){if(!vl(i.precondition,o))return a;const u=Zg(i.fieldTransforms,l,o),h=o.data;return h.setAll(mv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return vl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function rR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cv(r.transform,s||null);i!=null&&(n===null&&(n=_n.empty()),n.set(r.field,i))}return n||null}function Jg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ni(r,s,(i,o)=>eR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends Dc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ys extends Dc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xg(t,e,n){const r=new Map;nt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ZS(o,a,n[s]))}return r}function Zg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,XS(i,o,e))}return r}class Hd extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sR extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&nR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ov();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=fv(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ni(this.mutations,e.mutations,(n,r)=>Jg(n,r))&&Ni(this.baseMutations,e.baseMutations,(n,r)=>Jg(n,r))}}class Wd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){nt(e.mutations.length===r.length);let s=function(){return GS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Wd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Ue;function lR(t){switch(t){default:return we();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function gv(t){if(t===void 0)return Cr("GRPC error has no .code"),X.UNKNOWN;switch(t){case _t.OK:return X.OK;case _t.CANCELLED:return X.CANCELLED;case _t.UNKNOWN:return X.UNKNOWN;case _t.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case _t.INTERNAL:return X.INTERNAL;case _t.UNAVAILABLE:return X.UNAVAILABLE;case _t.UNAUTHENTICATED:return X.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case _t.NOT_FOUND:return X.NOT_FOUND;case _t.ALREADY_EXISTS:return X.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return X.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case _t.ABORTED:return X.ABORTED;case _t.OUT_OF_RANGE:return X.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return X.UNIMPLEMENTED;case _t.DATA_LOSS:return X.DATA_LOSS;default:return we()}}(Ue=_t||(_t={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Bs([4294967295,4294967295],0);function ep(t){const e=cR().encode(t),n=new F0;return n.update(e),new Uint8Array(n.digest())}function tp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bs([n,r],0),new Bs([s,i],0)]}class qd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bo(`Invalid padding: ${n}`);if(r<0)throw new bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bs.fromNumber(r)));return s.compare(uR)===1&&(s=new Bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ep(e),[r,s]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qd(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ep(e),[r,s]=tp(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nc(Re.min(),s,new dt(Ge),Sr(),Me())}}class Sa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class pv{constructor(e,n){this.targetId=e,this.me=n}}class _v{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class np{constructor(){this.fe=0,this.ge=sp(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we()}}),new Sa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=sp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sr(),this.qe=rp(),this.Qe=new dt(Ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(vh(i))if(r===0){const o=new _e(i.path);this.Ue(n,o,Jt.newNoDocument(o,Re.min()))}else nt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=zs(r).toUint8Array()}catch(l){if(l instanceof z0)return Di("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qd(o,s,i)}catch(l){return Di(l instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&vh(a.target)){const l=new _e(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Jt.newNoDocument(l,e))}i.be&&(n.set(o,i.Ce()),i.ve())}});let r=Me();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Nc(e,n,this.Qe,this.ke,r);return this.ke=Sr(),this.qe=rp(),this.Qe=new dt(Ge),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new np,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Bt(Ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new np),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rp(){return new dt(_e.comparator)}function sp(){return new dt(_e.comparator)}const dR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class gR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ih(t,e){return t.useProto3Json||Ac(e)?e:{value:e}}function Wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pR(t,e){return Wl(t,e.toTimestamp())}function Xn(t){return nt(!!t),Re.fromTimestamp(function(n){const r=hs(n);return new bt(r.seconds,r.nanos)}(t))}function Kd(t,e){return wh(t,e).canonicalString()}function wh(t,e){const n=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vv(t){const e=ct.fromString(t);return nt(bv(e)),e}function Th(t,e){return Kd(t.databaseId,e.path)}function Nu(t,e){const n=vv(e);if(n.get(1)!==t.databaseId.projectId)throw new me(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(Iv(n))}function Ev(t,e){return Kd(t.databaseId,e)}function _R(t){const e=vv(t);return e.length===4?ct.emptyPath():Iv(e)}function bh(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Iv(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ip(t,e,n){return{name:Th(t,e),fields:n.value.mapValue.fields}}function yR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(nt(h===void 0||typeof h=="string"),en.fromBase64String(h||"")):(nt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),en.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?X.UNKNOWN:gv(u.code);return new me(h,u.message||"")}(o);n=new _v(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nu(t,r.document.name),i=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):Re.min(),a=new _n({mapValue:{fields:r.document.fields}}),l=Jt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new El(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nu(t,r.document),i=r.readTime?Xn(r.readTime):Re.min(),o=Jt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new El([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nu(t,r.document),i=r.removedTargetIds||[];n=new El([],i,s,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new aR(s,i),a=r.targetId;n=new pv(a,o)}}return n}function vR(t,e){let n;if(e instanceof Ca)n={update:ip(t,e.key,e.value)};else if(e instanceof Hd)n={delete:Th(t,e.key)};else if(e instanceof ys)n={update:ip(t,e.key,e.data),updateMask:RR(e.fieldMask)};else{if(!(e instanceof sR))return we();n={verify:Th(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we()}(t,e.precondition)),n}function ER(t,e){return t&&t.length>0?(nt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xn(s.updateTime):Xn(i);return o.isEqual(Re.min())&&(o=Xn(i)),new tR(o,s.transformResults||[])}(n,e))):[]}function IR(t,e){return{documents:[Ev(t,e.path)]}}function wR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ev(t,s);const i=function(u){if(u.length!==0)return Tv(rr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:li(m.field),direction:AR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ih(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function TR(t){let e=_R(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){nt(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=wv(d);return m instanceof rr&&X0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(E){return new Bl(ci(E.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Ac(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,g=d.values||[];return new $l(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,g=d.values||[];return new $l(g,m)}(n.endAt)),BS(e,s,o,i,a,"F",l,u)}function bR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ci(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ci(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ci(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ci(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(ci(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>wv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function AR(t){return dR[t]}function CR(t){return fR[t]}function SR(t){return mR[t]}function li(t){return{fieldPath:t.canonicalString()}}function ci(t){return $t.fromServerFormat(t.fieldPath)}function Tv(t){return t instanceof wt?function(n){if(n.op==="=="){if(qg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NAN"}};if(Wg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NAN"}};if(Wg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(n.field),op:CR(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>Tv(s));return r.length===1?r[0]:{compositeFilter:{op:SR(n.op),filters:r}}}(t):we()}function RR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,s,i=Re.min(),o=Re.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.ct=e}}function kR(t){const e=TR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this._n=new NR}addToCollectionParentIndex(e,n){return this._n.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(us.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class NR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Bt(ct.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Bt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Mi(0)}static Ln(){return new Mi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Bo(r.mutation,s,bn.empty(),bt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=Ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=To();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Sr();const o=$o(),a=function(){return $o()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ys)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Bo(h.mutation,u,h.mutation.getFieldMask(),bt.now())):o.set(u.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new LR(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=$o();let s=new dt((o,a)=>o-a),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||bn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Me()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=ov();h.forEach(m=>{if(!i.has(m)){const g=fv(n.get(m),r.get(m));g!==null&&d.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Z.resolve(Ms());let a=-1,l=i;return o.next(u=>Z.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Me())).next(h=>({batchId:a,changes:iv(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let s=To();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=To();return this.indexManager.getCollectionParents(e,i).next(a=>Z.forEach(a,l=>{const u=function(d,m){return new Cc(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Jt.newInvalidDocument(h)))});let a=To();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Bo(h.mutation,u,bn.empty(),bt.now()),Pc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:kR(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new dt(_e.comparator),this.hr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ms();return Z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const s=Ms(),i=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new dt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Ms(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ms(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return Z.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oR(n,r));let i=this.hr.get(n);i===void 0&&(i=Me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this.Pr=new Bt(kt.Ir),this.Tr=new Bt(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new kt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new _e(new ct([])),r=new kt(n,e),s=new kt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new _e(new ct([])),r=new kt(n,e),s=new kt(n,e+1);let i=Me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new kt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return _e.comparator(e.key,n.key)||Ge(e.pr,n.pr)}static Er(e,n){return Ge(e.pr,n.pr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Bt(kt.Ir)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iR(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return Z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),Z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bt(Ge);return n.forEach(s=>{const i=new kt(s,0),o=new kt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),Z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;_e.isDocumentKey(i)||(i=i.child(""));const o=new kt(new _e(i),0);let a=new Bt(Ge);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.pr)),!0)},o),Z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){nt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Z.forEach(n.mutations,s=>{const i=new kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new kt(n,0),s=this.wr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.vr=e,this.docs=function(){return new dt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Jt.newInvalidDocument(s))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Sr();const o=n.path,a=new _e(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TS(wS(h),r)<=0||(s.has(h.key)||Pc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we()}Fr(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $R(this)}getSize(e){return Z.resolve(this.size)}}class $R extends OR{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.Mr=new Yi(n=>Bd(n),jd),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gd,this.targetCount=0,this.Lr=Mi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Mi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.qn(n),Z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Z.waitFor(i).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.Br={},this.overlays={},this.kr=new Vd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new BR(this),this.indexManager=new DR,this.remoteDocumentCache=function(s){return new UR(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new PR(n),this.$r=new xR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new FR(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new HR(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return Z.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class HR extends AS{constructor(e){super(),this.currentSequenceNumber=e}}class zd{constructor(e){this.persistence=e,this.zr=new Gd,this.jr=null}static Hr(e){return new zd(e)}get Jr(){if(this.jr)return this.jr;throw we()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Jr,r=>{const s=_e.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,Re.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Z.or([()=>Z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Yd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return QA()?8:CS(Ht())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new WR;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(po()<=xe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Z.resolve()):(po()<=xe.DEBUG&&de("QueryEngine","Query:",ai(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(po()<=xe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):Z.resolve())}ji(e,n){if(Yg(n))return Z.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Eh(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,Eh(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,s){return Yg(n)||s.isEqual(Re.min())?Z.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?Z.resolve(null):(po()<=xe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ai(n)),this.es(e,o,n,IS(s,-1)).next(a=>a))})}Zi(e,n){let r=new Bt(rv(e));return n.forEach((s,i)=>{Pc(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return po()<=xe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ai(n)),this.zi.getDocumentsMatchingQuery(e,n,us.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new dt(Ge),this.rs=new Yi(i=>Bd(i),jd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MR(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function GR(t,e,n,r){return new KR(t,e,n,r)}async function Av(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Me();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function zR(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,m=d.keys();let g=Z.resolve();return m.forEach(E=>{g=g.next(()=>h.getEntry(l,E)).next(A=>{const D=u.docVersions.get(E);nt(D!==null),A.version.compareTo(D)<0&&(d.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Cv(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function YR(t,e){const n=ke(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(i,h.addedDocuments,d)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(en.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),function(A,D,L){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,g,h)&&a.push(n.Qr.updateTargetData(i,g))});let l=Sr(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(QR(i,o,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!r.isEqual(Re.min())){const h=n.Qr.getLastRemoteSnapshotVersion(i).next(d=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return Z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.ns=s,i))}function QR(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Sr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):de("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:s}})}function JR(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XR(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,Z.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Ah(t,e,n){const r=ke(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Aa(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function op(t,e,n){const r=ke(t);let s=Re.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ke(l),m=d.rs.get(h);return m!==void 0?Z.resolve(d.ns.get(m)):d.Qr.getTargetData(u,h)}(r,o,Jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:Re.min(),n?i:Me())).next(a=>(ZR(r,WS(e),a),{documents:a,hs:i})))}function ZR(t,e,n){let r=t.ss.get(e)||Re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class ap{constructor(){this.activeTargetIds=QS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eP{constructor(){this.no=new ap,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ap,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function Ou(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class sP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${s}/databases/${i}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Do(){return!1}Co(n,r,s,i,o){const a=Ou(),l=this.vo(n,r.toUriEncodedString());de("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,i,o),this.Mo(n,l,u,s).then(h=>(de("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Di("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}xo(n,r,s,i,o,a){return this.Co(n,r,s,i,o)}Fo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}vo(n,r){const s=nP[n];return`${this.wo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,s){const i=Ou();return new Promise((o,a)=>{const l=new U0;l.setWithCredentials(!0),l.listenOnce(B0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _l.NO_ERROR:const h=l.getResponseJson();de(Gt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case _l.TIMEOUT:de(Gt,`RPC '${e}' ${i} timed out`),a(new me(X.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:const d=l.getStatus();if(de(Gt,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const E=function(D){const L=D.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(L)>=0?L:X.UNKNOWN}(g.status);a(new me(E,g.message))}else a(new me(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new me(X.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{de(Gt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);de(Gt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Oo(e,n,r){const s=Ou(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=W0(),a=H0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new $0({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");de(Gt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let m=!1,g=!1;const E=new rP({lo:D=>{g?de(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(m||(de(Gt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),de(Gt,`RPC '${e}' stream ${s} sending:`,D),d.send(D))},ho:()=>d.close()}),A=(D,L,k)=>{D.listen(L,I=>{try{k(I)}catch(S){setTimeout(()=>{throw S},0)}})};return A(d,wo.EventType.OPEN,()=>{g||(de(Gt,`RPC '${e}' stream ${s} transport opened.`),E.mo())}),A(d,wo.EventType.CLOSE,()=>{g||(g=!0,de(Gt,`RPC '${e}' stream ${s} transport closed`),E.po())}),A(d,wo.EventType.ERROR,D=>{g||(g=!0,Di(Gt,`RPC '${e}' stream ${s} transport errored:`,D),E.po(new me(X.UNAVAILABLE,"The operation could not be completed")))}),A(d,wo.EventType.MESSAGE,D=>{var L;if(!g){const k=D.data[0];nt(!!k);const I=k,S=I.error||((L=I[0])===null||L===void 0?void 0:L.error);if(S){de(Gt,`RPC '${e}' stream ${s} received error:`,S);const B=S.status;let V=function(v){const N=_t[v];if(N!==void 0)return gv(N)}(B),y=S.message;V===void 0&&(V=X.INTERNAL,y="Unknown error status: "+B+" with message "+S.message),g=!0,E.po(new me(V,y)),d.close()}else de(Gt,`RPC '${e}' stream ${s} received:`,k),E.yo(k)}}),A(a,j0.STAT_EVENT,D=>{D.stat===gh.PROXY?de(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===gh.NOPROXY&&de(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function Lu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return new gR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=s,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.Go=r,this.zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Sv(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===n&&this.u_(r,s)},r=>{e(()=>{const s=new me(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iP extends Rv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=yR(this.serializer,e),r=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Xn(o.readTime):Re.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=bh(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=vh(l)?{documents:IR(i,l)}:{query:wR(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yv(i,o.resumeToken);const u=Ih(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=Wl(i,o.snapshotVersion.toTimestamp());const u=Ih(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=bR(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=bh(this.serializer),n.removeTarget=e,this.i_(n)}}class oP extends Rv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=ER(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.A_(r,n)}return nt(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=bh(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vR(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new me(X.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,wh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new me(X.UNKNOWN,i.toString())})}xo(e,n,r,s,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,wh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(X.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class lP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Cr(n),this.y_=!1):de("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io(o=>{r.enqueueAndForget(async()=>{Zs(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ke(l);u.M_.add(4),await Ra(u),u.N_.set("Unknown"),u.M_.delete(4),await Lc(u)}(this))})}),this.N_=new lP(r,s)}}async function Lc(t){if(Zs(t))for(const e of t.x_)await e(!0)}async function Ra(t){for(const e of t.x_)await e(!1)}function Pv(t,e){const n=ke(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Zd(n)?Xd(n):Qi(n).Xo()&&Jd(n,e))}function Qd(t,e){const n=ke(t),r=Qi(n);n.F_.delete(e),r.Xo()&&kv(n,e),n.F_.size===0&&(r.Xo()?r.n_():Zs(n)&&n.N_.set("Unknown"))}function Jd(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qi(t).P_(e)}function kv(t,e){t.L_.xe(e),Qi(t).I_(e)}function Xd(t){t.L_=new hR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qi(t).start(),t.N_.w_()}function Zd(t){return Zs(t)&&!Qi(t).Zo()&&t.F_.size>0}function Zs(t){return ke(t).M_.size===0}function Dv(t){t.L_=void 0}async function uP(t){t.N_.set("Online")}async function hP(t){t.F_.forEach((e,n)=>{Jd(t,e)})}async function dP(t,e){Dv(t),Zd(t)?(t.N_.D_(e),Xd(t)):t.N_.set("Unknown")}async function fP(t,e,n){if(t.N_.set("Online"),e instanceof _v&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.F_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))}(t,e)}catch(r){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ql(t,r)}else if(e instanceof El?t.L_.Ke(e):e instanceof pv?t.L_.He(e):t.L_.We(e),!n.isEqual(Re.min()))try{const r=await Cv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.F_.get(u);h&&i.F_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.F_.get(l);if(!h)return;i.F_.set(l,h.withResumeToken(en.EMPTY_BYTE_STRING,h.snapshotVersion)),kv(i,l);const d=new es(h.target,l,u,h.sequenceNumber);Jd(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){de("RemoteStore","Failed to raise snapshot:",r),await ql(t,r)}}async function ql(t,e,n){if(!Aa(e))throw e;t.M_.add(1),await Ra(t),t.N_.set("Offline"),n||(n=()=>Cv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Lc(t)})}function Nv(t,e){return e().catch(n=>ql(t,n,e))}async function Mc(t){const e=ke(t),n=ds(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;mP(e);)try{const s=await JR(e.localStore,r);if(s===null){e.v_.length===0&&n.n_();break}r=s.batchId,gP(e,s)}catch(s){await ql(e,s)}Ov(e)&&Lv(e)}function mP(t){return Zs(t)&&t.v_.length<10}function gP(t,e){t.v_.push(e);const n=ds(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Ov(t){return Zs(t)&&!ds(t).Zo()&&t.v_.length>0}function Lv(t){ds(t).start()}async function pP(t){ds(t).V_()}async function _P(t){const e=ds(t);for(const n of t.v_)e.d_(n.mutations)}async function yP(t,e,n){const r=t.v_.shift(),s=Wd.from(r,e,n);await Nv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mc(t)}async function vP(t,e){e&&ds(t).E_&&await async function(r,s){if(function(o){return lR(o)&&o!==X.ABORTED}(s.code)){const i=r.v_.shift();ds(r).t_(),await Nv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mc(r)}}(t,e),Ov(t)&&Lv(t)}async function cp(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const r=Zs(n);n.M_.add(3),await Ra(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Lc(n)}async function EP(t,e){const n=ke(t);e?(n.M_.delete(2),await Lc(n)):e||(n.M_.add(2),await Ra(n),n.N_.set("Unknown"))}function Qi(t){return t.B_||(t.B_=function(n,r,s){const i=ke(n);return i.f_(),new iP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:uP.bind(null,t),To:hP.bind(null,t),Ao:dP.bind(null,t),h_:fP.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Zd(t)?Xd(t):t.N_.set("Unknown")):(await t.B_.stop(),Dv(t))})),t.B_}function ds(t){return t.k_||(t.k_=function(n,r,s){const i=ke(n);return i.f_(),new oP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:pP.bind(null,t),Ao:vP.bind(null,t),R_:_P.bind(null,t),A_:yP.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Mc(t)):(await t.k_.stop(),t.v_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ef(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(t,e){if(Cr("AsyncQueue",`${e}: ${t}`),Aa(t))return new me(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.q_=new dt(_e.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):we():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xi{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xi(e,n,vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class wP{constructor(){this.queries=new Yi(e=>nv(e),Rc),this.onlineState="Unknown",this.z_=new Set}}async function nf(t,e){const n=ke(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.W_()&&e.G_()&&(r=2):(i=new IP,r=e.G_()?0:1);try{switch(r){case 0:i.K_=await n.onListen(s,!0);break;case 1:i.K_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=tf(o,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.U_.push(e),e.j_(n.onlineState),i.K_&&e.H_(i.K_)&&sf(n)}async function rf(t,e){const n=ke(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.U_.indexOf(e);o>=0&&(i.U_.splice(o,1),i.U_.length===0?s=e.G_()?0:1:!i.W_()&&e.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TP(t,e){const n=ke(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.U_)a.H_(s)&&(r=!0);o.K_=s}}r&&sf(n)}function bP(t,e,n){const r=ke(t),s=r.queries.get(e);if(s)for(const i of s.U_)i.onError(n);r.queries.delete(e)}function sf(t){t.z_.forEach(e=>{e.next()})}var Ch,hp;(hp=Ch||(Ch={})).J_="default",hp.Cache="cache";class of{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Ch.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.key=e}}class xv{constructor(e){this.key=e}}class AP{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Me(),this.mutatedKeys=Me(),this.Ia=rv(e),this.Ta=new vi(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new up,s=n?n.Ta:this.Ta;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),g=Pc(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;m&&g?m.data.isEqual(g.data)?E!==A&&(r.track({type:3,doc:g}),D=!0):this.Ra(m,g)||(r.track({type:2,doc:g}),D=!0,(l&&this.Ia(g,l)>0||u&&this.Ia(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),D=!0):m&&!g&&(r.track({type:1,doc:m}),D=!0,(l||u)&&(a=!0)),D&&(g?(o=o.add(g),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:i}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(g,E){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return A(g)-A(E)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),s=s!=null&&s;const a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new xi(this.query,e.Ta,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new up,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Me(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new xv(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Mv(r))}),n}pa(e){this.la=e.hs,this.Pa=Me();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return xi.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class CP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SP{constructor(e){this.key=e,this.wa=!1}}class RP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Yi(a=>nv(a),Rc),this.Da=new Map,this.Ca=new Set,this.va=new dt(_e.comparator),this.Fa=new Map,this.Ma=new Gd,this.xa={},this.Oa=new Map,this.Na=Mi.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function PP(t,e,n=!0){const r=jv(t);let s;const i=r.ba.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ya()):s=await Vv(r,e,n,!0),s}async function kP(t,e){const n=jv(t);await Vv(n,e,!0,!1)}async function Vv(t,e,n,r){const s=await XR(t.localStore,Jn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await DP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Pv(t.remoteStore,s),a}async function DP(t,e,n,r,s){t.Ba=(d,m,g)=>async function(A,D,L,k){let I=D.view.da(L);I.Xi&&(I=await op(A.localStore,D.query,!1).then(({documents:y})=>D.view.da(y,I)));const S=k&&k.targetChanges.get(D.targetId),B=k&&k.targetMismatches.get(D.targetId)!=null,V=D.view.applyChanges(I,A.isPrimaryClient,S,B);return fp(A,D.targetId,V.fa),V.snapshot}(t,d,m,g);const i=await op(t.localStore,e,!0),o=new AP(e,i.hs),a=o.da(i.documents),l=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);fp(t,n,u.fa);const h=new CP(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot}async function NP(t,e,n){const r=ke(t),s=r.ba.get(e),i=r.Da.get(s.targetId);if(i.length>1)return r.Da.set(s.targetId,i.filter(o=>!Rc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ah(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qd(r.remoteStore,s.targetId),Sh(r,s.targetId)}).catch(ba)):(Sh(r,s.targetId),await Ah(r.localStore,s.targetId,!0))}async function OP(t,e){const n=ke(t),r=n.ba.get(e),s=n.Da.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qd(n.remoteStore,r.targetId))}async function LP(t,e,n){const r=BP(t);try{const s=await function(o,a){const l=ke(o),u=bt.now(),h=a.reduce((g,E)=>g.add(E.key),Me());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Sr(),A=Me();return l.os.getEntries(g,h).next(D=>{E=D,E.forEach((L,k)=>{k.isValidDocument()||(A=A.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(D=>{d=D;const L=[];for(const k of a){const I=rR(k,d.get(k.key).overlayedDocument);I!=null&&L.push(new ys(k.key,I,Y0(I.value.mapValue),$n.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,L,a)}).next(D=>{m=D;const L=D.applyToLocalDocumentSet(d,A);return l.documentOverlayCache.saveOverlays(g,D.batchId,L)})}).then(()=>({batchId:m.batchId,changes:iv(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new dt(Ge)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,s.batchId,n),await Pa(r,s.changes),await Mc(r.remoteStore)}catch(s){const i=tf(s,"Failed to persist write");n.reject(i)}}async function Fv(t,e){const n=ke(t);try{const r=await YR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Fa.get(i);o&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?nt(o.wa):s.removedDocuments.size>0&&(nt(o.wa),o.wa=!1))}),await Pa(n,r,e)}catch(r){await ba(r)}}function dp(t,e,n){const r=ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ba.forEach((i,o)=>{const a=o.view.j_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ke(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const m of d.U_)m.j_(a)&&(u=!0)}),u&&sf(l)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MP(t,e,n){const r=ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Fa.get(e),i=s&&s.key;if(i){let o=new dt(_e.comparator);o=o.insert(i,Jt.newNoDocument(i,Re.min()));const a=Me().add(i),l=new Nc(Re.min(),new Map,new dt(Ge),o,a);await Fv(r,l),r.va=r.va.remove(i),r.Fa.delete(e),af(r)}else await Ah(r.localStore,e,!1).then(()=>Sh(r,e,n)).catch(ba)}async function xP(t,e){const n=ke(t),r=e.batch.batchId;try{const s=await zR(n.localStore,e);$v(n,r,null),Uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pa(n,s)}catch(s){await ba(s)}}async function VP(t,e,n){const r=ke(t);try{const s=await function(o,a){const l=ke(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(nt(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);$v(r,e,n),Uv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pa(r,s)}catch(s){await ba(s)}}function Uv(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function $v(t,e,n){const r=ke(t);let s=r.xa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function Sh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Bv(t,r)})}function Bv(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Qd(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),af(t))}function fp(t,e,n){for(const r of n)r instanceof Mv?(t.Ma.addReference(r.key,e),FP(t,r)):r instanceof xv?(de("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Bv(t,r.key)):we()}function FP(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(de("SyncEngine","New document in limbo: "+n),t.Ca.add(r),af(t))}function af(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new _e(ct.fromString(e)),r=t.Na.next();t.Fa.set(r,new SP(n)),t.va=t.va.insert(n,r),Pv(t.remoteStore,new es(Jn(Sc(n.path)),r,"TargetPurposeLimboResolution",Vd.oe))}}async function Pa(t,e,n){const r=ke(t),s=[],i=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=Yd.Ki(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Sa.h_(s),await async function(l,u){const h=ke(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Z.forEach(u,m=>Z.forEach(m.qi,g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g)).next(()=>Z.forEach(m.Qi,g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))}catch(d){if(!Aa(d))throw d;de("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const g=h.ns.get(m),E=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(m,A)}}}(r.localStore,i))}async function UP(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const r=await Av(n.localStore,e);n.currentUser=e,function(i,o){i.Oa.forEach(a=>{a.forEach(l=>{l.reject(new me(X.CANCELLED,o))})}),i.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pa(n,r.us)}}function $P(t,e){const n=ke(t),r=n.Fa.get(e);if(r&&r.wa)return Me().add(r.key);{let s=Me();const i=n.Da.get(e);if(!i)return s;for(const o of i){const a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function jv(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MP.bind(null,e),e.Sa.h_=TP.bind(null,e.eventManager),e.Sa.ka=bP.bind(null,e.eventManager),e}function BP(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VP.bind(null,e),e}class mp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Oc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GR(this.persistence,new qR,e.initialUser,this.serializer)}createPersistence(e){return new jR(zd.Hr,this.serializer)}createSharedClientState(e){return new eP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UP.bind(null,this.syncEngine),await EP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wP}()}createDatastore(e){const n=Oc(e.databaseInfo.databaseId),r=function(i){return new sP(i)}(e.databaseInfo);return function(i,o,a,l){return new aP(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new cP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dp(this.syncEngine,n,0),function(){return lp.D()?new lp:new tP}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const d=new RP(s,i,o,a,l,u);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=ke(r);de("RemoteStore","RemoteStore shutting down."),s.M_.add(5),await Ra(s),s.O_.shutdown(),s.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=K0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{de("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(de("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mu(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Av(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qP(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>cp(e.remoteStore,s)),t._onlineComponents=e}function WP(t){return t.name==="FirebaseError"?t.code===X.FAILED_PRECONDITION||t.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function qP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!WP(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await Mu(t,new mp)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await Mu(t,new mp);return t._offlineComponents}async function Hv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await gp(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await gp(t,new jP))),t._onlineComponents}function KP(t){return Hv(t).then(e=>e.syncEngine)}async function Kl(t){const e=await Hv(t),n=e.eventManager;return n.onListen=PP.bind(null,e.syncEngine),n.onUnlisten=NP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OP.bind(null,e.syncEngine),n}function GP(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new lf({next:m=>{o.enqueueAndForget(()=>rf(i,d));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new me(X.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new me(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new of(Sc(a.path),h,{includeMetadataChanges:!0,ra:!0});return nf(i,d)}(await Kl(t),t.asyncQueue,e,n,r)),r.promise}function zP(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new lf({next:m=>{o.enqueueAndForget(()=>rf(i,d)),m.fromCache&&l.source==="server"?u.reject(new me(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new of(a,h,{includeMetadataChanges:!0,ra:!0});return nf(i,d)}(await Kl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e,n){if(!n)throw new me(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YP(t,e,n,r){if(e===!0&&r===!0)throw new me(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _p(t){if(!_e.isDocumentKey(t))throw new me(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yp(t){if(_e.isDocumentKey(t))throw new me(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function An(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cf(t);throw new me(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new me(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new me(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new me(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dS;switch(r.type){case"firstParty":return new pS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pp.get(n);r&&(de("ComponentProvider","Removing Datastore"),pp.delete(n),r.terminate())}(this),Promise.resolve()}}function QP(t,e,n,r={}){var s;const i=(t=An(t,xc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Yt.MOCK_USER;else{a=WA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new me(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Yt(u)}t._authCredentials=new fS(new q0(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ka(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class as extends ka{constructor(e,n,r){super(e,n,Sc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new _e(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Kv(t,e,...n){if(t=Wt(t),qv("collection","path",e),t instanceof xc){const r=ct.fromString(e,...n);return yp(r),new as(t,null,r)}{if(!(t instanceof un||t instanceof as))throw new me(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return yp(r),new as(t.firestore,null,r)}}function Dt(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=K0.newId()),qv("doc","path",e),t instanceof xc){const r=ct.fromString(e,...n);return _p(r),new un(t,null,new _e(r))}{if(!(t instanceof un||t instanceof as))throw new me(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return _p(r),new un(t.firestore,t instanceof as?t.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Sv(this,"async_queue_retry"),this.hu=()=>{const n=Lu();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Lu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Lu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Ar;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Aa(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Cr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const s=ef.createAndSchedule(this,e,n,r,i=>this.Eu(i));return this._u.push(s),s}Pu(){this.au&&we()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function Ep(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fs extends xc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new JP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gv(this),this._firestoreClient.terminate()}}function XP(t,e){const n=typeof t=="object"?t:M0(),r=typeof t=="string"?t:"(default)",s=Md(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jA("firestore");i&&QP(s,...i)}return s}function Vc(t){return t._firestoreClient||Gv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Gv(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new PS(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Wv(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new HP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vi(en.fromBase64String(e))}catch(n){throw new me(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vi(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^__.*__$/;class ek{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class zv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class df{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new df(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Gl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Yv(this.fu)&&ZP.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class tk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oc(e)}Fu(e,n,r,s=!1){return new df({fu:e,methodName:n,vu:r,path:$t.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qv(t){const e=t._freezeSettings(),n=Oc(t._databaseId);return new tk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nk(t,e,n,r,s,i={}){const o=t.Fu(i.merge||i.mergeFields?2:0,e,n,s);ff("Data must be an object, but it was:",o,r);const a=Jv(r,o);let l,u;if(i.merge)l=new bn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Rh(e,d,n);if(!o.contains(m))throw new me(X.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Zv(h,m)||h.push(m)}l=new bn(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new ek(new _n(a),l,u)}class Uc extends uf{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uc}}function rk(t,e,n,r){const s=t.Fu(1,e,n);ff("Data must be an object, but it was:",s,r);const i=[],o=_n.empty();Xs(r,(l,u)=>{const h=mf(e,l,n);u=Wt(u);const d=s.Su(h);if(u instanceof Uc)i.push(h);else{const m=$c(u,d);m!=null&&(i.push(h),o.set(h,m))}});const a=new bn(i);return new zv(o,a,s.fieldTransforms)}function sk(t,e,n,r,s,i){const o=t.Fu(1,e,n),a=[Rh(e,r,n)],l=[s];if(i.length%2!=0)throw new me(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Rh(e,i[m])),l.push(i[m+1]);const u=[],h=_n.empty();for(let m=a.length-1;m>=0;--m)if(!Zv(u,a[m])){const g=a[m];let E=l[m];E=Wt(E);const A=o.Su(g);if(E instanceof Uc)u.push(g);else{const D=$c(E,A);D!=null&&(u.push(g),h.set(g,D))}}const d=new bn(u);return new zv(h,d,o.fieldTransforms)}function $c(t,e){if(Xv(t=Wt(t)))return ff("Unsupported field value:",e,t),Jv(t,e);if(t instanceof uf)return function(r,s){if(!Yv(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=$c(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=bt.fromDate(r);return{timestampValue:Wl(s.serializer,i)}}if(r instanceof bt){const i=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(s.serializer,i)}}if(r instanceof hf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vi)return{bytesValue:yv(s.serializer,r._byteString)};if(r instanceof un){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kd(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${cf(r)}`)}(t,e)}function Jv(t,e){const n={};return G0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(r,s)=>{const i=$c(s,e.pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Xv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof hf||t instanceof Vi||t instanceof un||t instanceof uf)}function ff(t,e,n){if(!Xv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=cf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Rh(t,e,n){if((e=Wt(e))instanceof Fc)return e._internalPath;if(typeof e=="string")return mf(t,e);throw Gl("Field path arguments must be of type string or ",t,!1,void 0,n)}const ik=new RegExp("[~\\*/\\[\\]]");function mf(t,e,n){if(e.search(ik)>=0)throw Gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fc(...e.split("."))._internalPath}catch{throw Gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new me(X.INVALID_ARGUMENT,a+t+l)}function Zv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(t1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ok extends e1{data(){return super.data()}}function t1(t,e){return typeof e=="string"?mf(t,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ak{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new hf(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){const n=hs(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);nt(bv(r));const s=new sa(r.get(1),r.get(3)),i=new _e(r.popFirst(5));return s.isEqual(n)||Cr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class r1 extends e1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(t1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Il extends r1{data(e={}){return super.data(e)}}class s1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ao(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Il(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Il(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Il(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ck(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ck(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){t=An(t,un);const e=An(t.firestore,fs);return GP(Vc(e),t._key).then(n=>i1(e,t,n))}class gf extends ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function uk(t){t=An(t,ka);const e=An(t.firestore,fs),n=Vc(e),r=new gf(e);return n1(t._query),zP(n,t._query).then(s=>new s1(e,r,t,s))}function Gr(t,e,n){t=An(t,un);const r=An(t.firestore,fs),s=lk(t.converter,e);return pf(r,[nk(Qv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function Ip(t,e,n,...r){t=An(t,un);const s=An(t.firestore,fs),i=Qv(s);let o;return o=typeof(e=Wt(e))=="string"||e instanceof Fc?sk(i,"updateDoc",t._key,e,n,r):rk(i,"updateDoc",t._key,e),pf(s,[o.toMutation(t._key,$n.exists(!0))])}function zl(t){return pf(An(t.firestore,fs),[new Hd(t._key,$n.none())])}function wp(t,...e){var n,r,s;t=Wt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ep(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ep(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,u,h;if(t instanceof un)u=An(t.firestore,fs),h=Sc(t._key.path),l={next:d=>{e[o]&&e[o](i1(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=An(t,ka);u=An(d.firestore,fs),h=d._query;const m=new gf(u);l={next:g=>{e[o]&&e[o](new s1(u,m,d,g))},error:e[o+1],complete:e[o+2]},n1(t._query)}return function(m,g,E,A){const D=new lf(A),L=new of(g,D,E);return m.asyncQueue.enqueueAndForget(async()=>nf(await Kl(m),L)),()=>{D.$a(),m.asyncQueue.enqueueAndForget(async()=>rf(await Kl(m),L))}}(Vc(u),h,a,l)}function pf(t,e){return function(r,s){const i=new Ar;return r.asyncQueue.enqueueAndForget(async()=>LP(await KP(r),s,i)),i.promise}(Vc(t),e)}function i1(t,e,n){const r=n.docs.get(e._key),s=new gf(t);return new r1(t,s,e._key,r,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){zi=s})(Gi),ki(new qs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fs(new mS(r.getProvider("auth-internal")),new yS(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new me(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),os($g,"4.6.4",e),os($g,"4.6.4","esm2017")})();class hk{constructor(){he(this,"sortedEvents",Ot([]));he(this,"combinedActs",Ot([]));he(this,"actByUid",et(new Map));he(this,"actByUidNonRef",new Map);he(this,"bands",Ot([]));he(this,"events",Ot([]));he(this,"stages",et([]));he(this,"days",et([]));he(this,"festival",et(void 0));he(this,"eventsByDayUid",et(new Map));he(this,"eventsByStageUid",et(new Map));he(this,"eventByUid",et(new Map));he(this,"eventByUidNonRef",new Map);he(this,"spaceMemberById",Ot(new Map))}}class o1{constructor(e){he(this,"uid");he(this,"suggestorIds",Ot([]));he(this,"likerIds",Ot([]));he(this,"_cardTitle","");this.uid=e}cardThumbnailUrl(){return"https://www.wacken.com/fileadmin/_processed_/5/f/csm_woa_25_bandposter_announcement_240803_fb-page-header_e4c70e6c02.jpg"}cardTitle(){return"unknown"}cardDescription(){return"unknown"}isConcert(){return!1}}class js extends o1{constructor(n){super(`y${n.festival.uid}-event-${n.uid}`);he(this,"data");he(this,"start");he(this,"end");he(this,"columnSpan",1);this.data=n,this.start=parseInt(this.data.start),this.end=parseInt(this.data.end)}cardThumbnailUrl(){for(let n of this.data.artists)for(let r of n.assets)if(r.thumbnail!=null)return`https://wacken.com${r.thumbnail}`;return"https://www.metal-hammer.de/wp-content/uploads/2024/02/10/10/wacken-2024-725x1024.jpg"}cardTitle(){let n=()=>this.data.artists.map(s=>s.title).join(", ")+(this.data.title==null?" ":` ${this.data.title}`);return this._cardTitle=n(),this._cardTitle}cardDescription(){try{return this.data.artists[0].assets[0].biography}catch{}return""}isConcert(){return this.data.performance.title=="Concert"}}class a1 extends o1{constructor(n){super(`y${n.festival.uid}-band-${n.uid}`);he(this,"data");this.data=n}cardThumbnailUrl(){return`https://wacken.com${this.data.thumbnail}`}cardTitle(){return this._cardTitle=this.data.artist.title,this.data.artist.title}cardDescription(){return this.data.biography}isConcert(){return!0}}class l1{constructor(e,n,r,s){he(this,"ctx");he(this,"space");he(this,"id");he(this,"name","");he(this,"color","");he(this,"suggestions",[]);he(this,"likes",[]);he(this,"_data");he(this,"offline",!1);this.ctx=e,this.space=n,this.id=r,this.parseData(s)}isOwner(){return this.id==this.space.id}isLiked(e){return this.likes.includes(e)}isSuggested(e){return this.suggestions.includes(e)}toggleLike(e){var n;if(this.offline){console.error("cannot execute request: member is cached");return}this.isLiked(e)?(this.likes=this.likes.filter(r=>r!==e),this.ctx.client.container.actByUidNonRef.get(e).likerIds=this.ctx.client.container.actByUidNonRef.get(e).likerIds.filter(r=>r!==this.id)):(this.likes.push(e),(n=this.ctx.client.container.actByUidNonRef.get(e))==null||n.likerIds.push(this.id)),this.update()}toggleSuggested(e){var n;if(this.offline){console.error("cannot execute request: member is cached");return}this.isSuggested(e)?(this.suggestions=this.suggestions.filter(r=>r!==e),this.ctx.client.container.actByUidNonRef.get(e).suggestorIds=this.ctx.client.container.actByUidNonRef.get(e).suggestorIds.filter(r=>r!==this.id)):(this.suggestions.push(e),(n=this.ctx.client.container.actByUidNonRef.get(e))==null||n.suggestorIds.push(this.id)),this.update()}calculateTasteMatch(e){let n=[...new Set([...this.likes,...this.suggestions])],r=[...new Set([...(e==null?void 0:e.likes)||[],...(e==null?void 0:e.suggestions)||[]])],s=n.length>r.length?r:n,i=n.length>r.length?n:r,o=0;for(let a of s)i.includes(a)&&o++;return o/s.length*100}async delete(){if(this.offline){console.error("cannot execute request: member is cached");return}try{(await uk(Kv(this.ctx.db,"spaces",this.space.id,"users"))).forEach(n=>{n.data().memberId===this.id&&zl(Dt(this.ctx.db,"spaces",this.space.id,"users",n.id))}),await zl(Dt(this.ctx.db,"spaces",this.space.id,"members",this.id))}catch(e){console.error("error while deleting SpaceMember",e)}}async update(){if(this.offline){console.error("cannot execute request: member is cached");return}try{await Gr(Dt(this.ctx.db,"spaces",this.space.id,"members",this.id),{name:this.name,color:this.color,suggestions:this.suggestions,likes:this.likes})}catch(e){console.error("error while updating SpaceMember",e)}}parseData(e){var n,r,s,i,o;this.name=e.name,this.color=e.color,((n=this.ctx.client.container.festival.value)==null?void 0:n.uid)===void 0?(this.suggestions=e.suggestions,this.likes=e.likes):(this.suggestions=((s=(r=e.suggestions)==null?void 0:r.filter)==null?void 0:s.call(r,a=>{var l;return(a+"").startsWith(`y${(l=this.ctx.client.container.festival.value)==null?void 0:l.uid}`)}))||e.suggestions,this.likes=((o=(i=e.likes)==null?void 0:i.filter)==null?void 0:o.call(i,a=>{var l;return(a+"").startsWith(`y${(l=this.ctx.client.container.festival.value)==null?void 0:l.uid}`)}))||e.likes),this._data=e}}class c1{constructor(e,n){he(this,"ctx");he(this,"space");if(this.ctx=e,n instanceof jo)this.space=n;else if(typeof n=="string"){let r=JSON.parse(n);this.space=new jo(e,r.id,()=>{},!0),this.space.name=r.name,this.space.authKey=r.authKey,this.space.self.value=this.createMember(r.self),this.space.selfMemberId=r.selfMemberId;for(let s of r.members)this.space.members.push(this.createMember(s));this.space.publishMembersToContainer(),this.space.loaded.value=!0,this.space.cached.value=!0}else throw"INVALID_DATA_VALUE"}serialize(){return JSON.stringify({id:this.space.id,name:this.space.name,authKey:this.space.authKey,self:this.serializeMember(this.space.self.value),selfMemberId:this.space.selfMemberId,members:this.space.members.map(e=>this.serializeMember(e))})}createMember(e){if(e==null)return;let n=new l1(this.ctx,this.space,e.id,e);return n.offline=!0,n}serializeMember(e){if(e!=null)return{id:e.id,...e._data}}}class jo{constructor(e,n,r,s=!1){he(this,"ctx");he(this,"id");he(this,"name","");he(this,"authKey","");he(this,"onLeave");he(this,"selfMemberId");he(this,"self",et());he(this,"members",Ot([]));he(this,"loaded",et(!1));he(this,"cached",et(!1));he(this,"_selfCache");this.ctx=e,this.id=n,this.onLeave=r,s||this.init(),this._selfCache=new c1(this.ctx,this)}generateInvite(e){var r,s;const n=new URLSearchParams({space:this.id,key:this.authKey,name:this.name,host:((r=this.self.value)==null?void 0:r.name)||((s=this.ctx.auth.currentUser)==null?void 0:s.displayName)||""});return{title:e("brand.name"),text:e("brand.share.invite"),url:`${window.location.origin}/join?${n.toString()}`}}async updateName(e){if(this.cached.value){console.error("cannot execute request: space is cached");return}try{await Ip(Dt(this.ctx.db,"spaces",this.id),{name:e})}catch(n){console.error("error while updating space name",n)}}async resetInvite(){if(this.cached.value){console.error("cannot execute request: space is cached");return}try{await Ip(Dt(this.ctx.db,"spaces",this.id),{authKey:window.crypto.randomUUID()})}catch(e){console.error("error while resetting invite key",e)}}async setMemberId(e,n){await Gr(Dt(this.ctx.db,"spaces",this.id,"users",e),{memberId:n}),this.selfMemberId=n,this.findSelf()}async createMember(e,n){let r=window.crypto.randomUUID();return await Gr(Dt(this.ctx.db,"spaces",this.id,"members",r),{name:e,color:n,likes:[],suggestions:[]}),r}async init(){try{let n=(await Ph(Dt(this.ctx.db,"spaces",this.id))).data();if(n==null)throw"DATA_UNDEFINED_ERROR";this.parseData(n),this.listenMembers();let s=(await Ph(Dt(this.ctx.db,"spaces",this.id,"users",this.ctx.currentUser.value.uid))).data();s!=null&&(this.selfMemberId=s.memberId,this.findSelf()),wp(Dt(this.ctx.db,"spaces",this.id),i=>{i.data()!==void 0&&this.parseData(i.data())}),this.authKey.length<3&&this.resetInvite()}catch(e){e.code==="permission-denied"&&(this.onLeave(),console.error("leaving space due to permission-denied error")),console.error("could not fetch space info",e)}console.dir(this)}findSelf(){if(this.selfMemberId!=null)try{this.self.value=this.members.find(e=>e.id==this.selfMemberId),console.info("self",this.self.value)}catch(e){console.error(e)}}async listenMembers(){let e=Kv(this.ctx.db,"spaces",this.id,"members");wp(e,n=>{console.info("users collection updated",n.size),this.members=[],n.forEach(r=>{this.members.push(new l1(this.ctx,this,r.id,r.data()))}),this.findSelf(),this.members=this.members.filter(r=>r.name!=null&&r.color!=null&&r.likes!=null&&r.suggestions!=null),this.publishMembersToContainer(),this.loaded.value=!0,this.updateCache()})}publishMembersToContainer(){this.members.forEach(e=>{this.ctx.client.container.spaceMemberById.set(e.id,e)});for(let e of this.ctx.client.container.combinedActs)e.suggestorIds=this.members.filter(n=>n.suggestions.includes(e.uid)).map(n=>n.id),e.likerIds=this.members.filter(n=>n.likes.includes(e.uid)).map(n=>n.id)}parseData(e){this.name=e.name,this.authKey=e.authKey,this.updateCache()}updateCache(){localStorage.setItem("cachedSpace",this._selfCache.serialize())}}class dk{constructor(e){he(this,"ctx");he(this,"container",new hk);he(this,"hasSpace",et(!1));he(this,"space");he(this,"offline",et(!1));this.ctx=e,this.ctx.client=this,setTimeout(()=>{this.ctx.showOfflineButton.value=!0},1500),this.ctx.auth.onAuthStateChanged(async n=>{if(n!=null)try{let r=await this.getUserData();if(this.offline.value==!0)return;if(this.ctx.showOfflineButton.value=!1,e.dontAutoCreateSpace!==!0&&(r==null||r.spaceId==null)){await this.createSpace();return}if(r==null)return;this.space=Ot(new jo(e,r.spaceId,()=>{this.leaveSpace()}))}catch(r){console.error("error while trying to fetch userdata",r),this.activateOfflineMode()}})}activateOfflineMode(){this.ctx.loaded.value=!0,localStorage.getItem("cachedSpace")!=null&&(this.space=Ot(new c1(this.ctx,localStorage.getItem("cachedSpace")).space)),this.offline.value=!0}async setUserData(e){await Gr(Dt(this.ctx.db,"users",this.ctx.currentUser.value.uid),{spaceId:e.spaceId})}async getUserData(){let n=(await Ph(Dt(this.ctx.db,"users",this.ctx.currentUser.value.uid))).data();if(n!=null)return{spaceId:n.spaceId}}async registerUser(e,n){if(this.ctx.currentUser.value==null)throw"UNDEFINED_USER";await Gr(Dt(this.ctx.db,"spaces",e,"users",this.ctx.currentUser.value.uid),{authKey:n}),await this.setUserData({spaceId:e}),setTimeout(()=>{this.space=Ot(new jo(this.ctx,e,()=>{this.leaveSpace()}))},500)}async createSpace(){var e;if(this.ctx.currentUser.value==null)throw"UNDEFINED_USER";console.info("creating new space"),await Gr(Dt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid),{name:"Our space",authKey:""}),await Gr(Dt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid,"members",this.ctx.currentUser.value.uid),{name:((e=this.ctx.currentUser.value)==null?void 0:e.displayName)||"Admin",color:"red",likes:[],suggestions:[]}),await this.setUserData({spaceId:this.ctx.currentUser.value.uid}),await Gr(Dt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid,"users",this.ctx.currentUser.value.uid),{memberId:this.ctx.currentUser.value.uid}),this.space=Ot(new jo(this.ctx,this.ctx.currentUser.value.uid,()=>{this.leaveSpace()}))}async leaveSpace(){console.info("leaving space, creating new private space ..."),this.space=void 0,await this.createSpace(),window.location.reload()}async deleteAccount(){var e;this.ctx.currentUser.value!=null&&(console.info("deleting account and data ..."),await zl(Dt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid)),await zl(Dt(this.ctx.db,"users",this.ctx.currentUser.value.uid)),await((e=this.ctx.currentUser.value)==null?void 0:e.delete()))}async fetchAll(){await this.fetchBands(),await this.fetchEvents(),this.container.combinedActs.push(...this.container.events);let e=this.container.events.flatMap(n=>n.data.artists.map(r=>r.uid));this.container.combinedActs.push(...this.container.bands.filter(n=>!e.includes(n.data.artist.uid))),this.container.combinedActs.sort((n,r)=>n.cardTitle().localeCompare(r.cardTitle())),this.ctx.authLoaded.value?this.ctx.loaded.value=!0:this.ctx.auth.onAuthStateChanged(n=>{this.ctx.loaded.value=!0})}async fetchEvents(){var s,i,o,a;let e=[],n=[];const r=await gr(()=>import("./events-complete-Id6sFHAw.js"),[]);this.container.events=Ot([]);for(let l of r.default){if(l.festival.uid!==this.ctx.currentFestivalUid)continue;let u=new js(l);this.container.events.push(u),this.container.eventByUid.value.set(u.uid,u),this.container.eventByUidNonRef.set(u.uid,u),this.container.actByUid.value.set(u.uid,u),this.container.actByUidNonRef.set(u.uid,u),e.includes(u.data.festivalday.uid)||(this.container.days.value.push(u.data.festivalday),e.push(u.data.festivalday.uid),this.container.eventsByDayUid.value.set(u.data.festivalday.uid,[])),this.container.eventsByStageUid.value.get(u.data.stage.uid)===void 0&&this.container.eventsByStageUid.value.set(u.data.stage.uid,[]),(s=this.container.eventsByStageUid.value.get(u.data.stage.uid))==null||s.push(u),(i=this.container.eventsByDayUid.value.get(u.data.festivalday.uid))==null||i.push(u),n.includes(u.data.stage.uid)||(this.container.stages.value.push(u.data.stage),n.push(u.data.stage.uid));let h=(a=(o=l.artists[0])==null?void 0:o.assets[0])==null?void 0:a.festival;h!=null&&(this.container.festival.value=h)}this.container.stages.value.sort((l,u)=>parseInt(l.sorting)-parseInt(u.sorting)),this.container.sortedEvents.push(...this.container.events.sort((l,u)=>l.cardTitle().localeCompare(u.cardTitle())))}async fetchBands(){const e=await gr(()=>import("./bands-CMeHDVPP.js"),[]);this.container.events=Ot([]);for(let n of e.default){if(n.festival.uid!==this.ctx.currentFestivalUid)continue;let r=new a1(n);this.container.bands.push(r),this.container.actByUid.value.set(r.uid,r),this.container.actByUidNonRef.set(r.uid,r),this.container.festival.value=n.festival}}}function _f(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function u1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fk=u1,h1=new wa("auth","Firebase",u1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Od("@firebase/auth");function mk(t,...e){Yl.logLevel<=xe.WARN&&Yl.warn(`Auth (${Gi}): ${t}`,...e)}function wl(t,...e){Yl.logLevel<=xe.ERROR&&Yl.error(`Auth (${Gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw vf(t,...e)}function Bn(t,...e){return vf(t,...e)}function yf(t,e,n){const r=Object.assign(Object.assign({},fk()),{[e]:n});return new wa("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return yf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nn(t,"argument-error"),yf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return h1.create(t,...e)}function Ee(t,e,...n){if(!t)throw vf(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wl(e),new Error(e)}function Rr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pk(){return Tp()==="http:"||Tp()==="https:"}function Tp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pk()||GA()||"connection"in navigator)?navigator.onLine:!0}function yk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rr(n>e,"Short delay should be less than long delay!"),this.isMobile=qA()||zA()}get(){return _k()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){Rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Da(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Or(t,e,n,r,s={}){return f1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ta(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),d1.fetch()(m1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function f1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vk),e);try{const s=new wk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ll(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ll(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ll(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ll(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yf(t,h,u);Nn(t,h)}}catch(s){if(s instanceof Nr)throw s;Nn(t,"network-request-failed",{message:String(s)})}}async function Na(t,e,n,r,s={}){const i=await Or(t,e,n,r,s);return"mfaPendingCredential"in i&&Nn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function m1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ef(t.config,s):`${t.config.apiScheme}://${s}`}function Ik(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),Ek.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bn(t,e,r);return s.customData._tokenResponse=n,s}function bp(t){return t!==void 0&&t.enterprise!==void 0}class Tk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ik(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bk(t,e){return Or(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(t,e){return Or(t,"POST","/v1/accounts:delete",e)}async function g1(t,e){return Or(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ck(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),s=If(r);Ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ho(xu(s.auth_time)),issuedAtTime:Ho(xu(s.iat)),expirationTime:Ho(xu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xu(t){return Number(t)*1e3}function If(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=R0(n);return s?JSON.parse(s):(wl("Failed to decode base64 JWT payload"),null)}catch(s){return wl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ap(t){const e=If(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&Sk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Sk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Fi(t,g1(n,{idToken:r}));Ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?p1(i.providerUserInfo):[],a=kk(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Dh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Pk(t){const e=Wt(t);await Ql(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function p1(t){return t.map(e=>{var{providerId:n}=e,r=_f(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e){const n=await f1(t,{},async()=>{const r=Ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=m1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",d1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Nk(t,e){return Or(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ap(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Ap(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Dk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ei;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=_f(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Fi(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ck(this,e)}reload(){return Pk(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ql(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Fi(this,Ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,L=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:S,isAnonymous:B,providerData:V,stsTokenManager:y}=n;Ee(I&&y,e,"internal-error");const _=Ei.fromJSON(this.name,y);Ee(typeof I=="string",e,"internal-error"),Ur(d,e.name),Ur(m,e.name),Ee(typeof S=="boolean",e,"internal-error"),Ee(typeof B=="boolean",e,"internal-error"),Ur(g,e.name),Ur(E,e.name),Ur(A,e.name),Ur(D,e.name),Ur(L,e.name),Ur(k,e.name);const v=new Er({uid:I,auth:e,email:m,emailVerified:S,displayName:d,isAnonymous:B,photoURL:E,phoneNumber:g,tenantId:A,stsTokenManager:_,createdAt:L,lastLoginAt:k});return V&&Array.isArray(V)&&(v.providerData=V.map(N=>Object.assign({},N))),D&&(v._redirectEventId=D),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ei;s.updateFromServerResponse(n);const i=new Er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ql(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?p1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ei;a.updateFromIdToken(r);const l=new Er({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Dh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=new Map;function Ir(t){Rr(t instanceof Function,"Expected a class definition");let e=Cp.get(t);return e?(Rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_1.type="NONE";const Sp=_1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ii{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ii(Ir(Sp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ir(Sp);const o=Tl(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Er._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ii(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ii(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w1(e))return"Blackberry";if(T1(e))return"Webos";if(wf(e))return"Safari";if((e.includes("chrome/")||v1(e))&&!e.includes("edge/"))return"Chrome";if(I1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y1(t=Ht()){return/firefox\//i.test(t)}function wf(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function v1(t=Ht()){return/crios\//i.test(t)}function E1(t=Ht()){return/iemobile/i.test(t)}function I1(t=Ht()){return/android/i.test(t)}function w1(t=Ht()){return/blackberry/i.test(t)}function T1(t=Ht()){return/webos/i.test(t)}function Bc(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ok(t=Ht()){var e;return Bc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Lk(){return YA()&&document.documentMode===10}function b1(t=Ht()){return Bc(t)||I1(t)||T1(t)||w1(t)||/windows phone/i.test(t)||E1(t)}function Mk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e=[]){let n;switch(t){case"Browser":n=Rp(Ht());break;case"Worker":n=`${Rp(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e={}){return Or(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=6;class Uk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Fk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pp(this),this.idTokenSubscription=new Pp(this),this.beforeStateQueue=new xk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ii.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await g1(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ql(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(Zn(this));const n=e?Wt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vk(this),n=new Uk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Nk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ii.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lr(t){return Wt(t)}class Pp{constructor(e){this.auth=e,this.observer=null,this.addObserver=rC(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bk(t){jc=t}function C1(t){return jc.loadJS(t)}function jk(){return jc.recaptchaEnterpriseScript}function Hk(){return jc.gapiScript}function Wk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qk="recaptcha-enterprise",Kk="NO_RECAPTCHA";class Gk{constructor(e){this.type=qk,this.auth=Lr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{bk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Tk(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;bp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Kk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&bp(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jk();l.length!==0&&(l+=a),C1(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function kp(t,e,n,r=!1){const s=new Gk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await kp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await kp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t,e){const n=Md(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Vl(i,e??{}))return s;Nn(s,"already-initialized")}return n.initialize({options:e})}function Yk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Qk(t,e,n){const r=Lr(t);Ee(r._canInitEmulator,r,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=S1(e),{host:o,port:a}=Jk(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Xk()}function S1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Jk(t){const e=S1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Dp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Dp(o)}}}function Dp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Xk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function Zk(t,e){return Or(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e){return Na(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function n2(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Tf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new la(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new la(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",e2);case"emailLink":return t2(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,r,"signUpPassword",Zk);case"emailLink":return n2(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t,e){return Na(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="http://localhost";class Qs extends Tf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=_f(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Qs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wi(e,n)}buildRequest(){const e={requestUri:r2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i2(t){const e=Eo(Io(t)).link,n=e?Eo(Io(e)).deep_link_id:null,r=Eo(Io(t)).deep_link_id;return(r?Eo(Io(r)).link:null)||r||n||e||t}class bf{constructor(e){var n,r,s,i,o,a;const l=Eo(Io(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=s2((s=l.mode)!==null&&s!==void 0?s:null);Ee(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=i2(e);try{return new bf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.providerId=Ji.PROVIDER_ID}static credential(e,n){return la._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bf.parseLink(n);return Ee(r,"argument-error"),la._fromEmailAndCode(e,r.code,r.tenantId)}}Ji.PROVIDER_ID="password";Ji.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ji.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Af{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Oa{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Oa{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Oa{constructor(){super("twitter.com")}static credential(e,n){return Qs._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(t,e){return Na(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Er._fromIdTokenResponse(e,r,s),o=Np(r);return new Pr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Np(r);return new Pr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Np(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t){var e;if(Dn(t.app))return Promise.reject(Zn(t));const n=Lr(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await R1(n,{returnSecureToken:!0}),s=await Pr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Jl(e,n,r,s)}}function P1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jl._fromErrorAndOperation(t,i,e,r):i})}async function a2(t,e,n=!1){const r=await Fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e,n=!1){const{auth:r}=t;if(Dn(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await Fi(t,P1(r,s,e,t),n);Ee(i.idToken,r,"internal-error");const o=If(i.idToken);Ee(o,r,"internal-error");const{sub:a}=o;return Ee(t.uid===a,r,"user-mismatch"),Pr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Nn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e,n=!1){if(Dn(t.app))return Promise.reject(Zn(t));const r="signIn",s=await P1(t,r,e),i=await Pr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function c2(t,e){return k1(Lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(t){const e=Lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function V6(t,e,n){if(Dn(t.app))return Promise.reject(Zn(t));const r=Lr(t),o=await Nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",R1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&D1(t),l}),a=await Pr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function F6(t,e,n){return Dn(t.app)?Promise.reject(Zn(t)):c2(Wt(t),Ji.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e){return Or(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Wt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fi(r,u2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function h2(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function d2(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}const Xl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xl,"1"),this.storage.removeItem(Xl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){const t=Ht();return wf(t)||Bc(t)}const m2=1e3,g2=10;class O1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=f2()&&Mk(),this.fallbackToPolling=b1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Lk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},m2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O1.type="LOCAL";const p2=O1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L1.type="SESSION";const M1=L1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await _2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Cf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function v2(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function E2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function w2(){return x1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebaseLocalStorageDb",T2=1,Zl="firebaseLocalStorage",F1="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wc(t,e){return t.transaction([Zl],e?"readwrite":"readonly").objectStore(Zl)}function b2(){const t=indexedDB.deleteDatabase(V1);return new La(t).toPromise()}function Oh(){const t=indexedDB.open(V1,T2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zl,{keyPath:F1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zl)?e(r):(r.close(),await b2(),e(await Oh()))})})}async function Op(t,e,n){const r=Wc(t,!0).put({[F1]:e,value:n});return new La(r).toPromise()}async function A2(t,e){const n=Wc(t,!1).get(e),r=await new La(n).toPromise();return r===void 0?null:r.value}function Lp(t,e){const n=Wc(t,!0).delete(e);return new La(n).toPromise()}const C2=800,S2=3;class U1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>S2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(w2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await E2(),!this.activeServiceWorker)return;this.sender=new y2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oh();return await Op(e,Xl,"1"),await Lp(e,Xl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Op(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wc(s,!1).getAll();return new La(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U1.type="LOCAL";const R2=U1;new Da(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){return e?Ir(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Tf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P2(t){return k1(t.auth,new Sf(t),t.bypassAuthState)}function k2(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),l2(n,new Sf(t),t.bypassAuthState)}async function D2(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),a2(n,new Sf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P2;case"linkViaPopup":case"linkViaRedirect":return D2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:Nn(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new Da(2e3,1e4);async function O2(t,e,n){if(Dn(t.app))return Promise.reject(Bn(t,"operation-not-supported-in-this-environment"));const r=Lr(t);gk(t,e,Af);const s=$1(r,n);return new xs(r,"signInViaPopup",e,s).executeNotNull()}class xs extends B1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=Cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N2.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="pendingRedirect",bl=new Map;class M2 extends B1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bl.get(this.auth._key());if(!e){try{const r=await x2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bl.set(this.auth._key(),e)}return this.bypassAuthState||bl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x2(t,e){const n=U2(e),r=F2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function V2(t,e){bl.set(t._key(),e)}function F2(t){return Ir(t._redirectPersistence)}function U2(t){return Tl(L2,t.config.apiKey,t.name)}async function $2(t,e,n=!1){if(Dn(t.app))return Promise.reject(Zn(t));const r=Lr(t),s=$1(r,e),o=await new M2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=10*60*1e3;class j2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!j1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mp(e))}saveEventToCache(e){this.cachedEventUids.add(Mp(e)),this.lastProcessedEventTime=Date.now()}}function Mp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function H2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e={}){return Or(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K2=/^https?/;async function G2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W2(t);for(const n of e)try{if(z2(n))return}catch{}Nn(t,"unauthorized-domain")}function z2(t){const e=kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!K2.test(n))return!1;if(q2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Da(3e4,6e4);function xp(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q2(t){return new Promise((e,n)=>{var r,s,i;function o(){xp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xp(),n(Bn(t,"network-request-failed"))},timeout:Y2.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=Wk("iframefcb");return er()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},C1(`${Hk()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Al=null,e})}let Al=null;function J2(t){return Al=Al||Q2(t),Al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new Da(5e3,15e3),Z2="__/auth/iframe",eD="emulator/auth/iframe",tD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rD(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ef(e,eD):`https://${t.config.authDomain}/${Z2}`,r={apiKey:e.apiKey,appName:t.name,v:Gi},s=nD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ta(r).slice(1)}`}async function sD(t){const e=await J2(t),n=er().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:rD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tD,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},X2.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oD=500,aD=600,lD="_blank",cD="http://localhost";class Vp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uD(t,e,n,r=oD,s=aD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},iD),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Ht().toLowerCase();n&&(a=v1(u)?lD:n),y1(u)&&(e=e||cD,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,E])=>`${m}${g}=${E},`,"");if(Ok(u)&&a!=="_self")return hD(e||"",a),new Vp(null);const d=window.open(e||"",a,h);Ee(d,t,"popup-blocked");try{d.focus()}catch{}return new Vp(d)}function hD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="__/auth/handler",fD="emulator/auth/handler",mD=encodeURIComponent("fac");async function Fp(t,e,n,r,s,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gi,eventId:s};if(e instanceof Af){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Oa){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${mD}=${encodeURIComponent(l)}`:"";return`${gD(t)}?${Ta(a).slice(1)}${u}`}function gD({config:t}){return t.emulator?Ef(t,fD):`https://${t.authDomain}/${dD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M1,this._completeRedirectFn=$2,this._overrideRedirectResult=V2}async _openPopup(e,n,r,s){var i;Rr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Fp(e,n,r,kh(),s);return uD(e,o,Cf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Fp(e,n,r,kh(),s);return v2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sD(e),r=new j2(e);return n.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vu,{type:Vu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Vu];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=G2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return b1()||wf()||Bc()}}const _D=pD;var Up="@firebase/auth",$p="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ED(t){ki(new qs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A1(t)},u=new $k(r,s,i,l);return Yk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ki(new qs("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(r=>new yD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(Up,$p,vD(t)),os(Up,$p,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=5*60,wD=D0("authIdTokenMaxAge")||ID;let Bp=null;const TD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wD)return;const s=n==null?void 0:n.token;Bp!==s&&(Bp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bD(t=M0()){const e=Md(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zk(t,{popupRedirectResolver:_D,persistence:[R2,p2,M1]}),r=D0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=TD(i.toString());d2(n,o,()=>o(n.currentUser)),h2(n,a=>o(a))}}const s=P0("auth");return s&&Qk(n,`http://${s}`),n}function AD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Bk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",AD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ED("Browser");const jp=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},CD=new WeakMap;function SD({clearTimeout:t,setTimeout:e}={}){return(n,{value:r,signal:s}={})=>{if(s!=null&&s.aborted)return Promise.reject(jp());let i,o,a;const l=t??clearTimeout,u=()=>{l(i),a(jp())},h=()=>{s&&s.removeEventListener("abort",u)},d=new Promise((m,g)=>{o=()=>{h(),m(r)},a=g,i=(e??setTimeout)(o,n)});return s&&s.addEventListener("abort",u,{once:!0}),CD.set(d,()=>{l(i),i=null,o()}),d}}const ec=SD();class RD{constructor(e){he(this,"client");he(this,"db");he(this,"auth");he(this,"dontAutoCreateSpace",!1);he(this,"currentUser",et());he(this,"darkMode",et(!0));he(this,"systemDarkMode",et(!0));he(this,"loaded",et(!1));he(this,"authLoaded",et(!1));he(this,"showOfflineButton",et(!1));he(this,"currentFestivalUid",9);this.auth=bD(e),this.db=XP(e),this.auth.onAuthStateChanged(async n=>{this.authLoaded.value||(this.currentUser.value=n||void 0,await ec(50),this.authLoaded.value=!0)})}}var PD="firebase",kD="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(PD,kD,"app");/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const hi=typeof document<"u";function DD(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Xe=Object.assign;function Fu(t,e){const n={};for(const r in e){const s=e[r];n[r]=Hn(s)?s.map(t):t(s)}return n}const Wo=()=>{},Hn=Array.isArray,H1=/#/g,ND=/&/g,OD=/\//g,LD=/=/g,MD=/\?/g,W1=/\+/g,xD=/%5B/g,VD=/%5D/g,q1=/%5E/g,FD=/%60/g,K1=/%7B/g,UD=/%7C/g,G1=/%7D/g,$D=/%20/g;function Rf(t){return encodeURI(""+t).replace(UD,"|").replace(xD,"[").replace(VD,"]")}function BD(t){return Rf(t).replace(K1,"{").replace(G1,"}").replace(q1,"^")}function Lh(t){return Rf(t).replace(W1,"%2B").replace($D,"+").replace(H1,"%23").replace(ND,"%26").replace(FD,"`").replace(K1,"{").replace(G1,"}").replace(q1,"^")}function jD(t){return Lh(t).replace(LD,"%3D")}function HD(t){return Rf(t).replace(H1,"%23").replace(MD,"%3F")}function WD(t){return t==null?"":HD(t).replace(OD,"%2F")}function ca(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const qD=/\/$/,KD=t=>t.replace(qD,"");function Uu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=QD(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:ca(o)}}function GD(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Hp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function zD(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ui(e.matched[r],n.matched[s])&&z1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ui(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function z1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!YD(t[n],e[n]))return!1;return!0}function YD(t,e){return Hn(t)?Wp(t,e):Hn(e)?Wp(e,t):t===e}function Wp(t,e){return Hn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function QD(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const $r={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ua;(function(t){t.pop="pop",t.push="push"})(ua||(ua={}));var qo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(qo||(qo={}));function JD(t){if(!t)if(hi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),KD(t)}const XD=/^[^#]+#/;function ZD(t,e){return t.replace(XD,"#")+e}function eN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const qc=()=>({left:window.scrollX,top:window.scrollY});function tN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=eN(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qp(t,e){return(history.state?history.state.position-e:-1)+t}const Mh=new Map;function nN(t,e){Mh.set(t,e)}function rN(t){const e=Mh.get(t);return Mh.delete(t),e}let sN=()=>location.protocol+"//"+location.host;function Y1(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Hp(l,"")}return Hp(n,t)+r+s}function iN(t,e,n,r){let s=[],i=[],o=null;const a=({state:m})=>{const g=Y1(t,location),E=n.value,A=e.value;let D=0;if(m){if(n.value=g,e.value=m,o&&o===E){o=null;return}D=A?m.position-A.position:0}else r(g);s.forEach(L=>{L(n.value,E,{delta:D,type:ua.pop,direction:D?D>0?qo.forward:qo.back:qo.unknown})})};function l(){o=n.value}function u(m){s.push(m);const g=()=>{const E=s.indexOf(m);E>-1&&s.splice(E,1)};return i.push(g),g}function h(){const{history:m}=window;m.state&&m.replaceState(Xe({},m.state,{scroll:qc()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Kp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?qc():null}}function oN(t){const{history:e,location:n}=window,r={value:Y1(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:sN()+t+l;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](m)}}function o(l,u){const h=Xe({},e.state,Kp(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,h,!0),r.value=l}function a(l,u){const h=Xe({},s.value,e.state,{forward:l,scroll:qc()});i(h.current,h,!0);const d=Xe({},Kp(r.value,l,null),{position:h.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function aN(t){t=JD(t);const e=oN(t),n=iN(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Xe({location:"",base:t,go:r,createHref:ZD.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function lN(t){return typeof t=="string"||t&&typeof t=="object"}function Q1(t){return typeof t=="string"||typeof t=="symbol"}const J1=Symbol("");var Gp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Gp||(Gp={}));function $i(t,e){return Xe(new Error,{type:t,[J1]:!0},e)}function ur(t,e){return t instanceof Error&&J1 in t&&(e==null||!!(t.type&e))}const zp="[^/]+?",cN={sensitive:!1,strict:!1,start:!0,end:!0},uN=/[.+*?^${}()[\]/\\]/g;function hN(t,e){const n=Xe({},cN,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let g=40+(n.sensitive?.25:0);if(m.type===0)d||(s+="/"),s+=m.value.replace(uN,"\\$&"),g+=40;else if(m.type===1){const{value:E,repeatable:A,optional:D,regexp:L}=m;i.push({name:E,repeatable:A,optional:D});const k=L||zp;if(k!==zp){g+=10;try{new RegExp(`(${k})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${E}" (${k}): `+S.message)}}let I=A?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(I=D&&u.length<2?`(?:/${I})`:"/"+I),D&&(I+="?"),s+=I,g+=20,D&&(g+=-8),A&&(g+=-20),k===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",E=i[m-1];d[E.name]=g&&E.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of m)if(g.type===0)h+=g.value;else if(g.type===1){const{value:E,repeatable:A,optional:D}=g,L=E in u?u[E]:"";if(Hn(L)&&!A)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const k=Hn(L)?L.join("/"):L;if(!k)if(D)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${E}"`);h+=k}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function dN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function X1(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=dN(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Yp(r))return 1;if(Yp(s))return-1}return s.length-r.length}function Yp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const fN={type:0,value:""},mN=/[a-zA-Z0-9_]/;function gN(t){if(!t)return[[]];if(t==="/")return[[fN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:mN.test(l)?m():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function pN(t,e,n){const r=hN(gN(t.path),n),s=Xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function _N(t,e){const n=[],r=new Map;e=Xp({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,m,g){const E=!g,A=yN(d);A.aliasOf=g&&g.record;const D=Xp(e,d),L=[A];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of S)L.push(Xe({},A,{components:g?g.record.components:A.components,path:B,aliasOf:g?g.record:A}))}let k,I;for(const S of L){const{path:B}=S;if(m&&B[0]!=="/"){const V=m.record.path,y=V[V.length-1]==="/"?"":"/";S.path=m.record.path+(B&&y+B)}if(k=pN(S,m,D),g?g.alias.push(k):(I=I||k,I!==k&&I.alias.push(k),E&&d.name&&!Jp(k)&&o(d.name)),Z1(k)&&l(k),A.children){const V=A.children;for(let y=0;y<V.length;y++)i(V[y],k,g&&g.children[y])}g=g||k}return I?()=>{o(I)}:Wo}function o(d){if(Q1(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const m=IN(d,n);n.splice(m,0,d),d.record.name&&!Jp(d)&&r.set(d.record.name,d)}function u(d,m){let g,E={},A,D;if("name"in d&&d.name){if(g=r.get(d.name),!g)throw $i(1,{location:d});D=g.record.name,E=Xe(Qp(m.params,g.keys.filter(I=>!I.optional).concat(g.parent?g.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),d.params&&Qp(d.params,g.keys.map(I=>I.name))),A=g.stringify(E)}else if(d.path!=null)A=d.path,g=n.find(I=>I.re.test(A)),g&&(E=g.parse(A),D=g.record.name);else{if(g=m.name?r.get(m.name):n.find(I=>I.re.test(m.path)),!g)throw $i(1,{location:d,currentLocation:m});D=g.record.name,E=Xe({},m.params,d.params),A=g.stringify(E)}const L=[];let k=g;for(;k;)L.unshift(k.record),k=k.parent;return{name:D,path:A,params:E,matched:L,meta:EN(L)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Qp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function yN(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:vN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function vN(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Jp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function EN(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function Xp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function IN(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;X1(t,e[i])<0?r=i:n=i+1}const s=wN(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function wN(t){let e=t;for(;e=e.parent;)if(Z1(e)&&X1(t,e)===0)return e}function Z1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function TN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(W1," "),o=i.indexOf("="),a=ca(o<0?i:i.slice(0,o)),l=o<0?null:ca(i.slice(o+1));if(a in e){let u=e[a];Hn(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Zp(t){let e="";for(let n in t){const r=t[n];if(n=jD(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Hn(r)?r.map(i=>i&&Lh(i)):[r&&Lh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function bN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Hn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const AN=Symbol(""),e_=Symbol(""),Pf=Symbol(""),eE=Symbol(""),xh=Symbol("");function _o(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Wr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=m=>{m===!1?l($i(4,{from:n,to:e})):m instanceof Error?l(m):lN(m)?l($i(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function $u(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(CN(l)){const h=(l.__vccOpts||l)[e];h&&i.push(Wr(h,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=DD(h)?h.default:h;o.components[a]=d;const g=(d.__vccOpts||d)[e];return g&&Wr(g,n,r,o,a,s)()}))}}return i}function CN(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function t_(t){const e=Qn(Pf),n=Qn(eE),r=gt(()=>{const l=_i(t.to);return e.resolve(l)}),s=gt(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(Ui.bind(null,h));if(m>-1)return m;const g=n_(l[u-2]);return u>1&&n_(h)===g&&d[d.length-1].path!==g?d.findIndex(Ui.bind(null,l[u-2])):m}),i=gt(()=>s.value>-1&&kN(n.params,r.value.params)),o=gt(()=>s.value>-1&&s.value===n.matched.length-1&&z1(n.params,r.value.params));function a(l={}){return PN(l)?e[_i(t.replace)?"replace":"push"](_i(t.to)).catch(Wo):Promise.resolve()}return{route:r,href:gt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const SN=Ki({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:t_,setup(t,{slots:e}){const n=Ot(t_(t)),{options:r}=Qn(Pf),s=gt(()=>({[r_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[r_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Ea("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),RN=SN;function PN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function kN(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Hn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function n_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const r_=(t,e,n)=>t??e??n,DN=Ki({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Qn(xh),s=gt(()=>t.route||r.value),i=Qn(e_,0),o=gt(()=>{let u=_i(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=gt(()=>s.value.matched[o.value]);ml(e_,gt(()=>o.value+1)),ml(AN,a),ml(xh,s);const l=et();return $s(()=>[l.value,a.value,t.name],([u,h,d],[m,g,E])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Ui(h,g)||!m)&&(h.enterCallbacks[d]||[]).forEach(A=>A(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,m=d&&d.components[h];if(!m)return s_(n.default,{Component:m,route:u});const g=d.props[h],E=g?g===!0?u.params:typeof g=="function"?g(u):g:null,D=Ea(m,Xe({},E,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return s_(n.default,{Component:D,route:u})||D}}});function s_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const NN=DN;function ON(t){const e=_N(t.routes,t),n=t.parseQuery||TN,r=t.stringifyQuery||Zp,s=t.history,i=_o(),o=_o(),a=_o(),l=Ed($r);let u=$r;hi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Fu.bind(null,z=>""+z),d=Fu.bind(null,WD),m=Fu.bind(null,ca);function g(z,ie){let re,ce;return Q1(z)?(re=e.getRecordMatcher(z),ce=ie):ce=z,e.addRoute(ce,re)}function E(z){const ie=e.getRecordMatcher(z);ie&&e.removeRoute(ie)}function A(){return e.getRoutes().map(z=>z.record)}function D(z){return!!e.getRecordMatcher(z)}function L(z,ie){if(ie=Xe({},ie||l.value),typeof z=="string"){const T=Uu(n,z,ie.path),$=e.resolve({path:T.path},ie),Y=s.createHref(T.fullPath);return Xe(T,$,{params:m($.params),hash:ca(T.hash),redirectedFrom:void 0,href:Y})}let re;if(z.path!=null)re=Xe({},z,{path:Uu(n,z.path,ie.path).path});else{const T=Xe({},z.params);for(const $ in T)T[$]==null&&delete T[$];re=Xe({},z,{params:d(T)}),ie.params=d(ie.params)}const ce=e.resolve(re,ie),Oe=z.hash||"";ce.params=h(m(ce.params));const Be=GD(r,Xe({},z,{hash:BD(Oe),path:ce.path})),P=s.createHref(Be);return Xe({fullPath:Be,hash:Oe,query:r===Zp?bN(z.query):z.query||{}},ce,{redirectedFrom:void 0,href:P})}function k(z){return typeof z=="string"?Uu(n,z,l.value.path):Xe({},z)}function I(z,ie){if(u!==z)return $i(8,{from:ie,to:z})}function S(z){return y(z)}function B(z){return S(Xe(k(z),{replace:!0}))}function V(z){const ie=z.matched[z.matched.length-1];if(ie&&ie.redirect){const{redirect:re}=ie;let ce=typeof re=="function"?re(z):re;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=k(ce):{path:ce},ce.params={}),Xe({query:z.query,hash:z.hash,params:ce.path!=null?{}:z.params},ce)}}function y(z,ie){const re=u=L(z),ce=l.value,Oe=z.state,Be=z.force,P=z.replace===!0,T=V(re);if(T)return y(Xe(k(T),{state:typeof T=="object"?Xe({},Oe,T.state):Oe,force:Be,replace:P}),ie||re);const $=re;$.redirectedFrom=ie;let Y;return!Be&&zD(r,ce,re)&&(Y=$i(16,{to:$,from:ce}),Je(ce,ce,!0,!1)),(Y?Promise.resolve(Y):N($,ce)).catch(G=>ur(G)?ur(G,2)?G:mt(G):Ie(G,$,ce)).then(G=>{if(G){if(ur(G,2))return y(Xe({replace:P},k(G.to),{state:typeof G.to=="object"?Xe({},Oe,G.to.state):Oe,force:Be}),ie||$)}else G=M($,ce,!0,P,Oe);return x($,ce,G),G})}function _(z,ie){const re=I(z,ie);return re?Promise.reject(re):Promise.resolve()}function v(z){const ie=xt.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(z):z()}function N(z,ie){let re;const[ce,Oe,Be]=LN(z,ie);re=$u(ce.reverse(),"beforeRouteLeave",z,ie);for(const T of ce)T.leaveGuards.forEach($=>{re.push(Wr($,z,ie))});const P=_.bind(null,z,ie);return re.push(P),ut(re).then(()=>{re=[];for(const T of i.list())re.push(Wr(T,z,ie));return re.push(P),ut(re)}).then(()=>{re=$u(Oe,"beforeRouteUpdate",z,ie);for(const T of Oe)T.updateGuards.forEach($=>{re.push(Wr($,z,ie))});return re.push(P),ut(re)}).then(()=>{re=[];for(const T of Be)if(T.beforeEnter)if(Hn(T.beforeEnter))for(const $ of T.beforeEnter)re.push(Wr($,z,ie));else re.push(Wr(T.beforeEnter,z,ie));return re.push(P),ut(re)}).then(()=>(z.matched.forEach(T=>T.enterCallbacks={}),re=$u(Be,"beforeRouteEnter",z,ie,v),re.push(P),ut(re))).then(()=>{re=[];for(const T of o.list())re.push(Wr(T,z,ie));return re.push(P),ut(re)}).catch(T=>ur(T,8)?T:Promise.reject(T))}function x(z,ie,re){a.list().forEach(ce=>v(()=>ce(z,ie,re)))}function M(z,ie,re,ce,Oe){const Be=I(z,ie);if(Be)return Be;const P=ie===$r,T=hi?history.state:{};re&&(ce||P?s.replace(z.fullPath,Xe({scroll:P&&T&&T.scroll},Oe)):s.push(z.fullPath,Oe)),l.value=z,Je(z,ie,re,P),mt()}let R;function Te(){R||(R=s.listen((z,ie,re)=>{if(!St.listening)return;const ce=L(z),Oe=V(ce);if(Oe){y(Xe(Oe,{replace:!0}),ce).catch(Wo);return}u=ce;const Be=l.value;hi&&nN(qp(Be.fullPath,re.delta),qc()),N(ce,Be).catch(P=>ur(P,12)?P:ur(P,2)?(y(P.to,ce).then(T=>{ur(T,20)&&!re.delta&&re.type===ua.pop&&s.go(-1,!1)}).catch(Wo),Promise.reject()):(re.delta&&s.go(-re.delta,!1),Ie(P,ce,Be))).then(P=>{P=P||M(ce,Be,!1),P&&(re.delta&&!ur(P,8)?s.go(-re.delta,!1):re.type===ua.pop&&ur(P,20)&&s.go(-1,!1)),x(ce,Be,P)}).catch(Wo)}))}let Ke=_o(),Pe=_o(),Ce;function Ie(z,ie,re){mt(z);const ce=Pe.list();return ce.length?ce.forEach(Oe=>Oe(z,ie,re)):console.error(z),Promise.reject(z)}function at(){return Ce&&l.value!==$r?Promise.resolve():new Promise((z,ie)=>{Ke.add([z,ie])})}function mt(z){return Ce||(Ce=!z,Te(),Ke.list().forEach(([ie,re])=>z?re(z):ie()),Ke.reset()),z}function Je(z,ie,re,ce){const{scrollBehavior:Oe}=t;if(!hi||!Oe)return Promise.resolve();const Be=!re&&rN(qp(z.fullPath,0))||(ce||!re)&&history.state&&history.state.scroll||null;return wd().then(()=>Oe(z,ie,Be)).then(P=>P&&tN(P)).catch(P=>Ie(P,z,ie))}const Fe=z=>s.go(z);let We;const xt=new Set,St={currentRoute:l,listening:!0,addRoute:g,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:D,getRoutes:A,resolve:L,options:t,push:S,replace:B,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Pe.add,isReady:at,install(z){const ie=this;z.component("RouterLink",RN),z.component("RouterView",NN),z.config.globalProperties.$router=ie,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>_i(l)}),hi&&!We&&l.value===$r&&(We=!0,S(s.location).catch(Oe=>{}));const re={};for(const Oe in $r)Object.defineProperty(re,Oe,{get:()=>l.value[Oe],enumerable:!0});z.provide(Pf,ie),z.provide(eE,Ey(re)),z.provide(xh,l);const ce=z.unmount;xt.add(z),z.unmount=function(){xt.delete(z),xt.size<1&&(u=$r,R&&R(),R=null,l.value=$r,We=!1,Ce=!1),ce()}}};function ut(z){return z.reduce((ie,re)=>ie.then(()=>v(re)),Promise.resolve())}return St}function LN(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ui(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ui(u,l))||s.push(l))}return[n,r,s]}const MN={props:{navId:String,route:String,icon:String,label:String},mounted(){this.update()},watch:{$route(){this.update()}},data(){return{active:!1}},methods:{update(){this.active=this.$route.meta.navId==this.navId}}},vt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function xN(t,e,n,r,s,i){const o=ht("RouterLink");return ee(),cn(o,{to:n.route||"",class:$e({active:s.active})},{default:gc(()=>[O("i",null,ue(n.icon),1),O("div",null,ue(n.label),1)]),_:1},8,["to","class"])}const tE=vt(MN,[["render",xN]]),VN={data(){return{selectedPage:"home"}},components:{NavigationItem:tE}};function FN(t,e,n,r,s,i){const o=ht("NavigationItem");return ee(),oe(ye,null,[He(o,{"selected-route":s.selectedPage,navId:"home",route:"/",icon:"home",label:t.$t("navigation.overview")},null,8,["selected-route","label"]),He(o,{"selected-route":s.selectedPage,navId:"acts",route:"/acts",icon:"headphones",label:t.$t("navigation.acts")},null,8,["selected-route","label"]),t.$ctx.currentUser.value!=null?(ee(),oe(ye,{key:0},[He(o,{"selected-route":s.selectedPage,navId:"members",route:"/members",icon:"group",label:t.$t("navigation.members")},null,8,["selected-route","label"]),He(o,{"selected-route":s.selectedPage,navId:"settings",route:"/settings",icon:"settings",label:t.$t("navigation.settings")},null,8,["selected-route","label"])],64)):Ne("",!0)],64)}const UN=vt(VN,[["render",FN]]),$N={components:{NavigationItems:UN,NavigationItem:tE}},BN={class:"left drawer l"},jN={class:"left m"},HN={class:"bottom s"};function WN(t,e,n,r,s,i){const o=ht("NavigationItems"),a=ht("NavigationItem");return ee(),oe(ye,null,[O("nav",BN,[He(o),t.$ctx.currentUser.value==null?(ee(),cn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Ne("",!0)]),O("nav",jN,[He(o),t.$ctx.currentUser.value==null?(ee(),cn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Ne("",!0)]),O("nav",HN,[He(o),t.$ctx.currentUser.value==null?(ee(),cn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Ne("",!0)])],64)}const qN=vt($N,[["render",WN]]),KN={props:{hideAnon:{type:Boolean,default:!1},reload:Boolean},methods:{googleAuth(){O2(this.$ctx.auth,new pr).then(()=>{this.reload?window.location.reload():window.location.href="/"}).catch(t=>{const e=t.code,n=t.message;console.error(e,n)})},mailAuth(){this.$router.push({path:"/login/mail",query:{callback:this.$route.fullPath}})},async anonAuth(){await o2(this.$ctx.auth),this.reload?window.location.reload():window.location.href="/"}}},GN=O("i",{class:"mdi mdi-google"},null,-1),zN=O("span",null,"Google",-1),YN=[GN,zN],QN=O("div",{class:"space"},null,-1),JN=O("i",null,"mail",-1),XN=O("div",{class:"space"},null,-1),ZN=O("i",null,"password_2_off",-1);function eO(t,e,n,r,s,i){return ee(),oe(ye,null,[O("button",{class:"responsive large",onClick:e[0]||(e[0]=o=>i.googleAuth())},YN),QN,O("button",{class:"responsive large",onClick:e[1]||(e[1]=o=>i.mailAuth())},[JN,O("span",null,ue(t.$t("common.mail")),1)]),n.hideAnon?Ne("",!0):(ee(),oe(ye,{key:0},[XN,O("button",{class:"responsive fill large",onClick:e[2]||(e[2]=o=>i.anonAuth())},[ZN,O("span",null,ue(t.$t("common.anon")),1)])],64))],64)}const tO=vt(KN,[["render",eO]]),nO={props:{plain:Boolean},data(){return{privacyPolicyUrl:void 0}},mounted(){this.privacyPolicyUrl="/privacy.html"}},rO={key:0,class:"link"},sO=["href"],iO={key:1,class:"center-align",style:{display:"fixed",bottom:"0",left:"0",width:"100%"}},oO={class:"link"},aO=["href"];function lO(t,e,n,r,s,i){return s.privacyPolicyUrl?(ee(),oe(ye,{key:0},[n.plain?(ee(),oe("p",rO,[O("a",{class:"link underline",href:s.privacyPolicyUrl},ue(t.$t("privacyPolicy")),9,sO)])):Ne("",!0),n.plain?Ne("",!0):(ee(),oe("div",iO,[O("p",oO,[O("a",{class:"link underline",href:s.privacyPolicyUrl},ue(t.$t("privacyPolicy")),9,aO)])]))],64)):Ne("",!0)}const cO=vt(nO,[["render",lO]]),uO={data(){return{openSignOutConfirmDialog:!1}},methods:{async signOut(t=!1){var e;if(!t&&((e=this.$ctx.currentUser.value)!=null&&e.isAnonymous)){this.openSignOutConfirmDialog=!0;return}await this.$ctx.auth.signOut(),window.location.reload()}},components:{LoginButtons:tO,PrivacyPolicyLink:cO}},hO={class:"responsive max"},dO={key:0,class:"middle-align",style:{height:"100%"}},fO={class:"large-padding center middle-align center-align"},mO={class:"large-padding"},gO=O("i",{class:"extra"},"login",-1),pO={class:"center-align"},_O=O("br",null,null,-1),yO=O("div",{class:"space"},null,-1),vO={class:"center-align"},EO={key:1,class:"middle-align",style:{height:"100%"}},IO={class:"medium center middle-align center-align"},wO={key:0,class:"extra"},TO=["src"],bO={class:"center-align"},AO={class:"link small-text"},CO=O("div",{class:"space"},null,-1),SO={class:"center-align"},RO=O("i",null,"logout",-1),PO={class:"right-align no-space"},kO=O("div",{class:"space"},null,-1);function DO(t,e,n,r,s,i){var l,u;const o=ht("LoginButtons"),a=ht("PrivacyPolicyLink");return ee(),oe(ye,null,[O("main",hO,[t.$ctx.currentUser.value==null?(ee(),oe("div",dO,[O("article",fO,[O("div",mO,[gO,O("h5",pO,ue(t.$t("common.signIn")),1),O("p",null,[sh(ue(t.$t("login.signIn.message[0]")),1),_O,sh(ue(t.$t("login.signIn.message[1]")),1)]),yO,O("div",vO,[He(o)])])])])):Ne("",!0),t.$ctx.currentUser.value!=null?(ee(),oe("div",EO,[O("article",IO,[O("div",null,[t.$ctx.currentUser.value.photoURL==null?(ee(),oe("i",wO,"person")):Ne("",!0),t.$ctx.currentUser.value.photoURL!=null?(ee(),oe("img",{key:1,class:"circle large",src:t.$ctx.currentUser.value.photoURL,referrerpolicy:"no-referrer"},null,8,TO)):Ne("",!0),O("h5",bO,ue(t.$t("common.greeting"))+" "+ue(((u=(l=t.$client.space)==null?void 0:l.self)==null?void 0:u.name)||(t.$ctx.currentUser.value.isAnonymous?t.$t("common.anon"):t.$ctx.currentUser.value.displayName)),1),O("p",null,ue(t.$t("login.alreadyLoggedIn")),1),O("span",AO,ue(t.$ctx.currentUser.value.email||t.$ctx.currentUser.value.uid),1),CO,O("nav",SO,[O("button",{class:"large",onClick:e[0]||(e[0]=h=>i.signOut())},[RO,O("span",null,ue(t.$t("common.logOut")),1)])])])])])):Ne("",!0)]),He(a),O("div",{class:$e(["overlay",{active:s.openSignOutConfirmDialog}]),onClick:e[1]||(e[1]=h=>s.openSignOutConfirmDialog=!1)},null,2),O("dialog",{class:$e(["error",{active:s.openSignOutConfirmDialog}])},[O("h5",null,ue(t.$t("settings.dialog.anonLogOut.title")),1),O("div",null,ue(t.$t("settings.dialog.anonLogOut.message")),1),O("nav",PO,[O("button",{class:"error transparent",onClick:e[2]||(e[2]=h=>s.openSignOutConfirmDialog=!1)},ue(t.$t("common.abort")),1),kO,O("button",{class:"error-container no-elevate",onClick:e[3]||(e[3]=h=>{s.openSignOutConfirmDialog=!1,i.signOut(!0)})},ue(t.$t("common.confirm")),1)])],2)],64)}const nE=vt(uO,[["render",DO]]),NO=Object.freeze(Object.defineProperty({__proto__:null,default:nE},Symbol.toStringTag,{value:"Module"})),OO={props:{event:{type:Object,required:!0}},methods:{showOnTimetable(){this.$router.push({path:"/",query:{eventId:this.event.uid}})}}},LO={class:"scroll hide-scrollbar",style:{"z-index":"10"}},MO=O("div",null,null,-1),xO={class:"chip fill"},VO={class:"chip fill"};function FO(t,e,n,r,s,i){return ee(),oe("nav",LO,[MO,O("a",xO,ue(n.event.data.stage.title),1),O("a",VO,ue(t.$t(n.event.data.performance.title)),1),O("a",{class:"chip fill",onClick:e[0]||(e[0]=o=>{o.stopPropagation(),i.showOnTimetable()})},ue(t.$t(n.event.data.festivalday.title)),1),O("a",{class:"chip fill",onClick:e[1]||(e[1]=o=>{o.stopPropagation(),i.showOnTimetable()})},ue(new Date(parseInt(n.event.data.start)*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"}))+" "+ue(t.$t("common.until"))+" "+ue(new Date(parseInt(n.event.data.end)*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"})),1)])}const kf=vt(OO,[["render",FO]]),UO={props:{model:{type:Object,required:!0},lockSpotify:{type:Boolean,default:!1}},data(){return{WoaEventModelWrapper:js,spotifyController:void 0,spotifyEmbedHtml:"",showSpotifyUnlock:!1,spotifyLocked:!0,smallScreen:!1}},methods:{update(){var t,e,n,r;this.showSpotifyUnlock=!1,this.spotifyLocked=!0,this.smallScreen=window.matchMedia&&((e=(t=window.matchMedia)==null?void 0:t.call(window,"screen and (max-width: 994px)"))==null?void 0:e.matches),(r=(n=this.spotifyController)==null?void 0:n.destroy)==null||r.call(n),this.spotifyEmbedHtml="",setTimeout(()=>{let s=crypto.randomUUID();this.spotifyEmbedHtml=`<div id="spotify-${s}"></div>`,setTimeout(()=>{var i,o;try{let a="",l="";this.model instanceof js?(a=(i=this.model.data.artists[0])==null?void 0:i.assets[0].spotifyartist,l=(o=this.model.data.artists[0])==null?void 0:o.assets[0].spotifyalbum):this.model instanceof a1&&(a=this.model.data.spotifyartist,l=this.model.data.spotifyalbum),(a.length>2||l.length>2)&&(window.onSpotifyIframeApiReady=u=>{const h={uri:`spotify:${l.length>2?`album:${l}`:`artist:${a}`}`,height:this.smallScreen?void 0:180};u.createController(document.querySelector(`#spotify-${s}`),h,d=>{this.spotifyController=d}),this.lockSpotify&&(this.showSpotifyUnlock=!0,this.spotifyLocked=!0)})}catch(a){console.error(a)}},50)},10)}},mounted(){this.update()},watch:{model(){this.update()}},components:{EventDetailsChips:kf}},$O={class:"no-padding"},BO={class:"padding",style:{"padding-bottom":"0 !important"}},jO=O("div",{class:"space"},null,-1),HO={class:"padding"},WO={class:"middle-align"},qO=O("i",{class:"fill"},"favorite",-1),KO={style:{"margin-block-start":"0","margin-left":"1rem"}},GO=O("div",{class:"space"},null,-1),zO={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",gap:"8px"}},YO=O("div",{class:"space"},null,-1),QO={class:"padding"},JO={class:"middle-align"},XO=O("i",{class:"fill"},"thumb_up",-1),ZO={style:{"margin-block-start":"0","margin-left":"1rem"}},eL=O("div",{class:"space"},null,-1),tL={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",gap:"8px"}},nL=O("div",{class:"space"},null,-1),rL={class:"padding"},sL={key:0,style:{width:"100%"}},iL=["innerHTML"],oL=["innerHTML"];function aL(t,e,n,r,s,i){const o=ht("EventDetailsChips");return ee(),oe("article",$O,[O("div",BO,[O("h5",null,ue(n.model.cardTitle()),1)]),n.model instanceof s.WoaEventModelWrapper?(ee(),cn(o,{key:0,event:n.model},null,8,["event"])):Ne("",!0),jO,n.model.likerIds.length>0?(ee(),oe(ye,{key:1},[O("div",HO,[O("div",WO,[qO,O("h6",KO,ue(t.$t("common.liked")),1)]),GO,O("div",zO,[(ee(!0),oe(ye,null,Qt(n.model.likerIds,a=>{var l,u;return ee(),oe("a",{class:$e(["chip no-border",[`${(l=t.$client.container.spaceMemberById.get(a))==null?void 0:l.color}4`]]),style:{margin:0,color:"black"}},ue((u=t.$client.container.spaceMemberById.get(a))==null?void 0:u.name),3)}),256))])]),YO],64)):Ne("",!0),n.model.suggestorIds.length>0?(ee(),oe(ye,{key:2},[O("div",QO,[O("div",JO,[XO,O("h6",ZO,ue(t.$t("common.recommended")),1)]),eL,O("div",tL,[(ee(!0),oe(ye,null,Qt(n.model.suggestorIds,a=>{var l,u;return ee(),oe("a",{class:$e(["chip no-border",[`${(l=t.$client.container.spaceMemberById.get(a))==null?void 0:l.color}4`]]),style:{margin:0,color:"black"}},ue((u=t.$client.container.spaceMemberById.get(a))==null?void 0:u.name),3)}),256))])]),nL],64)):Ne("",!0),O("div",rL,[s.showSpotifyUnlock&&s.spotifyLocked?(ee(),oe("div",sL,[O("div",{class:$e(["absolute spotify-unlocker",{small:!s.smallScreen}]),onClick:e[0]||(e[0]=a=>s.spotifyLocked=!1)},null,2)])):Ne("",!0),O("div",{innerHTML:s.spotifyEmbedHtml},null,8,iL),O("div",{innerHTML:n.model.cardDescription()},null,8,oL)])])}const lL=vt(UO,[["render",aL]]),cL={props:{open:Boolean,model:{type:Object,required:!0}},methods:{toggleSuggested(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleSuggested(this.model.uid)},toggleLike(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleLike(this.model.uid)}},emits:["dismiss"],components:{ActDetailsDialogContent:lL,EventDetailsChips:kf}},uL=["src"],hL={class:"blur",style:{"border-radius":"1.75rem",position:"sticky",top:"0","z-index":"100"}},dL=O("div",{class:"small-space"},null,-1),fL=O("i",null,"close",-1),mL=[fL],gL={class:"max"},pL=O("div",{class:"small-space"},null,-1),_L=["src"];function yL(t,e,n,r,s,i){var a,l,u,h,d,m,g,E;const o=ht("ActDetailsDialogContent");return ee(),oe(ye,null,[O("div",{class:$e(["overlay",{active:n.open}]),onClick:e[0]||(e[0]=A=>t.$emit("dismiss"))},null,2),O("dialog",{class:$e([{active:n.open},"max-s"])},[O("img",{class:"responsive large absolute top right",src:n.model.cardThumbnailUrl()},null,8,uL),O("header",hL,[O("nav",null,[dL,O("button",{class:"circle transparent",onClick:e[1]||(e[1]=A=>t.$emit("dismiss"))},mL),O("h5",gL,ue(t.$t("common.details")),1),O("button",{class:"transparent circle",onClick:e[2]||(e[2]=A=>i.toggleSuggested())},[O("i",{class:$e(["ignore-hover-fill",{fill:(l=(a=t.$client.space)==null?void 0:a.self)==null?void 0:l.isSuggested(n.model.uid),"primary-text":(h=(u=t.$client.space)==null?void 0:u.self)==null?void 0:h.isSuggested(n.model.uid)}])},"thumb_up",2)]),O("button",{class:"transparent circle",onClick:e[3]||(e[3]=A=>i.toggleLike())},[O("i",{class:$e(["ignore-hover-fill",{fill:(m=(d=t.$client.space)==null?void 0:d.self)==null?void 0:m.isLiked(n.model.uid),"primary-text":(E=(g=t.$client.space)==null?void 0:g.self)==null?void 0:E.isLiked(n.model.uid)}])},"favorite",2)]),pL])]),O("img",{class:"responsive large",style:{opacity:"0"},src:n.model.cardThumbnailUrl()||"/"},null,8,_L),He(o,{model:n.model,style:{"margin-top":"-112px"}},null,8,["model"])],2)],64)}const vL=vt(cL,[["render",yL]]),EL={data(){return{openActDetailsDialog:!1,selectedAct:void 0}},methods:{update(){let t=this.$route.query.details;if(t===void 0)this.openActDetailsDialog=!1;else{let e=this.$client.container.actByUid.value.get(t+"");e!==void 0&&(this.selectedAct=e),setTimeout(()=>{this.openActDetailsDialog=!0},50)}},dismiss(){this.$router.back()}},mounted(){this.update()},watch:{$route(){this.update()}},components:{ActDetailsDialog:vL}};function IL(t,e,n,r,s,i){const o=ht("ActDetailsDialog");return s.selectedAct!=null?(ee(),cn(o,{key:0,open:s.openActDetailsDialog,model:s.selectedAct,onDismiss:e[0]||(e[0]=a=>i.dismiss())},null,8,["open","model"])):Ne("",!0)}const wL=vt(EL,[["render",IL]]),TL={props:{model:{type:Object,required:!1},highlighted:{type:Boolean,default:!1}},methods:{openDialog(){var t;this.$router.push({query:{details:(t=this.model)==null?void 0:t.uid}})}}},bL={class:"round"},AL={class:"max"},CL={class:"small",style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"2.4em","line-height":"1.2em"}},SL={style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden",gap:"4px"}},RL={class:"surface-container round"},PL={class:"surface-container round"};function kL(t,e,n,r,s,i){var a,l;const o=Fy("lazy");return n.model!==void 0?(ee(),oe("a",{key:0,class:$e(["row padding",[`${n.highlighted?"tertiary":(l=(a=t.$client.space)==null?void 0:a.self)!=null&&l.isLiked(n.model.uid)?"primary":n.model.likerIds.length>0||n.model.suggestorIds.length>0?t.$ctx.darkMode.value?"surface-variant":"secondary":"surface-container"}`]]),onClick:e[0]||(e[0]=u=>i.openDialog())},[$y(t.$slots,"default"),Do(O("img",bL,null,512),[[o,{src:n.model.cardThumbnailUrl()}]]),O("div",AL,[O("h6",CL,ue(n.model.cardTitle()),1),O("div",null,[O("div",SL,[(ee(!0),oe(ye,null,Qt(n.model.likerIds,u=>{var h;return ee(),oe("div",RL,[O("i",{class:$e(["fill",[`${(h=t.$client.container.spaceMemberById.get(u))==null?void 0:h.color}-text`]]),style:{scale:.7}}," favorite ",2)])}),256)),(ee(!0),oe(ye,null,Qt(n.model.suggestorIds,u=>{var h;return ee(),oe("div",PL,[O("i",{class:$e(["fill",[`${(h=t.$client.container.spaceMemberById.get(u))==null?void 0:h.color}-text`]]),style:{scale:.7}}," thumb_up ",2)])}),256))])])])],2)):Ne("",!0)}const rE=vt(TL,[["render",kL]]),DL={props:{open:Boolean,member:{type:Object,required:!0}},emits:["dismiss"],components:{ActCard:rE}},NL={class:"surface-container fixed",style:{padding:"0 1rem"}},OL=O("i",null,"close",-1),LL=[OL],ML={class:"max"},xL={class:"padding"},VL={class:"middle-align"},FL=O("i",{class:"fill"},"favorite",-1),UL={style:{"margin-block-start":"0","margin-left":"1rem"}},$L=O("div",{class:"space"},null,-1),BL=O("div",{class:"large-space"},null,-1),jL={class:"middle-align"},HL=O("i",{class:"fill"},"thumb_up",-1),WL={style:{"margin-block-start":"0","margin-left":"1rem"}},qL=O("div",{class:"space"},null,-1);function KL(t,e,n,r,s,i){const o=ht("ActCard");return ee(),oe(ye,null,[O("div",{class:$e(["overlay",{active:n.open}]),onClick:e[0]||(e[0]=a=>t.$emit("dismiss"))},null,2),O("dialog",{class:$e([{active:n.open},"max-s no-padding"])},[O("header",NL,[O("nav",null,[O("button",{class:"circle transparent",onClick:e[1]||(e[1]=a=>t.$emit("dismiss"))},LL),O("h5",ML,ue(n.member.name),1)])]),O("div",xL,[O("div",VL,[FL,O("h6",UL,ue(t.$t("common.liked")),1)]),$L,(ee(!0),oe(ye,null,Qt(n.member.likes,a=>(ee(),cn(o,{model:t.$client.container.actByUid.value.get(a)},null,8,["model"]))),256)),BL,O("div",jL,[HL,O("h6",WL,ue(t.$t("common.recommended")),1)]),qL,(ee(!0),oe(ye,null,Qt(n.member.suggestions,a=>(ee(),cn(o,{model:t.$client.container.actByUid.value.get(a)},null,8,["model"]))),256))])],2)],64)}const GL=vt(DL,[["render",KL]]),zL={data(){return{openDialog:!1,selectedMember:void 0}},methods:{update(){var e;let t=this.$route.query.member;if(t===void 0)this.openDialog=!1;else{let n=(e=this.$client.space)==null?void 0:e.members.find(r=>r.id==t+"");this.selectedMember=n,setTimeout(()=>{this.openDialog=!0},50)}},dismiss(){this.$router.back()}},mounted(){this.update()},watch:{$route(){this.update()}},components:{MemberDetailsDialog:GL}};function YL(t,e,n,r,s,i){const o=ht("MemberDetailsDialog");return s.selectedMember!=null?(ee(),cn(o,{key:0,open:s.openDialog,member:s.selectedMember,onDismiss:e[0]||(e[0]=a=>i.dismiss())},null,8,["open","member"])):Ne("",!0)}const QL=vt(zL,[["render",YL]]),JL={data(){return{active:!1,installPrompt:void 0}},mounted(){window.addEventListener("beforeinstallprompt",t=>{this.installPrompt=t,this.active=!0})},methods:{install(){this.installPrompt.prompt()}}},XL={class:"max"},ZL=O("i",null,"add",-1),eM=[ZL];function tM(t,e,n,r,s,i){return ee(),oe("div",{class:$e(["snackbar primary",{active:s.active}]),onClick:e[1]||(e[1]=o=>i.install())},[O("div",XL,ue(t.$t("pwaAdvert")),1),O("button",{class:"fill circle no-elevate",onClick:e[0]||(e[0]=o=>i.install())},eM)],2)}const nM=vt(JL,[["render",tM]]),rM={data(){return{offlineCheckInterval:0,onlineAgain:!1,toggleOfflineSnackbar:!1}},methods:{updateThemeColor(){var n;let t=ui("mode"),e=ui("theme")[t].split("--surface-container:")[1].split(";")[0];(n=document.querySelector('meta[name="theme-color"]'))==null||n.setAttribute("content",e)},checkSystemTheme(){this.$ctx.systemDarkMode.value&&(this.$ctx.darkMode.value=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)},checkOffline(){clearInterval(this.offlineCheckInterval),this.$client.offline.value&&(this.offlineCheckInterval=setInterval(async()=>{try{await fetch(`/${crypto.randomUUID()}`,{signal:AbortSignal.timeout(3500)}),this.onlineAgain=!0}catch(t){console.error(t)}},4e3))},reloadPage(){window.location.reload()}},mounted(){this.$ctx.darkMode.value=(localStorage.getItem("darkMode")||"false")=="true",this.$ctx.systemDarkMode.value=(localStorage.getItem("systemDarkMode")||"true")=="true",this.checkSystemTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.$ctx.systemDarkMode.value&&(this.$ctx.darkMode.value=t.matches)}),setTimeout(()=>{this.updateThemeColor()},50),this.checkOffline()},watch:{"$ctx.systemDarkMode.value"(){this.checkSystemTheme(),localStorage.setItem("systemDarkMode",this.$ctx.systemDarkMode.value+"")},"$ctx.darkMode.value"(){ui("mode",this.$ctx.darkMode.value?"dark":"light"),this.updateThemeColor(),localStorage.setItem("darkMode",this.$ctx.darkMode.value+"")},"$client.offline.value"(){this.checkOffline()},"showOfflineReadyToast.value"(){this.showOfflineReadyToast.value&&setTimeout(()=>{this.showOfflineReadyToast.value=!1},4e3)}},components:{Navigation:qN,LoginView:nE,RouteBasedActDetailsDialog:wL,RouteBasedMemberDetailsDialog:QL,AdvertisePWA:nM}},sM={key:0,class:"max responsive center-align middle-align flex column"},iM=O("progress",{style:{"max-width":"300px"}},null,-1),oM=O("i",null,"offline_bolt",-1),aM=O("div",{class:"space"},null,-1),lM={class:"right-align no-space"},cM=O("i",null,"globe",-1),uM=O("i",null,"offline_bolt",-1),hM=O("i",null,"offline_bolt",-1),dM=O("i",null,"offline_bolt",-1);function fM(t,e,n,r,s,i){const o=ht("Navigation"),a=ht("RouterView"),l=ht("LoginView"),u=ht("RouteBasedActDetailsDialog"),h=ht("RouteBasedMemberDetailsDialog"),d=ht("AdvertisePWA");return ee(),oe(ye,null,[t.$ctx.loaded.value?Ne("",!0):(ee(),oe("main",sM,[iM,O("div",{class:$e(["snackbar primary center-align error",{active:t.$ctx.showOfflineButton.value}]),onClick:e[0]||(e[0]=m=>t.$client.activateOfflineMode())},[oM,O("div",null,ue(t.$t("app.offline.button.message")),1)],2)])),t.$ctx.loaded.value?(ee(),oe(ye,{key:1},[t.$route.meta.requiresAuth===!1||t.$ctx.currentUser.value!=null?(ee(),oe(ye,{key:0},[t.$route.meta.hideNavigation!==!0?(ee(),cn(o,{key:0})):Ne("",!0),He(a)],64)):Ne("",!0),t.$route.meta.requiresAuth!==!1&&t.$ctx.currentUser.value==null?(ee(),cn(l,{key:1})):Ne("",!0),He(u),He(h),O("div",{class:$e(["overlay",{active:t.openLoginNeededDialog.value}]),onClick:e[1]||(e[1]=m=>t.openLoginNeededDialog.value=!1)},null,2),O("dialog",{class:$e({active:t.openLoginNeededDialog.value})},[O("h5",null,ue(t.$t("dialog.login-needed.title")),1),O("div",null,ue(t.$t("dialog.login-needed.message")),1),aM,O("nav",lM,[O("button",{class:"no-elevate",onClick:e[2]||(e[2]=m=>{t.$router.push("/login"),t.openLoginNeededDialog.value=!1})},ue(t.$t("common.signIn")),1)])],2),He(d),O("div",{class:$e(["snackbar green center-align",{active:t.$client.offline.value&&s.onlineAgain}]),onClick:e[3]||(e[3]=m=>i.reloadPage())},[cM,O("div",null,ue(t.$t("app.offline.onlineAgain.message")),1)],2),O("div",{class:$e(["snackbar primary center-align error",{active:t.$client.offline.value&&!s.onlineAgain&&!s.toggleOfflineSnackbar}]),onClick:e[4]||(e[4]=m=>s.toggleOfflineSnackbar=!0)},[uM,O("div",null,ue(t.$t("app.offline.message")),1)],2),O("div",{class:$e(["snackbar primary center-align error top",{active:t.$client.offline.value&&!s.onlineAgain&&s.toggleOfflineSnackbar}]),onClick:e[5]||(e[5]=m=>s.toggleOfflineSnackbar=!1)},[hM,O("div",null,ue(t.$t("app.offline.message")),1)],2),O("div",{class:$e(["snackbar secondary center-align",{active:t.showOfflineReadyToast.value}]),onClick:e[6]||(e[6]=m=>t.showOfflineReadyToast.value=!1)},[dM,O("div",null,ue(t.$t("app.offline.ready.message")),1)],2)],64)):Ne("",!0)],64)}const mM=vt(rM,[["render",fM]]),gM={props:{label:{type:String}}},pM={class:"max center-align"},_M=O("i",{class:"ignore-hover-fill"},"sync",-1),yM=[_M],vM=O("i",{class:"ignore-hover-fill"},"light_mode",-1),EM=[vM],IM=O("i",{class:"ignore-hover-fill"},"dark_mode",-1),wM=[IM],TM=["src"];function bM(t,e,n,r,s,i){var o,a;return ee(),oe("header",null,[O("nav",null,[$y(t.$slots,"prepend"),O("h5",pM,ue(n.label),1),t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:0,class:"circle transparent",onClick:e[0]||(e[0]=l=>{t.$ctx.systemDarkMode.value=!1,t.$ctx.darkMode.value=!1})},yM)):Ne("",!0),!t.$ctx.darkMode.value&&!t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:1,class:"circle transparent",onClick:e[1]||(e[1]=l=>t.$ctx.darkMode.value=!0)},EM)):Ne("",!0),t.$ctx.darkMode.value&&!t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:2,class:"circle transparent",onClick:e[2]||(e[2]=l=>t.$ctx.systemDarkMode.value=!0)},wM)):Ne("",!0),(o=t.$ctx.currentUser.value)!=null&&o.photoURL?(ee(),oe("button",{key:3,class:"circle transparent",onClick:e[3]||(e[3]=l=>t.$router.push("/login"))},[O("img",{class:"responsive",src:(a=t.$ctx.currentUser.value)==null?void 0:a.photoURL},null,8,TM)])):Ne("",!0)])])}const sE=vt(gM,[["render",bM]]),AM={props:{filterStages:{type:Object,default:[]}},data(){return{currentSec:0,selectedDay:void 0,highlightedEventId:"",columns:[],timeCells:[],dateWasChosen:!1,menuActive:!1}},methods:{selectDay(t){this.selectedDay=t,this.dateWasChosen=!0,ui("#events-table-day-selector")},render(){var e;let t=[];for(let n of this.$client.container.events)n.data.festivalday.uid===((e=this.selectedDay)==null?void 0:e.uid)&&(n.end<this.currentSec&&!this.dateWasChosen||(t.includes(n.start)||t.push(n.start),t.includes(n.end)||t.push(n.end)));t.sort(),this.timeCells=t,this.columns=[];for(let n of this.$client.container.stages.value){if(this.filterStages.includes(n.uid))continue;let r={startOffset:0,label:n.title,eventEntryByRow:[]},s=this.$client.container.eventsByStageUid.value.get(n.uid);if(s===void 0)continue;s.sort((u,h)=>u.start-h.start);let i=new Map;for(let u of s)i.set(u.start,u);let o=new Map,a;for(let u of t)i.has(u)&&(a=i.get(u),a.columnSpan=0),a!=null&&a.end==u&&(a=void 0),a!=null&&(a.columnSpan++,o.set(u,a));let l=!1;for(let u of t)i.has(u)?(r.eventEntryByRow.push(i.get(u)),l=!0):o.has(u)||r.eventEntryByRow.push(null);l&&this.columns.push(r)}}},mounted(){let t=new Date;if(this.currentSec=t.getTime()/1e3,this.$route.query.eventId||this.$route.query.dayId){let e=(this.$route.query.eventId?()=>{let n=this.$client.container.eventByUid.value.get(this.$route.query.eventId+"");return n==null?void 0:n.data.festivalday.uid}:()=>{var n;return parseInt(((n=this.$route.query.dayId)==null?void 0:n.toString())||"")})();if(this.selectedDay=this.$client.container.days.value.find(n=>n.uid==e),this.$route.query.eventId){let n=this.$client.container.eventByUid.value.get(this.$route.query.eventId+"");setTimeout(()=>{let r=document.querySelector(`#event-${n==null?void 0:n.uid}`);r==null||r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),this.highlightedEventId=(n==null?void 0:n.uid)||"",setTimeout(()=>{this.highlightedEventId=""},2e3)},500)}}else{for(let e of this.$client.container.days.value)if(!(parseInt(e.end)<this.currentSec)){this.selectedDay=e;break}this.selectedDay===void 0&&(this.selectedDay=this.$client.container.days.value[this.$client.container.days.value.length-1])}this.render()},watch:{selectedDay(){var t;this.render(),this.$router.replace({query:{dayId:((t=this.selectedDay)==null?void 0:t.uid)||-1}})},filterStages(){this.render()}},components:{ActCard:rE}},CM={class:"center responsive s",style:{"z-index":"10"}},SM=O("i",null,"arrow_drop_down",-1),RM={id:"events-table-day-selector"},PM=["onClick"],kM={class:"l m no-space center-align"},DM=["onClick"],NM=O("div",{class:"space"},null,-1),OM={style:{height:"100%"}},LM={class:"scroll events-table",style:{display:"block","max-height":"100%","min-height":"100%"}},MM={class:"fixed"},xM={style:{"min-width":"150px"}},VM={style:{position:"sticky",left:"0","padding-bottom":"0"}},FM={class:"primary-text bold",style:{"margin-bottom":"0"}},UM=["colspan","id"],$M={key:1,class:"surface"};function BM(t,e,n,r,s,i){var a;const o=ht("ActCard");return ee(),oe(ye,null,[O("button",CM,[O("span",null,ue(t.$t(((a=s.selectedDay)==null?void 0:a.title)||"")),1),SM,O("menu",RM,[(ee(!0),oe(ye,null,Qt(t.$client.container.days.value,l=>(ee(),oe("a",{onClick:u=>i.selectDay(l)},ue(t.$t(l.title)),9,PM))),256))])]),O("nav",kM,[(ee(!0),oe(ye,null,Qt(t.$client.container.days.value.length,l=>(ee(),oe("button",{class:$e(["border",[`${l==1?"left":l==t.$client.container.days.value.length?"right":"no"}-round`,{fill:s.selectedDay==t.$client.container.days.value[l-1]}]]),onClick:u=>i.selectDay(t.$client.container.days.value[l-1])},[O("span",null,ue(t.$t(t.$client.container.days.value[l-1].title).substring(0,2)),1)],10,DM))),256))]),NM,O("div",OM,[O("table",LM,[O("thead",MM,[O("tr",null,[(ee(!0),oe(ye,null,Qt(s.timeCells,l=>(ee(),oe("th",xM,ue(new Date(l*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"})),1))),256))])]),O("tbody",null,[(ee(!0),oe(ye,null,Qt(s.columns,l=>(ee(),oe(ye,null,[O("tr",null,[O("td",VM,[O("p",FM,ue(l.label),1)]),(ee(!0),oe(ye,null,Qt(s.timeCells.length-1,u=>(ee(),oe("td"))),256))]),O("tr",null,[(ee(!0),oe(ye,null,Qt(l.eventEntryByRow,u=>(ee(),oe(ye,null,[u!=null?(ee(),oe("td",{key:0,colspan:u.columnSpan,id:`event-${u.uid}`,class:"surface",style:{"min-width":"300px",position:"sticky",left:"0"}},[He(o,{style:{"min-width":"300px",position:"sticky",left:"0"},model:u,highlighted:u.uid==s.highlightedEventId},null,8,["model","highlighted"])],8,UM)):Ne("",!0),u==null?(ee(),oe("td",$M)):Ne("",!0)],64))),256))])],64))),256))])])])],64)}const jM=vt(AM,[["render",BM]]),HM={data(){return{loaded:!1,filteredStageIds:[],finalFilteredStageIds:[],save:!1}},methods:{toggleFilter(t){this.filteredStageIds.includes(t)?this.filteredStageIds=this.filteredStageIds.filter(e=>e!=t):this.filteredStageIds.push(t)},openStageSelectionDialog(){this.$router.push({query:{dialogFilterStages:"true",...this.$route.query}})}},mounted(){if(localStorage.getItem("filterStages")!=null)try{let t=JSON.parse(localStorage.getItem("filterStages")||"");this.filteredStageIds=t,this.finalFilteredStageIds=t}catch(t){console.error(t)}(async()=>{var t;for(;((t=this.$client.space)==null?void 0:t.loaded)!=!0;)await ec(50);this.loaded=!0})()},beforeRouteUpdate(t,e){e.query.dialogFilterStages&&!t.query.dialogFilterStages&&(console.info("closed filter stages dialog"),this.finalFilteredStageIds=[...this.filteredStageIds],this.save&&localStorage.setItem("filterStages",JSON.stringify(this.finalFilteredStageIds)))},components:{AppBar:sE,EventsTable:jM}},WM=O("i",null,"tune",-1),qM={key:0,class:"badge"},KM={class:"responsive max"},GM={key:1,class:"middle-align center-align",style:{height:"100%"}},zM={class:"medium middle-align center-align"},YM=O("i",{class:"extra"},"tune",-1),QM={class:"center-align"},JM={class:"center-align"},XM=O("div",{class:"space"},null,-1),ZM={class:"center-align"},e4=O("div",{class:"space"},null,-1),t4=["onClick"],n4={class:"max"},r4={class:"switch"},s4=["checked","onClick"],i4=O("span",null,null,-1),o4=O("div",{class:"space"},null,-1),a4={class:"max"},l4={class:"switch"},c4=["checked"],u4=O("span",null,null,-1),h4=O("div",{class:"space"},null,-1),d4={class:"right-align no-space"};function f4(t,e,n,r,s,i){var l,u,h,d,m;const o=ht("AppBar"),a=ht("EventsTable");return ee(),oe(ye,null,[He(o,{label:s.loaded&&((l=t.$client.space)!=null&&l.name)?(u=t.$client.space)==null?void 0:u.name:t.$t("navigation.overview")},uT({_:2},[(h=t.$client.container.festival.value)!=null&&h.runningOrderActive?{name:"prepend",fn:gc(()=>[O("button",{class:"circle transparent",onClick:e[0]||(e[0]=g=>i.openStageSelectionDialog())},[WM,s.finalFilteredStageIds.length>0?(ee(),oe("div",qM,ue(s.finalFilteredStageIds.length),1)):Ne("",!0)])]),key:"0"}:void 0]),1032,["label"]),O("main",KM,[(d=t.$client.container.festival.value)!=null&&d.runningOrderActive?(ee(),cn(a,{key:0,filterStages:s.finalFilteredStageIds},null,8,["filterStages"])):Ne("",!0),((m=t.$client.container.festival.value)==null?void 0:m.runningOrderActive)!=!0?(ee(),oe("div",GM,[O("article",zM,[O("div",null,[YM,O("h5",QM,ue(t.$t("home.runningOrderInactive.title")),1),O("p",JM,ue(t.$t("home.runningOrderInactive.message")),1),XM,O("nav",ZM,[O("button",{onClick:e[1]||(e[1]=g=>t.$router.push("/acts"))},ue(t.$t("common.showActs")),1)])])])])):Ne("",!0)]),O("div",{class:$e(["overlay",{active:t.$route.query.dialogFilterStages}]),onClick:e[2]||(e[2]=g=>t.$router.back())},null,2),O("dialog",{class:$e({active:t.$route.query.dialogFilterStages})},[O("h5",null,ue(t.$t("home.dialog.filterStages.title")),1),O("article",null,[(ee(!0),oe(ye,null,Qt(t.$client.container.stages.value,g=>(ee(),oe(ye,null,[e4,O("div",{class:"field middle-align",style:{cursor:"pointer","margin-block-end":"1rem"},onClick:E=>i.toggleFilter(g.uid)},[O("nav",null,[O("div",n4,[O("h6",null,ue(g.title),1)]),O("label",r4,[O("input",{type:"checkbox",checked:!s.filteredStageIds.includes(g.uid),onClick:E=>i.toggleFilter(g.uid)},null,8,s4),i4])])],8,t4)],64))),256))]),o4,O("div",{class:"field middle-align",onClick:e[4]||(e[4]=g=>s.save=!s.save)},[O("nav",null,[O("div",a4,[O("h6",null,ue(t.$t("home.dialog.filterStages.save.title")),1),O("div",null,ue(t.$t("home.dialog.filterStages.save.description")),1)]),O("label",l4,[O("input",{type:"checkbox",checked:s.save,onClick:e[3]||(e[3]=g=>s.save=!s.save)},null,8,c4),u4])])]),h4,O("nav",d4,[O("button",{class:"no-elevate",onClick:e[5]||(e[5]=g=>t.$router.back())},ue(t.$t("common.ok")),1)])],2)],64)}const m4=vt(HM,[["render",f4]]);function g4(t){return(new DOMParser().parseFromString(t,"text/html").body.textContent||"").trim()}const p4={data(){return{WoaEventModelWrapper:js}},props:{model:{type:Object,required:!0},notLazy:{type:Boolean,default:!1}},methods:{removeHTMLTags(t){return g4(t)},openDialog(){this.$router.push({query:{details:this.model.uid}})},toggleSuggested(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleSuggested(this.model.uid)},toggleLike(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleLike(this.model.uid)}},components:{EventDetailsChips:kf}},_4={class:"absolute top right right padding white-text",style:{"z-index":"10"}},y4={key:0,class:"responsive large"},v4=["src"],E4={key:2,class:"absolute bottom left padding white-text rounded",style:{"z-index":"10","max-width":"50%",overflow:"hidden"}},I4={class:"blur small-padding",style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden"}},w4={key:3,class:"absolute bottom right padding white-text rounded",style:{"z-index":"10","max-width":"50%",overflow:"hidden"}},T4={class:"blur small-padding",style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden"}},b4={class:"padding",style:{"padding-bottom":"0 !important"}},A4={style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"3.6em","line-height":"1.2em"}},C4={class:"padding"},S4={style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"5em","line-height":"1.8em"}};function R4(t,e,n,r,s,i){var l,u,h,d,m,g,E,A,D,L;const o=ht("EventDetailsChips"),a=Fy("lazy");return n.model!=null?(ee(),oe("article",{key:0,class:$e(["no-padding",[(u=(l=t.$client.space)==null?void 0:l.self)!=null&&u.isLiked(n.model.uid)?"primary":n.model.likerIds.length>0||n.model.suggestorIds.length>0?"secondary":""]])},[O("div",_4,[O("button",{class:"blur circle",onClick:e[0]||(e[0]=k=>i.toggleSuggested())},[O("i",{class:$e({fill:(d=(h=t.$client.space)==null?void 0:h.self)==null?void 0:d.isSuggested(n.model.uid),"primary-text":(g=(m=t.$client.space)==null?void 0:m.self)==null?void 0:g.isSuggested(n.model.uid)})},"thumb_up",2)]),O("button",{class:"blur circle",onClick:e[1]||(e[1]=k=>i.toggleLike())},[O("i",{class:$e({fill:(A=(E=t.$client.space)==null?void 0:E.self)==null?void 0:A.isLiked(n.model.uid),"primary-text":(L=(D=t.$client.space)==null?void 0:D.self)==null?void 0:L.isLiked(n.model.uid)})},"favorite",2)])]),O("div",{onClick:e[2]||(e[2]=k=>i.openDialog()),class:"wave wave-big",style:{cursor:"pointer"}},[O("div",null,[n.notLazy?Ne("",!0):Do((ee(),oe("img",y4,null,512)),[[a,{src:n.model.cardThumbnailUrl()}]]),n.notLazy?(ee(),oe("img",{key:1,class:"responsive large",src:n.model.cardThumbnailUrl()},null,8,v4)):Ne("",!0),n.model.suggestorIds.length>0?(ee(),oe("div",E4,[O("div",I4,[(ee(!0),oe(ye,null,Qt(n.model.suggestorIds,k=>{var I;return ee(),oe("i",{class:$e(["fill",[`${(I=t.$client.container.spaceMemberById.get(k))==null?void 0:I.color}-text`]]),style:{scale:.7}}," thumb_up ",2)}),256))])])):Ne("",!0),n.model.likerIds.length>0?(ee(),oe("div",w4,[O("div",T4,[(ee(!0),oe(ye,null,Qt(n.model.likerIds,k=>{var I;return ee(),oe("i",{class:$e(["fill",[`${(I=t.$client.container.spaceMemberById.get(k))==null?void 0:I.color}-text`]]),style:{scale:.7}}," favorite ",2)}),256))])])):Ne("",!0)]),O("div",b4,[O("h5",A4,ue(n.model.cardTitle()),1)]),n.model instanceof s.WoaEventModelWrapper?(ee(),cn(o,{key:0,event:n.model},null,8,["event"])):Ne("",!0),O("div",C4,[O("p",S4,ue(i.removeHTMLTags(n.model.cardDescription())),1)])])],2)):Ne("",!0)}const P4=vt(p4,[["render",R4]]);function kr(t){return Array.isArray?Array.isArray(t):aE(t)==="[object Array]"}const k4=1/0;function D4(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-k4?"-0":e}function N4(t){return t==null?"":D4(t)}function zn(t){return typeof t=="string"}function iE(t){return typeof t=="number"}function O4(t){return t===!0||t===!1||L4(t)&&aE(t)=="[object Boolean]"}function oE(t){return typeof t=="object"}function L4(t){return oE(t)&&t!==null}function wn(t){return t!=null}function Bu(t){return!t.trim().length}function aE(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const M4="Incorrect 'index' type",x4=t=>`Invalid value for key ${t}`,V4=t=>`Pattern length exceeds max of ${t}.`,F4=t=>`Missing ${t} property in key`,U4=t=>`Property 'weight' in key '${t}' must be a positive integer`,i_=Object.prototype.hasOwnProperty;class $4{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=lE(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function lE(t){let e=null,n=null,r=null,s=1,i=null;if(zn(t)||kr(t))r=t,e=o_(t),n=Vh(t);else{if(!i_.call(t,"name"))throw new Error(F4("name"));const o=t.name;if(r=o,i_.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(U4(o));e=o_(o),n=Vh(o),i=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:i}}function o_(t){return kr(t)?t:t.split(".")}function Vh(t){return kr(t)?t.join("."):t}function B4(t,e){let n=[],r=!1;const s=(i,o,a)=>{if(wn(i))if(!o[a])n.push(i);else{let l=o[a];const u=i[l];if(!wn(u))return;if(a===o.length-1&&(zn(u)||iE(u)||O4(u)))n.push(N4(u));else if(kr(u)){r=!0;for(let h=0,d=u.length;h<d;h+=1)s(u[h],o,a+1)}else o.length&&s(u,o,a+1)}};return s(t,zn(e)?e.split("."):e,0),r?n:n[0]}const j4={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},H4={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},W4={location:0,threshold:.6,distance:100},q4={useExtendedSearch:!1,getFn:B4,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var be={...H4,...j4,...W4,...q4};const K4=/[^ ]+/g;function G4(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(K4).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class Df{constructor({getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){this.norm=G4(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,zn(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();zn(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!wn(e)||Bu(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(wn(o)){if(kr(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(wn(h))if(zn(h)&&!Bu(h)){let d={v:h,i:u,n:this.norm.get(h)};a.push(d)}else kr(h)&&h.forEach((d,m)=>{l.push({nestedArrIndex:m,value:d})})}r.$[i]=a}else if(zn(o)&&!Bu(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function cE(t,e,{getFn:n=be.getFn,fieldNormWeight:r=be.fieldNormWeight}={}){const s=new Df({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(lE)),s.setSources(e),s.create(),s}function z4(t,{getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){const{keys:r,records:s}=t,i=new Df({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function cl(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=be.distance,ignoreLocation:i=be.ignoreLocation}={}){const o=e/t.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function Y4(t=[],e=be.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let a=t[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}const Ls=32;function Q4(t,e,n,{location:r=be.location,distance:s=be.distance,threshold:i=be.threshold,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,includeMatches:l=be.includeMatches,ignoreLocation:u=be.ignoreLocation}={}){if(e.length>Ls)throw new Error(V4(Ls));const h=e.length,d=t.length,m=Math.max(0,Math.min(r,d));let g=i,E=m;const A=a>1||l,D=A?Array(d):[];let L;for(;(L=t.indexOf(e,E))>-1;){let y=cl(e,{currentLocation:L,expectedLocation:m,distance:s,ignoreLocation:u});if(g=Math.min(y,g),E=L+h,A){let _=0;for(;_<h;)D[L+_]=1,_+=1}}E=-1;let k=[],I=1,S=h+d;const B=1<<h-1;for(let y=0;y<h;y+=1){let _=0,v=S;for(;_<v;)cl(e,{errors:y,currentLocation:m+v,expectedLocation:m,distance:s,ignoreLocation:u})<=g?_=v:S=v,v=Math.floor((S-_)/2+_);S=v;let N=Math.max(1,m-v+1),x=o?d:Math.min(m+v,d)+h,M=Array(x+2);M[x+1]=(1<<y)-1;for(let Te=x;Te>=N;Te-=1){let Ke=Te-1,Pe=n[t.charAt(Ke)];if(A&&(D[Ke]=+!!Pe),M[Te]=(M[Te+1]<<1|1)&Pe,y&&(M[Te]|=(k[Te+1]|k[Te])<<1|1|k[Te+1]),M[Te]&B&&(I=cl(e,{errors:y,currentLocation:Ke,expectedLocation:m,distance:s,ignoreLocation:u}),I<=g)){if(g=I,E=Ke,E<=m)break;N=Math.max(1,2*m-E)}}if(cl(e,{errors:y+1,currentLocation:m,expectedLocation:m,distance:s,ignoreLocation:u})>g)break;k=M}const V={isMatch:E>=0,score:Math.max(.001,I)};if(A){const y=Y4(D,a);y.length?l&&(V.indices=y):V.isMatch=!1}return V}function J4(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class uE{constructor(e,{location:n=be.location,threshold:r=be.threshold,distance:s=be.distance,includeMatches:i=be.includeMatches,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,isCaseSensitive:l=be.isCaseSensitive,ignoreLocation:u=be.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(m,g)=>{this.chunks.push({pattern:m,alphabet:J4(m),startIndex:g})},d=this.pattern.length;if(d>Ls){let m=0;const g=d%Ls,E=d-g;for(;m<E;)h(this.pattern.substr(m,Ls),m),m+=Ls;if(g){const A=d-Ls;h(this.pattern.substr(A),A)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let E={isMatch:!0,score:0};return r&&(E.indices=[[0,e.length-1]]),E}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],d=0,m=!1;this.chunks.forEach(({pattern:E,alphabet:A,startIndex:D})=>{const{isMatch:L,score:k,indices:I}=Q4(e,E,A,{location:s+D,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});L&&(m=!0),d+=k,L&&I&&(h=[...h,...I])});let g={isMatch:m,score:m?d/this.chunks.length:1};return m&&r&&(g.indices=h),g}}class Es{constructor(e){this.pattern=e}static isMultiMatch(e){return a_(e,this.multiRegex)}static isSingleMatch(e){return a_(e,this.singleRegex)}search(){}}function a_(t,e){const n=t.match(e);return n?n[1]:null}class X4 extends Es{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Z4 extends Es{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class ex extends Es{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class tx extends Es{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class nx extends Es{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class rx extends Es{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class hE extends Es{constructor(e,{location:n=be.location,threshold:r=be.threshold,distance:s=be.distance,includeMatches:i=be.includeMatches,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,isCaseSensitive:l=be.isCaseSensitive,ignoreLocation:u=be.ignoreLocation}={}){super(e),this._bitapSearch=new uE(e,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class dE extends Es{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Fh=[X4,dE,ex,tx,rx,nx,Z4,hE],l_=Fh.length,sx=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ix="|";function ox(t,e={}){return t.split(ix).map(n=>{let r=n.trim().split(sx).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let l=!1,u=-1;for(;!l&&++u<l_;){const h=Fh[u];let d=h.isMultiMatch(a);d&&(s.push(new h(d,e)),l=!0)}if(!l)for(u=-1;++u<l_;){const h=Fh[u];let d=h.isSingleMatch(a);if(d){s.push(new h(d,e));break}}}return s})}const ax=new Set([hE.type,dE.type]);class lx{constructor(e,{isCaseSensitive:n=be.isCaseSensitive,includeMatches:r=be.includeMatches,minMatchCharLength:s=be.minMatchCharLength,ignoreLocation:i=be.ignoreLocation,findAllMatches:o=be.findAllMatches,location:a=be.location,threshold:l=be.threshold,distance:u=be.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:l,distance:u},this.pattern=n?e:e.toLowerCase(),this.query=ox(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];o.length=0,i=0;for(let d=0,m=h.length;d<m;d+=1){const g=h[d],{isMatch:E,indices:A,score:D}=g.search(e);if(E){if(i+=1,a+=D,r){const L=g.constructor.type;ax.has(L)?o=[...o,...A]:o.push(A)}}else{a=0,i=0,o.length=0;break}}if(i){let d={isMatch:!0,score:a/i};return r&&(d.indices=o),d}}return{isMatch:!1,score:1}}}const Uh=[];function cx(...t){Uh.push(...t)}function $h(t,e){for(let n=0,r=Uh.length;n<r;n+=1){let s=Uh[n];if(s.condition(t,e))return new s(t,e)}return new uE(t,e)}const tc={AND:"$and",OR:"$or"},Bh={PATH:"$path",PATTERN:"$val"},jh=t=>!!(t[tc.AND]||t[tc.OR]),ux=t=>!!t[Bh.PATH],hx=t=>!kr(t)&&oE(t)&&!jh(t),c_=t=>({[tc.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function fE(t,e,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=ux(s);if(!o&&i.length>1&&!jh(s))return r(c_(s));if(hx(s)){const l=o?s[Bh.PATH]:i[0],u=o?s[Bh.PATTERN]:s[l];if(!zn(u))throw new Error(x4(l));const h={keyId:Vh(l),pattern:u};return n&&(h.searcher=$h(u,e)),h}let a={children:[],operator:i[0]};return i.forEach(l=>{const u=s[l];kr(u)&&u.forEach(h=>{a.children.push(r(h))})}),a};return jh(t)||(t=c_(t)),r(t)}function dx(t,{ignoreFieldNorm:e=be.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),n.score=r})}function fx(t,e){const n=t.matches;e.matches=[],wn(n)&&n.forEach(r=>{if(!wn(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function mx(t,e){e.score=t.score}function gx(t,e,{includeMatches:n=be.includeMatches,includeScore:r=be.includeScore}={}){const s=[];return n&&s.push(fx),r&&s.push(mx),t.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return s.length&&s.forEach(l=>{l(i,a)}),a})}class Xi{constructor(e,n={},r){this.options={...be,...n},this.options.useExtendedSearch,this._keyStore=new $4(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Df))throw new Error(M4);this._myIndex=n||cE(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){wn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let l=zn(e)?zn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return dx(l,{ignoreFieldNorm:a}),i&&l.sort(o),iE(n)&&n>-1&&(l=l.slice(0,n)),gx(l,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const n=$h(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!wn(i))return;const{isMatch:l,score:u,indices:h}=n.searchIn(i);l&&s.push({item:i,idx:o,matches:[{score:u,value:i,norm:a,indices:h}]})}),s}_searchLogical(e){const n=fE(e,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:d,searcher:m}=a,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:m});return g&&g.length?[{idx:u,item:l,matches:g}]:[]}const h=[];for(let d=0,m=a.children.length;d<m;d+=1){const g=a.children[d],E=r(g,l,u);if(E.length)h.push(...E);else if(a.operator===tc.AND)return[]}return h},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:l})=>{if(wn(a)){let u=r(n,a,l);u.length&&(i[l]||(i[l]={idx:l,item:a,matches:[]},o.push(i[l])),u.forEach(({matches:h})=>{i[l].matches.push(...h)}))}}),o}_searchObjectList(e){const n=$h(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!wn(o))return;let l=[];r.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:o[h],searcher:n}))}),l.length&&i.push({idx:a,item:o,matches:l})}),i}_findMatches({key:e,value:n,searcher:r}){if(!wn(n))return[];let s=[];if(kr(n))n.forEach(({v:i,i:o,n:a})=>{if(!wn(i))return;const{isMatch:l,score:u,indices:h}=r.searchIn(i);l&&s.push({score:u,key:e,value:i,idx:o,norm:a,indices:h})});else{const{v:i,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(i);a&&s.push({score:l,key:e,value:i,norm:o,indices:u})}return s}}Xi.version="7.0.0";Xi.createIndex=cE;Xi.parseIndex=z4;Xi.config=be;Xi.parseQuery=fE;cx(lx);const px={data(){return{query:"",queryTimeout:0,queryResults:void 0,resultsShown:10,onlyConcerts:!1,sortTime:!1}},methods:{processQuery(){if(this.query.length<2){this.queryResults=[...this.$client.container.combinedActs],this.sortTime&&this.sortQueryResultsAfterTime();return}const t=new Xi(this.$client.container.combinedActs,{keys:["_cardTitle"],includeScore:!0});this.queryResults=[];for(let e of t.search(this.query))(e.score||0)>.5||this.queryResults.push(e.item);this.sortTime&&this.sortQueryResultsAfterTime()},sortQueryResultsAfterTime(){var e,n;let t=new Date().getTime()/1e3;this.queryResults=(e=this.queryResults)==null?void 0:e.filter(r=>r instanceof js?r.end>t:!0),(n=this.queryResults)==null||n.sort((r,s)=>r instanceof js&&s instanceof js?r.start-s.start:0)},async showMore(){var t;this.resultsShown>(((t=this.queryResults)==null?void 0:t.length)||1/0)||(this.resultsShown=this.resultsShown+10,await ec(50),this.mountObserver())},async mountObserver(){for(;;){if(await ec(50),this.$refs["grid-end"]===void 0)continue;let t=this.$refs["grid-end"][0];new IntersectionObserver(n=>{n[0].isIntersecting&&this.showMore()}).observe(t);break}}},mounted(){this.processQuery(),this.mountObserver()},watch:{query(){clearTimeout(this.queryTimeout),this.queryTimeout=setTimeout(()=>{this.processQuery()},1e3)},sortTime(){this.processQuery()}},components:{AppBar:sE,BigActCard:P4}},_x=O("i",null,"swipe",-1),yx=[_x],vx={class:"responsive max"},Ex={class:"field large prefix round fill"},Ix=O("i",{class:"front"},"search",-1),wx=["placeholder"],Tx=O("i",null,"headphones",-1),bx={class:"max"},Ax={class:"switch"},Cx=O("span",null,null,-1),Sx=O("i",null,"schedule",-1),Rx={class:"max"},Px={class:"switch"},kx=O("span",null,null,-1),Dx={class:"flex right-align"},Nx={style:{"margin-right":"16px"}},Ox={class:"grid"},Lx={key:0,class:"s12 m6 l4"};function Mx(t,e,n,r,s,i){var l,u;const o=ht("AppBar"),a=ht("BigActCard");return ee(),oe(ye,null,[He(o,{label:t.$t("navigation.acts")},{prepend:gc(()=>[O("button",{class:"circle transparent",onClick:e[0]||(e[0]=h=>t.$router.push("/swiper"))},yx)]),_:1},8,["label"]),O("main",vx,[O("div",Ex,[Ix,Do(O("input",{class:"search",placeholder:t.$t("acts.search.placeholder"),"onUpdate:modelValue":e[1]||(e[1]=h=>s.query=h)},null,8,wx),[[Tb,s.query]])]),O("div",{class:"field prefix middle-align",onClick:e[4]||(e[4]=h=>s.onlyConcerts=!s.onlyConcerts)},[O("nav",null,[Tx,O("div",bx,[O("h6",null,ue(t.$t("acts.filter.onlyConcerts.label")),1),O("div",null,ue(t.$t("acts.filter.onlyConcerts.description")),1)]),O("label",Ax,[Do(O("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=h=>s.onlyConcerts=h),onClick:e[3]||(e[3]=h=>s.onlyConcerts=!s.onlyConcerts)},null,512),[[_g,s.onlyConcerts]]),Cx])])]),O("div",{class:"field prefix middle-align",onClick:e[7]||(e[7]=h=>s.sortTime=!s.sortTime)},[O("nav",null,[Sx,O("div",Rx,[O("h6",null,ue(t.$t("acts.filter.sortTime.label")),1),O("div",null,ue(t.$t("acts.filter.sortTime.description")),1)]),O("label",Px,[Do(O("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=h=>s.sortTime=h),onClick:e[6]||(e[6]=h=>s.sortTime=!s.sortTime)},null,512),[[_g,s.sortTime]]),kx])])]),O("div",Dx,[O("span",Nx,ue(t.$tc("acts.results",((l=s.queryResults)==null?void 0:l.length)||0)),1)]),O("div",Ox,[(ee(!0),oe(ye,null,Qt((u=s.queryResults)==null?void 0:u.length,h=>(ee(),oe(ye,null,[h<s.resultsShown?(ee(),oe(ye,{key:0},[!s.onlyConcerts||s.queryResults[h-1].isConcert()?(ee(),oe("div",Lx,[He(a,{model:s.queryResults[h-1]},null,8,["model"])])):Ne("",!0),h==s.resultsShown-4?(ee(),oe("span",{key:1,ref_for:!0,ref:"grid-end"},null,512)):Ne("",!0)],64)):Ne("",!0)],64))),256))])])],64)}const xx=vt(px,[["render",Mx]]),Vx=ON({history:aN("/"),routes:[{path:"/",name:"overview",component:m4,meta:{navId:"home",requiresAuth:!1}},{path:"/acts",name:"acts",component:xx,meta:{navId:"acts",requiresAuth:!1}},{path:"/swiper",name:"swiper",component:()=>gr(()=>import("./SwiperView-DDWU9dvu.js"),__vite__mapDeps([0,1]))},{path:"/members",name:"members",component:()=>gr(()=>import("./MembersView-CjqJzKzY.js"),__vite__mapDeps([2,3])),meta:{navId:"members"}},{path:"/settings",name:"settings",component:()=>gr(()=>import("./SettingsView-D-bNCl8L.js"),[]),meta:{navId:"settings"}},{path:"/login",name:"login",component:()=>gr(()=>Promise.resolve().then(()=>NO),void 0),meta:{navId:"login",requiresAuth:!1}},{path:"/login/mail",name:"login via mail",component:()=>gr(()=>import("./LoginMailView-DqRtUbUa.js"),[]),meta:{navId:"login",requiresAuth:!1}},{path:"/join",name:"join",component:()=>gr(()=>import("./JoinView--qMO0IHV.js"),[]),meta:{requiresAuth:!1,hideNavigation:!0}}]});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const nc=typeof window<"u",Is=(t,e=!1)=>e?Symbol.for(t):Symbol(t),Fx=(t,e,n)=>Ux({l:t,k:e,s:n}),Ux=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Tt=t=>typeof t=="number"&&isFinite(t),$x=t=>gE(t)==="[object Date]",ms=t=>gE(t)==="[object RegExp]",Kc=t=>Ae(t)&&Object.keys(t).length===0,jt=Object.assign;let u_;const _r=()=>u_||(u_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function h_(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Bx=Object.prototype.hasOwnProperty;function rc(t,e){return Bx.call(t,e)}const ot=Array.isArray,tt=t=>typeof t=="function",le=t=>typeof t=="string",Le=t=>typeof t=="boolean",Ye=t=>t!==null&&typeof t=="object",jx=t=>Ye(t)&&tt(t.then)&&tt(t.catch),mE=Object.prototype.toString,gE=t=>mE.call(t),Ae=t=>{if(!Ye(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},Hx=t=>t==null?"":ot(t)||Ae(t)&&t.toString===mE?JSON.stringify(t,null,2):String(t);function Wx(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function Gc(t){let e=t;return()=>++e}function qx(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const ul=t=>!Ye(t)||ot(t);function Cl(t,e){if(ul(t)||ul(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{ul(r[i])||ul(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Kx(t,e,n){return{line:t,column:e,offset:n}}function sc(t,e,n){return{start:t,end:e}}const Gx=/\{([0-9a-zA-Z]+)\}/g;function pE(t,...e){return e.length===1&&zx(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(Gx,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const _E=Object.assign,d_=t=>typeof t=="string",zx=t=>t!==null&&typeof t=="object";function yE(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Nf={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},Yx={[Nf.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function Qx(t,e,...n){const r=pE(Yx[t],...n||[]),s={message:String(r),code:t};return e&&(s.location=e),s}const ve={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Jx={[ve.EXPECTED_TOKEN]:"Expected token: '{0}'",[ve.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[ve.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[ve.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[ve.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[ve.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[ve.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[ve.EMPTY_PLACEHOLDER]:"Empty placeholder",[ve.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[ve.INVALID_LINKED_FORMAT]:"Invalid linked format",[ve.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[ve.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[ve.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[ve.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[ve.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[ve.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Zi(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=pE((s||Jx)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function Xx(t){throw t}const hr=" ",Zx="\r",on=`
`,eV="\u2028",tV="\u2029";function nV(t){const e=t;let n=0,r=1,s=1,i=0;const o=y=>e[y]===Zx&&e[y+1]===on,a=y=>e[y]===on,l=y=>e[y]===tV,u=y=>e[y]===eV,h=y=>o(y)||a(y)||l(y)||u(y),d=()=>n,m=()=>r,g=()=>s,E=()=>i,A=y=>o(y)||l(y)||u(y)?on:e[y],D=()=>A(n),L=()=>A(n+i);function k(){return i=0,h(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function I(){return o(n+i)&&i++,i++,e[n+i]}function S(){n=0,r=1,s=1,i=0}function B(y=0){i=y}function V(){const y=n+i;for(;y!==n;)k();i=0}return{index:d,line:m,column:g,peekOffset:E,charAt:A,currentChar:D,currentPeek:L,next:k,peek:I,reset:S,resetPeek:B,skipToPeek:V}}const Br=void 0,rV=".",f_="'",sV="tokenizer";function iV(t,e={}){const n=e.location!==!1,r=nV(t),s=()=>r.index(),i=()=>Kx(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:h}=e;function d(b,C,F,...K){const te=u();if(C.column+=F,C.offset+=F,h){const Q=n?sc(te.startLoc,C):null,U=Zi(b,Q,{domain:sV,args:K});h(U)}}function m(b,C,F){b.endLoc=i(),b.currentType=C;const K={type:C};return n&&(K.loc=sc(b.startLoc,b.endLoc)),F!=null&&(K.value=F),K}const g=b=>m(b,14);function E(b,C){return b.currentChar()===C?(b.next(),C):(d(ve.EXPECTED_TOKEN,i(),0,C),"")}function A(b){let C="";for(;b.currentPeek()===hr||b.currentPeek()===on;)C+=b.currentPeek(),b.peek();return C}function D(b){const C=A(b);return b.skipToPeek(),C}function L(b){if(b===Br)return!1;const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C===95}function k(b){if(b===Br)return!1;const C=b.charCodeAt(0);return C>=48&&C<=57}function I(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=L(b.currentPeek());return b.resetPeek(),K}function S(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=b.currentPeek()==="-"?b.peek():b.currentPeek(),te=k(K);return b.resetPeek(),te}function B(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=b.currentPeek()===f_;return b.resetPeek(),K}function V(b,C){const{currentType:F}=C;if(F!==8)return!1;A(b);const K=b.currentPeek()===".";return b.resetPeek(),K}function y(b,C){const{currentType:F}=C;if(F!==9)return!1;A(b);const K=L(b.currentPeek());return b.resetPeek(),K}function _(b,C){const{currentType:F}=C;if(!(F===8||F===12))return!1;A(b);const K=b.currentPeek()===":";return b.resetPeek(),K}function v(b,C){const{currentType:F}=C;if(F!==10)return!1;const K=()=>{const Q=b.currentPeek();return Q==="{"?L(b.peek()):Q==="@"||Q==="%"||Q==="|"||Q===":"||Q==="."||Q===hr||!Q?!1:Q===on?(b.peek(),K()):M(b,!1)},te=K();return b.resetPeek(),te}function N(b){A(b);const C=b.currentPeek()==="|";return b.resetPeek(),C}function x(b){const C=A(b),F=b.currentPeek()==="%"&&b.peek()==="{";return b.resetPeek(),{isModulo:F,hasSpace:C.length>0}}function M(b,C=!0){const F=(te=!1,Q="",U=!1)=>{const H=b.currentPeek();return H==="{"?Q==="%"?!1:te:H==="@"||!H?Q==="%"?!0:te:H==="%"?(b.peek(),F(te,"%",!0)):H==="|"?Q==="%"||U?!0:!(Q===hr||Q===on):H===hr?(b.peek(),F(!0,hr,U)):H===on?(b.peek(),F(!0,on,U)):!0},K=F();return C&&b.resetPeek(),K}function R(b,C){const F=b.currentChar();return F===Br?Br:C(F)?(b.next(),F):null}function Te(b){const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C>=48&&C<=57||C===95||C===36}function Ke(b){return R(b,Te)}function Pe(b){const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C>=48&&C<=57||C===95||C===36||C===45}function Ce(b){return R(b,Pe)}function Ie(b){const C=b.charCodeAt(0);return C>=48&&C<=57}function at(b){return R(b,Ie)}function mt(b){const C=b.charCodeAt(0);return C>=48&&C<=57||C>=65&&C<=70||C>=97&&C<=102}function Je(b){return R(b,mt)}function Fe(b){let C="",F="";for(;C=at(b);)F+=C;return F}function We(b){D(b);const C=b.currentChar();return C!=="%"&&d(ve.EXPECTED_TOKEN,i(),0,C),b.next(),"%"}function xt(b){let C="";for(;;){const F=b.currentChar();if(F==="{"||F==="}"||F==="@"||F==="|"||!F)break;if(F==="%")if(M(b))C+=F,b.next();else break;else if(F===hr||F===on)if(M(b))C+=F,b.next();else{if(N(b))break;C+=F,b.next()}else C+=F,b.next()}return C}function St(b){D(b);let C="",F="";for(;C=Ce(b);)F+=C;return b.currentChar()===Br&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F}function ut(b){D(b);let C="";return b.currentChar()==="-"?(b.next(),C+=`-${Fe(b)}`):C+=Fe(b),b.currentChar()===Br&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),C}function z(b){return b!==f_&&b!==on}function ie(b){D(b),E(b,"'");let C="",F="";for(;C=R(b,z);)C==="\\"?F+=re(b):F+=C;const K=b.currentChar();return K===on||K===Br?(d(ve.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),K===on&&(b.next(),E(b,"'")),F):(E(b,"'"),F)}function re(b){const C=b.currentChar();switch(C){case"\\":case"'":return b.next(),`\\${C}`;case"u":return ce(b,C,4);case"U":return ce(b,C,6);default:return d(ve.UNKNOWN_ESCAPE_SEQUENCE,i(),0,C),""}}function ce(b,C,F){E(b,C);let K="";for(let te=0;te<F;te++){const Q=Je(b);if(!Q){d(ve.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${C}${K}${b.currentChar()}`);break}K+=Q}return`\\${C}${K}`}function Oe(b){return b!=="{"&&b!=="}"&&b!==hr&&b!==on}function Be(b){D(b);let C="",F="";for(;C=R(b,Oe);)F+=C;return F}function P(b){let C="",F="";for(;C=Ke(b);)F+=C;return F}function T(b){const C=F=>{const K=b.currentChar();return K==="{"||K==="%"||K==="@"||K==="|"||K==="("||K===")"||!K||K===hr?F:(F+=K,b.next(),C(F))};return C("")}function $(b){D(b);const C=E(b,"|");return D(b),C}function Y(b,C){let F=null;switch(b.currentChar()){case"{":return C.braceNest>=1&&d(ve.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),b.next(),F=m(C,2,"{"),D(b),C.braceNest++,F;case"}":return C.braceNest>0&&C.currentType===2&&d(ve.EMPTY_PLACEHOLDER,i(),0),b.next(),F=m(C,3,"}"),C.braceNest--,C.braceNest>0&&D(b),C.inLinked&&C.braceNest===0&&(C.inLinked=!1),F;case"@":return C.braceNest>0&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F=G(b,C)||g(C),C.braceNest=0,F;default:{let te=!0,Q=!0,U=!0;if(N(b))return C.braceNest>0&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,F;if(C.braceNest>0&&(C.currentType===5||C.currentType===6||C.currentType===7))return d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),C.braceNest=0,J(b,C);if(te=I(b,C))return F=m(C,5,St(b)),D(b),F;if(Q=S(b,C))return F=m(C,6,ut(b)),D(b),F;if(U=B(b,C))return F=m(C,7,ie(b)),D(b),F;if(!te&&!Q&&!U)return F=m(C,13,Be(b)),d(ve.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,F.value),D(b),F;break}}return F}function G(b,C){const{currentType:F}=C;let K=null;const te=b.currentChar();switch((F===8||F===9||F===12||F===10)&&(te===on||te===hr)&&d(ve.INVALID_LINKED_FORMAT,i(),0),te){case"@":return b.next(),K=m(C,8,"@"),C.inLinked=!0,K;case".":return D(b),b.next(),m(C,9,".");case":":return D(b),b.next(),m(C,10,":");default:return N(b)?(K=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,K):V(b,C)||_(b,C)?(D(b),G(b,C)):y(b,C)?(D(b),m(C,12,P(b))):v(b,C)?(D(b),te==="{"?Y(b,C)||K:m(C,11,T(b))):(F===8&&d(ve.INVALID_LINKED_FORMAT,i(),0),C.braceNest=0,C.inLinked=!1,J(b,C))}}function J(b,C){let F={type:14};if(C.braceNest>0)return Y(b,C)||g(C);if(C.inLinked)return G(b,C)||g(C);switch(b.currentChar()){case"{":return Y(b,C)||g(C);case"}":return d(ve.UNBALANCED_CLOSING_BRACE,i(),0),b.next(),m(C,3,"}");case"@":return G(b,C)||g(C);default:{if(N(b))return F=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,F;const{isModulo:te,hasSpace:Q}=x(b);if(te)return Q?m(C,0,xt(b)):m(C,4,We(b));if(M(b))return m(C,0,xt(b));break}}return F}function se(){const{currentType:b,offset:C,startLoc:F,endLoc:K}=l;return l.lastType=b,l.lastOffset=C,l.lastStartLoc=F,l.lastEndLoc=K,l.offset=s(),l.startLoc=i(),r.currentChar()===Br?m(l,14):J(r,l)}return{nextToken:se,currentOffset:s,currentPosition:i,context:u}}const oV="parser",aV=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function lV(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function cV(t={}){const e=t.location!==!1,{onError:n,onWarn:r}=t;function s(I,S,B,V,...y){const _=I.currentPosition();if(_.offset+=V,_.column+=V,n){const v=e?sc(B,_):null,N=Zi(S,v,{domain:oV,args:y});n(N)}}function i(I,S,B,V,...y){const _=I.currentPosition();if(_.offset+=V,_.column+=V,r){const v=e?sc(B,_):null;r(Qx(S,v,y))}}function o(I,S,B){const V={type:I};return e&&(V.start=S,V.end=S,V.loc={start:B,end:B}),V}function a(I,S,B,V){e&&(I.end=S,I.loc&&(I.loc.end=B))}function l(I,S){const B=I.context(),V=o(3,B.offset,B.startLoc);return V.value=S,a(V,I.currentOffset(),I.currentPosition()),V}function u(I,S){const B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(5,V,y);return _.index=parseInt(S,10),I.nextToken(),a(_,I.currentOffset(),I.currentPosition()),_}function h(I,S,B){const V=I.context(),{lastOffset:y,lastStartLoc:_}=V,v=o(4,y,_);return v.key=S,B===!0&&(v.modulo=!0),I.nextToken(),a(v,I.currentOffset(),I.currentPosition()),v}function d(I,S){const B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(9,V,y);return _.value=S.replace(aV,lV),I.nextToken(),a(_,I.currentOffset(),I.currentPosition()),_}function m(I){const S=I.nextToken(),B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(8,V,y);return S.type!==12?(s(I,ve.UNEXPECTED_EMPTY_LINKED_MODIFIER,B.lastStartLoc,0),_.value="",a(_,V,y),{nextConsumeToken:S,node:_}):(S.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,Mn(S)),_.value=S.value||"",a(_,I.currentOffset(),I.currentPosition()),{node:_})}function g(I,S){const B=I.context(),V=o(7,B.offset,B.startLoc);return V.value=S,a(V,I.currentOffset(),I.currentPosition()),V}function E(I){const S=I.context(),B=o(6,S.offset,S.startLoc);let V=I.nextToken();if(V.type===9){const y=m(I);B.modifier=y.node,V=y.nextConsumeToken||I.nextToken()}switch(V.type!==10&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),V=I.nextToken(),V.type===2&&(V=I.nextToken()),V.type){case 11:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=g(I,V.value||"");break;case 5:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=h(I,V.value||"");break;case 6:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=u(I,V.value||"");break;case 7:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=d(I,V.value||"");break;default:{s(I,ve.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const y=I.context(),_=o(7,y.offset,y.startLoc);return _.value="",a(_,y.offset,y.startLoc),B.key=_,a(B,y.offset,y.startLoc),{nextConsumeToken:V,node:B}}}return a(B,I.currentOffset(),I.currentPosition()),{node:B}}function A(I){const S=I.context(),B=S.currentType===1?I.currentOffset():S.offset,V=S.currentType===1?S.endLoc:S.startLoc,y=o(2,B,V);y.items=[];let _=null,v=null;do{const M=_||I.nextToken();switch(_=null,M.type){case 0:M.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(M)),y.items.push(l(I,M.value||""));break;case 6:M.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(M)),y.items.push(u(I,M.value||""));break;case 4:v=!0;break;case 5:M.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(M)),y.items.push(h(I,M.value||"",!!v)),v&&(i(I,Nf.USE_MODULO_SYNTAX,S.lastStartLoc,0,Mn(M)),v=null);break;case 7:M.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(M)),y.items.push(d(I,M.value||""));break;case 8:{const R=E(I);y.items.push(R.node),_=R.nextConsumeToken||null;break}}}while(S.currentType!==14&&S.currentType!==1);const N=S.currentType===1?S.lastOffset:I.currentOffset(),x=S.currentType===1?S.lastEndLoc:I.currentPosition();return a(y,N,x),y}function D(I,S,B,V){const y=I.context();let _=V.items.length===0;const v=o(1,S,B);v.cases=[],v.cases.push(V);do{const N=A(I);_||(_=N.items.length===0),v.cases.push(N)}while(y.currentType!==14);return _&&s(I,ve.MUST_HAVE_MESSAGES_IN_PLURAL,B,0),a(v,I.currentOffset(),I.currentPosition()),v}function L(I){const S=I.context(),{offset:B,startLoc:V}=S,y=A(I);return S.currentType===14?y:D(I,B,V,y)}function k(I){const S=iV(I,_E({},t)),B=S.context(),V=o(0,B.offset,B.startLoc);return e&&V.loc&&(V.loc.source=I),V.body=L(S),t.onCacheKey&&(V.cacheKey=t.onCacheKey(I)),B.currentType!==14&&s(S,ve.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,I[B.offset]||""),a(V,S.currentOffset(),S.currentPosition()),V}return{parse:k}}function Mn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function uV(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function m_(t,e){for(let n=0;n<t.length;n++)Of(t[n],e)}function Of(t,e){switch(t.type){case 1:m_(t.cases,e),e.helper("plural");break;case 2:m_(t.items,e);break;case 6:{Of(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function hV(t,e={}){const n=uV(t);n.helper("normalize"),t.body&&Of(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function dV(t){const e=t.body;return e.type===2?g_(e):e.cases.forEach(n=>g_(n)),t}function g_(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=yE(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const fV="minifier";function di(t){switch(t.t=t.type,t.type){case 0:{const e=t;di(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)di(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)di(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;di(e.key),e.k=e.key,delete e.key,e.modifier&&(di(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Zi(ve.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:fV,args:[t.type]})}delete t.type}const mV="parser";function gV(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const l=()=>a;function u(D,L){a.code+=D}function h(D,L=!0){const k=L?s:"";u(i?k+"  ".repeat(D):k)}function d(D=!0){const L=++a.indentLevel;D&&h(L)}function m(D=!0){const L=--a.indentLevel;D&&h(L)}function g(){h(a.indentLevel)}return{context:l,push:u,indent:d,deindent:m,newline:g,helper:D=>`_${D}`,needIndent:()=>a.needIndent}}function pV(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Bi(t,e.key),e.modifier?(t.push(", "),Bi(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function _V(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Bi(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function yV(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Bi(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function vV(t,e){e.body?Bi(t,e.body):t.push("null")}function Bi(t,e){const{helper:n}=t;switch(e.type){case 0:vV(t,e);break;case 1:yV(t,e);break;case 2:_V(t,e);break;case 6:pV(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Zi(ve.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:mV,args:[e.type]})}}const EV=(t,e={})=>{const n=d_(e.mode)?e.mode:"normal",r=d_(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=gV(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${yE(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Bi(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:u,map:h}=l.context();return{ast:t,code:u,map:h?h.toJSON():void 0}};function IV(t,e={}){const n=_E({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=cV(n).parse(t);return r?(i&&dV(a),s&&di(a),{ast:a,code:""}):(hV(a,n),EV(a,n))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function wV(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_r().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_r().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_r().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const ws=[];ws[0]={w:[0],i:[3,0],"[":[4],o:[7]};ws[1]={w:[1],".":[2],"[":[4],o:[7]};ws[2]={w:[2],i:[3,0],0:[3,0]};ws[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ws[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ws[5]={"'":[4,0],o:8,l:[5,0]};ws[6]={'"':[4,0],o:8,l:[6,0]};const TV=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function bV(t){return TV.test(t)}function AV(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function CV(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function SV(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:bV(e)?AV(e):"*"+e}function RV(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,u,h,d;const m=[];m[0]=()=>{o===void 0?o=a:o+=a},m[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},m[2]=()=>{m[0](),s++},m[3]=()=>{if(s>0)s--,r=4,m[0]();else{if(s=0,o===void 0||(o=SV(o),o===!1))return!1;m[1]()}};function g(){const E=t[n+1];if(r===5&&E==="'"||r===6&&E==='"')return n++,a="\\"+E,m[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&g())){if(l=CV(i),d=ws[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=m[u[1]],h&&(a=i,h()===!1))))return;if(r===7)return e}}const p_=new Map;function PV(t,e){return Ye(t)?t[e]:null}function kV(t,e){if(!Ye(t))return null;let n=p_.get(e);if(n||(n=RV(e),n&&p_.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||tt(s))return null;s=o,i++}return s}const DV=t=>t,NV=t=>"",OV="text",LV=t=>t.length===0?"":Wx(t),MV=Hx;function __(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function xV(t){const e=Tt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Tt(t.named.count)||Tt(t.named.n))?Tt(t.named.count)?t.named.count:Tt(t.named.n)?t.named.n:e:e}function VV(t,e){e.count||(e.count=t),e.n||(e.n=t)}function FV(t={}){const e=t.locale,n=xV(t),r=Ye(t.pluralRules)&&le(e)&&tt(t.pluralRules[e])?t.pluralRules[e]:__,s=Ye(t.pluralRules)&&le(e)&&tt(t.pluralRules[e])?__:void 0,i=L=>L[r(n,L.length,s)],o=t.list||[],a=L=>o[L],l=t.named||{};Tt(t.pluralIndex)&&VV(n,l);const u=L=>l[L];function h(L){const k=tt(t.messages)?t.messages(L):Ye(t.messages)?t.messages[L]:!1;return k||(t.parent?t.parent.message(L):NV)}const d=L=>t.modifiers?t.modifiers[L]:DV,m=Ae(t.processor)&&tt(t.processor.normalize)?t.processor.normalize:LV,g=Ae(t.processor)&&tt(t.processor.interpolate)?t.processor.interpolate:MV,E=Ae(t.processor)&&le(t.processor.type)?t.processor.type:OV,D={list:a,named:u,plural:i,linked:(L,...k)=>{const[I,S]=k;let B="text",V="";k.length===1?Ye(I)?(V=I.modifier||V,B=I.type||B):le(I)&&(V=I||V):k.length===2&&(le(I)&&(V=I||V),le(S)&&(B=S||B));const y=h(L)(D),_=B==="vnode"&&ot(y)&&V?y[0]:y;return V?d(V)(_,B):_},message:h,type:E,interpolate:g,normalize:m,values:jt({},o,l)};return D}let ha=null;function UV(t){ha=t}function $V(t,e,n){ha&&ha.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const BV=jV("function:translate");function jV(t){return e=>ha&&ha.emit(t,e)}const vE=Nf.__EXTEND_POINT__,ks=Gc(vE),HV={NOT_FOUND_KEY:vE,FALLBACK_TO_TRANSLATE:ks(),CANNOT_FORMAT_NUMBER:ks(),FALLBACK_TO_NUMBER_FORMAT:ks(),CANNOT_FORMAT_DATE:ks(),FALLBACK_TO_DATE_FORMAT:ks(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:ks(),__EXTEND_POINT__:ks()},EE=ve.__EXTEND_POINT__,Ds=Gc(EE),Fn={INVALID_ARGUMENT:EE,INVALID_DATE_ARGUMENT:Ds(),INVALID_ISO_DATE_ARGUMENT:Ds(),NOT_SUPPORT_NON_STRING_MESSAGE:Ds(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Ds(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Ds(),NOT_SUPPORT_LOCALE_TYPE:Ds(),__EXTEND_POINT__:Ds()};function Yn(t){return Zi(t,null,void 0)}function Lf(t,e){return e.locale!=null?y_(e.locale):y_(t.locale)}let ju;function y_(t){if(le(t))return t;if(tt(t)){if(t.resolvedOnce&&ju!=null)return ju;if(t.constructor.name==="Function"){const e=t();if(jx(e))throw Yn(Fn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ju=e}else throw Yn(Fn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Yn(Fn.NOT_SUPPORT_LOCALE_TYPE)}function WV(t,e,n){return[...new Set([n,...ot(e)?e:Ye(e)?Object.keys(e):le(e)?[e]:[n]])]}function IE(t,e,n){const r=le(n)?n:ji,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ot(o);)o=v_(i,o,e);const a=ot(e)||!Ae(e)?e:e.default?e.default:null;o=le(a)?[a]:a,ot(o)&&v_(i,o,!1),s.__localeChainCache.set(r,i)}return i}function v_(t,e,n){let r=!0;for(let s=0;s<e.length&&Le(r);s++){const i=e[s];le(i)&&(r=qV(t,e[s],n))}return r}function qV(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=KV(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function KV(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ot(n)||Ae(n))&&n[s]&&(r=n[s])}return r}const GV="9.13.1",zc=-1,ji="en-US",E_="",I_=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function zV(){return{upper:(t,e)=>e==="text"&&le(t)?t.toUpperCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&le(t)?t.toLowerCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&le(t)?I_(t):e==="vnode"&&Ye(t)&&"__v_isVNode"in t?I_(t.children):t}}let wE;function w_(t){wE=t}let TE;function YV(t){TE=t}let bE;function QV(t){bE=t}let AE=null;const JV=t=>{AE=t},XV=()=>AE;let CE=null;const T_=t=>{CE=t},ZV=()=>CE;let b_=0;function e5(t={}){const e=tt(t.onWarn)?t.onWarn:qx,n=le(t.version)?t.version:GV,r=le(t.locale)||tt(t.locale)?t.locale:ji,s=tt(r)?ji:r,i=ot(t.fallbackLocale)||Ae(t.fallbackLocale)||le(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Ae(t.messages)?t.messages:{[s]:{}},a=Ae(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},l=Ae(t.numberFormats)?t.numberFormats:{[s]:{}},u=jt({},t.modifiers||{},zV()),h=t.pluralRules||{},d=tt(t.missing)?t.missing:null,m=Le(t.missingWarn)||ms(t.missingWarn)?t.missingWarn:!0,g=Le(t.fallbackWarn)||ms(t.fallbackWarn)?t.fallbackWarn:!0,E=!!t.fallbackFormat,A=!!t.unresolving,D=tt(t.postTranslation)?t.postTranslation:null,L=Ae(t.processor)?t.processor:null,k=Le(t.warnHtmlMessage)?t.warnHtmlMessage:!0,I=!!t.escapeParameter,S=tt(t.messageCompiler)?t.messageCompiler:wE,B=tt(t.messageResolver)?t.messageResolver:TE||PV,V=tt(t.localeFallbacker)?t.localeFallbacker:bE||WV,y=Ye(t.fallbackContext)?t.fallbackContext:void 0,_=t,v=Ye(_.__datetimeFormatters)?_.__datetimeFormatters:new Map,N=Ye(_.__numberFormatters)?_.__numberFormatters:new Map,x=Ye(_.__meta)?_.__meta:{};b_++;const M={version:n,cid:b_,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:h,missing:d,missingWarn:m,fallbackWarn:g,fallbackFormat:E,unresolving:A,postTranslation:D,processor:L,warnHtmlMessage:k,escapeParameter:I,messageCompiler:S,messageResolver:B,localeFallbacker:V,fallbackContext:y,onWarn:e,__meta:x};return M.datetimeFormats=a,M.numberFormats=l,M.__datetimeFormatters=v,M.__numberFormatters=N,__INTLIFY_PROD_DEVTOOLS__&&$V(M,n,x),M}function Mf(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return le(a)?a:e}else return e}function yo(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function t5(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function n5(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(t5(t,e[r]))return!0;return!1}function Hu(t){return n=>r5(n,t)}function r5(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,A_(t,o)],[]))}else return A_(t,n)}function A_(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,Hh(t,i)],[]);return t.normalize(r)}}function Hh(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(Hh(t,r.k||r.key),s?Hh(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const SE=t=>t;let mi=Object.create(null);const Hi=t=>Ye(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function RE(t,e={}){let n=!1;const r=e.onError||Xx;return e.onError=s=>{n=!0,r(s)},{...IV(t,e),detectError:n}}const s5=(t,e)=>{if(!le(t))throw Yn(Fn.NOT_SUPPORT_NON_STRING_MESSAGE);{Le(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||SE)(t),s=mi[r];if(s)return s;const{code:i,detectError:o}=RE(t,e),a=new Function(`return ${i}`)();return o?a:mi[r]=a}};function i5(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&le(t)){Le(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||SE)(t),s=mi[r];if(s)return s;const{ast:i,detectError:o}=RE(t,{...e,location:!1,jit:!0}),a=Hu(i);return o?a:mi[r]=a}else{const n=t.cacheKey;if(n){const r=mi[n];return r||(mi[n]=Hu(t))}else return Hu(t)}}const C_=()=>"",Pn=t=>tt(t);function S_(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,u]=Wh(...e),h=Le(u.missingWarn)?u.missingWarn:t.missingWarn,d=Le(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,m=Le(u.escapeParameter)?u.escapeParameter:t.escapeParameter,g=!!u.resolvedMessage,E=le(u.default)||Le(u.default)?Le(u.default)?i?l:()=>l:u.default:n?i?l:()=>l:"",A=n||E!=="",D=Lf(t,u);m&&o5(u);let[L,k,I]=g?[l,D,a[D]||{}]:PE(t,l,D,o,d,h),S=L,B=l;if(!g&&!(le(S)||Hi(S)||Pn(S))&&A&&(S=E,B=S),!g&&(!(le(S)||Hi(S)||Pn(S))||!le(k)))return s?zc:l;let V=!1;const y=()=>{V=!0},_=Pn(S)?S:kE(t,l,k,S,B,y);if(V)return S;const v=c5(t,k,I,u),N=FV(v),x=a5(t,_,N),M=r?r(x,l):x;if(__INTLIFY_PROD_DEVTOOLS__){const R={timestamp:Date.now(),key:le(l)?l:Pn(S)?S.key:"",locale:k||(Pn(S)?S.locale:""),format:le(S)?S:Pn(S)?S.source:"",message:M};R.meta=jt({},t.__meta,XV()||{}),BV(R)}return M}function o5(t){ot(t.list)?t.list=t.list.map(e=>le(e)?h_(e):e):Ye(t.named)&&Object.keys(t.named).forEach(e=>{le(t.named[e])&&(t.named[e]=h_(t.named[e]))})}function PE(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,h=u(t,r,n);let d={},m,g=null;const E="translate";for(let A=0;A<h.length&&(m=h[A],d=o[m]||{},(g=l(d,e))===null&&(g=d[e]),!(le(g)||Hi(g)||Pn(g)));A++)if(!n5(m,h)){const D=Mf(t,e,m,i,E);D!==e&&(g=D)}return[g,m,d]}function kE(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Pn(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=n,u.key=e,u}const l=o(r,l5(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function a5(t,e,n){return e(n)}function Wh(...t){const[e,n,r]=t,s={};if(!le(e)&&!Tt(e)&&!Pn(e)&&!Hi(e))throw Yn(Fn.INVALID_ARGUMENT);const i=Tt(e)?String(e):(Pn(e),e);return Tt(n)?s.plural=n:le(n)?s.default=n:Ae(n)&&!Kc(n)?s.named=n:ot(n)&&(s.list=n),Tt(r)?s.plural=r:le(r)?s.default=r:Ae(r)&&jt(s,r),[i,s]}function l5(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>Fx(e,n,o)}}function c5(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:h}=t,m={locale:e,modifiers:s,pluralRules:i,messages:g=>{let E=o(n,g);if(E==null&&h){const[,,A]=PE(h,g,e,a,l,u);E=o(A,g)}if(le(E)||Hi(E)){let A=!1;const L=kE(t,g,e,E,g,()=>{A=!0});return A?C_:L}else return Pn(E)?E:C_}};return t.processor&&(m.processor=t.processor),r.list&&(m.list=r.list),r.named&&(m.named=r.named),Tt(r.plural)&&(m.pluralIndex=r.plural),m}function R_(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,h,d]=qh(...e),m=Le(h.missingWarn)?h.missingWarn:t.missingWarn;Le(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,E=Lf(t,h),A=o(t,s,E);if(!le(l)||l==="")return new Intl.DateTimeFormat(E,d).format(u);let D={},L,k=null;const I="datetime format";for(let V=0;V<A.length&&(L=A[V],D=n[L]||{},k=D[l],!Ae(k));V++)Mf(t,l,L,m,I);if(!Ae(k)||!le(L))return r?zc:l;let S=`${L}__${l}`;Kc(d)||(S=`${S}__${JSON.stringify(d)}`);let B=a.get(S);return B||(B=new Intl.DateTimeFormat(L,jt({},k,d)),a.set(S,B)),g?B.formatToParts(u):B.format(u)}const DE=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function qh(...t){const[e,n,r,s]=t,i={};let o={},a;if(le(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Yn(Fn.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Yn(Fn.INVALID_ISO_DATE_ARGUMENT)}}else if($x(e)){if(isNaN(e.getTime()))throw Yn(Fn.INVALID_DATE_ARGUMENT);a=e}else if(Tt(e))a=e;else throw Yn(Fn.INVALID_ARGUMENT);return le(n)?i.key=n:Ae(n)&&Object.keys(n).forEach(l=>{DE.includes(l)?o[l]=n[l]:i[l]=n[l]}),le(r)?i.locale=r:Ae(r)&&(o=r),Ae(s)&&(o=s),[i.key||"",a,i,o]}function P_(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function k_(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,h,d]=Kh(...e),m=Le(h.missingWarn)?h.missingWarn:t.missingWarn;Le(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,E=Lf(t,h),A=o(t,s,E);if(!le(l)||l==="")return new Intl.NumberFormat(E,d).format(u);let D={},L,k=null;const I="number format";for(let V=0;V<A.length&&(L=A[V],D=n[L]||{},k=D[l],!Ae(k));V++)Mf(t,l,L,m,I);if(!Ae(k)||!le(L))return r?zc:l;let S=`${L}__${l}`;Kc(d)||(S=`${S}__${JSON.stringify(d)}`);let B=a.get(S);return B||(B=new Intl.NumberFormat(L,jt({},k,d)),a.set(S,B)),g?B.formatToParts(u):B.format(u)}const NE=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Kh(...t){const[e,n,r,s]=t,i={};let o={};if(!Tt(e))throw Yn(Fn.INVALID_ARGUMENT);const a=e;return le(n)?i.key=n:Ae(n)&&Object.keys(n).forEach(l=>{NE.includes(l)?o[l]=n[l]:i[l]=n[l]}),le(r)?i.locale=r:Ae(r)&&(o=r),Ae(s)&&(o=s),[i.key||"",a,i,o]}function D_(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}wV();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const u5="9.13.1";function h5(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(_r().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(_r().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(_r().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(_r().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(_r().__INTLIFY_PROD_DEVTOOLS__=!1)}const OE=HV.__EXTEND_POINT__,dr=Gc(OE);dr(),dr(),dr(),dr(),dr(),dr(),dr(),dr(),dr();const LE=Fn.__EXTEND_POINT__,dn=Gc(LE),At={UNEXPECTED_RETURN_TYPE:LE,INVALID_ARGUMENT:dn(),MUST_BE_CALL_SETUP_TOP:dn(),NOT_INSTALLED:dn(),NOT_AVAILABLE_IN_LEGACY_MODE:dn(),REQUIRED_VALUE:dn(),INVALID_VALUE:dn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:dn(),NOT_INSTALLED_WITH_PROVIDE:dn(),UNEXPECTED_ERROR:dn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:dn(),BRIDGE_SUPPORT_VUE_2_ONLY:dn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:dn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:dn(),__EXTEND_POINT__:dn()};function Mt(t,...e){return Zi(t,null,void 0)}const Gh=Is("__translateVNode"),zh=Is("__datetimeParts"),Yh=Is("__numberParts"),ME=Is("__setPluralRules"),xE=Is("__injectWithOption"),Qh=Is("__dispose");function da(t){if(!Ye(t))return t;for(const e in t)if(rc(t,e))if(!e.includes("."))Ye(t[e])&&da(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ye(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),Ye(s[n[r]])&&da(s[n[r]])}return t}function Yc(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Ae(n)?n:ot(r)?{}:{[t]:{}};if(ot(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||{},Cl(u,o[l])):Cl(u,o)}else le(a)&&Cl(JSON.parse(a),o)}),s==null&&i)for(const a in o)rc(o,a)&&da(o[a]);return o}function VE(t){return t.type}function FE(t,e,n){let r=Ye(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=Yc(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(Ye(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ye(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function N_(t){return He(ya,null,t,0)}const O_="__INTLIFY_META__",L_=()=>[],d5=()=>!1;let M_=0;function x_(t){return(e,n,r,s)=>t(n,r,Xo()||void 0,s)}const f5=()=>{const t=Xo();let e=null;return t&&(e=VE(t)[O_])?{[O_]:e}:null};function xf(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=nc?et:Ed,a=!!t.translateExistCompatible;let l=Le(t.inheritLocale)?t.inheritLocale:!0;const u=o(n&&l?n.locale.value:le(t.locale)?t.locale:ji),h=o(n&&l?n.fallbackLocale.value:le(t.fallbackLocale)||ot(t.fallbackLocale)||Ae(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),d=o(Yc(u.value,t)),m=o(Ae(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),g=o(Ae(t.numberFormats)?t.numberFormats:{[u.value]:{}});let E=n?n.missingWarn:Le(t.missingWarn)||ms(t.missingWarn)?t.missingWarn:!0,A=n?n.fallbackWarn:Le(t.fallbackWarn)||ms(t.fallbackWarn)?t.fallbackWarn:!0,D=n?n.fallbackRoot:Le(t.fallbackRoot)?t.fallbackRoot:!0,L=!!t.fallbackFormat,k=tt(t.missing)?t.missing:null,I=tt(t.missing)?x_(t.missing):null,S=tt(t.postTranslation)?t.postTranslation:null,B=n?n.warnHtmlMessage:Le(t.warnHtmlMessage)?t.warnHtmlMessage:!0,V=!!t.escapeParameter;const y=n?n.modifiers:Ae(t.modifiers)?t.modifiers:{};let _=t.pluralRules||n&&n.pluralRules,v;v=(()=>{s&&T_(null);const U={version:u5,locale:u.value,fallbackLocale:h.value,messages:d.value,modifiers:y,pluralRules:_,missing:I===null?void 0:I,missingWarn:E,fallbackWarn:A,fallbackFormat:L,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:B,escapeParameter:V,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};U.datetimeFormats=m.value,U.numberFormats=g.value,U.__datetimeFormatters=Ae(v)?v.__datetimeFormatters:void 0,U.__numberFormatters=Ae(v)?v.__numberFormatters:void 0;const H=e5(U);return s&&T_(H),H})(),yo(v,u.value,h.value);function x(){return[u.value,h.value,d.value,m.value,g.value]}const M=gt({get:()=>u.value,set:U=>{u.value=U,v.locale=u.value}}),R=gt({get:()=>h.value,set:U=>{h.value=U,v.fallbackLocale=h.value,yo(v,u.value,U)}}),Te=gt(()=>d.value),Ke=gt(()=>m.value),Pe=gt(()=>g.value);function Ce(){return tt(S)?S:null}function Ie(U){S=U,v.postTranslation=U}function at(){return k}function mt(U){U!==null&&(I=x_(U)),k=U,v.missing=I}const Je=(U,H,fe,ge,ze,Rt)=>{x();let Et;try{__INTLIFY_PROD_DEVTOOLS__,s||(v.fallbackContext=n?ZV():void 0),Et=U(v)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(v.fallbackContext=void 0)}if(fe!=="translate exists"&&Tt(Et)&&Et===zc||fe==="translate exists"&&!Et){const[Ts,or]=H();return n&&D?ge(n):ze(Ts)}else{if(Rt(Et))return Et;throw Mt(At.UNEXPECTED_RETURN_TYPE)}};function Fe(...U){return Je(H=>Reflect.apply(S_,null,[H,...U]),()=>Wh(...U),"translate",H=>Reflect.apply(H.t,H,[...U]),H=>H,H=>le(H))}function We(...U){const[H,fe,ge]=U;if(ge&&!Ye(ge))throw Mt(At.INVALID_ARGUMENT);return Fe(H,fe,jt({resolvedMessage:!0},ge||{}))}function xt(...U){return Je(H=>Reflect.apply(R_,null,[H,...U]),()=>qh(...U),"datetime format",H=>Reflect.apply(H.d,H,[...U]),()=>E_,H=>le(H))}function St(...U){return Je(H=>Reflect.apply(k_,null,[H,...U]),()=>Kh(...U),"number format",H=>Reflect.apply(H.n,H,[...U]),()=>E_,H=>le(H))}function ut(U){return U.map(H=>le(H)||Tt(H)||Le(H)?N_(String(H)):H)}const ie={normalize:ut,interpolate:U=>U,type:"vnode"};function re(...U){return Je(H=>{let fe;const ge=H;try{ge.processor=ie,fe=Reflect.apply(S_,null,[ge,...U])}finally{ge.processor=null}return fe},()=>Wh(...U),"translate",H=>H[Gh](...U),H=>[N_(H)],H=>ot(H))}function ce(...U){return Je(H=>Reflect.apply(k_,null,[H,...U]),()=>Kh(...U),"number format",H=>H[Yh](...U),L_,H=>le(H)||ot(H))}function Oe(...U){return Je(H=>Reflect.apply(R_,null,[H,...U]),()=>qh(...U),"datetime format",H=>H[zh](...U),L_,H=>le(H)||ot(H))}function Be(U){_=U,v.pluralRules=_}function P(U,H){return Je(()=>{if(!U)return!1;const fe=le(H)?H:u.value,ge=Y(fe),ze=v.messageResolver(ge,U);return a?ze!=null:Hi(ze)||Pn(ze)||le(ze)},()=>[U],"translate exists",fe=>Reflect.apply(fe.te,fe,[U,H]),d5,fe=>Le(fe))}function T(U){let H=null;const fe=IE(v,h.value,u.value);for(let ge=0;ge<fe.length;ge++){const ze=d.value[fe[ge]]||{},Rt=v.messageResolver(ze,U);if(Rt!=null){H=Rt;break}}return H}function $(U){const H=T(U);return H??(n?n.tm(U)||{}:{})}function Y(U){return d.value[U]||{}}function G(U,H){if(i){const fe={[U]:H};for(const ge in fe)rc(fe,ge)&&da(fe[ge]);H=fe[U]}d.value[U]=H,v.messages=d.value}function J(U,H){d.value[U]=d.value[U]||{};const fe={[U]:H};if(i)for(const ge in fe)rc(fe,ge)&&da(fe[ge]);H=fe[U],Cl(H,d.value[U]),v.messages=d.value}function se(U){return m.value[U]||{}}function b(U,H){m.value[U]=H,v.datetimeFormats=m.value,P_(v,U,H)}function C(U,H){m.value[U]=jt(m.value[U]||{},H),v.datetimeFormats=m.value,P_(v,U,H)}function F(U){return g.value[U]||{}}function K(U,H){g.value[U]=H,v.numberFormats=g.value,D_(v,U,H)}function te(U,H){g.value[U]=jt(g.value[U]||{},H),v.numberFormats=g.value,D_(v,U,H)}M_++,n&&nc&&($s(n.locale,U=>{l&&(u.value=U,v.locale=U,yo(v,u.value,h.value))}),$s(n.fallbackLocale,U=>{l&&(h.value=U,v.fallbackLocale=U,yo(v,u.value,h.value))}));const Q={id:M_,locale:M,fallbackLocale:R,get inheritLocale(){return l},set inheritLocale(U){l=U,U&&n&&(u.value=n.locale.value,h.value=n.fallbackLocale.value,yo(v,u.value,h.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:Te,get modifiers(){return y},get pluralRules(){return _||{}},get isGlobal(){return s},get missingWarn(){return E},set missingWarn(U){E=U,v.missingWarn=E},get fallbackWarn(){return A},set fallbackWarn(U){A=U,v.fallbackWarn=A},get fallbackRoot(){return D},set fallbackRoot(U){D=U},get fallbackFormat(){return L},set fallbackFormat(U){L=U,v.fallbackFormat=L},get warnHtmlMessage(){return B},set warnHtmlMessage(U){B=U,v.warnHtmlMessage=U},get escapeParameter(){return V},set escapeParameter(U){V=U,v.escapeParameter=U},t:Fe,getLocaleMessage:Y,setLocaleMessage:G,mergeLocaleMessage:J,getPostTranslationHandler:Ce,setPostTranslationHandler:Ie,getMissingHandler:at,setMissingHandler:mt,[ME]:Be};return Q.datetimeFormats=Ke,Q.numberFormats=Pe,Q.rt=We,Q.te=P,Q.tm=$,Q.d=xt,Q.n=St,Q.getDateTimeFormat=se,Q.setDateTimeFormat=b,Q.mergeDateTimeFormat=C,Q.getNumberFormat=F,Q.setNumberFormat=K,Q.mergeNumberFormat=te,Q[xE]=r,Q[Gh]=re,Q[zh]=Oe,Q[Yh]=ce,Q}function m5(t){const e=le(t.locale)?t.locale:ji,n=le(t.fallbackLocale)||ot(t.fallbackLocale)||Ae(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=tt(t.missing)?t.missing:void 0,s=Le(t.silentTranslationWarn)||ms(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Le(t.silentFallbackWarn)||ms(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Le(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Ae(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,h=tt(t.postTranslation)?t.postTranslation:void 0,d=le(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,m=!!t.escapeParameterHtml,g=Le(t.sync)?t.sync:!0;let E=t.messages;if(Ae(t.sharedMessages)){const V=t.sharedMessages;E=Object.keys(V).reduce((_,v)=>{const N=_[v]||(_[v]={});return jt(N,V[v]),_},E||{})}const{__i18n:A,__root:D,__injectWithOption:L}=t,k=t.datetimeFormats,I=t.numberFormats,S=t.flatJson,B=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:E,flatJson:S,datetimeFormats:k,numberFormats:I,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:h,warnHtmlMessage:d,escapeParameter:m,messageResolver:t.messageResolver,inheritLocale:g,translateExistCompatible:B,__i18n:A,__root:D,__injectWithOption:L}}function Jh(t={},e){{const n=xf(m5(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Le(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Le(i)?!i:i},get silentFallbackWarn(){return Le(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Le(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,l]=i,u={};let h=null,d=null;if(!le(o))throw Mt(At.INVALID_ARGUMENT);const m=o;return le(a)?u.locale=a:ot(a)?h=a:Ae(a)&&(d=a),ot(l)?h=l:Ae(l)&&(d=l),Reflect.apply(n.t,n,[m,h||d||{},u])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,l]=i,u={plural:1};let h=null,d=null;if(!le(o))throw Mt(At.INVALID_ARGUMENT);const m=o;return le(a)?u.locale=a:Tt(a)?u.plural=a:ot(a)?h=a:Ae(a)&&(d=a),le(l)?u.locale=l:ot(l)?h=l:Ae(l)&&(d=l),Reflect.apply(n.t,n,[m,h||d||{},u])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const Vf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function g5({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===ye?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function UE(t){return ye}const p5=Ki({name:"i18n-t",props:jt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Tt(t)||!isNaN(t)}},Vf),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Ff({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=le(t.plural)?+t.plural:t.plural);const a=g5(e,i),l=s[Gh](t.keypath,a,o),u=jt({},r),h=le(t.tag)||Ye(t.tag)?t.tag:UE();return Ea(h,u,l)}}}),V_=p5;function _5(t){return ot(t)&&!le(t[0])}function $E(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),le(t.format)?o.key=t.format:Ye(t.format)&&(le(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((m,g)=>n.includes(g)?jt({},m,{[g]:t.format[g]}):m,{}));const l=r(t.value,o,a);let u=[o.key];ot(l)?u=l.map((m,g)=>{const E=s[m.type],A=E?E({[m.type]:m.value,index:g,parts:l}):[m.value];return _5(A)&&(A[0].key=`${m.type}-${g}`),A}):le(l)&&(u=[l]);const h=jt({},i),d=le(t.tag)||Ye(t.tag)?t.tag:UE();return Ea(d,h,u)}}const y5=Ki({name:"i18n-n",props:jt({value:{type:Number,required:!0},format:{type:[String,Object]}},Vf),setup(t,e){const n=t.i18n||Ff({useScope:t.scope,__useComponent:!0});return $E(t,e,NE,(...r)=>n[Yh](...r))}}),F_=y5,v5=Ki({name:"i18n-d",props:jt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Vf),setup(t,e){const n=t.i18n||Ff({useScope:t.scope,__useComponent:!0});return $E(t,e,DE,(...r)=>n[zh](...r))}}),U_=v5;function E5(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function I5(t){const e=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw Mt(At.UNEXPECTED_ERROR);const h=E5(t,a.$),d=$_(u);return[Reflect.apply(h.t,h,[...B_(d)]),h]};return{created:(o,a)=>{const[l,u]=e(a);nc&&t.global===u&&(o.__i18nWatcher=$s(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{nc&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=$_(a);o.textContent=Reflect.apply(l.t,l,[...B_(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function $_(t){if(le(t))return{path:t};if(Ae(t)){if(!("path"in t))throw Mt(At.REQUIRED_VALUE,"path");return t}else throw Mt(At.INVALID_VALUE)}function B_(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return le(n)&&(o.locale=n),Tt(s)&&(o.plural=s),Tt(i)&&(o.plural=i),[e,a,o]}function w5(t,e,...n){const r=Ae(n[0])?n[0]:{},s=!!r.useI18nComponentName;(Le(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":V_.name,"I18nT"].forEach(o=>t.component(o,V_)),[F_.name,"I18nN"].forEach(o=>t.component(o,F_)),[U_.name,"I18nD"].forEach(o=>t.component(o,U_))),t.directive("t",I5(e))}function T5(t,e,n){return{beforeCreate(){const r=Xo();if(!r)throw Mt(At.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=j_(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=Jh(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=j_(t,s);else{this.$i18n=Jh({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&FE(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=Xo();if(!r)throw Mt(At.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function j_(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[ME](e.pluralizationRules||t.pluralizationRules);const n=Yc(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const b5=Is("global-vue-i18n");function A5(t={},e){const n=__VUE_I18N_LEGACY_API__&&Le(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Le(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=C5(t,n),l=Is("");function u(m){return i.get(m)||null}function h(m,g){i.set(m,g)}function d(m){i.delete(m)}{const m={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(g,...E){if(g.__VUE_I18N_SYMBOL__=l,g.provide(g.__VUE_I18N_SYMBOL__,m),Ae(E[0])){const L=E[0];m.__composerExtend=L.__composerExtend,m.__vueI18nExtend=L.__vueI18nExtend}let A=null;!n&&r&&(A=M5(g,m.global)),__VUE_I18N_FULL_INSTALL__&&w5(g,m,...E),__VUE_I18N_LEGACY_API__&&n&&g.mixin(T5(a,a.__composer,m));const D=g.unmount;g.unmount=()=>{A&&A(),m.dispose(),D()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:u,__setInstance:h,__deleteInstance:d};return m}}function Ff(t={}){const e=Xo();if(e==null)throw Mt(At.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Mt(At.NOT_INSTALLED);const n=S5(e),r=P5(n),s=VE(e),i=R5(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Mt(At.NOT_AVAILABLE_IN_LEGACY_MODE);return O5(e,i,r,t)}if(i==="global")return FE(r,t,s),r;if(i==="parent"){let l=k5(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=jt({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=xf(l),o.__composerExtend&&(a[Qh]=o.__composerExtend(a)),N5(o,e,a),o.__setInstance(e,a)}return a}function C5(t,e,n){const r=Iw();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>Jh(t)):r.run(()=>xf(t));if(s==null)throw Mt(At.UNEXPECTED_ERROR);return[r,s]}}function S5(t){{const e=Qn(t.isCE?b5:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Mt(t.isCE?At.NOT_INSTALLED_WITH_PROVIDE:At.UNEXPECTED_ERROR);return e}}function R5(t,e){return Kc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function P5(t){return t.mode==="composition"?t.global:t.global.__composer}function k5(t,e,n=!1){let r=null;const s=e.root;let i=D5(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[xE]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function D5(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function N5(t,e,n){xy(()=>{},e),bd(()=>{const r=n;t.__deleteInstance(e);const s=r[Qh];s&&(s(),delete r[Qh])},e)}function O5(t,e,n,r={}){const s=e==="local",i=Ed(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Mt(At.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Le(r.inheritLocale)?r.inheritLocale:!le(r.locale),a=et(!s||o?n.locale.value:le(r.locale)?r.locale:ji),l=et(!s||o?n.fallbackLocale.value:le(r.fallbackLocale)||ot(r.fallbackLocale)||Ae(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=et(Yc(a.value,r)),h=et(Ae(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),d=et(Ae(r.numberFormats)?r.numberFormats:{[a.value]:{}}),m=s?n.missingWarn:Le(r.missingWarn)||ms(r.missingWarn)?r.missingWarn:!0,g=s?n.fallbackWarn:Le(r.fallbackWarn)||ms(r.fallbackWarn)?r.fallbackWarn:!0,E=s?n.fallbackRoot:Le(r.fallbackRoot)?r.fallbackRoot:!0,A=!!r.fallbackFormat,D=tt(r.missing)?r.missing:null,L=tt(r.postTranslation)?r.postTranslation:null,k=s?n.warnHtmlMessage:Le(r.warnHtmlMessage)?r.warnHtmlMessage:!0,I=!!r.escapeParameter,S=s?n.modifiers:Ae(r.modifiers)?r.modifiers:{},B=r.pluralRules||s&&n.pluralRules;function V(){return[a.value,l.value,u.value,h.value,d.value]}const y=gt({get:()=>i.value?i.value.locale.value:a.value,set:T=>{i.value&&(i.value.locale.value=T),a.value=T}}),_=gt({get:()=>i.value?i.value.fallbackLocale.value:l.value,set:T=>{i.value&&(i.value.fallbackLocale.value=T),l.value=T}}),v=gt(()=>i.value?i.value.messages.value:u.value),N=gt(()=>h.value),x=gt(()=>d.value);function M(){return i.value?i.value.getPostTranslationHandler():L}function R(T){i.value&&i.value.setPostTranslationHandler(T)}function Te(){return i.value?i.value.getMissingHandler():D}function Ke(T){i.value&&i.value.setMissingHandler(T)}function Pe(T){return V(),T()}function Ce(...T){return i.value?Pe(()=>Reflect.apply(i.value.t,null,[...T])):Pe(()=>"")}function Ie(...T){return i.value?Reflect.apply(i.value.rt,null,[...T]):""}function at(...T){return i.value?Pe(()=>Reflect.apply(i.value.d,null,[...T])):Pe(()=>"")}function mt(...T){return i.value?Pe(()=>Reflect.apply(i.value.n,null,[...T])):Pe(()=>"")}function Je(T){return i.value?i.value.tm(T):{}}function Fe(T,$){return i.value?i.value.te(T,$):!1}function We(T){return i.value?i.value.getLocaleMessage(T):{}}function xt(T,$){i.value&&(i.value.setLocaleMessage(T,$),u.value[T]=$)}function St(T,$){i.value&&i.value.mergeLocaleMessage(T,$)}function ut(T){return i.value?i.value.getDateTimeFormat(T):{}}function z(T,$){i.value&&(i.value.setDateTimeFormat(T,$),h.value[T]=$)}function ie(T,$){i.value&&i.value.mergeDateTimeFormat(T,$)}function re(T){return i.value?i.value.getNumberFormat(T):{}}function ce(T,$){i.value&&(i.value.setNumberFormat(T,$),d.value[T]=$)}function Oe(T,$){i.value&&i.value.mergeNumberFormat(T,$)}const Be={get id(){return i.value?i.value.id:-1},locale:y,fallbackLocale:_,messages:v,datetimeFormats:N,numberFormats:x,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(T){i.value&&(i.value.inheritLocale=T)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(u.value)},get modifiers(){return i.value?i.value.modifiers:S},get pluralRules(){return i.value?i.value.pluralRules:B},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:m},set missingWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackWarn(){return i.value?i.value.fallbackWarn:g},set fallbackWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackRoot(){return i.value?i.value.fallbackRoot:E},set fallbackRoot(T){i.value&&(i.value.fallbackRoot=T)},get fallbackFormat(){return i.value?i.value.fallbackFormat:A},set fallbackFormat(T){i.value&&(i.value.fallbackFormat=T)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:k},set warnHtmlMessage(T){i.value&&(i.value.warnHtmlMessage=T)},get escapeParameter(){return i.value?i.value.escapeParameter:I},set escapeParameter(T){i.value&&(i.value.escapeParameter=T)},t:Ce,getPostTranslationHandler:M,setPostTranslationHandler:R,getMissingHandler:Te,setMissingHandler:Ke,rt:Ie,d:at,n:mt,tm:Je,te:Fe,getLocaleMessage:We,setLocaleMessage:xt,mergeLocaleMessage:St,getDateTimeFormat:ut,setDateTimeFormat:z,mergeDateTimeFormat:ie,getNumberFormat:re,setNumberFormat:ce,mergeNumberFormat:Oe};function P(T){T.locale.value=a.value,T.fallbackLocale.value=l.value,Object.keys(u.value).forEach($=>{T.mergeLocaleMessage($,u.value[$])}),Object.keys(h.value).forEach($=>{T.mergeDateTimeFormat($,h.value[$])}),Object.keys(d.value).forEach($=>{T.mergeNumberFormat($,d.value[$])}),T.escapeParameter=I,T.fallbackFormat=A,T.fallbackRoot=E,T.fallbackWarn=g,T.missingWarn=m,T.warnHtmlMessage=k}return My(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Mt(At.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const T=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=T.locale.value,l.value=T.fallbackLocale.value,u.value=T.messages.value,h.value=T.datetimeFormats.value,d.value=T.numberFormats.value):s&&P(T)}),Be}const L5=["locale","fallbackLocale","availableLocales"],H_=["t","rt","d","n","tm","te"];function M5(t,e){const n=Object.create(null);return L5.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Mt(At.UNEXPECTED_ERROR);const o=hn(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,H_.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Mt(At.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,H_.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}h5();__INTLIFY_JIT_COMPILATION__?w_(i5):w_(s5);YV(kV);QV(IE);if(__INTLIFY_PROD_DEVTOOLS__){const t=_r();t.__INTLIFY__=!0,UV(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const x5={name:"Wacken GLUP",share:{invite:"Let us plan together with Wacken Group Line Up Planner"}},V5={offline:{message:"You are offline. No changes can be made.",ready:{message:"The app can now work offline."},onlineAgain:{message:"You are back online. Click me to reload."},button:{message:"Click to view offline."}}},F5={overview:"Overview",acts:"Acts",members:"Members",settings:"Settings"},U5={ok:"Okay",confirm:"Confirm",finish:"Finish",abort:"Abort",signIn:"Sign in",signUp:"Sign up",logOut:"Log out",join:"Join",name:"Name",color:"Color",mail:"Mail",mailAddress:"Mail address",password:"Password",invite:"Invite",invitationLink:"Invitation link",leave:"Leave",delete:"Delete",add:"Add",select:"Select",greeting:"Hello",anon:"Anonymous",likes:"no likes | one like | {count} likes",recommendations:"no recommendations | one recommendation | {count} recommendations",and:" & ",someone:"Someone",liked:"Liked",recommended:"Recommended",details:"Details",until:"until",showActs:"Show acts"},$5={title:"Join space",message:{generic:"{n} has invited you to join their space.",specific:'{n} has invited you to join a space called "{s}".'},button:{joinWithoutAccount:"Join (without Account)"},whoAreYou:{title:"Who are you?",message:["You can add yourself to the members of this space","or choose an already created persona from the list."]},dialog:{error:{title:"Error",message:"An error occurred whilst joining:"}}},B5={alreadyLoggedIn:"You are already logged in.",signIn:{message:["Sign in to create and edit your plan","and share it with your friends."]},mail:{title:"Login via mail",message:["Sign in to create and edit your plan","and share it with your friends."]}},j5={runningOrderInactive:{title:"No running order",message:"The running order hasn't been announced yet."},dialog:{filterStages:{title:"Filter stages",save:{title:"Save",description:"Also apply on next visit"}}}},H5={search:{placeholder:"Search for acts"},filter:{onlyConcerts:{label:"Only concerts",description:"Hide all other acts"},sortTime:{label:"Sort chronological",description:"Show upcoming acts at the top"}},results:"{count} results"},W5={done:{title:"no more acts",message:"You have marked {count} acts | You have marked one act | You have marked {count} acts"},dialog:{introduction:{title:"The swiper",message:"If you like the act, swipe right. If you don't, swipe left."}}},q5={tasteMatch:"matches {n}",dialog:{removeMember:{title:"Delete forever",message:"Do you really want to remove this member?"},charts:{title:"Charts"}}},K5={spaceSettings:{title:"Space settings"},dialog:{leaveSpace:{title:"Leave space",message:"Du you really want to leave this space? Your data will be deleted."},anonLogOut:{title:"Log out forever",message:"If you sign out of your anonymous account, your favorites can only be managed with the invitation link. Do you really want to log out? You'll never be able to log in again."},deleteAccount:{title:"Delete forever",message:"Du you really want to delete your account? All data associated with your account is going to be deleted aswell."},relogin:{title:"Log in again",message:"You need to log in again to be able to delete your account."},invitationLink:{title:"Share invitation link",message:"Your friends can join your space with the following link:"}}},G5={"login-needed":{title:"Login required",message:"Log in or ask for a invitation link for an existing space to save your favorites."}},z5="Install to your homescreen",Y5="About privacy",Q5={brand:x5,app:V5,navigation:F5,common:U5,join:$5,login:B5,home:j5,acts:H5,swiper:W5,members:q5,settings:K5,dialog:G5,pwaAdvert:z5,privacyPolicy:Y5},J5={name:"Wacken GLUP",share:{invite:"Lass uns zusammen planen mit Wacken Group Line Up Planner!"}},X5={offline:{message:"Du bist offline, keine Änderungen werden übernommen.",ready:{message:"Die App funktioniert nun auch offline."},onlineAgain:{message:"Du bist wieder online. Klicke, um neu zu laden."},button:{message:"Offline anschauen? Klicke auf mich."}}},Z5={overview:"Überblick",acts:"Acts",members:"Mitglieder",settings:"Einstellungen"},e6={ok:"Okay",confirm:"Bestätigen",finish:"Abschließen",abort:"Abbrechen",signIn:"Anmelden",signUp:"Registrieren",logOut:"Abmelden",join:"Beitreten",name:"Name",color:"Farbe",mail:"E-Mail",mailAddress:"E-Mail Adresse",password:"Passwort",invite:"Einladen",invitationLink:"Einladungslink",leave:"Verlassen",delete:"Löschen",add:"Hinzufügen",select:"Auswählen",greeting:"Moin",anon:"Anonym",likes:"keine Likes | ein Like | {count} Likes",recommendations:"keine Vorschläge | ein Vorschlag | {count} Vorschläge",and:" & ",someone:"Jemand",liked:"Vorgemerkt",recommended:"Vorgeschlagen",details:"Details",until:"bis",showActs:"Acts anzeigen"},t6={title:"Space beitreten",message:{generic:"{n} hat dich eingeladen, einem Space beizutreten.",specific:'{n} hat dich eingeladen, dem Space "{s}" beizutreten.'},button:{joinWithoutAccount:"Beitreten (ohne Konto)"},whoAreYou:{title:"Wer bist du?",message:["Du kannst entweder dich als neue Person hinzufügen oder,","falls du dies bereits getan hast, deine bestehende Person auswählen."]},dialog:{error:{title:"Fehler beim Beitreten",message:"Beim Beitreten ist ein Fehler aufgetreten:"}}},n6={alreadyLoggedIn:"Du bist bereits angemeldet.",signIn:{message:["Melde dich an, um einen Plan zu erstellen","und ihn mit deinen Freunden zu teilen."]},mail:{title:"per Mail anmelden",message:["Melde dich an, um einen Plan zu erstellen","und ihn mit deinen Freunden zu teilen."]}},r6={runningOrderInactive:{title:"keine Running Order",message:"Die Running Order wurde noch nicht bekannt gegeben."},dialog:{filterStages:{title:"Stages filtern",save:{title:"Speichern",description:"Auch beim nächsten Besuch anwenden"}}}},s6={search:{placeholder:"Nach Acts suchen"},filter:{onlyConcerts:{label:"Nur Konzerte",description:"Alle anderen Auftritte ausblenden"},sortTime:{label:"Zeitlich sortieren",description:"Anstehende Acts oben anzeigen"}},results:"{count} Ergebnisse"},i6={done:{title:"keine weiteren Acts",message:"Du hast {count} Acts markiert | Du hast einen Act markiert | Du hast {count} Acts markiert"},dialog:{introduction:{title:"Der Swiper",message:"Wische nach rechts, wenn du den Act magst und nach links, wenn nicht."}}},o6={tasteMatch:"{n} Übereinstimmung",dialog:{removeMember:{title:"Entgültig löschen",message:"Möchtest du dieses Mitglied wirklich entfernen?"},charts:{title:"Charts"}}},a6={spaceSettings:{title:"Space-Einstellungen"},dialog:{leaveSpace:{title:"Space verlassen",message:"Möchtest du diesen Space verlassen? Deine Daten werden gelöscht!"},anonLogOut:{title:"Entgültig abmelden",message:"Wenn du dich von deinem annonymen Konto abmeldest, können die gespeicherten Daten nur über den Einladungslink verwaltet werden. Möchtest du dich dennoch abmelden? Du wirst dich nie wieder mit diesem Konto anmelden können."},deleteAccount:{title:"Entgültig löschen",message:"Möchtest du deinen Account löschen? Alle Daten, die mit deinem Konto verknüpft sind werden ebenfalls gelöscht."},relogin:{title:"Erneut anmelden",message:"Bitte melde dich erneut mit deinen Anmeldedaten an um deinen Account löschen zu können."},invitationLink:{title:"Einladungslink teilen",message:"Über den folgenen Link können deine Freunde beitreten:"}}},l6={"login-needed":{title:"Anmeldung erforderlich",message:"Melde dich an oder frage nach einem Einladungslink zu einem bestehenden Space um deine Favoriten zu speichern."}},c6="Installiere die App auf deinem Homescreen",u6="Informationen zum Datenschutz",h6="LITERAL TRANSLATIONS",d6="Montag",f6="Dienstag",m6="Mittwoch",g6="Donnerstag",p6="Freitag",_6="Samstag",y6="Sonntag",v6="Konzert",E6={brand:J5,app:X5,navigation:Z5,common:e6,join:t6,login:n6,home:r6,acts:s6,swiper:i6,members:o6,settings:a6,dialog:l6,pwaAdvert:c6,privacyPolicy:u6,__comment:h6,Monday:d6,Tuesday:f6,Wednesday:m6,Thursday:g6,Friday:p6,Saturday:_6,Sunday:y6,Concert:v6,"Spoken Word":"Rede"};var I6={VITE_FB_API_KEY:"AIzaSyD17IQgWZmP3iCaXGeeQq71o09hh3DcwUE",VITE_FB_AUTH_DOMAIN:"wacken-glup.firebaseapp.com",VITE_FB_PROJECT_ID:"wacken-glup",VITE_FB_STORAGE_BUCKET:"wacken-glup.appspot.com",VITE_FB_MESSAGING_SENDER_ID:"708544587822",VITE_FB_APP_ID:"1:708544587822:web:184cc869ae7b53167057bf",VITE_PRIVACY_POLICY:"/privacy.html",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};ui("theme",I6.VITE_THEME_COLOR||"#9AB14D");const w6={apiKey:"AIzaSyD17IQgWZmP3iCaXGeeQq71o09hh3DcwUE",authDomain:"wacken-glup.firebaseapp.com",projectId:"wacken-glup",storageBucket:"wacken-glup.appspot.com",messagingSenderId:"708544587822",appId:"1:708544587822:web:184cc869ae7b53167057bf"},T6=L0(w6),BE=new RD(T6),b6=A5({locale:navigator.language.substring(0,2),fallbackLocale:"en",messages:{en:Q5,de:E6}}),ir=Cb(mM),jE=new dk(BE);ir.config.globalProperties.$client=jE;ir.config.globalProperties.$ctx=BE;ir.config.globalProperties.openLoginNeededDialog=et(!1);ir.config.globalProperties.showOfflineReadyToast=et(!1);jE.fetchAll();ir.use(b6);ir.use(Vx);ir.use(DA,{});ir.component(Ag.name||"",Ag);ir.mount("body");"serviceWorker"in navigator&&LA({immediate:!0,onOfflineReady(){ir.config.globalProperties.showOfflineReadyToast.value=!0}});export{lL as A,Do as B,Tb as C,F6 as D,V6 as E,ye as F,U6 as G,o2 as H,O6 as I,tO as L,cO as P,js as W,vt as _,O as a,He as b,oe as c,et as d,nT as e,xy as f,rT as g,Ea as h,tT as i,gt as j,ec as k,hd as l,Ne as m,wd as n,ee as o,ml as p,gc as q,ht as r,$e as s,ue as t,Qt as u,rE as v,$s as w,cn as x,sE as y,sh as z};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SwiperView-0J94OEkH.js","assets/SwiperView-IKc99Z-z.css","assets/MembersView-DF9jXu2S.js","assets/MembersView-BBqMQnHy.css"])))=>i.map(i=>d[i]);
var cI=Object.defineProperty;var uI=(t,e,n)=>e in t?cI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>uI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();let Ao,cu,uu,hu;const mn={light:"",dark:""},Rm=[];async function hI(t){await new Promise(e=>setTimeout(e,t))}function dI(){return"fxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function da(t,e){try{return typeof t=="string"?(e??document).querySelector(t):t}catch{return null}}function En(t,e){try{return typeof t=="string"?(e??document).querySelectorAll(t):t??Rm}catch{return Rm}}function gn(t,e){var n;return((n=t==null?void 0:t.classList)==null?void 0:n.contains(e))??!1}function Cl(t,e){var n;return((n=t==null?void 0:t.tagName)==null?void 0:n.toLowerCase())===e}function Wo(t,e){var n;return((n=t==null?void 0:t.type)==null?void 0:n.toLowerCase())===e}function ts(t,e){var n;(n=t==null?void 0:t.classList)==null||n.add(e)}function on(t,e){var n;(n=t==null?void 0:t.classList)==null||n.remove(e)}function Sn(t,e,n,r=!0){t==null||t.addEventListener(e,n,r)}function H_(t,e,n,r=!0){t==null||t.removeEventListener(e,n,r)}function fI(t,e){var n;(n=e==null?void 0:e.parentNode)==null||n.insertBefore(t,e)}function Jh(t){return t==null?void 0:t.previousElementSibling}function q_(t){return t==null?void 0:t.nextElementSibling}function js(t){return t==null?void 0:t.parentElement}function mI(t){const e=document.createElement("div");for(let n=0,r=Object.keys(t),s=r.length;n<s;n++){const i=r[n],o=t[i];e.setAttribute(i,o)}return e}function fa(t){const e=t;Wo(e,"number")&&!e.value&&(e.value=""),e.placeholder||(e.placeholder=" "),t.getAttribute("data-ui")&&ed(t,null)}function gI(t){ed(t.currentTarget,null,null,t)}function pI(t){const e=t.currentTarget,n=js(e),r=da("input:not([type=file], [type=checkbox], [type=radio]), select, textarea",n);r&&r.focus()}function _I(t){const e=t.currentTarget;fa(e)}function yI(t){const e=t.currentTarget;fa(e)}function W_(t){H_(document.body,"click",W_);const e=t.target,n=En("menu.active");for(let r=0,s=n.length;r<s;r++)G_(e,n[r],t)}function vI(t){const e=t.currentTarget;on(e,"active"),Ao&&clearTimeout(Ao)}function EI(t){const e=t.currentTarget;Xh(e)}function II(t){const e=t.currentTarget;Zh(e)}function wI(t){const e=t.currentTarget;Xh(e,t)}function TI(t){const e=t.currentTarget;Zh(e,t)}function bI(t){const e=t.currentTarget;K_(e)}function km(){cu&&clearTimeout(cu),cu=setTimeout(()=>{sc()},180)}function Xh(t,e){if(e&&e.key==="Enter"){const s=Jh(t);if(!Wo(s,"file"))return;s.click();return}const n=t,r=q_(t);Wo(r,"text")&&(r.value=n.files?Array.from(n.files).map(s=>s.name).join(", "):"",r.readOnly=!0,Sn(r,"keydown",wI,!1),fa(r))}function Zh(t,e){if(e&&e.key==="Enter"){const s=Jh(t);if(!Wo(s,"color"))return;s.click();return}const n=t,r=q_(t);Wo(r,"text")&&(r.readOnly=!0,r.value=n.value,Sn(r,"keydown",TI,!1),fa(r))}function K_(t){const e=js(t),n=js(t);e.removeAttribute("style"),gn(e,"min")&&e.style.setProperty("---size",`${Math.max(t.scrollHeight,n.offsetHeight)}px`)}function Nm(t){const e=js(t),n=da("span",e),r=En("input",e);if(!r.length||!n)return;const s=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--size"))||16,i=gn(e,"max")?0:.25*s*100/r[0].offsetWidth,o=[],a=[];for(let p=0,E=r.length;p<E;p++){const A=parseFloat(r[p].min)||0,N=parseFloat(r[p].max)||100,O=parseFloat(r[p].value)||0,k=(O-A)*100/(N-A),I=i/2-i*k/100;o.push(k+I),a.push(O)}let l=o[0],u=0,h=100-u-l,d=a[0],m=a[1]||0;r.length>1&&(l=Math.abs(o[1]-o[0]),u=o[1]>o[0]?o[0]:o[1],h=100-u-l,m>d&&(d=a[1]||0,m=a[0])),e.style.setProperty("---start",`${u}%`),e.style.setProperty("---end",`${h}%`),e.style.setProperty("---value1",`'${d}'`),e.style.setProperty("---value2",`'${m}'`)}function Hu(t){if(t){const n=t.target;if(n.type==="range"){Nm(n);return}}const e=En(".slider > input[type=range]");e.length?Sn(globalThis,"input",Hu,!1):H_(globalThis,"input",Hu,!1);for(let n=0,r=e.length;n<r;n++)Nm(e[n])}async function ed(t,e,n,r){if(!(!e&&(e=da(t.getAttribute("data-ui")),!e))){if(Cl(e,"dialog")){await CI(t,e);return}if(Cl(e,"menu")){G_(t,e,r);return}if(gn(e,"snackbar")){SI(t,e,n);return}if(gn(e,"page")){AI(t,e);return}if(ma(t),gn(e,"active")){on(e,"active");return}ts(e,"active")}}function ma(t){t.id&&gn(t,"page")&&(t=da(`[data-ui="#${t.id}"]`)??t);const e=js(t);if(!gn(e,"tabs"))return;const n=En("a",e);for(let r=0,s=n.length;r<s;r++)on(n[r],"active");ts(t,"active")}function AI(t,e){ma(t);const n=js(e);if(n)for(let r=0,s=n.children.length;r<s;r++)gn(n.children[r],"page")&&on(n.children[r],"active");ts(e,"active")}function G_(t,e,n){uu&&clearTimeout(uu),uu=setTimeout(()=>{var r;Sn(document.body,"click",W_),(r=document.activeElement)==null||r.blur(),ma(t);const s=gn(e,"active"),i=(n==null?void 0:n.target)===t,o=!!t.closest("menu");if(!s&&o||s&&i){on(e,"active");return}const a=En("menu.active");for(let l=0,u=a.length;l<u;l++)on(a[l],"active");ts(e,"active")},90)}async function CI(t,e){var n;(n=document.activeElement)==null||n.blur(),ma(t);let r=Jh(e);const s=e,i=gn(e,"active")||s.open,o=gn(e,"modal"),a=js(e),l=Cl(a,"nav");if(gn(r,"overlay")||(r=mI({class:"overlay"}),fI(r,e),await hI(90)),r.onclick=()=>{o||(on(t,"active"),on(e,"active"),on(r,"active"),s.close())},l){const u=En("dialog, a, .overlay",a);for(let h=0,d=u.length;h<d;h++){const m=u[h];on(m,"active"),m.open&&m.close()}}i?(on(t,"active"),on(r,"active"),on(e,"active"),s.close()):(!Cl(t,"button")&&!gn(t,"button")&&!gn(t,"chip")&&ts(t,"active"),ts(r,"active"),ts(e,"active"),o?s.showModal():s.show())}function SI(t,e,n){var r;(r=document.activeElement)==null||r.blur(),ma(t);const s=En(".snackbar.active");for(let i=0,o=s.length;i<o;i++)on(s[i],"active");ts(e,"active"),Sn(e,"click",vI),Ao&&clearTimeout(Ao),n!==-1&&(Ao=setTimeout(()=>{on(e,"active")},n??6e3))}function PI(){if(mn.light&&mn.dark)return mn;const t=document.createElement("body");t.className="light",document.body.appendChild(t);const e=document.createElement("body");e.className="dark",document.body.appendChild(e);const n=getComputedStyle(t),r=getComputedStyle(e),s=["--primary","--on-primary","--primary-container","--on-primary-container","--secondary","--on-secondary","--secondary-container","--on-secondary-container","--tertiary","--on-tertiary","--tertiary-container","--on-tertiary-container","--error","--on-error","--error-container","--on-error-container","--background","--on-background","--surface","--on-surface","--surface-variant","--on-surface-variant","--outline","--outline-variant","--shadow","--scrim","--inverse-surface","--inverse-on-surface","--inverse-primary","--surface-dim","--surface-bright","--surface-container-lowest","--surface-container-low","--surface-container","--surface-container-high","--surface-container-highest"];for(let i=0,o=s.length;i<o;i++)mn.light+=s[i]+":"+n.getPropertyValue(s[i])+";",mn.dark+=s[i]+":"+r.getPropertyValue(s[i])+";";return document.body.removeChild(t),document.body.removeChild(e),mn}function RI(t){if(!t||!globalThis.materialDynamicColors)return PI();const e=/dark/i.test(document.body.className)?"dark":"light";return t.light&&t.dark?(mn.light=t.light,mn.dark=t.dark,document.body.setAttribute("style",t[e]),t):globalThis.materialDynamicColors(t).then(n=>{const r=s=>{let i="";for(let o=0,a=Object.keys(s),l=a.length;o<l;o++){const u=a[o],h=s[u],d=u.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();i+="--"+d+":"+h+";"}return i};return mn.light=r(n.light),mn.dark=r(n.dark),document.body.setAttribute("style",mn[e]),mn})}function kI(t){if(!t)return/dark/i.test(document.body.className)?"dark":"light";document.body.classList.remove("light","dark"),document.body.classList.add(t);const e=t==="light"?mn.light:mn.dark;return globalThis.materialDynamicColors&&document.body.setAttribute("style",e),t}function NI(){hu||(hu=new MutationObserver(km),hu.observe(document.body,{childList:!0,subtree:!0}),km())}function sc(t,e){if(t){if(t==="setup"){NI();return}if(t==="guid")return dI();if(t==="mode")return kI(e);if(t==="theme")return RI(e);const l=da(t);if(!l)return;ed(l,l,e)}const n=En("[data-ui]");for(let l=0,u=n.length;l<u;l++)Sn(n[l],"click",gI);const r=En(".field > label");for(let l=0,u=r.length;l<u;l++)Sn(r[l],"click",pI);const s=En(".field > input:not([type=file], [type=color], [type=range]), .field > select, .field > textarea");for(let l=0,u=s.length;l<u;l++){const h=s[l];Sn(h,"focus",_I),Sn(h,"blur",yI),fa(h)}const i=En(".field > input[type=file]");for(let l=0,u=i.length;l<u;l++){const h=i[l];Sn(h,"change",EI),Xh(h)}const o=En(".field > input[type=color]");for(let l=0,u=o.length;l<u;l++){const h=o[l];Sn(h,"change",II),Zh(h)}const a=En(".field.textarea > textarea");for(let l=0,u=a.length;l<u;l++){const h=a[l];Sn(h,"input",bI),K_(h)}Hu()}globalThis.addEventListener&&globalThis.addEventListener("load",async()=>await sc("setup"));globalThis.beercss=sc;globalThis.ui=sc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t<0?-1:t===0?0:1}function Co(t,e,n){return(1-n)*t+n*e}function DI(t,e,n){return n<t?t:n>e?e:n}function Sl(t,e,n){return n<t?t:n>e?e:n}function Dm(t){return t=t%360,t<0&&(t=t+360),t}function td(t){return t=t%360,t<0&&(t=t+360),t}function OI(t,e){return td(e-t)<=180?1:-1}function z_(t,e){return 180-Math.abs(Math.abs(t-e)-180)}function qu(t,e){const n=t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],r=t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],s=t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2];return[n,r,s]}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Y_=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],LI=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],nd=[95.047,100,108.883];function ic(t,e,n){return(255<<24|(t&255)<<16|(e&255)<<8|n&255)>>>0}function Om(t){const e=Vs(t[0]),n=Vs(t[1]),r=Vs(t[2]);return ic(e,n,r)}function MI(t){return t>>24&255}function oc(t){return t>>16&255}function ac(t){return t>>8&255}function lc(t){return t&255}function Q_(t,e,n){const r=LI,s=r[0][0]*t+r[0][1]*e+r[0][2]*n,i=r[1][0]*t+r[1][1]*e+r[1][2]*n,o=r[2][0]*t+r[2][1]*e+r[2][2]*n,a=Vs(s),l=Vs(i),u=Vs(o);return ic(a,l,u)}function xI(t){const e=Ir(oc(t)),n=Ir(ac(t)),r=Ir(lc(t));return qu([e,n,r],Y_)}function VI(t,e,n){const r=nd,s=(t+16)/116,i=e/500+s,o=s-n/200,a=ul(i),l=ul(s),u=ul(o),h=a*r[0],d=l*r[1],m=u*r[2];return Q_(h,d,m)}function FI(t){const e=Ir(oc(t)),n=Ir(ac(t)),r=Ir(lc(t)),s=Y_,i=s[0][0]*e+s[0][1]*n+s[0][2]*r,o=s[1][0]*e+s[1][1]*n+s[1][2]*r,a=s[2][0]*e+s[2][1]*n+s[2][2]*r,l=nd,u=i/l[0],h=o/l[1],d=a/l[2],m=So(u),p=So(h),E=So(d),A=116*p-16,N=500*(m-p),O=200*(p-E);return[A,N,O]}function UI(t){const e=Jr(t),n=Vs(e);return ic(n,n,n)}function Wu(t){const e=xI(t)[1];return 116*So(e/100)-16}function Jr(t){return 100*ul((t+16)/116)}function Ku(t){return So(t/100)*116-16}function Ir(t){const e=t/255;return e<=.040449936?e/12.92*100:Math.pow((e+.055)/1.055,2.4)*100}function Vs(t){const e=t/100;let n=0;return e<=.0031308?n=e*12.92:n=1.055*Math.pow(e,1/2.4)-.055,DI(0,255,Math.round(n*255))}function $I(){return nd}function So(t){const e=.008856451679035631,n=24389/27;return t>e?Math.pow(t,1/3):(n*t+16)/116}function ul(t){const e=.008856451679035631,n=24389/27,r=t*t*t;return r>e?r:(116*t-16)/n}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let _r=class J_{static make(e=$I(),n=200/Math.PI*Jr(50)/100,r=50,s=2,i=!1){const o=e,a=o[0]*.401288+o[1]*.650173+o[2]*-.051461,l=o[0]*-.250268+o[1]*1.204414+o[2]*.045854,u=o[0]*-.002079+o[1]*.048952+o[2]*.953127,h=.8+s/10,d=h>=.9?Co(.59,.69,(h-.9)*10):Co(.525,.59,(h-.8)*10);let m=i?1:h*(1-1/3.6*Math.exp((-n-42)/92));m=m>1?1:m<0?0:m;const p=h,E=[m*(100/a)+1-m,m*(100/l)+1-m,m*(100/u)+1-m],A=1/(5*n+1),N=A*A*A*A,O=1-N,k=N*n+.1*O*O*Math.cbrt(5*n),I=Jr(r)/e[1],S=1.48+Math.sqrt(I),B=.725/Math.pow(I,.2),V=B,y=[Math.pow(k*E[0]*a/100,.42),Math.pow(k*E[1]*l/100,.42),Math.pow(k*E[2]*u/100,.42)],_=[400*y[0]/(y[0]+27.13),400*y[1]/(y[1]+27.13),400*y[2]/(y[2]+27.13)],v=(2*_[0]+_[1]+.05*_[2])*B;return new J_(I,v,B,V,d,p,E,k,Math.pow(k,.25),S)}constructor(e,n,r,s,i,o,a,l,u,h){this.n=e,this.aw=n,this.nbb=r,this.ncb=s,this.c=i,this.nc=o,this.rgbD=a,this.fl=l,this.fLRoot=u,this.z=h}};_r.DEFAULT=_r.make();/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dt{constructor(e,n,r,s,i,o,a,l,u){this.hue=e,this.chroma=n,this.j=r,this.q=s,this.m=i,this.s=o,this.jstar=a,this.astar=l,this.bstar=u}distance(e){const n=this.jstar-e.jstar,r=this.astar-e.astar,s=this.bstar-e.bstar,i=Math.sqrt(n*n+r*r+s*s);return 1.41*Math.pow(i,.63)}static fromInt(e){return Dt.fromIntInViewingConditions(e,_r.DEFAULT)}static fromIntInViewingConditions(e,n){const r=(e&16711680)>>16,s=(e&65280)>>8,i=e&255,o=Ir(r),a=Ir(s),l=Ir(i),u=.41233895*o+.35762064*a+.18051042*l,h=.2126*o+.7152*a+.0722*l,d=.01932141*o+.11916382*a+.95034478*l,m=.401288*u+.650173*h-.051461*d,p=-.250268*u+1.204414*h+.045854*d,E=-.002079*u+.048952*h+.953127*d,A=n.rgbD[0]*m,N=n.rgbD[1]*p,O=n.rgbD[2]*E,k=Math.pow(n.fl*Math.abs(A)/100,.42),I=Math.pow(n.fl*Math.abs(N)/100,.42),S=Math.pow(n.fl*Math.abs(O)/100,.42),B=dn(A)*400*k/(k+27.13),V=dn(N)*400*I/(I+27.13),y=dn(O)*400*S/(S+27.13),_=(11*B+-12*V+y)/11,v=(B+V-2*y)/9,D=(20*B+20*V+21*y)/20,M=(40*B+20*V+y)/20,L=Math.atan2(v,_)*180/Math.PI,P=L<0?L+360:L>=360?L-360:L,Te=P*Math.PI/180,We=M*n.nbb,Re=100*Math.pow(We/n.aw,n.c*n.z),Ce=4/n.c*Math.sqrt(Re/100)*(n.aw+4)*n.fLRoot,Ie=P<20.14?P+360:P,ot=.25*(Math.cos(Ie*Math.PI/180+2)+3.8),mt=5e4/13*ot*n.nc*n.ncb*Math.sqrt(_*_+v*v)/(D+.305),Je=Math.pow(mt,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),Ue=Je*Math.sqrt(Re/100),He=Ue*n.fLRoot,Mt=50*Math.sqrt(Je*n.c/(n.aw+4)),St=(1+100*.007)*Re/(1+.007*Re),ut=1/.0228*Math.log(1+.0228*He),z=ut*Math.cos(Te),ie=ut*Math.sin(Te);return new Dt(P,Ue,Re,Ce,He,Mt,St,z,ie)}static fromJch(e,n,r){return Dt.fromJchInViewingConditions(e,n,r,_r.DEFAULT)}static fromJchInViewingConditions(e,n,r,s){const i=4/s.c*Math.sqrt(e/100)*(s.aw+4)*s.fLRoot,o=n*s.fLRoot,a=n/Math.sqrt(e/100),l=50*Math.sqrt(a*s.c/(s.aw+4)),u=r*Math.PI/180,h=(1+100*.007)*e/(1+.007*e),d=1/.0228*Math.log(1+.0228*o),m=d*Math.cos(u),p=d*Math.sin(u);return new Dt(r,n,e,i,o,l,h,m,p)}static fromUcs(e,n,r){return Dt.fromUcsInViewingConditions(e,n,r,_r.DEFAULT)}static fromUcsInViewingConditions(e,n,r,s){const i=n,o=r,a=Math.sqrt(i*i+o*o),l=(Math.exp(a*.0228)-1)/.0228/s.fLRoot;let u=Math.atan2(o,i)*(180/Math.PI);u<0&&(u+=360);const h=e/(1-(e-100)*.007);return Dt.fromJchInViewingConditions(h,l,u,s)}toInt(){return this.viewed(_r.DEFAULT)}viewed(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),s=this.hue*Math.PI/180,i=.25*(Math.cos(s+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),a=i*(5e4/13)*e.nc*e.ncb,l=o/e.nbb,u=Math.sin(s),h=Math.cos(s),d=23*(l+.305)*r/(23*a+11*r*h+108*r*u),m=d*h,p=d*u,E=(460*l+451*m+288*p)/1403,A=(460*l-891*m-261*p)/1403,N=(460*l-220*m-6300*p)/1403,O=Math.max(0,27.13*Math.abs(E)/(400-Math.abs(E))),k=dn(E)*(100/e.fl)*Math.pow(O,1/.42),I=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),S=dn(A)*(100/e.fl)*Math.pow(I,1/.42),B=Math.max(0,27.13*Math.abs(N)/(400-Math.abs(N))),V=dn(N)*(100/e.fl)*Math.pow(B,1/.42),y=k/e.rgbD[0],_=S/e.rgbD[1],v=V/e.rgbD[2],D=1.86206786*y-1.01125463*_+.14918677*v,M=.38752654*y+.62144744*_-.00897398*v,L=-.0158415*y-.03412294*_+1.04996444*v;return Q_(D,M,L)}static fromXyzInViewingConditions(e,n,r,s){const i=.401288*e+.650173*n-.051461*r,o=-.250268*e+1.204414*n+.045854*r,a=-.002079*e+.048952*n+.953127*r,l=s.rgbD[0]*i,u=s.rgbD[1]*o,h=s.rgbD[2]*a,d=Math.pow(s.fl*Math.abs(l)/100,.42),m=Math.pow(s.fl*Math.abs(u)/100,.42),p=Math.pow(s.fl*Math.abs(h)/100,.42),E=dn(l)*400*d/(d+27.13),A=dn(u)*400*m/(m+27.13),N=dn(h)*400*p/(p+27.13),O=(11*E+-12*A+N)/11,k=(E+A-2*N)/9,I=(20*E+20*A+21*N)/20,S=(40*E+20*A+N)/20,B=Math.atan2(k,O)*180/Math.PI,V=B<0?B+360:B>=360?B-360:B,y=V*Math.PI/180,_=S*s.nbb,v=100*Math.pow(_/s.aw,s.c*s.z),D=4/s.c*Math.sqrt(v/100)*(s.aw+4)*s.fLRoot,M=V<20.14?V+360:V,L=1/4*(Math.cos(M*Math.PI/180+2)+3.8),P=5e4/13*L*s.nc*s.ncb*Math.sqrt(O*O+k*k)/(I+.305),Te=Math.pow(P,.9)*Math.pow(1.64-Math.pow(.29,s.n),.73),We=Te*Math.sqrt(v/100),Re=We*s.fLRoot,Ce=50*Math.sqrt(Te*s.c/(s.aw+4)),Ie=(1+100*.007)*v/(1+.007*v),ot=Math.log(1+.0228*Re)/.0228,mt=ot*Math.cos(y),Je=ot*Math.sin(y);return new Dt(V,We,v,D,Re,Ce,Ie,mt,Je)}xyzInViewingConditions(e){const n=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(n/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),s=this.hue*Math.PI/180,i=.25*(Math.cos(s+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),a=i*(5e4/13)*e.nc*e.ncb,l=o/e.nbb,u=Math.sin(s),h=Math.cos(s),d=23*(l+.305)*r/(23*a+11*r*h+108*r*u),m=d*h,p=d*u,E=(460*l+451*m+288*p)/1403,A=(460*l-891*m-261*p)/1403,N=(460*l-220*m-6300*p)/1403,O=Math.max(0,27.13*Math.abs(E)/(400-Math.abs(E))),k=dn(E)*(100/e.fl)*Math.pow(O,1/.42),I=Math.max(0,27.13*Math.abs(A)/(400-Math.abs(A))),S=dn(A)*(100/e.fl)*Math.pow(I,1/.42),B=Math.max(0,27.13*Math.abs(N)/(400-Math.abs(N))),V=dn(N)*(100/e.fl)*Math.pow(B,1/.42),y=k/e.rgbD[0],_=S/e.rgbD[1],v=V/e.rgbD[2],D=1.86206786*y-1.01125463*_+.14918677*v,M=.38752654*y+.62144744*_-.00897398*v,L=-.0158415*y-.03412294*_+1.04996444*v;return[D,M,L]}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Xr=class Se{static sanitizeRadians(e){return(e+Math.PI*8)%(Math.PI*2)}static trueDelinearized(e){const n=e/100;let r=0;return n<=.0031308?r=n*12.92:r=1.055*Math.pow(n,1/2.4)-.055,r*255}static chromaticAdaptation(e){const n=Math.pow(Math.abs(e),.42);return dn(e)*400*n/(n+27.13)}static hueOf(e){const n=qu(e,Se.SCALED_DISCOUNT_FROM_LINRGB),r=Se.chromaticAdaptation(n[0]),s=Se.chromaticAdaptation(n[1]),i=Se.chromaticAdaptation(n[2]),o=(11*r+-12*s+i)/11,a=(r+s-2*i)/9;return Math.atan2(a,o)}static areInCyclicOrder(e,n,r){const s=Se.sanitizeRadians(n-e),i=Se.sanitizeRadians(r-e);return s<i}static intercept(e,n,r){return(n-e)/(r-e)}static lerpPoint(e,n,r){return[e[0]+(r[0]-e[0])*n,e[1]+(r[1]-e[1])*n,e[2]+(r[2]-e[2])*n]}static setCoordinate(e,n,r,s){const i=Se.intercept(e[s],n,r[s]);return Se.lerpPoint(e,i,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,n){const r=Se.Y_FROM_LINRGB[0],s=Se.Y_FROM_LINRGB[1],i=Se.Y_FROM_LINRGB[2],o=n%4<=1?0:100,a=n%2===0?0:100;if(n<4){const l=o,u=a,h=(e-l*s-u*i)/r;return Se.isBounded(h)?[h,l,u]:[-1,-1,-1]}else if(n<8){const l=o,u=a,h=(e-u*r-l*i)/s;return Se.isBounded(h)?[u,h,l]:[-1,-1,-1]}else{const l=o,u=a,h=(e-l*r-u*s)/i;return Se.isBounded(h)?[l,u,h]:[-1,-1,-1]}}static bisectToSegment(e,n){let r=[-1,-1,-1],s=r,i=0,o=0,a=!1,l=!0;for(let u=0;u<12;u++){const h=Se.nthVertex(e,u);if(h[0]<0)continue;const d=Se.hueOf(h);if(!a){r=h,s=h,i=d,o=d,a=!0;continue}(l||Se.areInCyclicOrder(i,d,o))&&(l=!1,Se.areInCyclicOrder(i,n,d)?(s=h,o=d):(r=h,i=d))}return[r,s]}static midpoint(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2,(e[2]+n[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,n){const r=Se.bisectToSegment(e,n);let s=r[0],i=Se.hueOf(s),o=r[1];for(let a=0;a<3;a++)if(s[a]!==o[a]){let l=-1,u=255;s[a]<o[a]?(l=Se.criticalPlaneBelow(Se.trueDelinearized(s[a])),u=Se.criticalPlaneAbove(Se.trueDelinearized(o[a]))):(l=Se.criticalPlaneAbove(Se.trueDelinearized(s[a])),u=Se.criticalPlaneBelow(Se.trueDelinearized(o[a])));for(let h=0;h<8&&!(Math.abs(u-l)<=1);h++){const d=Math.floor((l+u)/2),m=Se.CRITICAL_PLANES[d],p=Se.setCoordinate(s,m,o,a),E=Se.hueOf(p);Se.areInCyclicOrder(i,n,E)?(o=p,u=d):(s=p,i=E,l=d)}}return Se.midpoint(s,o)}static inverseChromaticAdaptation(e){const n=Math.abs(e),r=Math.max(0,27.13*n/(400-n));return dn(e)*Math.pow(r,1/.42)}static findResultByJ(e,n,r){let s=Math.sqrt(r)*11;const i=_r.DEFAULT,o=1/Math.pow(1.64-Math.pow(.29,i.n),.73),a=.25*(Math.cos(e+2)+3.8)*(5e4/13)*i.nc*i.ncb,l=Math.sin(e),u=Math.cos(e);for(let h=0;h<5;h++){const d=s/100,m=n===0||s===0?0:n/Math.sqrt(d),p=Math.pow(m*o,1/.9),E=i.aw*Math.pow(d,1/i.c/i.z)/i.nbb,A=23*(E+.305)*p/(23*a+11*p*u+108*p*l),N=A*u,O=A*l,k=(460*E+451*N+288*O)/1403,I=(460*E-891*N-261*O)/1403,S=(460*E-220*N-6300*O)/1403,B=Se.inverseChromaticAdaptation(k),V=Se.inverseChromaticAdaptation(I),y=Se.inverseChromaticAdaptation(S),_=qu([B,V,y],Se.LINRGB_FROM_SCALED_DISCOUNT);if(_[0]<0||_[1]<0||_[2]<0)return 0;const v=Se.Y_FROM_LINRGB[0],D=Se.Y_FROM_LINRGB[1],M=Se.Y_FROM_LINRGB[2],L=v*_[0]+D*_[1]+M*_[2];if(L<=0)return 0;if(h===4||Math.abs(L-r)<.002)return _[0]>100.01||_[1]>100.01||_[2]>100.01?0:Om(_);s=s-(L-r)*s/(2*L)}return 0}static solveToInt(e,n,r){if(n<1e-4||r<1e-4||r>99.9999)return UI(r);e=td(e);const s=e/180*Math.PI,i=Jr(r),o=Se.findResultByJ(s,n,i);if(o!==0)return o;const a=Se.bisectToLimit(i,s);return Om(a)}static solveToCam(e,n,r){return Dt.fromInt(Se.solveToInt(e,n,r))}};Xr.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]];Xr.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]];Xr.Y_FROM_LINRGB=[.2126,.7152,.0722];Xr.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class It{static from(e,n,r){return new It(Xr.solveToInt(e,n,r))}static fromInt(e){return new It(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(Xr.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(Xr.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(Xr.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const n=Dt.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=Wu(e),this.argb=e}setInternalState(e){const n=Dt.fromInt(e);this.internalHue=n.hue,this.internalChroma=n.chroma,this.internalTone=Wu(e),this.argb=e}inViewingConditions(e){const n=Dt.fromInt(this.toInt()).xyzInViewingConditions(e),r=Dt.fromXyzInViewingConditions(n[0],n[1],n[2],_r.make());return It.from(r.hue,r.chroma,Ku(n[1]))}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rd{static harmonize(e,n){const r=It.fromInt(e),s=It.fromInt(n),i=z_(r.hue,s.hue),o=Math.min(i*.5,15),a=td(r.hue+o*OI(r.hue,s.hue));return It.from(a,r.chroma,r.tone).toInt()}static hctHue(e,n,r){const s=rd.cam16Ucs(e,n,r),i=Dt.fromInt(s),o=Dt.fromInt(e);return It.from(i.hue,o.chroma,Wu(e)).toInt()}static cam16Ucs(e,n,r){const s=Dt.fromInt(e),i=Dt.fromInt(n),o=s.jstar,a=s.astar,l=s.bstar,u=i.jstar,h=i.astar,d=i.bstar,m=o+(u-o)*r,p=a+(h-a)*r,E=l+(d-l)*r;return Dt.fromUcs(m,p,E).toInt()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rt{static ratioOfTones(e,n){return e=Sl(0,100,e),n=Sl(0,100,n),Rt.ratioOfYs(Jr(e),Jr(n))}static ratioOfYs(e,n){const r=e>n?e:n,s=r===n?e:n;return(r+5)/(s+5)}static lighter(e,n){if(e<0||e>100)return-1;const r=Jr(e),s=n*(r+5)-5,i=Rt.ratioOfYs(s,r),o=Math.abs(i-n);if(i<n&&o>.04)return-1;const a=Ku(s)+.4;return a<0||a>100?-1:a}static darker(e,n){if(e<0||e>100)return-1;const r=Jr(e),s=(r+5)/n-5,i=Rt.ratioOfYs(r,s),o=Math.abs(i-n);if(i<n&&o>.04)return-1;const a=Ku(s)-.4;return a<0||a>100?-1:a}static lighterUnsafe(e,n){const r=Rt.lighter(e,n);return r<0?100:r}static darkerUnsafe(e,n){const r=Rt.darker(e,n);return r<0?0:r}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sd{static isDisliked(e){const n=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,s=Math.round(e.tone)<65;return n&&r&&s}static fixIfDisliked(e){return sd.isDisliked(e)?It.from(e.hue,e.chroma,70):e}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ae{static fromPalette(e){return new ae(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,n,r,s,i,o,a,l){if(this.name=e,this.palette=n,this.tone=r,this.isBackground=s,this.background=i,this.secondBackground=o,this.contrastCurve=a,this.toneDeltaPair=l,this.hctCache=new Map,!i&&o)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&a)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!a)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const n=this.hctCache.get(e);if(n!=null)return n;const r=this.getTone(e),s=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,s),s}getTone(e){const n=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),s=r.roleA,i=r.roleB,o=r.delta,a=r.polarity,l=r.stayTogether,u=this.background(e).getTone(e),h=a==="nearer"||a==="lighter"&&!e.isDark||a==="darker"&&e.isDark,d=h?s:i,m=h?i:s,p=this.name===d.name,E=e.isDark?1:-1,A=d.contrastCurve.getContrast(e.contrastLevel),N=m.contrastCurve.getContrast(e.contrastLevel),O=d.tone(e);let k=Rt.ratioOfTones(u,O)>=A?O:ae.foregroundTone(u,A);const I=m.tone(e);let S=Rt.ratioOfTones(u,I)>=N?I:ae.foregroundTone(u,N);return n&&(k=ae.foregroundTone(u,A),S=ae.foregroundTone(u,N)),(S-k)*E>=o||(S=Sl(0,100,k+o*E),(S-k)*E>=o||(k=Sl(0,100,S-o*E))),50<=k&&k<60?E>0?(k=60,S=Math.max(S,k+o*E)):(k=49,S=Math.min(S,k+o*E)):50<=S&&S<60&&(l?E>0?(k=60,S=Math.max(S,k+o*E)):(k=49,S=Math.min(S,k+o*E)):E>0?S=60:S=49),p?k:S}else{let r=this.tone(e);if(this.background==null)return r;const s=this.background(e).getTone(e),i=this.contrastCurve.getContrast(e.contrastLevel);if(Rt.ratioOfTones(s,r)>=i||(r=ae.foregroundTone(s,i)),n&&(r=ae.foregroundTone(s,i)),this.isBackground&&50<=r&&r<60&&(Rt.ratioOfTones(49,s)>=i?r=49:r=60),this.secondBackground){const[o,a]=[this.background,this.secondBackground],[l,u]=[o(e).getTone(e),a(e).getTone(e)],[h,d]=[Math.max(l,u),Math.min(l,u)];if(Rt.ratioOfTones(h,r)>=i&&Rt.ratioOfTones(d,r)>=i)return r;const m=Rt.lighter(h,i),p=Rt.darker(d,i),E=[];return m!==-1&&E.push(m),p!==-1&&E.push(p),ae.tonePrefersLightForeground(l)||ae.tonePrefersLightForeground(u)?m<0?100:m:E.length===1?E[0]:p<0?0:p}return r}}static foregroundTone(e,n){const r=Rt.lighterUnsafe(e,n),s=Rt.darkerUnsafe(e,n),i=Rt.ratioOfTones(r,e),o=Rt.ratioOfTones(s,e);if(ae.tonePrefersLightForeground(e)){const a=Math.abs(i-o)<.1&&i<n&&o<n;return i>=n||i>=o||a?r:s}else return o>=n||o>=i?s:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return ae.tonePrefersLightForeground(e)&&!ae.toneAllowsLightForeground(e)?49:e}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ko;(function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"})(Ko||(Ko={}));/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fe{constructor(e,n,r,s){this.low=e,this.normal=n,this.medium=r,this.high=s}getContrast(e){return e<=-1?this.low:e<0?Co(this.low,this.normal,(e- -1)/1):e<.5?Co(this.normal,this.medium,(e-0)/.5):e<1?Co(this.medium,this.high,(e-.5)/.5):this.high}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yn{constructor(e,n,r,s,i){this.roleA=e,this.roleB=n,this.delta=r,this.polarity=s,this.stayTogether=i}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hi(t){return t.variant===Ko.FIDELITY||t.variant===Ko.CONTENT}function pt(t){return t.variant===Ko.MONOCHROME}function BI(t,e,n,r){let s=n,i=It.from(t,e,n);if(i.chroma<e){let o=i.chroma;for(;i.chroma<e;){s+=r?-1:1;const a=It.from(t,e,s);if(o>a.chroma||Math.abs(a.chroma-e)<.4)break;const l=Math.abs(a.chroma-e),u=Math.abs(i.chroma-e);l<u&&(i=a),o=Math.max(o,a.chroma)}}return s}function jI(t){return _r.make(void 0,void 0,t.isDark?30:80,void 0,void 0)}function id(t,e){const n=t.inViewingConditions(jI(e));return ae.tonePrefersLightForeground(t.tone)&&!ae.toneAllowsLightForeground(n.tone)?ae.enableLightForeground(t.tone):ae.enableLightForeground(n.tone)}class W{static highestSurface(e){return e.isDark?W.surfaceBright:W.surfaceDim}}W.contentAccentToneDelta=15;W.primaryPaletteKeyColor=ae.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone});W.secondaryPaletteKeyColor=ae.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone});W.tertiaryPaletteKeyColor=ae.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone});W.neutralPaletteKeyColor=ae.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone});W.neutralVariantPaletteKeyColor=ae.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone});W.background=ae.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});W.onBackground=ae.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>W.background,contrastCurve:new Fe(3,3,4.5,7)});W.surface=ae.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0});W.surfaceDim=ae.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:87,isBackground:!0});W.surfaceBright=ae.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?24:98,isBackground:!0});W.surfaceContainerLowest=ae.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?4:100,isBackground:!0});W.surfaceContainerLow=ae.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?10:96,isBackground:!0});W.surfaceContainer=ae.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?12:94,isBackground:!0});W.surfaceContainerHigh=ae.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?17:92,isBackground:!0});W.surfaceContainerHighest=ae.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?22:90,isBackground:!0});W.onSurface=ae.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>W.highestSurface(t),contrastCurve:new Fe(4.5,7,11,21)});W.surfaceVariant=ae.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0});W.onSurfaceVariant=ae.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>W.highestSurface(t),contrastCurve:new Fe(3,4.5,7,11)});W.inverseSurface=ae.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20});W.inverseOnSurface=ae.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>W.inverseSurface,contrastCurve:new Fe(4.5,7,11,21)});W.outline=ae.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>W.highestSurface(t),contrastCurve:new Fe(1.5,3,4.5,7)});W.outlineVariant=ae.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7)});W.shadow=ae.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0});W.scrim=ae.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0});W.surfaceTint=ae.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0});W.primary=ae.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>pt(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(3,4.5,7,11),toneDeltaPair:t=>new yn(W.primaryContainer,W.primary,15,"nearer",!1)});W.onPrimary=ae.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>pt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>W.primary,contrastCurve:new Fe(4.5,7,11,21)});W.primaryContainer=ae.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>Hi(t)?id(t.sourceColorHct,t):pt(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.primaryContainer,W.primary,15,"nearer",!1)});W.onPrimaryContainer=ae.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>Hi(t)?ae.foregroundTone(W.primaryContainer.tone(t),4.5):pt(t)?t.isDark?0:100:t.isDark?90:10,background:t=>W.primaryContainer,contrastCurve:new Fe(4.5,7,11,21)});W.inversePrimary=ae.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>W.inverseSurface,contrastCurve:new Fe(3,4.5,7,11)});W.secondary=ae.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(3,4.5,7,11),toneDeltaPair:t=>new yn(W.secondaryContainer,W.secondary,15,"nearer",!1)});W.onSecondary=ae.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>pt(t)?t.isDark?10:100:t.isDark?20:100,background:t=>W.secondary,contrastCurve:new Fe(4.5,7,11,21)});W.secondaryContainer=ae.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;if(pt(t))return t.isDark?30:85;if(!Hi(t))return e;let n=BI(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark);return n=id(t.secondaryPalette.getHct(n),t),n},isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.secondaryContainer,W.secondary,15,"nearer",!1)});W.onSecondaryContainer=ae.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>Hi(t)?ae.foregroundTone(W.secondaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>W.secondaryContainer,contrastCurve:new Fe(4.5,7,11,21)});W.tertiary=ae.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(3,4.5,7,11),toneDeltaPair:t=>new yn(W.tertiaryContainer,W.tertiary,15,"nearer",!1)});W.onTertiary=ae.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>W.tertiary,contrastCurve:new Fe(4.5,7,11,21)});W.tertiaryContainer=ae.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if(pt(t))return t.isDark?60:49;if(!Hi(t))return t.isDark?30:90;const e=id(t.tertiaryPalette.getHct(t.sourceColorHct.tone),t),n=t.tertiaryPalette.getHct(e);return sd.fixIfDisliked(n).tone},isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.tertiaryContainer,W.tertiary,15,"nearer",!1)});W.onTertiaryContainer=ae.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?t.isDark?0:100:Hi(t)?ae.foregroundTone(W.tertiaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>W.tertiaryContainer,contrastCurve:new Fe(4.5,7,11,21)});W.error=ae.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(3,4.5,7,11),toneDeltaPair:t=>new yn(W.errorContainer,W.error,15,"nearer",!1)});W.onError=ae.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>W.error,contrastCurve:new Fe(4.5,7,11,21)});W.errorContainer=ae.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.errorContainer,W.error,15,"nearer",!1)});W.onErrorContainer=ae.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?90:10,background:t=>W.errorContainer,contrastCurve:new Fe(4.5,7,11,21)});W.primaryFixed=ae.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>pt(t)?40:90,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.primaryFixed,W.primaryFixedDim,10,"lighter",!0)});W.primaryFixedDim=ae.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>pt(t)?30:80,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.primaryFixed,W.primaryFixedDim,10,"lighter",!0)});W.onPrimaryFixed=ae.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>pt(t)?100:10,background:t=>W.primaryFixedDim,secondBackground:t=>W.primaryFixed,contrastCurve:new Fe(4.5,7,11,21)});W.onPrimaryFixedVariant=ae.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>pt(t)?90:30,background:t=>W.primaryFixedDim,secondBackground:t=>W.primaryFixed,contrastCurve:new Fe(3,4.5,7,11)});W.secondaryFixed=ae.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>pt(t)?80:90,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.secondaryFixed,W.secondaryFixedDim,10,"lighter",!0)});W.secondaryFixedDim=ae.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>pt(t)?70:80,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.secondaryFixed,W.secondaryFixedDim,10,"lighter",!0)});W.onSecondaryFixed=ae.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>W.secondaryFixedDim,secondBackground:t=>W.secondaryFixed,contrastCurve:new Fe(4.5,7,11,21)});W.onSecondaryFixedVariant=ae.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>pt(t)?25:30,background:t=>W.secondaryFixedDim,secondBackground:t=>W.secondaryFixed,contrastCurve:new Fe(3,4.5,7,11)});W.tertiaryFixed=ae.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?40:90,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.tertiaryFixed,W.tertiaryFixedDim,10,"lighter",!0)});W.tertiaryFixedDim=ae.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?30:80,isBackground:!0,background:t=>W.highestSurface(t),contrastCurve:new Fe(1,1,3,7),toneDeltaPair:t=>new yn(W.tertiaryFixed,W.tertiaryFixedDim,10,"lighter",!0)});W.onTertiaryFixed=ae.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?100:10,background:t=>W.tertiaryFixedDim,secondBackground:t=>W.tertiaryFixed,contrastCurve:new Fe(4.5,7,11,21)});W.onTertiaryFixedVariant=ae.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>pt(t)?90:30,background:t=>W.tertiaryFixedDim,secondBackground:t=>W.tertiaryFixed,contrastCurve:new Fe(3,4.5,7,11)});/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gt{static fromInt(e){const n=It.fromInt(e);return Gt.fromHct(n)}static fromHct(e){return new Gt(e.hue,e.chroma,e)}static fromHueAndChroma(e,n){return new Gt(e,n,Gt.createKeyColor(e,n))}constructor(e,n,r){this.hue=e,this.chroma=n,this.keyColor=r,this.cache=new Map}static createKeyColor(e,n){let r=It.from(e,n,50),s=Math.abs(r.chroma-n);for(let i=1;i<50;i+=1){if(Math.round(n)===Math.round(r.chroma))return r;const o=It.from(e,n,50+i),a=Math.abs(o.chroma-n);a<s&&(s=a,r=o);const l=It.from(e,n,50-i),u=Math.abs(l.chroma-n);u<s&&(s=u,r=l)}return r}tone(e){let n=this.cache.get(e);return n===void 0&&(n=It.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,n)),n}getHct(e){return It.fromInt(this.tone(e))}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let di=class xn{static of(e){return new xn(e,!1)}static contentOf(e){return new xn(e,!0)}static fromColors(e){return xn.createPaletteFromColors(!1,e)}static contentFromColors(e){return xn.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,n){const r=new xn(n.primary,e);if(n.secondary){const s=new xn(n.secondary,e);r.a2=s.a1}if(n.tertiary){const s=new xn(n.tertiary,e);r.a3=s.a1}if(n.error){const s=new xn(n.error,e);r.error=s.a1}if(n.neutral){const s=new xn(n.neutral,e);r.n1=s.n1}if(n.neutralVariant){const s=new xn(n.neutralVariant,e);r.n2=s.n2}return r}constructor(e,n){const r=It.fromInt(e),s=r.hue,i=r.chroma;n?(this.a1=Gt.fromHueAndChroma(s,i),this.a2=Gt.fromHueAndChroma(s,i/3),this.a3=Gt.fromHueAndChroma(s+60,i/2),this.n1=Gt.fromHueAndChroma(s,Math.min(i/12,4)),this.n2=Gt.fromHueAndChroma(s,Math.min(i/6,8))):(this.a1=Gt.fromHueAndChroma(s,Math.max(48,i)),this.a2=Gt.fromHueAndChroma(s,16),this.a3=Gt.fromHueAndChroma(s+60,24),this.n1=Gt.fromHueAndChroma(s,4),this.n2=Gt.fromHueAndChroma(s,8)),this.error=Gt.fromHueAndChroma(25,84)}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HI{fromInt(e){return FI(e)}toInt(e){return VI(e[0],e[1],e[2])}distance(e,n){const r=e[0]-n[0],s=e[1]-n[1],i=e[2]-n[2];return r*r+s*s+i*i}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qI=10,WI=3;let KI=class{static quantize(e,n,r){const s=new Map,i=new Array,o=new Array,a=new HI;let l=0;for(let k=0;k<e.length;k++){const I=e[k],S=s.get(I);S===void 0?(l++,i.push(a.fromInt(I)),o.push(I),s.set(I,1)):s.set(I,S+1)}const u=new Array;for(let k=0;k<l;k++){const I=o[k],S=s.get(I);S!==void 0&&(u[k]=S)}let h=Math.min(r,l);n.length>0&&(h=Math.min(h,n.length));const d=new Array;for(let k=0;k<n.length;k++)d.push(a.fromInt(n[k]));const m=h-d.length;if(n.length===0&&m>0)for(let k=0;k<m;k++){const I=Math.random()*100,S=Math.random()*201+-100,B=Math.random()*201+-100;d.push(new Array(I,S,B))}const p=new Array;for(let k=0;k<l;k++)p.push(Math.floor(Math.random()*h));const E=new Array;for(let k=0;k<h;k++){E.push(new Array);for(let I=0;I<h;I++)E[k].push(0)}const A=new Array;for(let k=0;k<h;k++){A.push(new Array);for(let I=0;I<h;I++)A[k].push(new GI)}const N=new Array;for(let k=0;k<h;k++)N.push(0);for(let k=0;k<qI;k++){for(let y=0;y<h;y++){for(let _=y+1;_<h;_++){const v=a.distance(d[y],d[_]);A[_][y].distance=v,A[_][y].index=y,A[y][_].distance=v,A[y][_].index=_}A[y].sort();for(let _=0;_<h;_++)E[y][_]=A[y][_].index}let I=0;for(let y=0;y<l;y++){const _=i[y],v=p[y],D=d[v],M=a.distance(_,D);let L=M,P=-1;for(let Te=0;Te<h;Te++){if(A[v][Te].distance>=4*M)continue;const We=a.distance(_,d[Te]);We<L&&(L=We,P=Te)}P!==-1&&Math.abs(Math.sqrt(L)-Math.sqrt(M))>WI&&(I++,p[y]=P)}if(I===0&&k!==0)break;const S=new Array(h).fill(0),B=new Array(h).fill(0),V=new Array(h).fill(0);for(let y=0;y<h;y++)N[y]=0;for(let y=0;y<l;y++){const _=p[y],v=i[y],D=u[y];N[_]+=D,S[_]+=v[0]*D,B[_]+=v[1]*D,V[_]+=v[2]*D}for(let y=0;y<h;y++){const _=N[y];if(_===0){d[y]=[0,0,0];continue}const v=S[y]/_,D=B[y]/_,M=V[y]/_;d[y]=[v,D,M]}}const O=new Map;for(let k=0;k<h;k++){const I=N[k];if(I===0)continue;const S=a.toInt(d[k]);O.has(S)||O.set(S,I)}return O}},GI=class{constructor(){this.distance=-1,this.index=-1}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let zI=class{static quantize(e){const n=new Map;for(let r=0;r<e.length;r++){const s=e[r];MI(s)<255||n.set(s,(n.get(s)??0)+1)}return n}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const za=5,Ln=33,fo=35937,nn={RED:"red",GREEN:"green",BLUE:"blue"};let YI=class{constructor(e=[],n=[],r=[],s=[],i=[],o=[]){this.weights=e,this.momentsR=n,this.momentsG=r,this.momentsB=s,this.moments=i,this.cubes=o}quantize(e,n){this.constructHistogram(e),this.computeMoments();const r=this.createBoxes(n);return this.createResult(r.resultCount)}constructHistogram(e){this.weights=Array.from({length:fo}).fill(0),this.momentsR=Array.from({length:fo}).fill(0),this.momentsG=Array.from({length:fo}).fill(0),this.momentsB=Array.from({length:fo}).fill(0),this.moments=Array.from({length:fo}).fill(0);const n=zI.quantize(e);for(const[r,s]of n.entries()){const i=oc(r),o=ac(r),a=lc(r),l=8-za,u=(i>>l)+1,h=(o>>l)+1,d=(a>>l)+1,m=this.getIndex(u,h,d);this.weights[m]=(this.weights[m]??0)+s,this.momentsR[m]+=s*i,this.momentsG[m]+=s*o,this.momentsB[m]+=s*a,this.moments[m]+=s*(i*i+o*o+a*a)}}computeMoments(){for(let e=1;e<Ln;e++){const n=Array.from({length:Ln}).fill(0),r=Array.from({length:Ln}).fill(0),s=Array.from({length:Ln}).fill(0),i=Array.from({length:Ln}).fill(0),o=Array.from({length:Ln}).fill(0);for(let a=1;a<Ln;a++){let l=0,u=0,h=0,d=0,m=0;for(let p=1;p<Ln;p++){const E=this.getIndex(e,a,p);l+=this.weights[E],u+=this.momentsR[E],h+=this.momentsG[E],d+=this.momentsB[E],m+=this.moments[E],n[p]+=l,r[p]+=u,s[p]+=h,i[p]+=d,o[p]+=m;const A=this.getIndex(e-1,a,p);this.weights[E]=this.weights[A]+n[p],this.momentsR[E]=this.momentsR[A]+r[p],this.momentsG[E]=this.momentsG[A]+s[p],this.momentsB[E]=this.momentsB[A]+i[p],this.moments[E]=this.moments[A]+o[p]}}}}createBoxes(e){this.cubes=Array.from({length:e}).fill(0).map(()=>new QI);const n=Array.from({length:e}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=Ln-1,this.cubes[0].g1=Ln-1,this.cubes[0].b1=Ln-1;let r=e,s=0;for(let i=1;i<e;i++){this.cut(this.cubes[s],this.cubes[i])?(n[s]=this.cubes[s].vol>1?this.variance(this.cubes[s]):0,n[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0):(n[s]=0,i--),s=0;let o=n[0];for(let a=1;a<=i;a++)n[a]>o&&(o=n[a],s=a);if(o<=0){r=i+1;break}}return new JI(e,r)}createResult(e){const n=[];for(let r=0;r<e;++r){const s=this.cubes[r],i=this.volume(s,this.weights);if(i>0){const o=Math.round(this.volume(s,this.momentsR)/i),a=Math.round(this.volume(s,this.momentsG)/i),l=Math.round(this.volume(s,this.momentsB)/i),u=255<<24|(o&255)<<16|(a&255)<<8|l&255;n.push(u)}}return n}variance(e){const n=this.volume(e,this.momentsR),r=this.volume(e,this.momentsG),s=this.volume(e,this.momentsB),i=this.moments[this.getIndex(e.r1,e.g1,e.b1)]-this.moments[this.getIndex(e.r1,e.g1,e.b0)]-this.moments[this.getIndex(e.r1,e.g0,e.b1)]+this.moments[this.getIndex(e.r1,e.g0,e.b0)]-this.moments[this.getIndex(e.r0,e.g1,e.b1)]+this.moments[this.getIndex(e.r0,e.g1,e.b0)]+this.moments[this.getIndex(e.r0,e.g0,e.b1)]-this.moments[this.getIndex(e.r0,e.g0,e.b0)],o=n*n+r*r+s*s,a=this.volume(e,this.weights);return i-o/a}cut(e,n){const r=this.volume(e,this.momentsR),s=this.volume(e,this.momentsG),i=this.volume(e,this.momentsB),o=this.volume(e,this.weights),a=this.maximize(e,nn.RED,e.r0+1,e.r1,r,s,i,o),l=this.maximize(e,nn.GREEN,e.g0+1,e.g1,r,s,i,o),u=this.maximize(e,nn.BLUE,e.b0+1,e.b1,r,s,i,o);let h;const d=a.maximum,m=l.maximum,p=u.maximum;if(d>=m&&d>=p){if(a.cutLocation<0)return!1;h=nn.RED}else m>=d&&m>=p?h=nn.GREEN:h=nn.BLUE;switch(n.r1=e.r1,n.g1=e.g1,n.b1=e.b1,h){case nn.RED:e.r1=a.cutLocation,n.r0=e.r1,n.g0=e.g0,n.b0=e.b0;break;case nn.GREEN:e.g1=l.cutLocation,n.r0=e.r0,n.g0=e.g1,n.b0=e.b0;break;case nn.BLUE:e.b1=u.cutLocation,n.r0=e.r0,n.g0=e.g0,n.b0=e.b1;break;default:throw new Error("unexpected direction "+h)}return e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),n.vol=(n.r1-n.r0)*(n.g1-n.g0)*(n.b1-n.b0),!0}maximize(e,n,r,s,i,o,a,l){const u=this.bottom(e,n,this.momentsR),h=this.bottom(e,n,this.momentsG),d=this.bottom(e,n,this.momentsB),m=this.bottom(e,n,this.weights);let p=0,E=-1,A=0,N=0,O=0,k=0;for(let I=r;I<s;I++){if(A=u+this.top(e,n,I,this.momentsR),N=h+this.top(e,n,I,this.momentsG),O=d+this.top(e,n,I,this.momentsB),k=m+this.top(e,n,I,this.weights),k===0)continue;let S=(A*A+N*N+O*O)*1,B=k*1,V=S/B;A=i-A,N=o-N,O=a-O,k=l-k,k!==0&&(S=(A*A+N*N+O*O)*1,B=k*1,V+=S/B,V>p&&(p=V,E=I))}return new XI(E,p)}volume(e,n){return n[this.getIndex(e.r1,e.g1,e.b1)]-n[this.getIndex(e.r1,e.g1,e.b0)]-n[this.getIndex(e.r1,e.g0,e.b1)]+n[this.getIndex(e.r1,e.g0,e.b0)]-n[this.getIndex(e.r0,e.g1,e.b1)]+n[this.getIndex(e.r0,e.g1,e.b0)]+n[this.getIndex(e.r0,e.g0,e.b1)]-n[this.getIndex(e.r0,e.g0,e.b0)]}bottom(e,n,r){switch(n){case nn.RED:return-r[this.getIndex(e.r0,e.g1,e.b1)]+r[this.getIndex(e.r0,e.g1,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case nn.GREEN:return-r[this.getIndex(e.r1,e.g0,e.b1)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case nn.BLUE:return-r[this.getIndex(e.r1,e.g1,e.b0)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g1,e.b0)]-r[this.getIndex(e.r0,e.g0,e.b0)];default:throw new Error("unexpected direction $direction")}}top(e,n,r,s){switch(n){case nn.RED:return s[this.getIndex(r,e.g1,e.b1)]-s[this.getIndex(r,e.g1,e.b0)]-s[this.getIndex(r,e.g0,e.b1)]+s[this.getIndex(r,e.g0,e.b0)];case nn.GREEN:return s[this.getIndex(e.r1,r,e.b1)]-s[this.getIndex(e.r1,r,e.b0)]-s[this.getIndex(e.r0,r,e.b1)]+s[this.getIndex(e.r0,r,e.b0)];case nn.BLUE:return s[this.getIndex(e.r1,e.g1,r)]-s[this.getIndex(e.r1,e.g0,r)]-s[this.getIndex(e.r0,e.g1,r)]+s[this.getIndex(e.r0,e.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(e,n,r){return(e<<za*2)+(e<<za+1)+e+(n<<za)+n+r}};class QI{constructor(e=0,n=0,r=0,s=0,i=0,o=0,a=0){this.r0=e,this.r1=n,this.g0=r,this.g1=s,this.b0=i,this.b1=o,this.vol=a}}let JI=class{constructor(e,n){this.requestedCount=e,this.resultCount=n}},XI=class{constructor(e,n){this.cutLocation=e,this.maximum=n}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ZI=class{static quantize(e,n){const r=new YI().quantize(e,n);return KI.quantize(e,r,n)}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mr{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return mr.lightFromCorePalette(di.of(e))}static dark(e){return mr.darkFromCorePalette(di.of(e))}static lightContent(e){return mr.lightFromCorePalette(di.contentOf(e))}static darkContent(e){return mr.darkFromCorePalette(di.contentOf(e))}static lightFromCorePalette(e){return new mr({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new mr({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ew={desired:4,fallbackColorARGB:4282549748,filter:!0};function tw(t,e){return t.score>e.score?-1:t.score<e.score?1:0}class an{constructor(){}static score(e,n){const{desired:r,fallbackColorARGB:s,filter:i}={...ew,...n},o=[],a=new Array(360).fill(0);let l=0;for(const[p,E]of e.entries()){const A=It.fromInt(p);o.push(A);const N=Math.floor(A.hue);a[N]+=E,l+=E}const u=new Array(360).fill(0);for(let p=0;p<360;p++){const E=a[p]/l;for(let A=p-14;A<p+16;A++){const N=Dm(A);u[N]+=E}}const h=new Array;for(const p of o){const E=Dm(Math.round(p.hue)),A=u[E];if(i&&(p.chroma<an.CUTOFF_CHROMA||A<=an.CUTOFF_EXCITED_PROPORTION))continue;const N=A*100*an.WEIGHT_PROPORTION,O=p.chroma<an.TARGET_CHROMA?an.WEIGHT_CHROMA_BELOW:an.WEIGHT_CHROMA_ABOVE,k=(p.chroma-an.TARGET_CHROMA)*O,I=N+k;h.push({hct:p,score:I})}h.sort(tw);const d=[];for(let p=90;p>=15;p--){d.length=0;for(const{hct:E}of h)if(d.find(A=>z_(E.hue,A.hue)<p)||d.push(E),d.length>=r)break;if(d.length>=r)break}const m=[];d.length===0&&m.push(s);for(const p of d)m.push(p.toInt());return m}}an.TARGET_CHROMA=48;an.WEIGHT_PROPORTION=.7;an.WEIGHT_CHROMA_ABOVE=.3;an.WEIGHT_CHROMA_BELOW=.1;an.CUTOFF_CHROMA=5;an.CUTOFF_EXCITED_PROPORTION=.01;/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function st(t){const e=oc(t),n=ac(t),r=lc(t),s=[e.toString(16),n.toString(16),r.toString(16)];for(const[i,o]of s.entries())o.length===1&&(s[i]="0"+o);return"#"+s.join("")}function nw(t){t=t.replace("#","");const e=t.length===3,n=t.length===6,r=t.length===8;if(!e&&!n&&!r)throw new Error("unexpected hex "+t);let s=0,i=0,o=0;return e?(s=cr(t.slice(0,1).repeat(2)),i=cr(t.slice(1,2).repeat(2)),o=cr(t.slice(2,3).repeat(2))):n?(s=cr(t.slice(0,2)),i=cr(t.slice(2,4)),o=cr(t.slice(4,6))):r&&(s=cr(t.slice(2,4)),i=cr(t.slice(4,6)),o=cr(t.slice(6,8))),(255<<24|(s&255)<<16|(i&255)<<8|o&255)>>>0}function cr(t){return parseInt(t,16)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function rw(t){const e=await new Promise((s,i)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!a){i(new Error("Could not get canvas context"));return}const l=()=>{o.width=t.width,o.height=t.height,a.drawImage(t,0,0);let u=[0,0,t.width,t.height];const h=t.dataset.area;h&&/^\d+(\s*,\s*\d+){3}$/.test(h)&&(u=h.split(/\s*,\s*/).map(A=>parseInt(A,10)));const[d,m,p,E]=u;s(a.getImageData(d,m,p,E).data)};t.complete?l():t.onload=l}),n=[];for(let s=0;s<e.length;s+=4){const i=e[s],o=e[s+1],a=e[s+2];if(e[s+3]<255)continue;const l=ic(i,o,a);n.push(l)}const r=ZI.quantize(n,128);return an.score(r)[0]}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X_(t,e=[]){const n=di.of(t);return{source:t,schemes:{light:mr.light(t),dark:mr.dark(t)},palettes:{primary:n.a1,secondary:n.a2,tertiary:n.a3,neutral:n.n1,neutralVariant:n.n2,error:n.error},customColors:e.map(r=>sw(t,r))}}async function Lm(t,e=[]){const n=await rw(t);return X_(n,e)}function sw(t,e){let n=e.value;const r=n,s=t;e.blend&&(n=rd.harmonize(r,s));const i=di.of(n).a1;return{color:e,value:n,light:{color:i.tone(40),onColor:i.tone(100),colorContainer:i.tone(90),onColorContainer:i.tone(10)},dark:{color:i.tone(80),onColor:i.tone(20),colorContainer:i.tone(30),onColorContainer:i.tone(90)}}}function du(t){let e=JSON.parse(JSON.stringify(t.schemes));for(let n in e)for(let r in e[n])e[n][r]=st(e[n][r]);return e.dark.surfaceDim=st(t.palettes.neutral.tone(6)),e.dark.surface=st(t.palettes.neutral.tone(6)),e.dark.surfaceBright=st(t.palettes.neutral.tone(24)),e.dark.surfaceContainerLowest=st(t.palettes.neutral.tone(4)),e.dark.surfaceContainerLow=st(t.palettes.neutral.tone(10)),e.dark.surfaceContainer=st(t.palettes.neutral.tone(12)),e.dark.surfaceContainerHigh=st(t.palettes.neutral.tone(17)),e.dark.surfaceContainerHighest=st(t.palettes.neutral.tone(22)),e.dark.onSurface=st(t.palettes.neutral.tone(90)),e.dark.onSurfaceVariant=st(t.palettes.neutralVariant.tone(80)),e.dark.outline=st(t.palettes.neutralVariant.tone(60)),e.dark.outlineVariant=st(t.palettes.neutralVariant.tone(30)),e.light.surfaceDim=st(t.palettes.neutral.tone(87)),e.light.surface=st(t.palettes.neutral.tone(98)),e.light.surfaceBright=st(t.palettes.neutral.tone(98)),e.light.surfaceContainerLowest=st(t.palettes.neutral.tone(100)),e.light.surfaceContainerLow=st(t.palettes.neutral.tone(96)),e.light.surfaceContainer=st(t.palettes.neutral.tone(94)),e.light.surfaceContainerHigh=st(t.palettes.neutral.tone(92)),e.light.surfaceContainerHighest=st(t.palettes.neutral.tone(90)),e.light.onSurface=st(t.palettes.neutral.tone(10)),e.light.onSurfaceVariant=st(t.palettes.neutralVariant.tone(30)),e.light.outline=st(t.palettes.neutralVariant.tone(50)),e.light.outlineVariant=st(t.palettes.neutralVariant.tone(80)),e}async function iw(t){const e=t,n={light:{},dark:{}};try{if(typeof e=="string"&&/^\#[0-9a-f]+$/i.test(e)){let o=X_(nw(e));return du(o)}if(e.src){let o=await Lm(e);return du(o)}let r=new Blob;if(typeof e=="string"&&(r=await fetch(e).then(o=>o.blob())),e.size&&(r=e),e.files&&e.files[0]&&(r=e.files[0]),e.target&&e.target.files&&e.target.files[0]&&(r=e.target.files[0]),!r.size)return n;let s=new Image(64);s.src=URL.createObjectURL(r);let i=await Lm(s);return du(i)}catch{return n}}globalThis.materialDynamicColors=iw;/**
* @vue/shared v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function od(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const at={},mi=[],Rn=()=>{},ow=()=>!1,cc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ad=t=>t.startsWith("onUpdate:"),Xt=Object.assign,ld=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},aw=Object.prototype.hasOwnProperty,je=(t,e)=>aw.call(t,e),ye=Array.isArray,gi=t=>ga(t)==="[object Map]",qi=t=>ga(t)==="[object Set]",Mm=t=>ga(t)==="[object Date]",Ne=t=>typeof t=="function",Ct=t=>typeof t=="string",tr=t=>typeof t=="symbol",nt=t=>t!==null&&typeof t=="object",Z_=t=>(nt(t)||Ne(t))&&Ne(t.then)&&Ne(t.catch),ey=Object.prototype.toString,ga=t=>ey.call(t),lw=t=>ga(t).slice(8,-1),ty=t=>ga(t)==="[object Object]",cd=t=>Ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Po=od(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},cw=/-(\w)/g,jn=uc(t=>t.replace(cw,(e,n)=>n?n.toUpperCase():"")),uw=/\B([A-Z])/g,Qs=uc(t=>t.replace(uw,"-$1").toLowerCase()),hc=uc(t=>t.charAt(0).toUpperCase()+t.slice(1)),fu=uc(t=>t?`on${hc(t)}`:""),ls=(t,e)=>!Object.is(t,e),hl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ny=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Pl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let xm;const ry=()=>xm||(xm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ud(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ct(r)?mw(r):ud(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ct(t)||nt(t))return t}const hw=/;(?![^(]*\))/g,dw=/:([^]+)/,fw=/\/\*[^]*?\*\//g;function mw(t){const e={};return t.replace(fw,"").split(hw).forEach(n=>{if(n){const r=n.split(dw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ge(t){let e="";if(Ct(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const r=Ge(t[n]);r&&(e+=r+" ")}else if(nt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pw=od(gw);function sy(t){return!!t||t===""}function _w(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=pa(t[r],e[r]);return n}function pa(t,e){if(t===e)return!0;let n=Mm(t),r=Mm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=tr(t),r=tr(e),n||r)return t===e;if(n=ye(t),r=ye(e),n||r)return n&&r?_w(t,e):!1;if(n=nt(t),r=nt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pa(t[o],e[o]))return!1}}return String(t)===String(e)}function hd(t,e){return t.findIndex(n=>pa(n,e))}const iy=t=>!!(t&&t.__v_isRef===!0),he=t=>Ct(t)?t:t==null?"":ye(t)||nt(t)&&(t.toString===ey||!Ne(t.toString))?iy(t)?he(t.value):JSON.stringify(t,oy,2):String(t),oy=(t,e)=>iy(e)?oy(t,e.value):gi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[mu(r,i)+" =>"]=s,n),{})}:qi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>mu(n))}:tr(e)?mu(e):nt(e)&&!ye(e)&&!ty(e)?String(e):e,mu=(t,e="")=>{var n;return tr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vn;class ay{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vn,!e&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Vn;try{return Vn=this,e()}finally{Vn=n}}}on(){Vn=this}off(){Vn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function yw(t){return new ay(t)}function vw(t,e=Vn){e&&e.active&&e.effects.push(t)}function Ew(){return Vn}let Fs;class dd{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,vw(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,gs();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Iw(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ps()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ns,n=Fs;try{return ns=!0,Fs=this,this._runnings++,Vm(this),this.fn()}finally{Fm(this),this._runnings--,Fs=n,ns=e}}stop(){this.active&&(Vm(this),Fm(this),this.onStop&&this.onStop(),this.active=!1)}}function Iw(t){return t.value}function Vm(t){t._trackId++,t._depsLength=0}function Fm(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)ly(t.deps[e],t);t.deps.length=t._depsLength}}function ly(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ns=!0,Gu=0;const cy=[];function gs(){cy.push(ns),ns=!1}function ps(){const t=cy.pop();ns=t===void 0?!0:t}function fd(){Gu++}function md(){for(Gu--;!Gu&&zu.length;)zu.shift()()}function uy(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&ly(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const zu=[];function hy(t,e,n){fd();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&zu.push(r.scheduler)))}md()}const dy=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Yu=new WeakMap,Us=Symbol(""),Qu=Symbol("");function _n(t,e,n){if(ns&&Fs){let r=Yu.get(t);r||Yu.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=dy(()=>r.delete(n))),uy(Fs,s)}}function wr(t,e,n,r,s,i){const o=Yu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ye(t)){const l=Number(r);o.forEach((u,h)=>{(h==="length"||!tr(h)&&h>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ye(t)?cd(n)&&a.push(o.get("length")):(a.push(o.get(Us)),gi(t)&&a.push(o.get(Qu)));break;case"delete":ye(t)||(a.push(o.get(Us)),gi(t)&&a.push(o.get(Qu)));break;case"set":gi(t)&&a.push(o.get(Us));break}fd();for(const l of a)l&&hy(l,4);md()}const ww=od("__proto__,__v_isRef,__isVue"),fy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(tr)),Um=Tw();function Tw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Qe(this);for(let i=0,o=this.length;i<o;i++)_n(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Qe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){gs(),fd();const r=Qe(this)[e].apply(this,n);return md(),ps(),r}}),t}function bw(t){tr(t)||(t=String(t));const e=Qe(this);return _n(e,"has",t),e.hasOwnProperty(t)}class my{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Vw:yy:i?_y:py).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ye(e);if(!s){if(o&&je(Um,n))return Reflect.get(Um,n,r);if(n==="hasOwnProperty")return bw}const a=Reflect.get(e,n,r);return(tr(n)?fy.has(n):ww(n))||(s||_n(e,"get",n),i)?a:un(a)?o&&cd(n)?a:a.value:nt(a)?s?Ey(a):ln(a):a}}class gy extends my{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Hs(i);if(!wi(r)&&!Hs(r)&&(i=Qe(i),r=Qe(r)),!ye(e)&&un(i)&&!un(r))return l?!1:(i.value=r,!0)}const o=ye(e)&&cd(n)?Number(n)<e.length:je(e,n),a=Reflect.set(e,n,r,s);return e===Qe(s)&&(o?ls(r,i)&&wr(e,"set",n,r):wr(e,"add",n,r)),a}deleteProperty(e,n){const r=je(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&wr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!tr(n)||!fy.has(n))&&_n(e,"has",n),r}ownKeys(e){return _n(e,"iterate",ye(e)?"length":Us),Reflect.ownKeys(e)}}class Aw extends my{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Cw=new gy,Sw=new Aw,Pw=new gy(!0);const gd=t=>t,dc=t=>Reflect.getPrototypeOf(t);function Ya(t,e,n=!1,r=!1){t=t.__v_raw;const s=Qe(t),i=Qe(e);n||(ls(e,i)&&_n(s,"get",e),_n(s,"get",i));const{has:o}=dc(s),a=r?gd:n?yd:Go;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Qa(t,e=!1){const n=this.__v_raw,r=Qe(n),s=Qe(t);return e||(ls(t,s)&&_n(r,"has",t),_n(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Ja(t,e=!1){return t=t.__v_raw,!e&&_n(Qe(t),"iterate",Us),Reflect.get(t,"size",t)}function $m(t,e=!1){!e&&!wi(t)&&!Hs(t)&&(t=Qe(t));const n=Qe(this);return dc(n).has.call(n,t)||(n.add(t),wr(n,"add",t,t)),this}function Bm(t,e,n=!1){!n&&!wi(e)&&!Hs(e)&&(e=Qe(e));const r=Qe(this),{has:s,get:i}=dc(r);let o=s.call(r,t);o||(t=Qe(t),o=s.call(r,t));const a=i.call(r,t);return r.set(t,e),o?ls(e,a)&&wr(r,"set",t,e):wr(r,"add",t,e),this}function jm(t){const e=Qe(this),{has:n,get:r}=dc(e);let s=n.call(e,t);s||(t=Qe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&wr(e,"delete",t,void 0),i}function Hm(){const t=Qe(this),e=t.size!==0,n=t.clear();return e&&wr(t,"clear",void 0,void 0),n}function Xa(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Qe(o),l=e?gd:t?yd:Go;return!t&&_n(a,"iterate",Us),o.forEach((u,h)=>r.call(s,l(u),l(h),i))}}function Za(t,e,n){return function(...r){const s=this.__v_raw,i=Qe(s),o=gi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?gd:e?yd:Go;return!e&&_n(i,"iterate",l?Qu:Us),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:a?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function Vr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Rw(){const t={get(i){return Ya(this,i)},get size(){return Ja(this)},has:Qa,add:$m,set:Bm,delete:jm,clear:Hm,forEach:Xa(!1,!1)},e={get(i){return Ya(this,i,!1,!0)},get size(){return Ja(this)},has:Qa,add(i){return $m.call(this,i,!0)},set(i,o){return Bm.call(this,i,o,!0)},delete:jm,clear:Hm,forEach:Xa(!1,!0)},n={get(i){return Ya(this,i,!0)},get size(){return Ja(this,!0)},has(i){return Qa.call(this,i,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:Xa(!0,!1)},r={get(i){return Ya(this,i,!0,!0)},get size(){return Ja(this,!0)},has(i){return Qa.call(this,i,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:Xa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Za(i,!1,!1),n[i]=Za(i,!0,!1),e[i]=Za(i,!1,!0),r[i]=Za(i,!0,!0)}),[t,n,e,r]}const[kw,Nw,Dw,Ow]=Rw();function pd(t,e){const n=e?t?Ow:Dw:t?Nw:kw;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(je(n,s)&&s in r?n:r,s,i)}const Lw={get:pd(!1,!1)},Mw={get:pd(!1,!0)},xw={get:pd(!0,!1)};const py=new WeakMap,_y=new WeakMap,yy=new WeakMap,Vw=new WeakMap;function Fw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Uw(t){return t.__v_skip||!Object.isExtensible(t)?0:Fw(lw(t))}function ln(t){return Hs(t)?t:_d(t,!1,Cw,Lw,py)}function vy(t){return _d(t,!1,Pw,Mw,_y)}function Ey(t){return _d(t,!0,Sw,xw,yy)}function _d(t,e,n,r,s){if(!nt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Uw(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Ro(t){return Hs(t)?Ro(t.__v_raw):!!(t&&t.__v_isReactive)}function Hs(t){return!!(t&&t.__v_isReadonly)}function wi(t){return!!(t&&t.__v_isShallow)}function Iy(t){return t?!!t.__v_raw:!1}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function $w(t){return Object.isExtensible(t)&&ny(t,"__v_skip",!0),t}const Go=t=>nt(t)?ln(t):t,yd=t=>nt(t)?Ey(t):t;class wy{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new dd(()=>e(this._value),()=>dl(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&ls(e._value,e._value=e.effect.run())&&dl(e,4),Ty(e),e.effect._dirtyLevel>=2&&dl(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Bw(t,e,n=!1){let r,s;const i=Ne(t);return i?(r=t,s=Rn):(r=t.get,s=t.set),new wy(r,s,i||!s,n)}function Ty(t){var e;ns&&Fs&&(t=Qe(t),uy(Fs,(e=t.dep)!=null?e:t.dep=dy(()=>t.dep=void 0,t instanceof wy?t:void 0)))}function dl(t,e=4,n,r){t=Qe(t);const s=t.dep;s&&hy(s,e)}function un(t){return!!(t&&t.__v_isRef===!0)}function ct(t){return by(t,!1)}function vd(t){return by(t,!0)}function by(t,e){return un(t)?t:new jw(t,e)}class jw{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Qe(e),this._value=n?e:Go(e)}get value(){return Ty(this),this._value}set value(e){const n=this.__v_isShallow||wi(e)||Hs(e);e=n?e:Qe(e),ls(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:Go(e),dl(this,4))}}function pi(t){return un(t)?t.value:t}const Hw={get:(t,e,n)=>pi(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return un(s)&&!un(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ay(t){return Ro(t)?t:new Proxy(t,Hw)}/**
* @vue/runtime-core v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function rs(t,e,n,r){try{return r?t(...r):t()}catch(s){fc(s,e,n)}}function Un(t,e,n,r){if(Ne(t)){const s=rs(t,e,n,r);return s&&Z_(s)&&s.catch(i=>{fc(i,e,n)}),s}if(ye(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Un(t[i],e,n,r));return s}}function fc(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){gs(),rs(l,null,10,[t,o,a]),ps();return}}qw(t,n,s,r)}function qw(t,e,n,r=!0){console.error(t)}let zo=!1,Ju=!1;const Jt=[];let Gn=0;const _i=[];let Br=null,Os=0;const Cy=Promise.resolve();let Ed=null;function Id(t){const e=Ed||Cy;return t?e.then(this?t.bind(this):t):e}function Ww(t){let e=Gn+1,n=Jt.length;for(;e<n;){const r=e+n>>>1,s=Jt[r],i=Yo(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function wd(t){(!Jt.length||!Jt.includes(t,zo&&t.allowRecurse?Gn+1:Gn))&&(t.id==null?Jt.push(t):Jt.splice(Ww(t.id),0,t),Sy())}function Sy(){!zo&&!Ju&&(Ju=!0,Ed=Cy.then(Ry))}function Kw(t){const e=Jt.indexOf(t);e>Gn&&Jt.splice(e,1)}function Gw(t){ye(t)?_i.push(...t):(!Br||!Br.includes(t,t.allowRecurse?Os+1:Os))&&_i.push(t),Sy()}function qm(t,e,n=zo?Gn+1:0){for(;n<Jt.length;n++){const r=Jt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Jt.splice(n,1),n--,r()}}}function Py(t){if(_i.length){const e=[...new Set(_i)].sort((n,r)=>Yo(n)-Yo(r));if(_i.length=0,Br){Br.push(...e);return}for(Br=e,Os=0;Os<Br.length;Os++){const n=Br[Os];n.active!==!1&&n()}Br=null,Os=0}}const Yo=t=>t.id==null?1/0:t.id,zw=(t,e)=>{const n=Yo(t)-Yo(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ry(t){Ju=!1,zo=!0,Jt.sort(zw);try{for(Gn=0;Gn<Jt.length;Gn++){const e=Jt[Gn];e&&e.active!==!1&&rs(e,e.i,e.i?15:14)}}finally{Gn=0,Jt.length=0,Py(),zo=!1,Ed=null,(Jt.length||_i.length)&&Ry()}}let Ot=null,ky=null;function Rl(t){const e=Ot;return Ot=t,ky=t&&t.type.__scopeId||null,e}function mc(t,e=Ot,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ng(-1);const i=Rl(e);let o;try{o=t(...s)}finally{Rl(i),r._d&&ng(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ko(t,e){if(Ot===null)return t;const n=yc(Ot),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=at]=e[s];i&&(Ne(i)&&(i={mounted:i,updated:i}),i.deep&&Wr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ps(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(gs(),Un(l,n,8,[t.el,a,t,e]),ps())}}function Ny(t,e){t.shapeFlag&6&&t.component?Ny(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Wi(t,e){return Ne(t)?Xt({name:t.name},e,{setup:t}):t}const No=t=>!!t.type.__asyncLoader,Dy=t=>t.type.__isKeepAlive;function Yw(t,e){Oy(t,"a",e)}function Qw(t,e){Oy(t,"da",e)}function Oy(t,e,n=Ft){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(gc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Dy(s.parent.vnode)&&Jw(r,e,n,s),s=s.parent}}function Jw(t,e,n,r){const s=gc(e,t,r,!0);Td(()=>{ld(r[e],s)},n)}function gc(t,e,n=Ft,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{gs();const a=ya(n),l=Un(e,n,t,o);return a(),ps(),l});return r?s.unshift(i):s.push(i),i}}const kr=t=>(e,n=Ft)=>{(!_c||t==="sp")&&gc(t,(...r)=>e(...r),n)},Ly=kr("bm"),My=kr("m"),Xw=kr("bu"),Zw=kr("u"),eT=kr("bum"),Td=kr("um"),tT=kr("sp"),nT=kr("rtg"),rT=kr("rtc");function sT(t,e=Ft){gc("ec",t,e)}const xy="components",iT="directives";function ht(t,e){return Fy(xy,t,!0,e)||t}const oT=Symbol.for("v-ndc");function Vy(t){return Fy(iT,t)}function Fy(t,e,n=!0,r=!1){const s=Ot||Ft;if(s){const i=s.type;if(t===xy){const a=YT(i,!1);if(a&&(a===e||a===jn(e)||a===hc(jn(e))))return i}const o=Wm(s[t]||i[t],e)||Wm(s.appContext[t],e);return!o&&r?i:o}}function Wm(t,e){return t&&(t[e]||t[jn(e)]||t[hc(jn(e))])}function Yt(t,e,n,r){let s;const i=n;if(ye(t)||Ct(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i)}else if(nt(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,i)}}else s=[];return s}function Uy(t,e,n={},r,s){if(Ot.isCE||Ot.parent&&No(Ot.parent)&&Ot.parent.isCE)return e!=="default"&&(n.name=e),xe("slot",n,r);let i=t[e];i&&i._c&&(i._d=!1),ee();const o=i&&$y(i(n)),a=Nn(_e,{key:(n.key||o&&o.key||`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function $y(t){return t.some(e=>Nl(e)?!(e.type===cs||e.type===_e&&!$y(e.children)):!0)?t:null}const Xu=t=>t?i0(t)?yc(t):Xu(t.parent):null,Do=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xu(t.parent),$root:t=>Xu(t.root),$emit:t=>t.emit,$options:t=>bd(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,wd(t.update)}),$nextTick:t=>t.n||(t.n=Id.bind(t.proxy)),$watch:t=>RT.bind(t)}),gu=(t,e)=>t!==at&&!t.__isScriptSetup&&je(t,e),aT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(gu(r,e))return o[e]=1,r[e];if(s!==at&&je(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&je(u,e))return o[e]=3,i[e];if(n!==at&&je(n,e))return o[e]=4,n[e];Zu&&(o[e]=0)}}const h=Do[e];let d,m;if(h)return e==="$attrs"&&_n(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==at&&je(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,je(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return gu(s,e)?(s[e]=n,!0):r!==at&&je(r,e)?(r[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==at&&je(t,o)||gu(e,o)||(a=i[0])&&je(a,o)||je(r,o)||je(Do,o)||je(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Km(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Zu=!0;function lT(t){const e=bd(t),n=t.proxy,r=t.ctx;Zu=!1,e.beforeCreate&&Gm(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:p,updated:E,activated:A,deactivated:N,beforeDestroy:O,beforeUnmount:k,destroyed:I,unmounted:S,render:B,renderTracked:V,renderTriggered:y,errorCaptured:_,serverPrefetch:v,expose:D,inheritAttrs:M,components:L,directives:P,filters:Te}=e;if(u&&cT(u,r,null),o)for(const Ce in o){const Ie=o[Ce];Ne(Ie)&&(r[Ce]=Ie.bind(n))}if(s){const Ce=s.call(n,n);nt(Ce)&&(t.data=ln(Ce))}if(Zu=!0,i)for(const Ce in i){const Ie=i[Ce],ot=Ne(Ie)?Ie.bind(n,n):Ne(Ie.get)?Ie.get.bind(n,n):Rn,mt=!Ne(Ie)&&Ne(Ie.set)?Ie.set.bind(n):Rn,Je=gt({get:ot,set:mt});Object.defineProperty(r,Ce,{enumerable:!0,configurable:!0,get:()=>Je.value,set:Ue=>Je.value=Ue})}if(a)for(const Ce in a)By(a[Ce],r,n,Ce);if(l){const Ce=Ne(l)?l.call(n):l;Reflect.ownKeys(Ce).forEach(Ie=>{fl(Ie,Ce[Ie])})}h&&Gm(h,t,"c");function Re(Ce,Ie){ye(Ie)?Ie.forEach(ot=>Ce(ot.bind(n))):Ie&&Ce(Ie.bind(n))}if(Re(Ly,d),Re(My,m),Re(Xw,p),Re(Zw,E),Re(Yw,A),Re(Qw,N),Re(sT,_),Re(rT,V),Re(nT,y),Re(eT,k),Re(Td,S),Re(tT,v),ye(D))if(D.length){const Ce=t.exposed||(t.exposed={});D.forEach(Ie=>{Object.defineProperty(Ce,Ie,{get:()=>n[Ie],set:ot=>n[Ie]=ot})})}else t.exposed||(t.exposed={});B&&t.render===Rn&&(t.render=B),M!=null&&(t.inheritAttrs=M),L&&(t.components=L),P&&(t.directives=P)}function cT(t,e,n=Rn){ye(t)&&(t=eh(t));for(const r in t){const s=t[r];let i;nt(s)?"default"in s?i=Qn(s.from||r,s.default,!0):i=Qn(s.from||r):i=Qn(s),un(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Gm(t,e,n){Un(ye(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function By(t,e,n,r){const s=r.includes(".")?t0(n,r):()=>n[r];if(Ct(t)){const i=e[t];Ne(i)&&$s(s,i)}else if(Ne(t))$s(s,t.bind(n));else if(nt(t))if(ye(t))t.forEach(i=>By(i,e,n,r));else{const i=Ne(t.handler)?t.handler.bind(n):e[t.handler];Ne(i)&&$s(s,i,t)}}function bd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>kl(l,u,o,!0)),kl(l,e,o)),nt(e)&&i.set(e,l),l}function kl(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&kl(t,i,n,!0),s&&s.forEach(o=>kl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=uT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const uT={data:zm,props:Ym,emits:Ym,methods:yo,computed:yo,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:yo,directives:yo,watch:dT,provide:zm,inject:hT};function zm(t,e){return e?t?function(){return Xt(Ne(t)?t.call(this,this):t,Ne(e)?e.call(this,this):e)}:e:t}function hT(t,e){return yo(eh(t),eh(e))}function eh(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function rn(t,e){return t?[...new Set([].concat(t,e))]:e}function yo(t,e){return t?Xt(Object.create(null),t,e):e}function Ym(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Km(t),Km(e??{})):e}function dT(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=rn(t[r],e[r]);return n}function jy(){return{app:null,config:{isNativeTag:ow,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fT=0;function mT(t,e){return function(r,s=null){Ne(r)||(r=Xt({},r)),s!=null&&!nt(s)&&(s=null);const i=jy(),o=new WeakSet;let a=!1;const l=i.app={_uid:fT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:JT,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Ne(u.install)?(o.add(u),u.install(l,...h)):Ne(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,d){if(!a){const m=xe(r,s);return m.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),h&&e?e(m,u):t(m,u,d),a=!0,l._container=u,u.__vue_app__=l,yc(m.component)}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Oo;Oo=l;try{return u()}finally{Oo=h}}};return l}}let Oo=null;function fl(t,e){if(Ft){let n=Ft.provides;const r=Ft.parent&&Ft.parent.provides;r===n&&(n=Ft.provides=Object.create(r)),n[t]=e}}function Qn(t,e,n=!1){const r=Ft||Ot;if(r||Oo){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Oo._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ne(e)?e.call(r&&r.proxy):e}}const Hy={},qy=()=>Object.create(Hy),Wy=t=>Object.getPrototypeOf(t)===Hy;function gT(t,e,n,r=!1){const s={},i=qy();t.propsDefaults=Object.create(null),Ky(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:vy(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function pT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Qe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(pc(t.emitsOptions,m))continue;const p=e[m];if(l)if(je(i,m))p!==i[m]&&(i[m]=p,u=!0);else{const E=jn(m);s[E]=th(l,a,E,p,t,!1)}else p!==i[m]&&(i[m]=p,u=!0)}}}else{Ky(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!je(e,d)&&((h=Qs(d))===d||!je(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=th(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!je(e,d))&&(delete i[d],u=!0)}u&&wr(t.attrs,"set","")}function Ky(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Po(l))continue;const u=e[l];let h;s&&je(s,h=jn(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:pc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Qe(n),u=a||at;for(let h=0;h<i.length;h++){const d=i[h];n[d]=th(s,l,d,u[d],t,!je(u,d))}}return o}function th(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=je(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=ya(s);r=u[n]=l.call(null,e),h()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Qs(n))&&(r=!0))}return r}const _T=new WeakMap;function Gy(t,e,n=!1){const r=n?_T:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ne(t)){const h=d=>{l=!0;const[m,p]=Gy(d,e,!0);Xt(o,m),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return nt(t)&&r.set(t,mi),mi;if(ye(i))for(let h=0;h<i.length;h++){const d=jn(i[h]);Qm(d)&&(o[d]=at)}else if(i)for(const h in i){const d=jn(h);if(Qm(d)){const m=i[h],p=o[d]=ye(m)||Ne(m)?{type:m}:Xt({},m);if(p){const E=Zm(Boolean,p.type),A=Zm(String,p.type);p[0]=E>-1,p[1]=A<0||E<A,(E>-1||je(p,"default"))&&a.push(d)}}}const u=[o,a];return nt(t)&&r.set(t,u),u}function Qm(t){return t[0]!=="$"&&!Po(t)}function Jm(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Xm(t,e){return Jm(t)===Jm(e)}function Zm(t,e){return ye(e)?e.findIndex(n=>Xm(n,t)):Ne(e)&&Xm(e,t)?0:-1}const zy=t=>t[0]==="_"||t==="$stable",Ad=t=>ye(t)?t.map(Kn):[Kn(t)],yT=(t,e,n)=>{if(e._n)return e;const r=mc((...s)=>Ad(e(...s)),n);return r._c=!1,r},Yy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(zy(s))continue;const i=t[s];if(Ne(i))e[s]=yT(s,i,r);else if(i!=null){const o=Ad(i);e[s]=()=>o}}},Qy=(t,e)=>{const n=Ad(e);t.slots.default=()=>n},Jy=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},vT=(t,e,n)=>{const r=t.slots=qy();if(t.vnode.shapeFlag&32){const s=e._;s?(Jy(r,e,n),n&&ny(r,"_",s,!0)):Yy(e,r)}else e&&Qy(t,e)},ET=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=at;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Jy(s,e,n):(i=!e.$stable,Yy(e,s)),o=e}else e&&(Qy(t,e),o={default:1});if(i)for(const a in s)!zy(a)&&o[a]==null&&delete s[a]};function nh(t,e,n,r,s=!1){if(ye(t)){t.forEach((m,p)=>nh(m,e&&(ye(e)?e[p]:e),n,r,s));return}if(No(r)&&!s)return;const i=r.shapeFlag&4?yc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===at?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Ct(u)?(h[u]=null,je(d,u)&&(d[u]=null)):un(u)&&(u.value=null)),Ne(l))rs(l,a,12,[o,h]);else{const m=Ct(l),p=un(l);if(m||p){const E=()=>{if(t.f){const A=m?je(d,l)?d[l]:h[l]:l.value;s?ye(A)&&ld(A,i):ye(A)?A.includes(i)||A.push(i):m?(h[l]=[i],je(d,l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else m?(h[l]=o,je(d,l)&&(d[l]=o)):p&&(l.value=o,t.k&&(h[t.k]=o))};o?(E.id=-1,fn(E,n)):E()}}}const IT=Symbol("_vte"),wT=t=>t.__isTeleport,fn=VT;function TT(t){return bT(t)}function bT(t,e){const n=ry();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:p=Rn,insertStaticContent:E}=t,A=(R,T,$,Y=null,G=null,J=null,se=void 0,b=null,C=!!T.dynamicChildren)=>{if(R===T)return;R&&!mo(R,T)&&(Y=z(R),Ue(R,G,J,!0),R=null),T.patchFlag===-2&&(C=!1,T.dynamicChildren=null);const{type:F,ref:K,shapeFlag:te}=T;switch(F){case _a:N(R,T,$,Y);break;case cs:O(R,T,$,Y);break;case yu:R==null&&k(T,$,Y,se);break;case _e:L(R,T,$,Y,G,J,se,b,C);break;default:te&1?B(R,T,$,Y,G,J,se,b,C):te&6?P(R,T,$,Y,G,J,se,b,C):(te&64||te&128)&&F.process(R,T,$,Y,G,J,se,b,C,ce)}K!=null&&G&&nh(K,R&&R.ref,J,T||R,!T)},N=(R,T,$,Y)=>{if(R==null)r(T.el=a(T.children),$,Y);else{const G=T.el=R.el;T.children!==R.children&&u(G,T.children)}},O=(R,T,$,Y)=>{R==null?r(T.el=l(T.children||""),$,Y):T.el=R.el},k=(R,T,$,Y)=>{[R.el,R.anchor]=E(R.children,T,$,Y,R.el,R.anchor)},I=({el:R,anchor:T},$,Y)=>{let G;for(;R&&R!==T;)G=m(R),r(R,$,Y),R=G;r(T,$,Y)},S=({el:R,anchor:T})=>{let $;for(;R&&R!==T;)$=m(R),s(R),R=$;s(T)},B=(R,T,$,Y,G,J,se,b,C)=>{T.type==="svg"?se="svg":T.type==="math"&&(se="mathml"),R==null?V(T,$,Y,G,J,se,b,C):v(R,T,G,J,se,b,C)},V=(R,T,$,Y,G,J,se,b)=>{let C,F;const{props:K,shapeFlag:te,transition:Q,dirs:U}=R;if(C=R.el=o(R.type,J,K&&K.is,K),te&8?h(C,R.children):te&16&&_(R.children,C,null,Y,G,pu(R,J),se,b),U&&Ps(R,null,Y,"created"),y(C,R,R.scopeId,se,Y),K){for(const de in K)de!=="value"&&!Po(de)&&i(C,de,null,K[de],J,Y);"value"in K&&i(C,"value",null,K.value,J),(F=K.onVnodeBeforeMount)&&qn(F,Y,R)}U&&Ps(R,null,Y,"beforeMount");const H=AT(G,Q);H&&Q.beforeEnter(C),r(C,T,$),((F=K&&K.onVnodeMounted)||H||U)&&fn(()=>{F&&qn(F,Y,R),H&&Q.enter(C),U&&Ps(R,null,Y,"mounted")},G)},y=(R,T,$,Y,G)=>{if($&&p(R,$),Y)for(let J=0;J<Y.length;J++)p(R,Y[J]);if(G){let J=G.subTree;if(T===J){const se=G.vnode;y(R,se,se.scopeId,se.slotScopeIds,G.parent)}}},_=(R,T,$,Y,G,J,se,b,C=0)=>{for(let F=C;F<R.length;F++){const K=R[F]=b?jr(R[F]):Kn(R[F]);A(null,K,T,$,Y,G,J,se,b)}},v=(R,T,$,Y,G,J,se)=>{const b=T.el=R.el;let{patchFlag:C,dynamicChildren:F,dirs:K}=T;C|=R.patchFlag&16;const te=R.props||at,Q=T.props||at;let U;if($&&Rs($,!1),(U=Q.onVnodeBeforeUpdate)&&qn(U,$,T,R),K&&Ps(T,R,$,"beforeUpdate"),$&&Rs($,!0),(te.innerHTML&&Q.innerHTML==null||te.textContent&&Q.textContent==null)&&h(b,""),F?D(R.dynamicChildren,F,b,$,Y,pu(T,G),J):se||Ie(R,T,b,null,$,Y,pu(T,G),J,!1),C>0){if(C&16)M(b,te,Q,$,G);else if(C&2&&te.class!==Q.class&&i(b,"class",null,Q.class,G),C&4&&i(b,"style",te.style,Q.style,G),C&8){const H=T.dynamicProps;for(let de=0;de<H.length;de++){const me=H[de],ze=te[me],Pt=Q[me];(Pt!==ze||me==="value")&&i(b,me,ze,Pt,G,$)}}C&1&&R.children!==T.children&&h(b,T.children)}else!se&&F==null&&M(b,te,Q,$,G);((U=Q.onVnodeUpdated)||K)&&fn(()=>{U&&qn(U,$,T,R),K&&Ps(T,R,$,"updated")},Y)},D=(R,T,$,Y,G,J,se)=>{for(let b=0;b<T.length;b++){const C=R[b],F=T[b],K=C.el&&(C.type===_e||!mo(C,F)||C.shapeFlag&70)?d(C.el):$;A(C,F,K,null,Y,G,J,se,!0)}},M=(R,T,$,Y,G)=>{if(T!==$){if(T!==at)for(const J in T)!Po(J)&&!(J in $)&&i(R,J,T[J],null,G,Y);for(const J in $){if(Po(J))continue;const se=$[J],b=T[J];se!==b&&J!=="value"&&i(R,J,b,se,G,Y)}"value"in $&&i(R,"value",T.value,$.value,G)}},L=(R,T,$,Y,G,J,se,b,C)=>{const F=T.el=R?R.el:a(""),K=T.anchor=R?R.anchor:a("");let{patchFlag:te,dynamicChildren:Q,slotScopeIds:U}=T;U&&(b=b?b.concat(U):U),R==null?(r(F,$,Y),r(K,$,Y),_(T.children||[],$,K,G,J,se,b,C)):te>0&&te&64&&Q&&R.dynamicChildren?(D(R.dynamicChildren,Q,$,G,J,se,b),(T.key!=null||G&&T===G.subTree)&&Xy(R,T,!0)):Ie(R,T,$,K,G,J,se,b,C)},P=(R,T,$,Y,G,J,se,b,C)=>{T.slotScopeIds=b,R==null?T.shapeFlag&512?G.ctx.activate(T,$,Y,se,C):Te(T,$,Y,G,J,se,C):We(R,T,C)},Te=(R,T,$,Y,G,J,se)=>{const b=R.component=qT(R,Y,G);if(Dy(R)&&(b.ctx.renderer=ce),WT(b,!1,se),b.asyncDep){if(G&&G.registerDep(b,Re,se),!R.el){const C=b.subTree=xe(cs);O(null,C,T,$)}}else Re(b,R,T,$,G,J,se)},We=(R,T,$)=>{const Y=T.component=R.component;if(LT(R,T,$))if(Y.asyncDep&&!Y.asyncResolved){Ce(Y,T,$);return}else Y.next=T,Kw(Y.update),Y.effect.dirty=!0,Y.update();else T.el=R.el,Y.vnode=T},Re=(R,T,$,Y,G,J,se)=>{const b=()=>{if(R.isMounted){let{next:K,bu:te,u:Q,parent:U,vnode:H}=R;{const Et=Zy(R);if(Et){K&&(K.el=H.el,Ce(R,K,se)),Et.asyncDep.then(()=>{R.isUnmounted||b()});return}}let de=K,me;Rs(R,!1),K?(K.el=H.el,Ce(R,K,se)):K=H,te&&hl(te),(me=K.props&&K.props.onVnodeBeforeUpdate)&&qn(me,U,K,H),Rs(R,!0);const ze=_u(R),Pt=R.subTree;R.subTree=ze,A(Pt,ze,d(Pt.el),z(Pt),R,G,J),K.el=ze.el,de===null&&MT(R,ze.el),Q&&fn(Q,G),(me=K.props&&K.props.onVnodeUpdated)&&fn(()=>qn(me,U,K,H),G)}else{let K;const{el:te,props:Q}=T,{bm:U,m:H,parent:de}=R,me=No(T);if(Rs(R,!1),U&&hl(U),!me&&(K=Q&&Q.onVnodeBeforeMount)&&qn(K,de,T),Rs(R,!0),te&&Be){const ze=()=>{R.subTree=_u(R),Be(te,R.subTree,R,G,null)};me?T.type.__asyncLoader().then(()=>!R.isUnmounted&&ze()):ze()}else{const ze=R.subTree=_u(R);A(null,ze,$,Y,R,G,J),T.el=ze.el}if(H&&fn(H,G),!me&&(K=Q&&Q.onVnodeMounted)){const ze=T;fn(()=>qn(K,de,ze),G)}(T.shapeFlag&256||de&&No(de.vnode)&&de.vnode.shapeFlag&256)&&R.a&&fn(R.a,G),R.isMounted=!0,T=$=Y=null}},C=R.effect=new dd(b,Rn,()=>wd(F),R.scope),F=R.update=()=>{C.dirty&&C.run()};F.i=R,F.id=R.uid,Rs(R,!0),F()},Ce=(R,T,$)=>{T.component=R;const Y=R.vnode.props;R.vnode=T,R.next=null,pT(R,T.props,Y,$),ET(R,T.children,$),gs(),qm(R),ps()},Ie=(R,T,$,Y,G,J,se,b,C=!1)=>{const F=R&&R.children,K=R?R.shapeFlag:0,te=T.children,{patchFlag:Q,shapeFlag:U}=T;if(Q>0){if(Q&128){mt(F,te,$,Y,G,J,se,b,C);return}else if(Q&256){ot(F,te,$,Y,G,J,se,b,C);return}}U&8?(K&16&&ut(F,G,J),te!==F&&h($,te)):K&16?U&16?mt(F,te,$,Y,G,J,se,b,C):ut(F,G,J,!0):(K&8&&h($,""),U&16&&_(te,$,Y,G,J,se,b,C))},ot=(R,T,$,Y,G,J,se,b,C)=>{R=R||mi,T=T||mi;const F=R.length,K=T.length,te=Math.min(F,K);let Q;for(Q=0;Q<te;Q++){const U=T[Q]=C?jr(T[Q]):Kn(T[Q]);A(R[Q],U,$,null,G,J,se,b,C)}F>K?ut(R,G,J,!0,!1,te):_(T,$,Y,G,J,se,b,C,te)},mt=(R,T,$,Y,G,J,se,b,C)=>{let F=0;const K=T.length;let te=R.length-1,Q=K-1;for(;F<=te&&F<=Q;){const U=R[F],H=T[F]=C?jr(T[F]):Kn(T[F]);if(mo(U,H))A(U,H,$,null,G,J,se,b,C);else break;F++}for(;F<=te&&F<=Q;){const U=R[te],H=T[Q]=C?jr(T[Q]):Kn(T[Q]);if(mo(U,H))A(U,H,$,null,G,J,se,b,C);else break;te--,Q--}if(F>te){if(F<=Q){const U=Q+1,H=U<K?T[U].el:Y;for(;F<=Q;)A(null,T[F]=C?jr(T[F]):Kn(T[F]),$,H,G,J,se,b,C),F++}}else if(F>Q)for(;F<=te;)Ue(R[F],G,J,!0),F++;else{const U=F,H=F,de=new Map;for(F=H;F<=Q;F++){const en=T[F]=C?jr(T[F]):Kn(T[F]);en.key!=null&&de.set(en.key,F)}let me,ze=0;const Pt=Q-H+1;let Et=!1,Ts=0;const or=new Array(Pt);for(F=0;F<Pt;F++)or[F]=0;for(F=U;F<=te;F++){const en=R[F];if(ze>=Pt){Ue(en,G,J,!0);continue}let Cn;if(en.key!=null)Cn=de.get(en.key);else for(me=H;me<=Q;me++)if(or[me-H]===0&&mo(en,T[me])){Cn=me;break}Cn===void 0?Ue(en,G,J,!0):(or[Cn-H]=F+1,Cn>=Ts?Ts=Cn:Et=!0,A(en,T[Cn],$,null,G,J,se,b,C),ze++)}const Zs=Et?CT(or):mi;for(me=Zs.length-1,F=Pt-1;F>=0;F--){const en=H+F,Cn=T[en],ei=en+1<K?T[en+1].el:Y;or[F]===0?A(null,Cn,$,ei,G,J,se,b,C):Et&&(me<0||F!==Zs[me]?Je(Cn,$,ei,2):me--)}}},Je=(R,T,$,Y,G=null)=>{const{el:J,type:se,transition:b,children:C,shapeFlag:F}=R;if(F&6){Je(R.component.subTree,T,$,Y);return}if(F&128){R.suspense.move(T,$,Y);return}if(F&64){se.move(R,T,$,ce);return}if(se===_e){r(J,T,$);for(let te=0;te<C.length;te++)Je(C[te],T,$,Y);r(R.anchor,T,$);return}if(se===yu){I(R,T,$);return}if(Y!==2&&F&1&&b)if(Y===0)b.beforeEnter(J),r(J,T,$),fn(()=>b.enter(J),G);else{const{leave:te,delayLeave:Q,afterLeave:U}=b,H=()=>r(J,T,$),de=()=>{te(J,()=>{H(),U&&U()})};Q?Q(J,H,de):de()}else r(J,T,$)},Ue=(R,T,$,Y=!1,G=!1)=>{const{type:J,props:se,ref:b,children:C,dynamicChildren:F,shapeFlag:K,patchFlag:te,dirs:Q,cacheIndex:U}=R;if(te===-2&&(G=!1),b!=null&&nh(b,null,$,R,!0),U!=null&&(T.renderCache[U]=void 0),K&256){T.ctx.deactivate(R);return}const H=K&1&&Q,de=!No(R);let me;if(de&&(me=se&&se.onVnodeBeforeUnmount)&&qn(me,T,R),K&6)St(R.component,$,Y);else{if(K&128){R.suspense.unmount($,Y);return}H&&Ps(R,null,T,"beforeUnmount"),K&64?R.type.remove(R,T,$,ce,Y):F&&!F.hasOnce&&(J!==_e||te>0&&te&64)?ut(F,T,$,!1,!0):(J===_e&&te&384||!G&&K&16)&&ut(C,T,$),Y&&He(R)}(de&&(me=se&&se.onVnodeUnmounted)||H)&&fn(()=>{me&&qn(me,T,R),H&&Ps(R,null,T,"unmounted")},$)},He=R=>{const{type:T,el:$,anchor:Y,transition:G}=R;if(T===_e){Mt($,Y);return}if(T===yu){S(R);return}const J=()=>{s($),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(R.shapeFlag&1&&G&&!G.persisted){const{leave:se,delayLeave:b}=G,C=()=>se($,J);b?b(R.el,J,C):C()}else J()},Mt=(R,T)=>{let $;for(;R!==T;)$=m(R),s(R),R=$;s(T)},St=(R,T,$)=>{const{bum:Y,scope:G,update:J,subTree:se,um:b,m:C,a:F}=R;eg(C),eg(F),Y&&hl(Y),G.stop(),J&&(J.active=!1,Ue(se,R,T,$)),b&&fn(b,T),fn(()=>{R.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ut=(R,T,$,Y=!1,G=!1,J=0)=>{for(let se=J;se<R.length;se++)Ue(R[se],T,$,Y,G)},z=R=>{if(R.shapeFlag&6)return z(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const T=m(R.anchor||R.el),$=T&&T[IT];return $?m($):T};let ie=!1;const re=(R,T,$)=>{R==null?T._vnode&&Ue(T._vnode,null,null,!0):A(T._vnode||null,R,T,null,null,null,$),ie||(ie=!0,qm(),Py(),ie=!1),T._vnode=R},ce={p:A,um:Ue,m:Je,r:He,mt:Te,mc:_,pc:Ie,pbc:D,n:z,o:t};let De,Be;return{render:re,hydrate:De,createApp:mT(re,De)}}function pu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Rs({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function AT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Xy(t,e,n=!1){const r=t.children,s=e.children;if(ye(r)&&ye(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=jr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Xy(o,a)),a.type===_a&&(a.el=o.el)}}function CT(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Zy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Zy(e)}function eg(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const ST=Symbol.for("v-scx"),PT=()=>Qn(ST),el={};function $s(t,e,n){return e0(t,e,n)}function e0(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=at){if(e&&i){const V=e;e=(...y)=>{V(...y),B()}}const l=Ft,u=V=>r===!0?V:Wr(V,r===!1?1:void 0);let h,d=!1,m=!1;if(un(t)?(h=()=>t.value,d=wi(t)):Ro(t)?(h=()=>u(t),d=!0):ye(t)?(m=!0,d=t.some(V=>Ro(V)||wi(V)),h=()=>t.map(V=>{if(un(V))return V.value;if(Ro(V))return u(V);if(Ne(V))return rs(V,l,2)})):Ne(t)?e?h=()=>rs(t,l,2):h=()=>(p&&p(),Un(t,l,3,[E])):h=Rn,e&&r){const V=h;h=()=>Wr(V())}let p,E=V=>{p=I.onStop=()=>{rs(V,l,4),p=I.onStop=void 0}},A;if(_c)if(E=Rn,e?n&&Un(e,l,3,[h(),m?[]:void 0,E]):h(),s==="sync"){const V=PT();A=V.__watcherHandles||(V.__watcherHandles=[])}else return Rn;let N=m?new Array(t.length).fill(el):el;const O=()=>{if(!(!I.active||!I.dirty))if(e){const V=I.run();(r||d||(m?V.some((y,_)=>ls(y,N[_])):ls(V,N)))&&(p&&p(),Un(e,l,3,[V,N===el?void 0:m&&N[0]===el?[]:N,E]),N=V)}else I.run()};O.allowRecurse=!!e;let k;s==="sync"?k=O:s==="post"?k=()=>fn(O,l&&l.suspense):(O.pre=!0,l&&(O.id=l.uid),k=()=>wd(O));const I=new dd(h,Rn,k),S=Ew(),B=()=>{I.stop(),S&&ld(S.effects,I)};return e?n?O():N=I.run():s==="post"?fn(I.run.bind(I),l&&l.suspense):I.run(),A&&A.push(B),B}function RT(t,e,n){const r=this.proxy,s=Ct(t)?t.includes(".")?t0(r,t):()=>r[t]:t.bind(r,r);let i;Ne(e)?i=e:(i=e.handler,n=e);const o=ya(this),a=e0(s,i.bind(r),n);return o(),a}function t0(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Wr(t,e=1/0,n){if(e<=0||!nt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,un(t))Wr(t.value,e,n);else if(ye(t))for(let r=0;r<t.length;r++)Wr(t[r],e,n);else if(qi(t)||gi(t))t.forEach(r=>{Wr(r,e,n)});else if(ty(t)){for(const r in t)Wr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Wr(t[r],e,n)}return t}const kT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jn(e)}Modifiers`]||t[`${Qs(e)}Modifiers`];function NT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||at;let s=n;const i=e.startsWith("update:"),o=i&&kT(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Ct(h)?h.trim():h)),o.number&&(s=n.map(Pl)));let a,l=r[a=fu(e)]||r[a=fu(jn(e))];!l&&i&&(l=r[a=fu(Qs(e))]),l&&Un(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Un(u,t,6,s)}}function n0(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ne(t)){const l=u=>{const h=n0(u,e,!0);h&&(a=!0,Xt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(nt(t)&&r.set(t,null),null):(ye(i)?i.forEach(l=>o[l]=null):Xt(o,i),nt(t)&&r.set(t,o),o)}function pc(t,e){return!t||!cc(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,Qs(e))||je(t,e))}function _u(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:m,setupState:p,ctx:E,inheritAttrs:A}=t,N=Rl(t);let O,k;try{if(n.shapeFlag&4){const S=s||r,B=S;O=Kn(u.call(B,S,h,d,p,m,E)),k=a}else{const S=e;O=Kn(S.length>1?S(d,{attrs:a,slots:o,emit:l}):S(d,null)),k=e.props?a:DT(a)}}catch(S){Lo.length=0,fc(S,t,1),O=xe(cs)}let I=O;if(k&&A!==!1){const S=Object.keys(k),{shapeFlag:B}=I;S.length&&B&7&&(i&&S.some(ad)&&(k=OT(k,i)),I=Ti(I,k,!1,!0))}return n.dirs&&(I=Ti(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),O=I,Rl(N),O}const DT=t=>{let e;for(const n in t)(n==="class"||n==="style"||cc(n))&&((e||(e={}))[n]=t[n]);return e},OT=(t,e)=>{const n={};for(const r in t)(!ad(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function LT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?tg(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==r[m]&&!pc(u,m))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?tg(r,o,u):!0:!!o;return!1}function tg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!pc(n,i))return!0}return!1}function MT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const xT=t=>t.__isSuspense;function VT(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):Gw(t)}const _e=Symbol.for("v-fgt"),_a=Symbol.for("v-txt"),cs=Symbol.for("v-cmt"),yu=Symbol.for("v-stc"),Lo=[];let wn=null;function ee(t=!1){Lo.push(wn=t?null:[])}function FT(){Lo.pop(),wn=Lo[Lo.length-1]||null}let Qo=1;function ng(t){Qo+=t,t<0&&wn&&(wn.hasOnce=!0)}function r0(t){return t.dynamicChildren=Qo>0?wn||mi:null,FT(),Qo>0&&wn&&wn.push(t),t}function oe(t,e,n,r,s,i){return r0(x(t,e,n,r,s,i,!0))}function Nn(t,e,n,r,s){return r0(xe(t,e,n,r,s,!0))}function Nl(t){return t?t.__v_isVNode===!0:!1}function mo(t,e){return t.type===e.type&&t.key===e.key}const s0=({key:t})=>t??null,ml=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ct(t)||un(t)||Ne(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function x(t,e=null,n=null,r=0,s=null,i=t===_e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&s0(e),ref:e&&ml(e),scopeId:ky,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ot};return a?(Cd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ct(n)?8:16),Qo>0&&!o&&wn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&wn.push(l),l}const xe=UT;function UT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===oT)&&(t=cs),Nl(t)){const a=Ti(t,e,!0);return n&&Cd(a,n),Qo>0&&!i&&wn&&(a.shapeFlag&6?wn[wn.indexOf(t)]=a:wn.push(a)),a.patchFlag=-2,a}if(QT(t)&&(t=t.__vccOpts),e){e=$T(e);let{class:a,style:l}=e;a&&!Ct(a)&&(e.class=Ge(a)),nt(l)&&(Iy(l)&&!ye(l)&&(l=Xt({},l)),e.style=ud(l))}const o=Ct(t)?1:xT(t)?128:wT(t)?64:nt(t)?4:Ne(t)?2:0;return x(t,e,n,r,s,o,i,!0)}function $T(t){return t?Iy(t)||Wy(t)?Xt({},t):t:null}function Ti(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?BT(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&s0(u),ref:e&&e.ref?n&&i?ye(i)?i.concat(ml(e)):[i,ml(e)]:ml(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_e?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ti(t.ssContent),ssFallback:t.ssFallback&&Ti(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ny(h,l.clone(h)),h}function rh(t=" ",e=0){return xe(_a,null,t,e)}function Le(t="",e=!1){return e?(ee(),Nn(cs,null,t)):xe(cs,null,t)}function Kn(t){return t==null||typeof t=="boolean"?xe(cs):ye(t)?xe(_e,null,t.slice()):typeof t=="object"?jr(t):xe(_a,null,String(t))}function jr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ti(t)}function Cd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Cd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Wy(e)?e._ctx=Ot:s===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),r&64?(n=16,e=[rh(e)]):n=8);t.children=e,t.shapeFlag|=n}function BT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ge([e.class,r.class]));else if(s==="style")e.style=ud([e.style,r.style]);else if(cc(s)){const i=e[s],o=r[s];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function qn(t,e,n,r=null){Un(t,e,7,[n,r])}const jT=jy();let HT=0;function qT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||jT,i={uid:HT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gy(r,s),emitsOptions:n0(r,s),emit:null,emitted:null,propsDefaults:at,inheritAttrs:r.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=NT.bind(null,i),t.ce&&t.ce(i),i}let Ft=null;const Jo=()=>Ft||Ot;let Dl,sh;{const t=ry(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Dl=e("__VUE_INSTANCE_SETTERS__",n=>Ft=n),sh=e("__VUE_SSR_SETTERS__",n=>_c=n)}const ya=t=>{const e=Ft;return Dl(t),t.scope.on(),()=>{t.scope.off(),Dl(e)}},rg=()=>{Ft&&Ft.scope.off(),Dl(null)};function i0(t){return t.vnode.shapeFlag&4}let _c=!1;function WT(t,e=!1,n=!1){e&&sh(e);const{props:r,children:s}=t.vnode,i=i0(t);gT(t,r,i,e),vT(t,s,n);const o=i?KT(t,e):void 0;return e&&sh(!1),o}function KT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,aT);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?zT(t):null,i=ya(t);gs();const o=rs(r,t,0,[t.props,s]);if(ps(),i(),Z_(o)){if(o.then(rg,rg),e)return o.then(a=>{sg(t,a,e)}).catch(a=>{fc(a,t,0)});t.asyncDep=o}else sg(t,o,e)}else o0(t,e)}function sg(t,e,n){Ne(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:nt(e)&&(t.setupState=Ay(e)),o0(t,n)}let ig;function o0(t,e,n){const r=t.type;if(!t.render){if(!e&&ig&&!r.render){const s=r.template||bd(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Xt(Xt({isCustomElement:i,delimiters:a},o),l);r.render=ig(s,u)}}t.render=r.render||Rn}{const s=ya(t);gs();try{lT(t)}finally{ps(),s()}}}const GT={get(t,e){return _n(t,"get",""),t[e]}};function zT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,GT),slots:t.slots,emit:t.emit,expose:e}}function yc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ay($w(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Do)return Do[n](t)},has(e,n){return n in e||n in Do}})):t.proxy}function YT(t,e=!0){return Ne(t)?t.displayName||t.name:t.name||e&&t.__name}function QT(t){return Ne(t)&&"__vccOpts"in t}const gt=(t,e)=>Bw(t,e,_c);function va(t,e,n){const r=arguments.length;return r===2?nt(e)&&!ye(e)?Nl(e)?xe(t,null,[e]):xe(t,e):xe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Nl(n)&&(n=[n]),xe(t,e,n))}const JT="3.4.34";/**
* @vue/runtime-dom v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XT="http://www.w3.org/2000/svg",ZT="http://www.w3.org/1998/Math/MathML",fr=typeof document<"u"?document:null,og=fr&&fr.createElement("template"),eb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?fr.createElementNS(XT,t):e==="mathml"?fr.createElementNS(ZT,t):n?fr.createElement(t,{is:n}):fr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>fr.createTextNode(t),createComment:t=>fr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{og.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=og.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tb=Symbol("_vtc");function nb(t,e,n){const r=t[tb];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ag=Symbol("_vod"),rb=Symbol("_vsh"),sb=Symbol(""),ib=/(^|;)\s*display\s*:/;function ob(t,e,n){const r=t.style,s=Ct(n);let i=!1;if(n&&!s){if(e)if(Ct(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&gl(r,a,"")}else for(const o in e)n[o]==null&&gl(r,o,"");for(const o in n)o==="display"&&(i=!0),gl(r,o,n[o])}else if(s){if(e!==n){const o=r[sb];o&&(n+=";"+o),r.cssText=n,i=ib.test(n)}}else e&&t.removeAttribute("style");ag in t&&(t[ag]=i?r.display:"",t[rb]&&(r.display="none"))}const lg=/\s*!important$/;function gl(t,e,n){if(ye(n))n.forEach(r=>gl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ab(t,e);lg.test(n)?t.setProperty(Qs(r),n.replace(lg,""),"important"):t[r]=n}}const cg=["Webkit","Moz","ms"],vu={};function ab(t,e){const n=vu[e];if(n)return n;let r=jn(e);if(r!=="filter"&&r in t)return vu[e]=r;r=hc(r);for(let s=0;s<cg.length;s++){const i=cg[s]+r;if(i in t)return vu[e]=i}return e}const ug="http://www.w3.org/1999/xlink";function hg(t,e,n,r,s,i=pw(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ug,e.slice(6,e.length)):t.setAttributeNS(ug,e,n):n==null||i&&!sy(n)?t.removeAttribute(e):t.setAttribute(e,i?"":tr(n)?String(n):n)}function lb(t,e,n,r){if(e==="innerHTML"||e==="textContent"){if(n==null)return;t[e]=n;return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?"":String(n);(o!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=sy(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function Kr(t,e,n,r){t.addEventListener(e,n,r)}function cb(t,e,n,r){t.removeEventListener(e,n,r)}const dg=Symbol("_vei");function ub(t,e,n,r,s=null){const i=t[dg]||(t[dg]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=hb(e);if(r){const u=i[e]=mb(r,s);Kr(t,a,u,l)}else o&&(cb(t,a,o,l),i[e]=void 0)}}const fg=/(?:Once|Passive|Capture)$/;function hb(t){let e;if(fg.test(t)){e={};let r;for(;r=t.match(fg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Qs(t.slice(2)),e]}let Eu=0;const db=Promise.resolve(),fb=()=>Eu||(db.then(()=>Eu=0),Eu=Date.now());function mb(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Un(gb(r,n.value),e,5,[r])};return n.value=t,n.attached=fb(),n}function gb(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const mg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pb=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?nb(t,r,o):e==="style"?ob(t,n,r):cc(e)?ad(e)||ub(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_b(t,e,r,o))?(lb(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hg(t,e,r,o,i,e!=="value")):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),hg(t,e,r,o))};function _b(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&mg(e)&&Ne(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return mg(e)&&Ct(n)?!1:e in t}const bi=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>hl(e,n):e};function yb(t){t.target.composing=!0}function gg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tr=Symbol("_assign"),vb={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Tr]=bi(s);const i=r||s.props&&s.props.type==="number";Kr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Pl(a)),t[Tr](a)}),n&&Kr(t,"change",()=>{t.value=t.value.trim()}),e||(Kr(t,"compositionstart",yb),Kr(t,"compositionend",gg),Kr(t,"change",gg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Tr]=bi(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Pl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},pg={deep:!0,created(t,e,n){t[Tr]=bi(n),Kr(t,"change",()=>{const r=t._modelValue,s=Xo(t),i=t.checked,o=t[Tr];if(ye(r)){const a=hd(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(qi(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(a0(t,i))})},mounted:_g,beforeUpdate(t,e,n){t[Tr]=bi(n),_g(t,e,n)}};function _g(t,{value:e,oldValue:n},r){t._modelValue=e,ye(e)?t.checked=hd(e,r.props.value)>-1:qi(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=pa(e,a0(t,!0)))}const E5={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=qi(e);Kr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Pl(Xo(o)):Xo(o));t[Tr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Id(()=>{t._assigning=!1})}),t[Tr]=bi(r)},mounted(t,{value:e,modifiers:{number:n}}){yg(t,e)},beforeUpdate(t,e,n){t[Tr]=bi(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||yg(t,e)}};function yg(t,e,n){const r=t.multiple,s=ye(e);if(!(r&&!s&&!qi(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=Xo(a);if(r)if(s){const u=typeof l;u==="string"||u==="number"?a.selected=e.some(h=>String(h)===String(l)):a.selected=hd(e,l)>-1}else a.selected=e.has(l);else if(pa(Xo(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Xo(t){return"_value"in t?t._value:t.value}function a0(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Eb=Xt({patchProp:pb},eb);let vg;function Ib(){return vg||(vg=TT(Eb))}const wb=(...t)=>{const e=Ib().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=bb(r);if(!s)return;const i=e._component;!Ne(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Tb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Tb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bb(t){return Ct(t)?document.querySelector(t):t}var Ab=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},l0={},An={};let Sd;const Cb=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];An.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};An.getSymbolTotalCodewords=function(e){return Cb[e]};An.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};An.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Sd=e};An.isKanjiModeEnabled=function(){return typeof Sd<"u"};An.toSJIS=function(e){return Sd(e)};var vc={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(vc);function c0(){this.buffer=[],this.length=0}c0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Sb=c0;function Ea(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ea.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};Ea.prototype.get=function(t,e){return this.data[t*this.size+e]};Ea.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ea.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Pb=Ea,u0={};(function(t){const e=An.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let l=1;l<s-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),o=i.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||s.push([i[a],i[l]]);return s}})(u0);var h0={};const Rb=An.getSymbolSize,Eg=7;h0.getPositions=function(e){const n=Rb(e);return[[0,0],[n-Eg,0],[0,n-Eg]]};var d0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,l=0,u=null,h=null;for(let d=0;d<i;d++){a=l=0,u=h=null;for(let m=0;m<i;m++){let p=s.get(d,m);p===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=p,a=1),p=s.get(m,d),p===h?l++:(l>=5&&(o+=e.N1+(l-5)),h=p,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let l=0;l<i-1;l++){const u=s.get(a,l)+s.get(a,l+1)+s.get(a+1,l)+s.get(a+1,l+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,l=0;for(let u=0;u<i;u++){a=l=0;for(let h=0;h<i;h++)a=a<<1&2047|s.get(u,h),h>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|s.get(h,u),h>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let l=0;l<o;l++)i+=s.data[l];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)i.isReserved(l,a)||i.xor(l,a,n(s,l,a))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let u=0;u<o;u++){i(u),t.applyMask(u,s);const h=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(u,s),h<l&&(l=h,a=u)}return a}})(d0);var Ec={};const Zr=vc,tl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],nl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ec.getBlocksCount=function(e,n){switch(n){case Zr.L:return tl[(e-1)*4+0];case Zr.M:return tl[(e-1)*4+1];case Zr.Q:return tl[(e-1)*4+2];case Zr.H:return tl[(e-1)*4+3];default:return}};Ec.getTotalCodewordsCount=function(e,n){switch(n){case Zr.L:return nl[(e-1)*4+0];case Zr.M:return nl[(e-1)*4+1];case Zr.Q:return nl[(e-1)*4+2];case Zr.H:return nl[(e-1)*4+3];default:return}};var f0={},Ic={};const Mo=new Uint8Array(512),Ol=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Mo[n]=e,Ol[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Mo[n]=Mo[n-255]})();Ic.log=function(e){if(e<1)throw new Error("log("+e+")");return Ol[e]};Ic.exp=function(e){return Mo[e]};Ic.mul=function(e,n){return e===0||n===0?0:Mo[Ol[e]+Ol[n]]};(function(t){const e=Ic;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(r[o],s[a]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let l=0;l<s.length;l++)i[l]^=e.mul(s[l],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(f0);const m0=f0;function Pd(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Pd.prototype.initialize=function(e){this.degree=e,this.genPoly=m0.generateECPolynomial(this.degree)};Pd.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=m0.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var kb=Pd,g0={},_s={},Rd={};Rd.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var sr={};const p0="[0-9]+",Nb="[A-Z $%*+\\-./:]+";let Zo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Zo=Zo.replace(/u/g,"\\u");const Db="(?:(?![A-Z0-9 $%*+\\-./:]|"+Zo+`)(?:.|[\r
]))+`;sr.KANJI=new RegExp(Zo,"g");sr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");sr.BYTE=new RegExp(Db,"g");sr.NUMERIC=new RegExp(p0,"g");sr.ALPHANUMERIC=new RegExp(Nb,"g");const Ob=new RegExp("^"+Zo+"$"),Lb=new RegExp("^"+p0+"$"),Mb=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");sr.testKanji=function(e){return Ob.test(e)};sr.testNumeric=function(e){return Lb.test(e)};sr.testAlphanumeric=function(e){return Mb.test(e)};(function(t){const e=Rd,n=sr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return r(i)}catch{return o}}})(_s);(function(t){const e=An,n=Ec,r=vc,s=_s,i=Rd,o=7973,a=e.getBCHDigit(o);function l(m,p,E){for(let A=1;A<=40;A++)if(p<=t.getCapacity(A,E,m))return A}function u(m,p){return s.getCharCountIndicator(m,p)+4}function h(m,p){let E=0;return m.forEach(function(A){const N=u(A.mode,p);E+=N+A.getBitsLength()}),E}function d(m,p){for(let E=1;E<=40;E++)if(h(m,E)<=t.getCapacity(E,p,s.MIXED))return E}t.from=function(p,E){return i.isValid(p)?parseInt(p,10):E},t.getCapacity=function(p,E,A){if(!i.isValid(p))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=s.BYTE);const N=e.getSymbolTotalCodewords(p),O=n.getTotalCodewordsCount(p,E),k=(N-O)*8;if(A===s.MIXED)return k;const I=k-u(A,p);switch(A){case s.NUMERIC:return Math.floor(I/10*3);case s.ALPHANUMERIC:return Math.floor(I/11*2);case s.KANJI:return Math.floor(I/13);case s.BYTE:default:return Math.floor(I/8)}},t.getBestVersionForData=function(p,E){let A;const N=r.from(E,r.M);if(Array.isArray(p)){if(p.length>1)return d(p,N);if(p.length===0)return 1;A=p[0]}else A=p;return l(A.mode,A.getLength(),N)},t.getEncodedBits=function(p){if(!i.isValid(p)||p<7)throw new Error("Invalid QR Code version");let E=p<<12;for(;e.getBCHDigit(E)-a>=0;)E^=o<<e.getBCHDigit(E)-a;return p<<12|E}})(g0);var _0={};const ih=An,y0=1335,xb=21522,Ig=ih.getBCHDigit(y0);_0.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;ih.getBCHDigit(s)-Ig>=0;)s^=y0<<ih.getBCHDigit(s)-Ig;return(r<<10|s)^xb};var v0={};const Vb=_s;function Ai(t){this.mode=Vb.NUMERIC,this.data=t.toString()}Ai.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ai.prototype.getLength=function(){return this.data.length};Ai.prototype.getBitsLength=function(){return Ai.getBitsLength(this.data.length)};Ai.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var Fb=Ai;const Ub=_s,Iu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ci(t){this.mode=Ub.ALPHANUMERIC,this.data=t}Ci.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ci.prototype.getLength=function(){return this.data.length};Ci.prototype.getBitsLength=function(){return Ci.getBitsLength(this.data.length)};Ci.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Iu.indexOf(this.data[n])*45;r+=Iu.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Iu.indexOf(this.data[n]),6)};var $b=Ci,Bb=function(e){for(var n=[],r=e.length,s=0;s<r;s++){var i=e.charCodeAt(s);if(i>=55296&&i<=56319&&r>s+1){var o=e.charCodeAt(s+1);o>=56320&&o<=57343&&(i=(i-55296)*1024+o-56320+65536,s+=1)}if(i<128){n.push(i);continue}if(i<2048){n.push(i>>6|192),n.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128);continue}if(i>=65536&&i<=1114111){n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(i&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const jb=Bb,Hb=_s;function Si(t){this.mode=Hb.BYTE,typeof t=="string"&&(t=jb(t)),this.data=new Uint8Array(t)}Si.getBitsLength=function(e){return e*8};Si.prototype.getLength=function(){return this.data.length};Si.prototype.getBitsLength=function(){return Si.getBitsLength(this.data.length)};Si.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var qb=Si;const Wb=_s,Kb=An;function Pi(t){this.mode=Wb.KANJI,this.data=t}Pi.getBitsLength=function(e){return e*13};Pi.prototype.getLength=function(){return this.data.length};Pi.prototype.getBitsLength=function(){return Pi.getBitsLength(this.data.length)};Pi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=Kb.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var Gb=Pi,E0={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,u,h,d,m,p,E,A,N;!a.empty();){l=a.pop(),u=l.value,d=l.cost,m=n[u]||{};for(h in m)m.hasOwnProperty(h)&&(p=m[h],E=d+p,A=o[h],N=typeof o[h]>"u",(N||A>E)&&(o[h]=E,a.push(h,E),i[h]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var O=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(O)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(E0);var zb=E0.exports;(function(t){const e=_s,n=Fb,r=$b,s=qb,i=Gb,o=sr,a=An,l=zb;function u(O){return unescape(encodeURIComponent(O)).length}function h(O,k,I){const S=[];let B;for(;(B=O.exec(I))!==null;)S.push({data:B[0],index:B.index,mode:k,length:B[0].length});return S}function d(O){const k=h(o.NUMERIC,e.NUMERIC,O),I=h(o.ALPHANUMERIC,e.ALPHANUMERIC,O);let S,B;return a.isKanjiModeEnabled()?(S=h(o.BYTE,e.BYTE,O),B=h(o.KANJI,e.KANJI,O)):(S=h(o.BYTE_KANJI,e.BYTE,O),B=[]),k.concat(I,S,B).sort(function(y,_){return y.index-_.index}).map(function(y){return{data:y.data,mode:y.mode,length:y.length}})}function m(O,k){switch(k){case e.NUMERIC:return n.getBitsLength(O);case e.ALPHANUMERIC:return r.getBitsLength(O);case e.KANJI:return i.getBitsLength(O);case e.BYTE:return s.getBitsLength(O)}}function p(O){return O.reduce(function(k,I){const S=k.length-1>=0?k[k.length-1]:null;return S&&S.mode===I.mode?(k[k.length-1].data+=I.data,k):(k.push(I),k)},[])}function E(O){const k=[];for(let I=0;I<O.length;I++){const S=O[I];switch(S.mode){case e.NUMERIC:k.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:k.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:k.push([S,{data:S.data,mode:e.BYTE,length:u(S.data)}]);break;case e.BYTE:k.push([{data:S.data,mode:e.BYTE,length:u(S.data)}])}}return k}function A(O,k){const I={},S={start:{}};let B=["start"];for(let V=0;V<O.length;V++){const y=O[V],_=[];for(let v=0;v<y.length;v++){const D=y[v],M=""+V+v;_.push(M),I[M]={node:D,lastCount:0},S[M]={};for(let L=0;L<B.length;L++){const P=B[L];I[P]&&I[P].node.mode===D.mode?(S[P][M]=m(I[P].lastCount+D.length,D.mode)-m(I[P].lastCount,D.mode),I[P].lastCount+=D.length):(I[P]&&(I[P].lastCount=D.length),S[P][M]=m(D.length,D.mode)+4+e.getCharCountIndicator(D.mode,k))}}B=_}for(let V=0;V<B.length;V++)S[B[V]].end=0;return{map:S,table:I}}function N(O,k){let I;const S=e.getBestModeForData(O);if(I=e.from(k,S),I!==e.BYTE&&I.bit<S.bit)throw new Error('"'+O+'" cannot be encoded with mode '+e.toString(I)+`.
 Suggested mode is: `+e.toString(S));switch(I===e.KANJI&&!a.isKanjiModeEnabled()&&(I=e.BYTE),I){case e.NUMERIC:return new n(O);case e.ALPHANUMERIC:return new r(O);case e.KANJI:return new i(O);case e.BYTE:return new s(O)}}t.fromArray=function(k){return k.reduce(function(I,S){return typeof S=="string"?I.push(N(S,null)):S.data&&I.push(N(S.data,S.mode)),I},[])},t.fromString=function(k,I){const S=d(k,a.isKanjiModeEnabled()),B=E(S),V=A(B,I),y=l.find_path(V.map,"start","end"),_=[];for(let v=1;v<y.length-1;v++)_.push(V.table[y[v]].node);return t.fromArray(p(_))},t.rawSplit=function(k){return t.fromArray(d(k,a.isKanjiModeEnabled()))}})(v0);const wc=An,wu=vc,Yb=Sb,Qb=Pb,Jb=u0,Xb=h0,oh=d0,ah=Ec,Zb=kb,Ll=g0,eA=_0,tA=_s,Tu=v0;function nA(t,e){const n=t.size,r=Xb.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||n<=i+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(i+a,o+l,!0,!0):t.set(i+a,o+l,!1,!0))}}function rA(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function sA(t,e){const n=Jb.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(s+o,i+a,!0,!0):t.set(s+o,i+a,!1,!0)}}function iA(t,e){const n=t.size,r=Ll.getEncodedBits(e);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+n-8-3,o=(r>>a&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function bu(t,e,n){const r=t.size,s=eA.getEncodedBits(e,n);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(r-15+i,8,o,!0),i<8?t.set(8,r-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(r-8,8,1,!0)}function oA(t,e){const n=t.size;let r=-1,s=n-1,i=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(s,a-l)){let u=!1;o<e.length&&(u=(e[o]>>>i&1)===1),t.set(s,a-l,u),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function aA(t,e,n){const r=new Yb;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),tA.getCharCountIndicator(l.mode,t)),l.write(r)});const s=wc.getSymbolTotalCodewords(t),i=ah.getTotalCodewordsCount(t,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return lA(r,t,e)}function lA(t,e,n){const r=wc.getSymbolTotalCodewords(e),s=ah.getTotalCodewordsCount(e,n),i=r-s,o=ah.getBlocksCount(e,n),a=r%o,l=o-a,u=Math.floor(r/o),h=Math.floor(i/o),d=h+1,m=u-h,p=new Zb(m);let E=0;const A=new Array(o),N=new Array(o);let O=0;const k=new Uint8Array(t.buffer);for(let y=0;y<o;y++){const _=y<l?h:d;A[y]=k.slice(E,E+_),N[y]=p.encode(A[y]),E+=_,O=Math.max(O,_)}const I=new Uint8Array(r);let S=0,B,V;for(B=0;B<O;B++)for(V=0;V<o;V++)B<A[V].length&&(I[S++]=A[V][B]);for(B=0;B<m;B++)for(V=0;V<o;V++)I[S++]=N[V][B];return I}function cA(t,e,n,r){let s;if(Array.isArray(t))s=Tu.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const h=Tu.rawSplit(t);u=Ll.getBestVersionForData(h,n)}s=Tu.fromString(t,u||40)}else throw new Error("Invalid data");const i=Ll.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=aA(e,n,s),a=wc.getSymbolSize(e),l=new Qb(a);return nA(l,e),rA(l),sA(l,e),bu(l,n,0),e>=7&&iA(l,e),oA(l,o),isNaN(r)&&(r=oh.getBestMask(l,bu.bind(null,l,n))),oh.applyMask(r,l),bu(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}l0.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=wu.M,s,i;return typeof n<"u"&&(r=wu.from(n.errorCorrectionLevel,wu.M),s=Ll.from(n.version),i=oh.from(n.maskPattern),n.toSJISFunc&&wc.setToSJISFunction(n.toSJISFunc)),cA(e,s,r,i)};var I0={},kd={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const o=s.modules.size,a=s.modules.data,l=t.getScale(o,i),u=Math.floor((o+i.margin*2)*l),h=i.margin*l,d=[i.color.light,i.color.dark];for(let m=0;m<u;m++)for(let p=0;p<u;p++){let E=(m*u+p)*4,A=i.color.light;if(m>=h&&p>=h&&m<u-h&&p<u-h){const N=Math.floor((m-h)/l),O=Math.floor((p-h)/l);A=d[a[N*o+O]?1:0]}r[E++]=A.r,r[E++]=A.g,r[E++]=A.b,r[E]=A.a}}})(kd);(function(t){const e=kd;function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,a){let l=a,u=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(u=r()),l=e.getOptions(l);const h=e.getImageWidth(i.modules.size,l),d=u.getContext("2d"),m=d.createImageData(h,h);return e.qrToImageData(m.data,i,l),n(d,u,h),d.putImageData(m,0,0),u},t.renderToDataURL=function(i,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const u=t.render(i,o,l),h=l.type||"image/png",d=l.rendererOpts||{};return u.toDataURL(h,d.quality)}})(I0);var w0={};const uA=kd;function wg(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Au(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function hA(t,e,n){let r="",s=0,i=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!i&&(i=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(r+=i?Au("M",l+n,.5+u+n):Au("m",s,0),s=0,i=!1),l+1<e&&t[a+1]||(r+=Au("h",o),o=0)):s++}return r}w0.render=function(e,n,r){const s=uA.getOptions(n),i=e.modules.size,o=e.modules.data,a=i+s.margin*2,l=s.color.light.a?"<path "+wg(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+wg(s.color.dark,"stroke")+' d="'+hA(o,i,s.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,m),m};const dA=Ab,lh=l0,T0=I0,fA=w0;function Nd(t,e,n,r,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!dA())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,u){try{const h=lh.create(n,r);l(t(h,e,r))}catch(h){u(h)}})}try{const l=lh.create(n,r);s(null,t(l,e,r))}catch(l){s(l)}}lh.create;var mA=Nd.bind(null,T0.render),gA=Nd.bind(null,T0.renderToDataURL),pA=Nd.bind(null,function(t,e,n){return fA.render(t,n)});/*! vue-qrcode v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */const Tg="ready";var bg=Wi({name:"VueQrcode",props:{value:{type:String,default:void 0},options:{type:Object,default:void 0},tag:{type:String,default:"canvas"}},emits:[Tg],watch:{$props:{deep:!0,immediate:!0,handler(){this.$el&&this.generate()}}},mounted(){this.generate()},methods:{generate(){const t=this.options||{},e=String(this.value),n=()=>{this.$emit(Tg,this.$el)};switch(this.tag){case"canvas":mA(this.$el,e,t,r=>{if(r)throw r;n()});break;case"img":gA(e,t,(r,s)=>{if(r)throw r;this.$el.src=s,this.$el.onload=n});break;case"svg":pA(e,t,(r,s)=>{if(r)throw r;const i=document.createElement("div");i.innerHTML=s;const o=i.querySelector("svg");if(o){const{attributes:a,childNodes:l}=o;Object.keys(a).forEach(u=>{const h=a[Number(u)];this.$el.setAttribute(h.name,h.value)}),Object.keys(l).forEach(u=>{const h=l[Number(u)];this.$el.appendChild(h.cloneNode(!0))}),n()}});break}}},render(){return va(this.tag,this.$slots.default)}}),Wn=(t=>(t.LOADING="loading",t.LOADED="loaded",t.ERROR="error",t))(Wn||{});const _A=typeof window<"u"&&window!==null,yA=wA(),vA=Object.prototype.propertyIsEnumerable,Ag=Object.getOwnPropertySymbols;function xo(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function EA(t){return typeof t=="object"?t===null:typeof t!="function"}function IA(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function wA(){return _A&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function TA(t,...e){if(!xo(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof Ag!="function")return t;for(const n of e){const r=Ag(n);for(const s of r)vA.call(n,s)&&(t[s]=n[s])}return t}function b0(t,...e){let n=0;for(EA(t)&&(t=e[n++]),t||(t={});n<e.length;n++)if(xo(e[n])){for(const r of Object.keys(e[n]))IA(r)&&(xo(t[r])&&xo(e[n][r])?b0(t[r],e[n][r]):t[r]=e[n][r]);TA(t,e[n])}return t}const Cg="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bA="",AA={rootMargin:"0px",threshold:0},ii="data-lazy-timeout-id";class CA{constructor(e){this.options={loading:Cg,error:bA,observerOptions:AA,log:!0,lifecycle:{},logLevel:"error"},this._images=new WeakMap,this.config(e)}config(e={}){b0(this.options,e)}mount(e,n){if(!e)return;const{src:r,loading:s,error:i,lifecycle:o,delay:a}=this._valueFormatter(typeof n=="string"?n:n.value);this._lifecycle(Wn.LOADING,o,e),e.setAttribute("src",s||Cg),yA||(this.loadImages(e,r,i,o),this._log(()=>{this._logger("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,r,i,o,a)}update(e,n){var a;if(!e)return;(a=this._realObserver(e))==null||a.unobserve(e);const{src:r,error:s,lifecycle:i,delay:o}=this._valueFormatter(typeof n=="string"?n:n.value);this._initIntersectionObserver(e,r,s,i,o)}unmount(e){var n;e&&((n=this._realObserver(e))==null||n.unobserve(e),this._images.delete(e))}loadImages(e,n,r,s){this._setImageSrc(e,n,r,s)}_setImageSrc(e,n,r,s){e.tagName.toLowerCase()==="img"?(n&&e.getAttribute("src")!==n&&e.setAttribute("src",n),this._listenImageStatus(e,()=>{this._lifecycle(Wn.LOADED,s,e)},()=>{var i;e.onload=null,this._lifecycle(Wn.ERROR,s,e),(i=this._realObserver(e))==null||i.disconnect(),r&&e.getAttribute("src")!==r&&e.setAttribute("src",r),this._log(()=>{this._logger(`Image failed to load!And failed src was: ${n} `)})})):e.style.backgroundImage=`url('${n}')`}_initIntersectionObserver(e,n,r,s,i){var a;const o=this.options.observerOptions;this._images.set(e,new IntersectionObserver(l=>{Array.prototype.forEach.call(l,u=>{i&&i>0?this._delayedIntersectionCallback(e,u,i,n,r,s):this._intersectionCallback(e,u,n,r,s)})},o)),(a=this._realObserver(e))==null||a.observe(e)}_intersectionCallback(e,n,r,s,i){var o;n.isIntersecting&&((o=this._realObserver(e))==null||o.unobserve(n.target),this._setImageSrc(e,r,s,i))}_delayedIntersectionCallback(e,n,r,s,i,o){if(n.isIntersecting){if(n.target.hasAttribute(ii))return;const a=setTimeout(()=>{this._intersectionCallback(e,n,s,i,o),n.target.removeAttribute(ii)},r);n.target.setAttribute(ii,String(a))}else n.target.hasAttribute(ii)&&(clearTimeout(Number(n.target.getAttribute(ii))),n.target.removeAttribute(ii))}_listenImageStatus(e,n,r){e.onload=n,e.onerror=r}_valueFormatter(e){let n=e,r=this.options.loading,s=this.options.error,i=this.options.lifecycle,o=this.options.delay;return xo(e)&&(n=e.src,r=e.loading||this.options.loading,s=e.error||this.options.error,i=e.lifecycle||this.options.lifecycle,o=e.delay||this.options.delay),{src:n,loading:r,error:s,lifecycle:i,delay:o}}_log(e){this.options.log&&e()}_lifecycle(e,n,r){switch(e){case Wn.LOADING:r==null||r.setAttribute("lazy",Wn.LOADING),n!=null&&n.loading&&n.loading(r);break;case Wn.LOADED:r==null||r.setAttribute("lazy",Wn.LOADED),n!=null&&n.loaded&&n.loaded(r);break;case Wn.ERROR:r==null||r.setAttribute("lazy",Wn.ERROR),n!=null&&n.error&&n.error(r);break}}_realObserver(e){return this._images.get(e)}_logger(e,...n){let r=console.error;switch(this.options.logLevel){case"error":r=console.error;break;case"warn":r=console.warn;break;case"info":r=console.info;break;case"debug":r=console.debug;break}r(e,n)}}const SA={install(t,e){const n=new CA(e);t.config.globalProperties.$Lazyload=n,t.provide("Lazyload",n),t.directive("lazy",{mounted:n.mount.bind(n),updated:n.update.bind(n),unmounted:n.unmount.bind(n)})}},PA="modulepreload",RA=function(t){return"/"+t},Sg={},Hr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=RA(a),a in Sg)return;Sg[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":PA,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((d,m)=>{h.addEventListener("load",d),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function kA(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const u=async(d=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await Hr(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:e}).then(d=>{i?i("/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return l=h(),u}var Pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[h],n[d],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new DA;const m=i<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OA=function(t){const e=A0(t);return C0.encodeByteArray(e,!0)},Ml=function(t){return OA(t).replace(/\./g,"")},S0=function(t){try{return C0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=()=>LA().__FIREBASE_DEFAULTS__,xA=()=>{if(typeof process>"u"||typeof Pg>"u")return;const t=Pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S0(t[1]);return e&&JSON.parse(e)},Tc=()=>{try{return MA()||xA()||VA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P0=t=>{var e,n;return(n=(e=Tc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FA=t=>{const e=P0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},R0=()=>{var t;return(t=Tc())===null||t===void 0?void 0:t.config},k0=t=>{var e;return(e=Tc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ml(JSON.stringify(n)),Ml(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function jA(){var t;const e=(t=Tc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WA(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KA(){return!jA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GA(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="FirebaseError";class Nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YA,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?QA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Nr(s,a,r)}}function QA(t,e){return t.replace(JA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const JA=/\{\$([^}]+)}/g;function XA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rg(i)&&Rg(o)){if(!xl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZA(t,e){const n=new eC(t,e);return n.subscribe.bind(n)}class eC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cu),s.error===void 0&&(s.error=Cu),s.complete===void 0&&(s.complete=Cu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sC(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rC(t){return t===Ds?void 0:t}function sC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const oC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},aC=Ve.INFO,lC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},cC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=aC,this._logHandler=cC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const uC=(t,e)=>e.some(n=>t instanceof n);let kg,Ng;function hC(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dC(){return Ng||(Ng=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N0=new WeakMap,ch=new WeakMap,D0=new WeakMap,Su=new WeakMap,Od=new WeakMap;function fC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&N0.set(n,t)}).catch(()=>{}),Od.set(e,t),e}function mC(t){if(ch.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ch.set(t,e)}let uh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gC(t){uh=t(uh)}function pC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pu(this),e,...n);return D0.set(r,e.sort?e.sort():[e]),ss(r)}:dC().includes(t)?function(...e){return t.apply(Pu(this),e),ss(N0.get(this))}:function(...e){return ss(t.apply(Pu(this),e))}}function _C(t){return typeof t=="function"?pC(t):(t instanceof IDBTransaction&&mC(t),uC(t,hC())?new Proxy(t,uh):t)}function ss(t){if(t instanceof IDBRequest)return fC(t);if(Su.has(t))return Su.get(t);const e=_C(t);return e!==t&&(Su.set(t,e),Od.set(e,t)),e}const Pu=t=>Od.get(t);function yC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ss(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ss(o.result),l.oldVersion,l.newVersion,ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const vC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Ru=new Map;function Dg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ru.get(e))return Ru.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=EC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Ru.set(e,i),i}gC(t=>({...t,get:(e,n,r)=>Dg(e,n)||t.get(e,n,r),has:(e,n)=>!!Dg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hh="@firebase/app",Og="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Dd("@firebase/app"),TC="@firebase/app-compat",bC="@firebase/analytics-compat",AC="@firebase/analytics",CC="@firebase/app-check-compat",SC="@firebase/app-check",PC="@firebase/auth",RC="@firebase/auth-compat",kC="@firebase/database",NC="@firebase/database-compat",DC="@firebase/functions",OC="@firebase/functions-compat",LC="@firebase/installations",MC="@firebase/installations-compat",xC="@firebase/messaging",VC="@firebase/messaging-compat",FC="@firebase/performance",UC="@firebase/performance-compat",$C="@firebase/remote-config",BC="@firebase/remote-config-compat",jC="@firebase/storage",HC="@firebase/storage-compat",qC="@firebase/firestore",WC="@firebase/vertexai-preview",KC="@firebase/firestore-compat",GC="firebase",zC="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="[DEFAULT]",YC={[hh]:"fire-core",[TC]:"fire-core-compat",[AC]:"fire-analytics",[bC]:"fire-analytics-compat",[SC]:"fire-app-check",[CC]:"fire-app-check-compat",[PC]:"fire-auth",[RC]:"fire-auth-compat",[kC]:"fire-rtdb",[NC]:"fire-rtdb-compat",[DC]:"fire-fn",[OC]:"fire-fn-compat",[LC]:"fire-iid",[MC]:"fire-iid-compat",[xC]:"fire-fcm",[VC]:"fire-fcm-compat",[FC]:"fire-perf",[UC]:"fire-perf-compat",[$C]:"fire-rc",[BC]:"fire-rc-compat",[jC]:"fire-gcs",[HC]:"fire-gcs-compat",[qC]:"fire-fst",[KC]:"fire-fst-compat",[WC]:"fire-vertex","fire-js":"fire-js",[GC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,QC=new Map,fh=new Map;function Lg(t,e){try{t.container.addComponent(e)}catch(n){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ri(t){const e=t.name;if(fh.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,t);for(const n of Vl.values())Lg(n,t);for(const n of QC.values())Lg(n,t);return!0}function Ld(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Ia("app","Firebase",JC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=zC;function O0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw is.create("bad-app-name",{appName:String(s)});if(n||(n=R0()),!n)throw is.create("no-options");const i=Vl.get(s);if(i){if(xl(n,i.options)&&xl(r,i.config))return i;throw is.create("duplicate-app",{appName:s})}const o=new iC(s);for(const l of fh.values())o.addComponent(l);const a=new XC(n,r,o);return Vl.set(s,a),a}function L0(t=dh){const e=Vl.get(t);if(!e&&t===dh&&R0())return O0();if(!e)throw is.create("no-app",{appName:t});return e}function os(t,e,n){var r;let s=(r=YC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(a.join(" "));return}Ri(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebase-heartbeat-database",eS=1,ea="firebase-heartbeat-store";let ku=null;function M0(){return ku||(ku=yC(ZC,eS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),ku}async function tS(t){try{const n=(await M0()).transaction(ea),r=await n.objectStore(ea).get(x0(t));return await n.done,r}catch(e){if(e instanceof Nr)Ws.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(n.message)}}}async function Mg(t,e){try{const r=(await M0()).transaction(ea,"readwrite");await r.objectStore(ea).put(e,x0(t)),await r.done}catch(n){if(n instanceof Nr)Ws.warn(n.message);else{const r=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ws.warn(r.message)}}}function x0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=1024,rS=30*24*60*60*1e3;class sS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xg(),{heartbeatsToSend:r,unsentEntries:s}=iS(this._heartbeatsCache.heartbeats),i=Ml(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function xg(){return new Date().toISOString().substring(0,10)}function iS(t,e=nS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GA()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vg(t){return Ml(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){Ri(new qs("platform-logger",e=>new IC(e),"PRIVATE")),Ri(new qs("heartbeat",e=>new sS(e),"PRIVATE")),os(hh,Og,t),os(hh,Og,"esm2017"),os("fire-js","")}aS("");var Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,V0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,_){function v(){}v.prototype=_.prototype,y.D=_.prototype,y.prototype=new v,y.prototype.constructor=y,y.C=function(D,M,L){for(var P=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)P[Te-2]=arguments[Te];return _.prototype[M].apply(D,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,_,v){v||(v=0);var D=Array(16);if(typeof _=="string")for(var M=0;16>M;++M)D[M]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(M=0;16>M;++M)D[M]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=y.g[0],v=y.g[1],M=y.g[2];var L=y.g[3],P=_+(L^v&(M^L))+D[0]+3614090360&4294967295;_=v+(P<<7&4294967295|P>>>25),P=L+(M^_&(v^M))+D[1]+3905402710&4294967295,L=_+(P<<12&4294967295|P>>>20),P=M+(v^L&(_^v))+D[2]+606105819&4294967295,M=L+(P<<17&4294967295|P>>>15),P=v+(_^M&(L^_))+D[3]+3250441966&4294967295,v=M+(P<<22&4294967295|P>>>10),P=_+(L^v&(M^L))+D[4]+4118548399&4294967295,_=v+(P<<7&4294967295|P>>>25),P=L+(M^_&(v^M))+D[5]+1200080426&4294967295,L=_+(P<<12&4294967295|P>>>20),P=M+(v^L&(_^v))+D[6]+2821735955&4294967295,M=L+(P<<17&4294967295|P>>>15),P=v+(_^M&(L^_))+D[7]+4249261313&4294967295,v=M+(P<<22&4294967295|P>>>10),P=_+(L^v&(M^L))+D[8]+1770035416&4294967295,_=v+(P<<7&4294967295|P>>>25),P=L+(M^_&(v^M))+D[9]+2336552879&4294967295,L=_+(P<<12&4294967295|P>>>20),P=M+(v^L&(_^v))+D[10]+4294925233&4294967295,M=L+(P<<17&4294967295|P>>>15),P=v+(_^M&(L^_))+D[11]+2304563134&4294967295,v=M+(P<<22&4294967295|P>>>10),P=_+(L^v&(M^L))+D[12]+1804603682&4294967295,_=v+(P<<7&4294967295|P>>>25),P=L+(M^_&(v^M))+D[13]+4254626195&4294967295,L=_+(P<<12&4294967295|P>>>20),P=M+(v^L&(_^v))+D[14]+2792965006&4294967295,M=L+(P<<17&4294967295|P>>>15),P=v+(_^M&(L^_))+D[15]+1236535329&4294967295,v=M+(P<<22&4294967295|P>>>10),P=_+(M^L&(v^M))+D[1]+4129170786&4294967295,_=v+(P<<5&4294967295|P>>>27),P=L+(v^M&(_^v))+D[6]+3225465664&4294967295,L=_+(P<<9&4294967295|P>>>23),P=M+(_^v&(L^_))+D[11]+643717713&4294967295,M=L+(P<<14&4294967295|P>>>18),P=v+(L^_&(M^L))+D[0]+3921069994&4294967295,v=M+(P<<20&4294967295|P>>>12),P=_+(M^L&(v^M))+D[5]+3593408605&4294967295,_=v+(P<<5&4294967295|P>>>27),P=L+(v^M&(_^v))+D[10]+38016083&4294967295,L=_+(P<<9&4294967295|P>>>23),P=M+(_^v&(L^_))+D[15]+3634488961&4294967295,M=L+(P<<14&4294967295|P>>>18),P=v+(L^_&(M^L))+D[4]+3889429448&4294967295,v=M+(P<<20&4294967295|P>>>12),P=_+(M^L&(v^M))+D[9]+568446438&4294967295,_=v+(P<<5&4294967295|P>>>27),P=L+(v^M&(_^v))+D[14]+3275163606&4294967295,L=_+(P<<9&4294967295|P>>>23),P=M+(_^v&(L^_))+D[3]+4107603335&4294967295,M=L+(P<<14&4294967295|P>>>18),P=v+(L^_&(M^L))+D[8]+1163531501&4294967295,v=M+(P<<20&4294967295|P>>>12),P=_+(M^L&(v^M))+D[13]+2850285829&4294967295,_=v+(P<<5&4294967295|P>>>27),P=L+(v^M&(_^v))+D[2]+4243563512&4294967295,L=_+(P<<9&4294967295|P>>>23),P=M+(_^v&(L^_))+D[7]+1735328473&4294967295,M=L+(P<<14&4294967295|P>>>18),P=v+(L^_&(M^L))+D[12]+2368359562&4294967295,v=M+(P<<20&4294967295|P>>>12),P=_+(v^M^L)+D[5]+4294588738&4294967295,_=v+(P<<4&4294967295|P>>>28),P=L+(_^v^M)+D[8]+2272392833&4294967295,L=_+(P<<11&4294967295|P>>>21),P=M+(L^_^v)+D[11]+1839030562&4294967295,M=L+(P<<16&4294967295|P>>>16),P=v+(M^L^_)+D[14]+4259657740&4294967295,v=M+(P<<23&4294967295|P>>>9),P=_+(v^M^L)+D[1]+2763975236&4294967295,_=v+(P<<4&4294967295|P>>>28),P=L+(_^v^M)+D[4]+1272893353&4294967295,L=_+(P<<11&4294967295|P>>>21),P=M+(L^_^v)+D[7]+4139469664&4294967295,M=L+(P<<16&4294967295|P>>>16),P=v+(M^L^_)+D[10]+3200236656&4294967295,v=M+(P<<23&4294967295|P>>>9),P=_+(v^M^L)+D[13]+681279174&4294967295,_=v+(P<<4&4294967295|P>>>28),P=L+(_^v^M)+D[0]+3936430074&4294967295,L=_+(P<<11&4294967295|P>>>21),P=M+(L^_^v)+D[3]+3572445317&4294967295,M=L+(P<<16&4294967295|P>>>16),P=v+(M^L^_)+D[6]+76029189&4294967295,v=M+(P<<23&4294967295|P>>>9),P=_+(v^M^L)+D[9]+3654602809&4294967295,_=v+(P<<4&4294967295|P>>>28),P=L+(_^v^M)+D[12]+3873151461&4294967295,L=_+(P<<11&4294967295|P>>>21),P=M+(L^_^v)+D[15]+530742520&4294967295,M=L+(P<<16&4294967295|P>>>16),P=v+(M^L^_)+D[2]+3299628645&4294967295,v=M+(P<<23&4294967295|P>>>9),P=_+(M^(v|~L))+D[0]+4096336452&4294967295,_=v+(P<<6&4294967295|P>>>26),P=L+(v^(_|~M))+D[7]+1126891415&4294967295,L=_+(P<<10&4294967295|P>>>22),P=M+(_^(L|~v))+D[14]+2878612391&4294967295,M=L+(P<<15&4294967295|P>>>17),P=v+(L^(M|~_))+D[5]+4237533241&4294967295,v=M+(P<<21&4294967295|P>>>11),P=_+(M^(v|~L))+D[12]+1700485571&4294967295,_=v+(P<<6&4294967295|P>>>26),P=L+(v^(_|~M))+D[3]+2399980690&4294967295,L=_+(P<<10&4294967295|P>>>22),P=M+(_^(L|~v))+D[10]+4293915773&4294967295,M=L+(P<<15&4294967295|P>>>17),P=v+(L^(M|~_))+D[1]+2240044497&4294967295,v=M+(P<<21&4294967295|P>>>11),P=_+(M^(v|~L))+D[8]+1873313359&4294967295,_=v+(P<<6&4294967295|P>>>26),P=L+(v^(_|~M))+D[15]+4264355552&4294967295,L=_+(P<<10&4294967295|P>>>22),P=M+(_^(L|~v))+D[6]+2734768916&4294967295,M=L+(P<<15&4294967295|P>>>17),P=v+(L^(M|~_))+D[13]+1309151649&4294967295,v=M+(P<<21&4294967295|P>>>11),P=_+(M^(v|~L))+D[4]+4149444226&4294967295,_=v+(P<<6&4294967295|P>>>26),P=L+(v^(_|~M))+D[11]+3174756917&4294967295,L=_+(P<<10&4294967295|P>>>22),P=M+(_^(L|~v))+D[2]+718787259&4294967295,M=L+(P<<15&4294967295|P>>>17),P=v+(L^(M|~_))+D[9]+3951481745&4294967295,y.g[0]=y.g[0]+_&4294967295,y.g[1]=y.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,y.g[2]=y.g[2]+M&4294967295,y.g[3]=y.g[3]+L&4294967295}r.prototype.u=function(y,_){_===void 0&&(_=y.length);for(var v=_-this.blockSize,D=this.B,M=this.h,L=0;L<_;){if(M==0)for(;L<=v;)s(this,y,L),L+=this.blockSize;if(typeof y=="string"){for(;L<_;)if(D[M++]=y.charCodeAt(L++),M==this.blockSize){s(this,D),M=0;break}}else for(;L<_;)if(D[M++]=y[L++],M==this.blockSize){s(this,D),M=0;break}}this.h=M,this.o+=_},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var _=1;_<y.length-8;++_)y[_]=0;var v=8*this.o;for(_=y.length-8;_<y.length;++_)y[_]=v&255,v/=256;for(this.u(y),y=Array(16),_=v=0;4>_;++_)for(var D=0;32>D;D+=8)y[v++]=this.g[_]>>>D&255;return y};function i(y,_){var v=a;return Object.prototype.hasOwnProperty.call(v,y)?v[y]:v[y]=_(y)}function o(y,_){this.h=_;for(var v=[],D=!0,M=y.length-1;0<=M;M--){var L=y[M]|0;D&&L==_||(v[M]=L,D=!1)}this.g=v}var a={};function l(y){return-128<=y&&128>y?i(y,function(_){return new o([_|0],0>_?-1:0)}):new o([y|0],0>y?-1:0)}function u(y){if(isNaN(y)||!isFinite(y))return d;if(0>y)return N(u(-y));for(var _=[],v=1,D=0;y>=v;D++)_[D]=y/v|0,v*=4294967296;return new o(_,0)}function h(y,_){if(y.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(y.charAt(0)=="-")return N(h(y.substring(1),_));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(_,8)),D=d,M=0;M<y.length;M+=8){var L=Math.min(8,y.length-M),P=parseInt(y.substring(M,M+L),_);8>L?(L=u(Math.pow(_,L)),D=D.j(L).add(u(P))):(D=D.j(v),D=D.add(u(P)))}return D}var d=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-N(this).m();for(var y=0,_=1,v=0;v<this.g.length;v++){var D=this.i(v);y+=(0<=D?D:4294967296+D)*_,_*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E(this))return"0";if(A(this))return"-"+N(this).toString(y);for(var _=u(Math.pow(y,6)),v=this,D="";;){var M=S(v,_).g;v=O(v,M.j(_));var L=((0<v.g.length?v.g[0]:v.h)>>>0).toString(y);if(v=M,E(v))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function E(y){if(y.h!=0)return!1;for(var _=0;_<y.g.length;_++)if(y.g[_]!=0)return!1;return!0}function A(y){return y.h==-1}t.l=function(y){return y=O(this,y),A(y)?-1:E(y)?0:1};function N(y){for(var _=y.g.length,v=[],D=0;D<_;D++)v[D]=~y.g[D];return new o(v,~y.h).add(m)}t.abs=function(){return A(this)?N(this):this},t.add=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],D=0,M=0;M<=_;M++){var L=D+(this.i(M)&65535)+(y.i(M)&65535),P=(L>>>16)+(this.i(M)>>>16)+(y.i(M)>>>16);D=P>>>16,L&=65535,P&=65535,v[M]=P<<16|L}return new o(v,v[v.length-1]&-2147483648?-1:0)};function O(y,_){return y.add(N(_))}t.j=function(y){if(E(this)||E(y))return d;if(A(this))return A(y)?N(this).j(N(y)):N(N(this).j(y));if(A(y))return N(this.j(N(y)));if(0>this.l(p)&&0>y.l(p))return u(this.m()*y.m());for(var _=this.g.length+y.g.length,v=[],D=0;D<2*_;D++)v[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<y.g.length;M++){var L=this.i(D)>>>16,P=this.i(D)&65535,Te=y.i(M)>>>16,We=y.i(M)&65535;v[2*D+2*M]+=P*We,k(v,2*D+2*M),v[2*D+2*M+1]+=L*We,k(v,2*D+2*M+1),v[2*D+2*M+1]+=P*Te,k(v,2*D+2*M+1),v[2*D+2*M+2]+=L*Te,k(v,2*D+2*M+2)}for(D=0;D<_;D++)v[D]=v[2*D+1]<<16|v[2*D];for(D=_;D<2*_;D++)v[D]=0;return new o(v,0)};function k(y,_){for(;(y[_]&65535)!=y[_];)y[_+1]+=y[_]>>>16,y[_]&=65535,_++}function I(y,_){this.g=y,this.h=_}function S(y,_){if(E(_))throw Error("division by zero");if(E(y))return new I(d,d);if(A(y))return _=S(N(y),_),new I(N(_.g),N(_.h));if(A(_))return _=S(y,N(_)),new I(N(_.g),_.h);if(30<y.g.length){if(A(y)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,D=_;0>=D.l(y);)v=B(v),D=B(D);var M=V(v,1),L=V(D,1);for(D=V(D,2),v=V(v,2);!E(D);){var P=L.add(D);0>=P.l(y)&&(M=M.add(v),L=P),D=V(D,1),v=V(v,1)}return _=O(y,M.j(_)),new I(M,_)}for(M=d;0<=y.l(_);){for(v=Math.max(1,Math.floor(y.m()/_.m())),D=Math.ceil(Math.log(v)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=u(v),P=L.j(_);A(P)||0<P.l(y);)v-=D,L=u(v),P=L.j(_);E(L)&&(L=m),M=M.add(L),y=O(y,P)}return new I(M,y)}t.A=function(y){return S(this,y).h},t.and=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],D=0;D<_;D++)v[D]=this.i(D)&y.i(D);return new o(v,this.h&y.h)},t.or=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],D=0;D<_;D++)v[D]=this.i(D)|y.i(D);return new o(v,this.h|y.h)},t.xor=function(y){for(var _=Math.max(this.g.length,y.g.length),v=[],D=0;D<_;D++)v[D]=this.i(D)^y.i(D);return new o(v,this.h^y.h)};function B(y){for(var _=y.g.length+1,v=[],D=0;D<_;D++)v[D]=y.i(D)<<1|y.i(D-1)>>>31;return new o(v,y.h)}function V(y,_){var v=_>>5;_%=32;for(var D=y.g.length-v,M=[],L=0;L<D;L++)M[L]=0<_?y.i(L+v)>>>_|y.i(L+v+1)<<32-_:y.i(L+v);return new o(M,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,V0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Bs=o}).apply(typeof Fg<"u"?Fg:typeof self<"u"?self:typeof window<"u"?window:{});var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F0,U0,Io,$0,pl,mh,B0,j0,H0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rl=="object"&&rl];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var g=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in g))break e;g=g[j]}c=c[c.length-1],w=g[c],f=f(w),f!=w&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,w=!1,j={next:function(){if(!w&&g<c.length){var q=g++;return{value:f(q,c[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(f,j)}}return function(){return c.apply(f,arguments)}}function m(c,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function p(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function E(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(w,j,q){for(var ne=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ne[Ze-2]=arguments[Ze];return f.prototype[j].apply(w,ne)}}function A(c){const f=c.length;if(0<f){const g=Array(f);for(let w=0;w<f;w++)g[w]=c[w];return g}return[]}function N(c,f){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const j=c.length||0,q=w.length||0;c.length=j+q;for(let ne=0;ne<q;ne++)c[j+ne]=w[ne]}else c.push(w)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function S(c){return S[" "](c),c}S[" "]=function(){};var B=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(c,f,g){for(const w in c)f.call(g,c[w],w,c)}function y(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function _(c){const f={};for(const g in c)f[g]=c[g];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,f){let g,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(g in w)c[g]=w[g];for(let q=0;q<v.length;q++)g=v[q],Object.prototype.hasOwnProperty.call(w,g)&&(c[g]=w[g])}}function M(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function L(c){a.setTimeout(()=>{throw c},0)}function P(){var c=ot;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Te{constructor(){this.h=this.g=null}add(f,g){const w=We.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var We=new O(()=>new Re,c=>c.reset());class Re{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,Ie=!1,ot=new Te,mt=()=>{const c=a.Promise.resolve(void 0);Ce=()=>{c.then(Je)}};var Je=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(g){L(g)}var f=We;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}Ie=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function St(c,f){if(He.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(B){e:{try{S(f.nodeName);var j=!0;break e}catch{}j=!1}j||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ut[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&St.aa.h.call(this)}}E(St,He);var ut={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),ie=0;function re(c,f,g,w,j){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=j,this.key=++ie,this.da=this.fa=!1}function ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function De(c){this.src=c,this.g={},this.h=0}De.prototype.add=function(c,f,g,w,j){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ne=R(c,f,w,j);return-1<ne?(f=c[ne],g||(f.fa=!1)):(f=new re(f,this.src,q,!!w,j),f.fa=g,c.push(f)),f};function Be(c,f){var g=f.type;if(g in c.g){var w=c.g[g],j=Array.prototype.indexOf.call(w,f,void 0),q;(q=0<=j)&&Array.prototype.splice.call(w,j,1),q&&(ce(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function R(c,f,g,w){for(var j=0;j<c.length;++j){var q=c[j];if(!q.da&&q.listener==f&&q.capture==!!g&&q.ha==w)return j}return-1}var T="closure_lm_"+(1e6*Math.random()|0),$={};function Y(c,f,g,w,j){if(Array.isArray(f)){for(var q=0;q<f.length;q++)Y(c,f[q],g,w,j);return null}return g=Q(g),c&&c[z]?c.K(f,g,u(w)?!!w.capture:!!w,j):G(c,f,g,!1,w,j)}function G(c,f,g,w,j,q){if(!f)throw Error("Invalid event type");var ne=u(j)?!!j.capture:!!j,Ze=K(c);if(Ze||(c[T]=Ze=new De(c)),g=Ze.add(f,g,w,ne,q),g.proxy)return g;if(w=J(),g.proxy=w,w.src=c,w.listener=g,c.addEventListener)Mt||(j=ne),j===void 0&&(j=!1),c.addEventListener(f.toString(),w,j);else if(c.attachEvent)c.attachEvent(C(f.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function J(){function c(g){return f.call(c.src,c.listener,g)}const f=F;return c}function se(c,f,g,w,j){if(Array.isArray(f))for(var q=0;q<f.length;q++)se(c,f[q],g,w,j);else w=u(w)?!!w.capture:!!w,g=Q(g),c&&c[z]?(c=c.i,f=String(f).toString(),f in c.g&&(q=c.g[f],g=R(q,g,w,j),-1<g&&(ce(q[g]),Array.prototype.splice.call(q,g,1),q.length==0&&(delete c.g[f],c.h--)))):c&&(c=K(c))&&(f=c.g[f.toString()],c=-1,f&&(c=R(f,g,w,j)),(g=-1<c?f[c]:null)&&b(g))}function b(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[z])Be(f.i,c);else{var g=c.type,w=c.proxy;f.removeEventListener?f.removeEventListener(g,w,c.capture):f.detachEvent?f.detachEvent(C(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=K(f))?(Be(g,c),g.h==0&&(g.src=null,f[T]=null)):ce(c)}}}function C(c){return c in $?$[c]:$[c]="on"+c}function F(c,f){if(c.da)c=!0;else{f=new St(f,this);var g=c.listener,w=c.ha||c.src;c.fa&&b(c),c=g.call(w,f)}return c}function K(c){return c=c[T],c instanceof De?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function U(){Ue.call(this),this.i=new De(this),this.M=this,this.F=null}E(U,Ue),U.prototype[z]=!0,U.prototype.removeEventListener=function(c,f,g,w){se(this,c,f,g,w)};function H(c,f){var g,w=c.F;if(w)for(g=[];w;w=w.F)g.push(w);if(c=c.M,w=f.type||f,typeof f=="string")f=new He(f,c);else if(f instanceof He)f.target=f.target||c;else{var j=f;f=new He(w,c),D(f,j)}if(j=!0,g)for(var q=g.length-1;0<=q;q--){var ne=f.g=g[q];j=de(ne,w,!0,f)&&j}if(ne=f.g=c,j=de(ne,w,!0,f)&&j,j=de(ne,w,!1,f)&&j,g)for(q=0;q<g.length;q++)ne=f.g=g[q],j=de(ne,w,!1,f)&&j}U.prototype.N=function(){if(U.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],w=0;w<g.length;w++)ce(g[w]);delete c.g[f],c.h--}}this.F=null},U.prototype.K=function(c,f,g,w){return this.i.add(String(c),f,!1,g,w)},U.prototype.L=function(c,f,g,w){return this.i.add(String(c),f,!0,g,w)};function de(c,f,g,w){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var j=!0,q=0;q<f.length;++q){var ne=f[q];if(ne&&!ne.da&&ne.capture==g){var Ze=ne.listener,xt=ne.ha||ne.src;ne.fa&&Be(c.i,ne),j=Ze.call(xt,w)!==!1&&j}}return j&&!w.defaultPrevented}function me(c,f,g){if(typeof c=="function")g&&(c=m(c,g));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function ze(c){c.g=me(()=>{c.g=null,c.i&&(c.i=!1,ze(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Pt extends Ue{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(c){Ue.call(this),this.h=c,this.g={}}E(Et,Ue);var Ts=[];function or(c){V(c.g,function(f,g){this.g.hasOwnProperty(g)&&b(f)},c),c.g={}}Et.prototype.N=function(){Et.aa.N.call(this),or(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=a.JSON.stringify,en=a.JSON.parse,Cn=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ei(){}ei.prototype.h=null;function Ff(c){return c.h||(c.h=c.i())}function Uf(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yc(){He.call(this,"d")}E(Yc,He);function Qc(){He.call(this,"c")}E(Qc,He);var bs={},$f=null;function La(){return $f=$f||new U}bs.La="serverreachability";function Bf(c){He.call(this,bs.La,c)}E(Bf,He);function eo(c){const f=La();H(f,new Bf(f))}bs.STAT_EVENT="statevent";function jf(c,f){He.call(this,bs.STAT_EVENT,c),this.stat=f}E(jf,He);function tn(c){const f=La();H(f,new jf(f,c))}bs.Ma="timingevent";function Hf(c,f){He.call(this,bs.Ma,c),this.size=f}E(Hf,He);function to(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function $E(c,f,g,w,j,q){c.info(function(){if(c.g)if(q)for(var ne="",Ze=q.split("&"),xt=0;xt<Ze.length;xt++){var qe=Ze[xt].split("=");if(1<qe.length){var qt=qe[0];qe=qe[1];var Wt=qt.split("_");ne=2<=Wt.length&&Wt[1]=="type"?ne+(qt+"="+qe+"&"):ne+(qt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+f+`
`+g+`
`+ne})}function BE(c,f,g,w,j,q,ne){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+f+`
`+g+`
`+q+" "+ne})}function ti(c,f,g,w){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+HE(c,g)+(w?" "+w:"")})}function jE(c,f){c.info(function(){return"TIMEOUT: "+f})}no.prototype.info=function(){};function HE(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var w=g[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var q=j[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<j.length;ne++)j[ne]=""}}}}return Zs(g)}catch{return f}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jc;function xa(){}E(xa,ei),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},Jc=new xa;function Lr(c,f,g,w){this.j=c,this.i=f,this.l=g,this.R=w||1,this.U=new Et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wf}function Wf(){this.i=null,this.g="",this.h=!1}var Kf={},Xc={};function Zc(c,f,g){c.L=1,c.v=$a(ar(f)),c.m=g,c.P=!0,Gf(c,null)}function Gf(c,f){c.F=Date.now(),Va(c),c.A=ar(c.v);var g=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),am(g.i,"t",w),c.C=0,g=c.j.J,c.h=new Wf,c.g=Am(c.j,g?f:null,!c.m),0<c.O&&(c.M=new Pt(m(c.Y,c,c.g),c.O)),f=c.U,g=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ts[0]=j.toString()),j=Ts);for(var q=0;q<j.length;q++){var ne=Y(g,j[q],w||f.handleEvent,!1,f.h||f);if(!ne)break;f.g[ne.key]=ne}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),eo(),$E(c.i,c.u,c.A,c.l,c.R,c.m)}Lr.prototype.ca=function(c){c=c.target;const f=this.M;f&&lr(c)==3?f.j():this.Y(c)},Lr.prototype.Y=function(c){try{if(c==this.g)e:{const Wt=lr(this.g);var f=this.g.Ba();const si=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||mm(this.g)))){this.J||Wt!=4||f==7||(f==8||0>=si?eo(3):eo(2)),eu(this);var g=this.g.Z();this.X=g;t:if(zf(this)){var w=mm(this.g);c="";var j=w.length,q=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),ro(this);var ne="";break t}this.h.i=new a.TextDecoder}for(f=0;f<j;f++)this.h.h=!0,c+=this.h.i.decode(w[f],{stream:!(q&&f==j-1)});w.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=g==200,BE(this.i,this.u,this.A,this.l,this.R,Wt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,xt=this.g;if((Ze=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ze)){var qe=Ze;break t}}qe=null}if(g=qe)ti(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,g);else{this.o=!1,this.s=3,tn(12),As(this),ro(this);break e}}if(this.P){g=!0;let On;for(;!this.J&&this.C<ne.length;)if(On=qE(this,ne),On==Xc){Wt==4&&(this.s=4,tn(14),g=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Kf){this.s=4,tn(15),ti(this.i,this.l,ne,"[Invalid Chunk]"),g=!1;break}else ti(this.i,this.l,On,null),tu(this,On);if(zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||ne.length!=0||this.h.h||(this.s=1,tn(16),g=!1),this.o=this.o&&g,!g)ti(this.i,this.l,ne,"[Invalid Chunked Response]"),As(this),ro(this);else if(0<ne.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),au(qt),qt.M=!0,tn(11))}}else ti(this.i,this.l,ne,null),tu(this,ne);Wt==4&&As(this),this.o&&!this.J&&(Wt==4?Im(this.j,this):(this.o=!1,Va(this)))}else aI(this.g),g==400&&0<ne.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),As(this),ro(this)}}}catch{}finally{}};function zf(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qE(c,f){var g=c.C,w=f.indexOf(`
`,g);return w==-1?Xc:(g=Number(f.substring(g,w)),isNaN(g)?Kf:(w+=1,w+g>f.length?Xc:(f=f.slice(w,w+g),c.C=w+g,f)))}Lr.prototype.cancel=function(){this.J=!0,As(this)};function Va(c){c.S=Date.now()+c.I,Yf(c,c.I)}function Yf(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=to(m(c.ba,c),f)}function eu(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Lr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(jE(this.i,this.A),this.L!=2&&(eo(),tn(17)),As(this),this.s=2,ro(this)):Yf(this,this.S-c)};function ro(c){c.j.G==0||c.J||Im(c.j,c)}function As(c){eu(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,or(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function tu(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||nu(g.h,c))){if(!c.K&&nu(g.h,c)&&g.G==3){try{var w=g.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Wa(g),Ha(g);else break e;ou(g),tn(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=to(m(g.Za,g),6e3));if(1>=Xf(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ss(g,11)}else if((c.K||g.g==c)&&Wa(g),!k(f))for(j=g.Da.g.parse(f),f=0;f<j.length;f++){let qe=j[f];if(g.T=qe[0],qe=qe[1],g.G==2)if(qe[0]=="c"){g.K=qe[1],g.ia=qe[2];const qt=qe[3];qt!=null&&(g.la=qt,g.j.info("VER="+g.la));const Wt=qe[4];Wt!=null&&(g.Aa=Wt,g.j.info("SVER="+g.Aa));const si=qe[5];si!=null&&typeof si=="number"&&0<si&&(w=1.5*si,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const On=c.g;if(On){const Ga=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var q=w.h;q.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ru(q,q.h),q.h=null))}if(w.D){const lu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(w.ya=lu,rt(w.I,w.D,lu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var ne=c;if(w.qa=bm(w,w.J?w.ia:null,w.W),ne.K){Zf(w.h,ne);var Ze=ne,xt=w.L;xt&&(Ze.I=xt),Ze.B&&(eu(Ze),Va(Ze)),w.g=ne}else vm(w);0<g.i.length&&qa(g)}else qe[0]!="stop"&&qe[0]!="close"||Ss(g,7);else g.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Ss(g,7):iu(g):qe[0]!="noop"&&g.l&&g.l.ta(qe),g.v=0)}}eo(4)}catch{}}var WE=class{constructor(c,f){this.g=c,this.map=f}};function Qf(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jf(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xf(c){return c.h?1:c.g?c.g.size:0}function nu(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function ru(c,f){c.g?c.g.add(f):c.h=f}function Zf(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Qf.prototype.cancel=function(){if(this.i=em(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function em(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return A(c.i)}function KE(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,w=0;w<g;w++)f.push(c[w]);return f}f=[],g=0;for(w in c)f[g++]=c[w];return f}function GE(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const w in c)f[g++]=w;return f}}}function tm(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=GE(c),w=KE(c),j=w.length,q=0;q<j;q++)f.call(void 0,w[q],g&&g[q],c)}var nm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zE(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var w=c[g].indexOf("="),j=null;if(0<=w){var q=c[g].substring(0,w);j=c[g].substring(w+1)}else q=c[g];f(q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Cs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Cs){this.h=c.h,Fa(this,c.j),this.o=c.o,this.g=c.g,Ua(this,c.s),this.l=c.l;var f=c.i,g=new oo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),rm(this,g),this.m=c.m}else c&&(f=String(c).match(nm))?(this.h=!1,Fa(this,f[1]||"",!0),this.o=so(f[2]||""),this.g=so(f[3]||"",!0),Ua(this,f[4]),this.l=so(f[5]||"",!0),rm(this,f[6]||"",!0),this.m=so(f[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}Cs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(io(f,sm,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(io(f,sm,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(io(g,g.charAt(0)=="/"?JE:QE,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",io(g,ZE)),c.join("")};function ar(c){return new Cs(c)}function Fa(c,f,g){c.j=g?so(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ua(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function rm(c,f,g){f instanceof oo?(c.i=f,eI(c.i,c.h)):(g||(f=io(f,XE)),c.i=new oo(f,c.h))}function rt(c,f,g){c.i.set(f,g)}function $a(c){return rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function so(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function io(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,YE),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sm=/[#\/\?@]/g,QE=/[#\?:]/g,JE=/[#\?]/g,XE=/[#\?@]/g,ZE=/#/g;function oo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Mr(c){c.g||(c.g=new Map,c.h=0,c.i&&zE(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=oo.prototype,t.add=function(c,f){Mr(this),this.i=null,c=ni(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function im(c,f){Mr(c),f=ni(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function om(c,f){return Mr(c),f=ni(c,f),c.g.has(f)}t.forEach=function(c,f){Mr(this),this.g.forEach(function(g,w){g.forEach(function(j){c.call(f,j,w,this)},this)},this)},t.na=function(){Mr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let w=0;w<f.length;w++){const j=c[w];for(let q=0;q<j.length;q++)g.push(f[w])}return g},t.V=function(c){Mr(this);let f=[];if(typeof c=="string")om(this,c)&&(f=f.concat(this.g.get(ni(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Mr(this),this.i=null,c=ni(this,c),om(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function am(c,f,g){im(c,f),0<g.length&&(c.i=null,c.g.set(ni(c,f),A(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var w=f[g];const q=encodeURIComponent(String(w)),ne=this.V(w);for(w=0;w<ne.length;w++){var j=q;ne[w]!==""&&(j+="="+encodeURIComponent(String(ne[w]))),c.push(j)}}return this.i=c.join("&")};function ni(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function eI(c,f){f&&!c.j&&(Mr(c),c.i=null,c.g.forEach(function(g,w){var j=w.toLowerCase();w!=j&&(im(this,w),am(this,j,g))},c)),c.j=f}function tI(c,f){const g=new no;if(a.Image){const w=new Image;w.onload=p(xr,g,"TestLoadImage: loaded",!0,f,w),w.onerror=p(xr,g,"TestLoadImage: error",!1,f,w),w.onabort=p(xr,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=p(xr,g,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else f(!1)}function nI(c,f){const g=new no,w=new AbortController,j=setTimeout(()=>{w.abort(),xr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:w.signal}).then(q=>{clearTimeout(j),q.ok?xr(g,"TestPingServer: ok",!0,f):xr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),xr(g,"TestPingServer: error",!1,f)})}function xr(c,f,g,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(g)}catch{}}function rI(){this.g=new Cn}function sI(c,f,g){const w=g||"";try{tm(c,function(j,q){let ne=j;u(j)&&(ne=Zs(j)),f.push(w+q+"="+encodeURIComponent(ne))})}catch(j){throw f.push(w+"type="+encodeURIComponent("_badmap")),j}}function ao(c){this.l=c.Ub||null,this.j=c.eb||!1}E(ao,ei),ao.prototype.g=function(){return new Ba(this.l,this.j)},ao.prototype.i=function(c){return function(){return c}}({});function Ba(c,f){U.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Ba,U),t=Ba.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,co(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lm(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lm(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?lo(this):co(this),this.readyState==3&&lm(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,lo(this))},t.Qa=function(c){this.g&&(this.response=c,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,co(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function co(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function cm(c){let f="";return V(c,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function su(c,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=cm(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):rt(c,f,g))}function ft(c){U.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ft,U);var iI=/^https?$/i,oI=["POST","PUT"];t=ft.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jc.g(),this.v=this.o?Ff(this.o):Ff(Jc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(q){um(this,q);return}if(c=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)g.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())g.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(q=>q.toLowerCase()=="content-type"),j=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oI,f,void 0))||w||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of g)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fm(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){um(this,q)}};function um(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,hm(c),ja(c)}function hm(c){c.A||(c.A=!0,H(c,"complete"),H(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,H(this,"complete"),H(this,"abort"),ja(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ja(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dm(this):this.bb())},t.bb=function(){dm(this)};function dm(c){if(c.h&&typeof o<"u"&&(!c.v[1]||lr(c)!=4||c.Z()!=2)){if(c.u&&lr(c)==4)me(c.Ea,0,c);else if(H(c,"readystatechange"),lr(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=ne===0){var j=String(c.D).match(nm)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),w=!iI.test(j?j.toLowerCase():"")}g=w}if(g)H(c,"complete"),H(c,"success");else{c.m=6;try{var q=2<lr(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",hm(c)}}finally{ja(c)}}}}function ja(c,f){if(c.g){fm(c);const g=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||H(c,"ready");try{g.onreadystatechange=w}catch{}}}function fm(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),en(f)}};function mm(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aI(c){const f={};c=(c.g&&2<=lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(k(c[w]))continue;var g=M(c[w]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const q=f[j]||[];f[j]=q,q.push(g)}y(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function gm(c){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uo("baseRetryDelayMs",5e3,c),this.cb=uo("retryDelaySeedMs",1e4,c),this.Wa=uo("forwardChannelMaxRetries",2,c),this.wa=uo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qf(c&&c.concurrentRequestLimit),this.Da=new rI,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gm.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,w){tn(0),this.W=c,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=bm(this,null,this.W),qa(this)};function iu(c){if(pm(c),c.G==3){var f=c.U++,g=ar(c.I);if(rt(g,"SID",c.K),rt(g,"RID",f),rt(g,"TYPE","terminate"),ho(c,g),f=new Lr(c,c.j,f),f.L=2,f.v=$a(ar(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Am(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Va(f)}Tm(c)}function Ha(c){c.g&&(au(c),c.g.cancel(),c.g=null)}function pm(c){Ha(c),c.u&&(a.clearTimeout(c.u),c.u=null),Wa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qa(c){if(!Jf(c.h)&&!c.s){c.s=!0;var f=c.Ga;Ce||mt(),Ie||(Ce(),Ie=!0),ot.add(f,c),c.B=0}}function lI(c,f){return Xf(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=to(m(c.Ga,c,f),wm(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Lr(this,this.j,c);let q=this.o;if(this.S&&(q?(q=_(q),D(q,this.S)):q=this.S),this.m!==null||this.O||(j.H=q,q=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=ym(this,j,f),g=ar(this.I),rt(g,"RID",c),rt(g,"CVER",22),this.D&&rt(g,"X-HTTP-Session-Id",this.D),ho(this,g),q&&(this.O?f="headers="+encodeURIComponent(String(cm(q)))+"&"+f:this.m&&su(g,this.m,q)),ru(this.h,j),this.Ua&&rt(g,"TYPE","init"),this.P?(rt(g,"$req",f),rt(g,"SID","null"),j.T=!0,Zc(j,g,null)):Zc(j,g,f),this.G=2}}else this.G==3&&(c?_m(this,c):this.i.length==0||Jf(this.h)||_m(this))};function _m(c,f){var g;f?g=f.l:g=c.U++;const w=ar(c.I);rt(w,"SID",c.K),rt(w,"RID",g),rt(w,"AID",c.T),ho(c,w),c.m&&c.o&&su(w,c.m,c.o),g=new Lr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=ym(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ru(c.h,g),Zc(g,w,f)}function ho(c,f){c.H&&V(c.H,function(g,w){rt(f,w,g)}),c.l&&tm({},function(g,w){rt(f,w,g)})}function ym(c,f,g){g=Math.min(c.i.length,g);var w=c.l?m(c.l.Na,c.l,c):null;e:{var j=c.i;let q=-1;for(;;){const ne=["count="+g];q==-1?0<g?(q=j[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let Ze=!0;for(let xt=0;xt<g;xt++){let qe=j[xt].g;const qt=j[xt].map;if(qe-=q,0>qe)q=Math.max(0,j[xt].g-100),Ze=!1;else try{sI(qt,ne,"req"+qe+"_")}catch{w&&w(qt)}}if(Ze){w=ne.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,w}function vm(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Ce||mt(),Ie||(Ce(),Ie=!0),ot.add(f,c),c.v=0}}function ou(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=to(m(c.Fa,c),wm(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Em(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=to(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Ha(this),Em(this))};function au(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Em(c){c.g=new Lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=ar(c.qa);rt(f,"RID","rpc"),rt(f,"SID",c.K),rt(f,"AID",c.T),rt(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&rt(f,"TO",c.ja),rt(f,"TYPE","xmlhttp"),ho(c,f),c.m&&c.o&&su(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=$a(ar(f)),g.m=null,g.P=!0,Gf(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Ha(this),ou(this),tn(19))};function Wa(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Im(c,f){var g=null;if(c.g==f){Wa(c),au(c),c.g=null;var w=2}else if(nu(c.h,f))g=f.D,Zf(c.h,f),w=1;else return;if(c.G!=0){if(f.o)if(w==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var j=c.B;w=La(),H(w,new Hf(w,g)),qa(c)}else vm(c);else if(j=f.s,j==3||j==0&&0<f.X||!(w==1&&lI(c,f)||w==2&&ou(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),j){case 1:Ss(c,5);break;case 4:Ss(c,10);break;case 3:Ss(c,6);break;default:Ss(c,2)}}}function wm(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function Ss(c,f){if(c.j.info("Error code "+f),f==2){var g=m(c.fb,c),w=c.Xa;const j=!w;w=new Cs(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fa(w,"https"),$a(w),j?tI(w.toString(),g):nI(w.toString(),g)}else tn(2);c.G=0,c.l&&c.l.sa(f),Tm(c),pm(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Tm(c){if(c.G=0,c.ka=[],c.l){const f=em(c.h);(f.length!=0||c.i.length!=0)&&(N(c.ka,f),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function bm(c,f,g){var w=g instanceof Cs?ar(g):new Cs(g);if(w.g!="")f&&(w.g=f+"."+w.g),Ua(w,w.s);else{var j=a.location;w=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;var q=new Cs(null);w&&Fa(q,w),f&&(q.g=f),j&&Ua(q,j),g&&(q.l=g),w=q}return g=c.D,f=c.ya,g&&f&&rt(w,g,f),rt(w,"VER",c.la),ho(c,w),w}function Am(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ft(new ao({eb:g})):new ft(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cm(){}t=Cm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ka(){}Ka.prototype.g=function(c,f){return new vn(c,f)};function vn(c,f){U.call(this),this.g=new gm(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!k(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ri(this)}E(vn,U),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){iu(this.g)},vn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Zs(c),c=g);f.i.push(new WE(f.Ya++,c)),f.G==3&&qa(f)},vn.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,vn.aa.N.call(this)};function Sm(c){Yc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(Sm,Yc);function Pm(){Qc.call(this),this.status=1}E(Pm,Qc);function ri(c){this.g=c}E(ri,Cm),ri.prototype.ua=function(){H(this.g,"a")},ri.prototype.ta=function(c){H(this.g,new Sm(c))},ri.prototype.sa=function(c){H(this.g,new Pm)},ri.prototype.ra=function(){H(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,H0=function(){return new Ka},j0=function(){return La()},B0=bs,mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,pl=Ma,qf.COMPLETE="complete",$0=qf,Uf.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",U.prototype.listen=U.prototype.K,Io=Uf,U0=ao,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,F0=ft}).apply(typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{});const Ug="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Dd("@firebase/firestore");function go(){return Ks.logLevel}function ue(t,...e){if(Ks.logLevel<=Ve.DEBUG){const n=e.map(Md);Ks.debug(`Firestore (${Gi}): ${t}`,...n)}}function Ar(t,...e){if(Ks.logLevel<=Ve.ERROR){const n=e.map(Md);Ks.error(`Firestore (${Gi}): ${t}`,...n)}}function ki(t,...e){if(Ks.logLevel<=Ve.WARN){const n=e.map(Md);Ks.warn(`Firestore (${Gi}): ${t}`,...n)}}function Md(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: `+t;throw Ar(e),new Error(e)}function tt(t,e){t||we()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class cS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uS{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new q0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new zt(e)}}class hS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new fS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function Ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new bt(0,0))}static max(){return new Pe(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ta.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ta?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends ta{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const pS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends ta{construct(e,n,r){return new Ut(e,n,r)}static isValidIdentifier(e){return pS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(lt.fromString(e))}static fromName(e){return new pe(lt.fromString(e).popFirst(5))}static empty(){return new pe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new lt(e.slice()))}}function _S(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new us(s,pe.empty(),e)}function yS(t){return new us(t.readTime,t.key,-1)}class us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new us(Pe.min(),pe.empty(),-1)}static max(){return new us(Pe.max(),pe.empty(),-1)}}function vS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==ES)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(s=>s?Z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new Z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function wS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xd.oe=-1;function bc(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function TS(t){return typeof t=="number"&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Vt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sl(this.root,e,this.comparator,!0)}}class sl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=s??Vt.EMPTY,this.right=i??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bg(this.data.getIterator())}getIteratorFrom(e){return new Bg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class Bg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new $t(Ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new G0("Invalid base64 string: "+i):i}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const bS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(tt(!!t),typeof t=="string"){let e=0;const n=bS.exec(t);if(tt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gs(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fd(t){const e=t.mapValue.fields.__previous_value__;return Vd(e)?Fd(e):e}function na(t){const e=hs(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vd(t)?4:CS(t)?9007199254740991:10:we()}function nr(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return na(t).isEqual(na(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hs(s.timestampValue),a=hs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Gs(s.bytesValue).isEqual(Gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return yt(s.geoPointValue.latitude)===yt(i.geoPointValue.latitude)&&yt(s.geoPointValue.longitude)===yt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return yt(s.integerValue)===yt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=yt(s.doubleValue),a=yt(i.doubleValue);return o===a?Fl(o)===Fl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ni(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if($g(o)!==$g(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return we()}}function sa(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Di(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=yt(i.integerValue||i.doubleValue),l=yt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return jg(t.timestampValue,e.timestampValue);case 4:return jg(na(t),na(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Gs(i),l=Gs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ke(a[u],l[u]);if(h!==0)return h}return Ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ke(yt(i.latitude),yt(o.latitude));return a!==0?a:Ke(yt(i.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const h=Di(a[u],l[u]);if(h)return h}return Ke(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===il.mapValue&&o===il.mapValue)return 0;if(i===il.mapValue)return 1;if(o===il.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const m=Ke(l[d],h[d]);if(m!==0)return m;const p=Di(a[l[d]],u[h[d]]);if(p!==0)return p}return Ke(l.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=hs(t),r=hs(e),s=Ke(n.seconds,r.seconds);return s!==0?s:Ke(n.nanos,r.nanos)}function Oi(t){return gh(t)}function gh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=gh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${gh(n.fields[o])}`;return s+"}"}(t.mapValue):we()}function ph(t){return!!t&&"integerValue"in t}function Ud(t){return!!t&&"arrayValue"in t}function Hg(t){return!!t&&"nullValue"in t}function qg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _l(t){return!!t&&"mapValue"in t}function Vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(n)}setAll(e){let n=Ut.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Vo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_l(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Js(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pn(Vo(this.value))}}function z0(t){const e=[];return Js(t.fields,(n,r)=>{const s=new Ut([n]);if(_l(r)){const i=z0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,Pe.min(),Pe.min(),Pe.min(),pn.empty(),0)}static newFoundDocument(e,n,r,s){return new Qt(e,1,n,Pe.min(),r,s,0)}static newNoDocument(e,n){return new Qt(e,2,n,Pe.min(),Pe.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Pe.min(),Pe.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.position=e,this.inclusive=n}}function Wg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=Di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function SS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{}class wt extends Y0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RS(e,n,r):n==="array-contains"?new DS(e,r):n==="in"?new OS(e,r):n==="not-in"?new LS(e,r):n==="array-contains-any"?new MS(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kS(e,r):new NS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Di(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(Di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends Y0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return Q0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Q0(t){return t.op==="and"}function J0(t){return PS(t)&&Q0(t)}function PS(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function _h(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+Oi(t.value);if(J0(t))return t.filters.map(e=>_h(e)).join(",");{const e=t.filters.map(n=>_h(n)).join(",");return`${t.op}(${e})`}}function X0(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&X0(o,s.filters[a]),!0):!1}(t,e):void we()}function Z0(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${Oi(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(Z0).join(" ,")+"}"}(t):"Filter"}class RS extends wt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class kS extends wt{constructor(e,n){super(e,"in",n),this.keys=ev("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NS extends wt{constructor(e,n){super(e,"not-in",n),this.keys=ev("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ev(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class DS extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ud(n)&&sa(n.arrayValue,this.value)}}class OS extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}}class LS extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sa(this.value.arrayValue,n)}}class MS extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Gg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xS(t,e,n,r,s,i,o)}function $d(t){const e=ke(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),e.ue=n}return e.ue}function Bd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!X0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kg(t.startAt,e.startAt)&&Kg(t.endAt,e.endAt)}function yh(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VS(t,e,n,r,s,i,o,a){return new Ac(t,e,n,r,s,i,o,a)}function Cc(t){return new Ac(t)}function zg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FS(t){return t.collectionGroup!==null}function Fo(t){const e=ke(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $t(Ut.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $l(i,r))}),n.has(Ut.keyField().canonicalString())||e.ce.push(new $l(Ut.keyField(),r))}return e.ce}function Jn(t){const e=ke(t);return e.le||(e.le=US(e,Fo(t))),e.le}function US(t,e){if(t.limitType==="F")return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $l(s.field,i)});const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vh(t,e,n){return new Ac(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sc(t,e){return Bd(Jn(t),Jn(e))&&t.limitType===e.limitType}function tv(t){return`${$d(Jn(t))}|lt:${t.limitType}`}function oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Z0(s)).join(", ")}]`),bc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Oi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Oi(s)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function Pc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Fo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=Wg(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Fo(r),s)||r.endAt&&!function(o,a,l){const u=Wg(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Fo(r),s))}(t,e)}function $S(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nv(t){return(e,n)=>{let r=!1;for(const s of Fo(t)){const i=BS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BS(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Di(l,u):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return K0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new dt(pe.comparator);function Cr(){return jS}const rv=new dt(pe.comparator);function wo(...t){let e=rv;for(const n of t)e=e.insert(n.key,n);return e}function sv(t){let e=rv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return Uo()}function iv(){return Uo()}function Uo(){return new zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const HS=new dt(pe.comparator),qS=new $t(pe.comparator);function Me(...t){let e=qS;for(const n of t)e=e.add(n);return e}const WS=new $t(Ke);function KS(){return WS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function av(t){return{integerValue:""+t}}function GS(t,e){return TS(e)?av(e):ov(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this._=void 0}}function zS(t,e,n){return t instanceof Bl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vd(i)&&(i=Fd(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ia?cv(t,e):t instanceof oa?uv(t,e):function(s,i){const o=lv(s,i),a=Yg(o)+Yg(s.Pe);return ph(o)&&ph(s.Pe)?av(a):ov(s.serializer,a)}(t,e)}function YS(t,e,n){return t instanceof ia?cv(t,e):t instanceof oa?uv(t,e):n}function lv(t,e){return t instanceof jl?function(r){return ph(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bl extends Rc{}class ia extends Rc{constructor(e){super(),this.elements=e}}function cv(t,e){const n=hv(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class oa extends Rc{constructor(e){super(),this.elements=e}}function uv(t,e){let n=hv(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class jl extends Rc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Yg(t){return yt(t.integerValue||t.doubleValue)}function hv(t){return Ud(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ia&&s instanceof ia||r instanceof oa&&s instanceof oa?Ni(r.elements,s.elements,nr):r instanceof jl&&s instanceof jl?nr(r.Pe,s.Pe):r instanceof Bl&&s instanceof Bl}(t.transform,e.transform)}class JS{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kc{}function dv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jd(t.key,$n.none()):new Aa(t.key,t.data,$n.none());{const n=t.data,r=pn.empty();let s=new $t(Ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ys(t.key,r,new Tn(s.toArray()),$n.none())}}function XS(t,e,n){t instanceof Aa?function(s,i,o){const a=s.value.clone(),l=Jg(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(s,i,o){if(!yl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Jg(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(fv(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $o(t,e,n,r){return t instanceof Aa?function(i,o,a,l){if(!yl(i.precondition,o))return a;const u=i.value.clone(),h=Xg(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(i,o,a,l){if(!yl(i.precondition,o))return a;const u=Xg(i.fieldTransforms,l,o),h=o.data;return h.setAll(fv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return yl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ZS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=lv(r.transform,s||null);i!=null&&(n===null&&(n=pn.empty()),n.set(r.field,i))}return n||null}function Qg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ni(r,s,(i,o)=>QS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Aa extends kc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ys extends kc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jg(t,e,n){const r=new Map;tt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,YS(o,a,n[s]))}return r}function Xg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,zS(i,o,e))}return r}class jd extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eP extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$o(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$o(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=dv(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ni(this.mutations,e.mutations,(n,r)=>Qg(n,r))&&Ni(this.baseMutations,e.baseMutations,(n,r)=>Qg(n,r))}}class Hd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){tt(e.mutations.length===r.length);let s=function(){return HS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Hd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,$e;function sP(t){switch(t){default:return we();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function mv(t){if(t===void 0)return Ar("GRPC error has no .code"),X.UNKNOWN;switch(t){case _t.OK:return X.OK;case _t.CANCELLED:return X.CANCELLED;case _t.UNKNOWN:return X.UNKNOWN;case _t.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case _t.INTERNAL:return X.INTERNAL;case _t.UNAVAILABLE:return X.UNAVAILABLE;case _t.UNAUTHENTICATED:return X.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case _t.NOT_FOUND:return X.NOT_FOUND;case _t.ALREADY_EXISTS:return X.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return X.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case _t.ABORTED:return X.ABORTED;case _t.OUT_OF_RANGE:return X.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return X.UNIMPLEMENTED;case _t.DATA_LOSS:return X.DATA_LOSS;default:return we()}}($e=_t||(_t={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Bs([4294967295,4294967295],0);function Zg(t){const e=iP().encode(t),n=new V0;return n.update(e),new Uint8Array(n.digest())}function ep(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bs([n,r],0),new Bs([s,i],0)]}class qd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bs.fromNumber(r)));return s.compare(oP)===1&&(s=new Bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Zg(e),[r,s]=ep(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qd(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Zg(e),[r,s]=ep(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nc(Pe.min(),s,new dt(Ke),Cr(),Me())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class gv{constructor(e,n){this.targetId=e,this.me=n}}class pv{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tp{constructor(){this.fe=0,this.ge=rp(),this.pe=Zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we()}}),new Ca(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=rp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=np(),this.Qe=new dt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yh(i))if(r===0){const o=new pe(i.path);this.Ue(n,o,Qt.newNoDocument(o,Pe.min()))}else tt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Gs(r).toUint8Array()}catch(l){if(l instanceof G0)return ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qd(o,s,i)}catch(l){return ki(l instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&yh(a.target)){const l=new pe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Qt.newNoDocument(l,e))}i.be&&(n.set(o,i.Ce()),i.ve())}});let r=Me();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Nc(e,n,this.Qe,this.ke,r);return this.ke=Cr(),this.qe=np(),this.Qe=new dt(Ke),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $t(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function np(){return new dt(pe.comparator)}function rp(){return new dt(pe.comparator)}const lP={asc:"ASCENDING",desc:"DESCENDING"},cP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uP={and:"AND",or:"OR"};class hP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Eh(t,e){return t.useProto3Json||bc(e)?e:{value:e}}function Hl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _v(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dP(t,e){return Hl(t,e.toTimestamp())}function Xn(t){return tt(!!t),Pe.fromTimestamp(function(n){const r=hs(n);return new bt(r.seconds,r.nanos)}(t))}function Wd(t,e){return Ih(t,e).canonicalString()}function Ih(t,e){const n=function(s){return new lt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yv(t){const e=lt.fromString(t);return tt(Tv(e)),e}function wh(t,e){return Wd(t.databaseId,e.path)}function Nu(t,e){const n=yv(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(Ev(n))}function vv(t,e){return Wd(t.databaseId,e)}function fP(t){const e=yv(t);return e.length===4?lt.emptyPath():Ev(e)}function Th(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ev(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sp(t,e,n){return{name:wh(t,e),fields:n.value.mapValue.fields}}function mP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(tt(h===void 0||typeof h=="string"),Zt.fromBase64String(h||"")):(tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Zt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?X.UNKNOWN:mv(u.code);return new fe(h,u.message||"")}(o);n=new pv(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nu(t,r.document.name),i=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):Pe.min(),a=new pn({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new vl(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nu(t,r.document),i=r.readTime?Xn(r.readTime):Pe.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new vl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nu(t,r.document),i=r.removedTargetIds||[];n=new vl([],i,s,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new rP(s,i),a=r.targetId;n=new gv(a,o)}}return n}function gP(t,e){let n;if(e instanceof Aa)n={update:sp(t,e.key,e.value)};else if(e instanceof jd)n={delete:wh(t,e.key)};else if(e instanceof ys)n={update:sp(t,e.key,e.data),updateMask:bP(e.fieldMask)};else{if(!(e instanceof eP))return we();n={verify:wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Bl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ia)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we()}(t,e.precondition)),n}function pP(t,e){return t&&t.length>0?(tt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xn(s.updateTime):Xn(i);return o.isEqual(Pe.min())&&(o=Xn(i)),new JS(o,s.transformResults||[])}(n,e))):[]}function _P(t,e){return{documents:[vv(t,e.path)]}}function yP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vv(t,s);const i=function(u){if(u.length!==0)return wv(rr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ai(m.field),direction:IP(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Eh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function vP(t){let e=fP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){tt(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=Iv(d);return m instanceof rr&&J0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(E){return new $l(li(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,bc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,p=d.values||[];return new Ul(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,p=d.values||[];return new Ul(p,m)}(n.endAt)),VS(e,s,o,i,a,"F",l,u)}function EP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Iv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=li(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=li(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=li(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=li(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(li(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>Iv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function IP(t){return lP[t]}function wP(t){return cP[t]}function TP(t){return uP[t]}function ai(t){return{fieldPath:t.canonicalString()}}function li(t){return Ut.fromServerFormat(t.fieldPath)}function wv(t){return t instanceof wt?function(n){if(n.op==="=="){if(qg(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NAN"}};if(Hg(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qg(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NAN"}};if(Hg(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ai(n.field),op:wP(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>wv(s));return r.length===1?r[0]:{compositeFilter:{op:TP(n.op),filters:r}}}(t):we()}function bP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,s,i=Pe.min(),o=Pe.min(),a=Zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.ct=e}}function CP(t){const e=vP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this._n=new PP}addToCollectionParentIndex(e,n){return this._n.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(us.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class PP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $t(lt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Li(0)}static Ln(){return new Li(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.changes=new zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&$o(r.mutation,s,Tn.empty(),bt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=Ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Cr();const o=Uo(),a=function(){return Uo()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ys)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),$o(h.mutation,u,h.mutation.getFieldMask(),bt.now())):o.set(u.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new kP(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Uo();let s=new dt((o,a)=>o-a),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Tn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Me()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=iv();h.forEach(m=>{if(!i.has(m)){const p=dv(n.get(m),r.get(m));p!==null&&d.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Z.resolve(Ms());let a=-1,l=i;return o.next(u=>Z.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Me())).next(h=>({batchId:a,changes:sv(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,i).next(a=>Z.forEach(a,l=>{const u=function(d,m){return new Ac(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Qt.newInvalidDocument(h)))});let a=wo();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&$o(h.mutation,u,Tn.empty(),bt.now()),Pc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:CP(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.overlays=new dt(pe.comparator),this.hr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ms();return Z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const s=Ms(),i=n.length+1,o=new pe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new dt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Ms(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ms(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return Z.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nP(n,r));let i=this.hr.get(n);i===void 0&&(i=Me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.Pr=new $t(kt.Ir),this.Tr=new $t(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new kt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new pe(new lt([])),r=new kt(n,e),s=new kt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new pe(new lt([])),r=new kt(n,e),s=new kt(n,e+1);let i=Me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new kt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return pe.comparator(e.key,n.key)||Ke(e.pr,n.pr)}static Er(e,n){return Ke(e.pr,n.pr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $t(kt.Ir)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return Z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),Z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(Ke);return n.forEach(s=>{const i=new kt(s,0),o=new kt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),Z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const o=new kt(new pe(i),0);let a=new $t(Ke);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.pr)),!0)},o),Z.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){tt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Z.forEach(n.mutations,s=>{const i=new kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new kt(n,0),s=this.wr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.vr=e,this.docs=function(){return new dt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cr();const o=n.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vS(yS(h),r)<=0||(s.has(h.key)||Pc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we()}Fr(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xP(this)}getSize(e){return Z.resolve(this.size)}}class xP extends RP{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.persistence=e,this.Mr=new zi(n=>$d(n),Bd),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kd,this.targetCount=0,this.Lr=Li.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Z.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.qn(n),Z.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Z.waitFor(i).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this.Br={},this.overlays={},this.kr=new xd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new VP(this),this.indexManager=new SP,this.remoteDocumentCache=function(s){return new MP(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new AP(n),this.$r=new DP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new LP(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new UP(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return Z.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class UP extends IS{constructor(e){super(),this.currentSequenceNumber=e}}class Gd{constructor(e){this.persistence=e,this.zr=new Kd,this.jr=null}static Hr(e){return new Gd(e)}get Jr(){if(this.jr)return this.jr;throw we()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Jr,r=>{const s=pe.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,Pe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Z.or([()=>Z.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return KA()?8:wS(jt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $P;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(go()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Z.resolve()):(go()<=Ve.DEBUG&&ue("QueryEngine","Query:",oi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(go()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):Z.resolve())}ji(e,n){if(zg(n))return Z.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vh(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,vh(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,s){return zg(n)||s.isEqual(Pe.min())?Z.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?Z.resolve(null):(go()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oi(n)),this.es(e,o,n,_S(s,-1)).next(a=>a))})}Zi(e,n){let r=new $t(nv(e));return n.forEach((s,i)=>{Pc(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return go()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",oi(n)),this.zi.getDocumentsMatchingQuery(e,n,us.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new dt(Ke),this.rs=new zi(i=>$d(i),Bd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function HP(t,e,n,r){return new jP(t,e,n,r)}async function bv(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Me();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function qP(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,m=d.keys();let p=Z.resolve();return m.forEach(E=>{p=p.next(()=>h.getEntry(l,E)).next(A=>{const N=u.docVersions.get(E);tt(N!==null),A.version.compareTo(N)<0&&(d.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Av(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function WP(t,e){const n=ke(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Qr.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(i,h.addedDocuments,d)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Zt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),s=s.insert(d,p),function(A,N,O){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,p,h)&&a.push(n.Qr.updateTargetData(i,p))});let l=Cr(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(KP(i,o,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!r.isEqual(Pe.min())){const h=n.Qr.getLastRemoteSnapshotVersion(i).next(d=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return Z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.ns=s,i))}function KP(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:s}})}function GP(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zP(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,Z.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function bh(t,e,n){const r=ke(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ba(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function ip(t,e,n){const r=ke(t);let s=Pe.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ke(l),m=d.rs.get(h);return m!==void 0?Z.resolve(d.ns.get(m)):d.Qr.getTargetData(u,h)}(r,o,Jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:Pe.min(),n?i:Me())).next(a=>(YP(r,$S(e),a),{documents:a,hs:i})))}function YP(t,e,n){let r=t.ss.get(e)||Pe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class op{constructor(){this.activeTargetIds=KS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QP{constructor(){this.no=new op,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new op,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=null;function Du(){return ol===null?ol=function(){return 268435456+Math.round(2147483648*Math.random())}():ol++,"0x"+ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class eR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${s}/databases/${i}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Do(){return!1}Co(n,r,s,i,o){const a=Du(),l=this.vo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,i,o),this.Mo(n,l,u,s).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ki("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}xo(n,r,s,i,o,a){return this.Co(n,r,s,i,o)}Fo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}vo(n,r){const s=XP[n];return`${this.wo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,s){const i=Du();return new Promise((o,a)=>{const l=new F0;l.setWithCredentials(!0),l.listenOnce($0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pl.NO_ERROR:const h=l.getResponseJson();ue(Kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case pl.TIMEOUT:ue(Kt,`RPC '${e}' ${i} timed out`),a(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:const d=l.getStatus();if(ue(Kt,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const E=function(N){const O=N.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(O)>=0?O:X.UNKNOWN}(p.status);a(new fe(E,p.message))}else a(new fe(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(X.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ue(Kt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);ue(Kt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Oo(e,n,r){const s=Du(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=H0(),a=j0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new U0({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");ue(Kt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let m=!1,p=!1;const E=new ZP({lo:N=>{p?ue(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||(ue(Kt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),ue(Kt,`RPC '${e}' stream ${s} sending:`,N),d.send(N))},ho:()=>d.close()}),A=(N,O,k)=>{N.listen(O,I=>{try{k(I)}catch(S){setTimeout(()=>{throw S},0)}})};return A(d,Io.EventType.OPEN,()=>{p||(ue(Kt,`RPC '${e}' stream ${s} transport opened.`),E.mo())}),A(d,Io.EventType.CLOSE,()=>{p||(p=!0,ue(Kt,`RPC '${e}' stream ${s} transport closed`),E.po())}),A(d,Io.EventType.ERROR,N=>{p||(p=!0,ki(Kt,`RPC '${e}' stream ${s} transport errored:`,N),E.po(new fe(X.UNAVAILABLE,"The operation could not be completed")))}),A(d,Io.EventType.MESSAGE,N=>{var O;if(!p){const k=N.data[0];tt(!!k);const I=k,S=I.error||((O=I[0])===null||O===void 0?void 0:O.error);if(S){ue(Kt,`RPC '${e}' stream ${s} received error:`,S);const B=S.status;let V=function(v){const D=_t[v];if(D!==void 0)return mv(D)}(B),y=S.message;V===void 0&&(V=X.INTERNAL,y="Unknown error status: "+B+" with message "+S.message),p=!0,E.po(new fe(V,y)),d.close()}else ue(Kt,`RPC '${e}' stream ${s} received:`,k),E.yo(k)}}),A(a,B0.STAT_EVENT,N=>{N.stat===mh.PROXY?ue(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===mh.NOPROXY&&ue(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function Ou(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return new hP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=s,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.Go=r,this.zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Cv(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===n&&this.u_(r,s)},r=>{e(()=>{const s=new fe(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tR extends Sv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=mP(this.serializer,e),r=function(i){if(!("targetChange"in i))return Pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?Xn(o.readTime):Pe.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Th(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yh(l)?{documents:_P(i,l)}:{query:yP(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_v(i,o.resumeToken);const u=Eh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Hl(i,o.snapshotVersion.toTimestamp());const u=Eh(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=EP(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Th(this.serializer),n.removeTarget=e,this.i_(n)}}class nR extends Sv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=pP(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.A_(r,n)}return tt(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Th(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gP(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(e,Ih(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(X.UNKNOWN,i.toString())})}xo(e,n,r,s,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Ih(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(X.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class sR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ar(n),this.y_=!1):ue("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io(o=>{r.enqueueAndForget(async()=>{Xs(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ke(l);u.M_.add(4),await Sa(u),u.N_.set("Unknown"),u.M_.delete(4),await Oc(u)}(this))})}),this.N_=new sR(r,s)}}async function Oc(t){if(Xs(t))for(const e of t.x_)await e(!0)}async function Sa(t){for(const e of t.x_)await e(!1)}function Pv(t,e){const n=ke(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Xd(n)?Jd(n):Yi(n).Xo()&&Qd(n,e))}function Yd(t,e){const n=ke(t),r=Yi(n);n.F_.delete(e),r.Xo()&&Rv(n,e),n.F_.size===0&&(r.Xo()?r.n_():Xs(n)&&n.N_.set("Unknown"))}function Qd(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yi(t).P_(e)}function Rv(t,e){t.L_.xe(e),Yi(t).I_(e)}function Jd(t){t.L_=new aP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yi(t).start(),t.N_.w_()}function Xd(t){return Xs(t)&&!Yi(t).Zo()&&t.F_.size>0}function Xs(t){return ke(t).M_.size===0}function kv(t){t.L_=void 0}async function oR(t){t.N_.set("Online")}async function aR(t){t.F_.forEach((e,n)=>{Qd(t,e)})}async function lR(t,e){kv(t),Xd(t)?(t.N_.D_(e),Jd(t)):t.N_.set("Unknown")}async function cR(t,e,n){if(t.N_.set("Online"),e instanceof pv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.F_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ql(t,r)}else if(e instanceof vl?t.L_.Ke(e):e instanceof gv?t.L_.He(e):t.L_.We(e),!n.isEqual(Pe.min()))try{const r=await Av(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.F_.get(u);h&&i.F_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.F_.get(l);if(!h)return;i.F_.set(l,h.withResumeToken(Zt.EMPTY_BYTE_STRING,h.snapshotVersion)),Rv(i,l);const d=new es(h.target,l,u,h.sequenceNumber);Qd(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await ql(t,r)}}async function ql(t,e,n){if(!ba(e))throw e;t.M_.add(1),await Sa(t),t.N_.set("Offline"),n||(n=()=>Av(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Oc(t)})}function Nv(t,e){return e().catch(n=>ql(t,n,e))}async function Lc(t){const e=ke(t),n=ds(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;uR(e);)try{const s=await GP(e.localStore,r);if(s===null){e.v_.length===0&&n.n_();break}r=s.batchId,hR(e,s)}catch(s){await ql(e,s)}Dv(e)&&Ov(e)}function uR(t){return Xs(t)&&t.v_.length<10}function hR(t,e){t.v_.push(e);const n=ds(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Dv(t){return Xs(t)&&!ds(t).Zo()&&t.v_.length>0}function Ov(t){ds(t).start()}async function dR(t){ds(t).V_()}async function fR(t){const e=ds(t);for(const n of t.v_)e.d_(n.mutations)}async function mR(t,e,n){const r=t.v_.shift(),s=Hd.from(r,e,n);await Nv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lc(t)}async function gR(t,e){e&&ds(t).E_&&await async function(r,s){if(function(o){return sP(o)&&o!==X.ABORTED}(s.code)){const i=r.v_.shift();ds(r).t_(),await Nv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lc(r)}}(t,e),Dv(t)&&Ov(t)}async function lp(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Xs(n);n.M_.add(3),await Sa(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Oc(n)}async function pR(t,e){const n=ke(t);e?(n.M_.delete(2),await Oc(n)):e||(n.M_.add(2),await Sa(n),n.N_.set("Unknown"))}function Yi(t){return t.B_||(t.B_=function(n,r,s){const i=ke(n);return i.f_(),new tR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:oR.bind(null,t),To:aR.bind(null,t),Ao:lR.bind(null,t),h_:cR.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Xd(t)?Jd(t):t.N_.set("Unknown")):(await t.B_.stop(),kv(t))})),t.B_}function ds(t){return t.k_||(t.k_=function(n,r,s){const i=ke(n);return i.f_(),new nR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:dR.bind(null,t),Ao:gR.bind(null,t),R_:fR.bind(null,t),A_:mR.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Lc(t)):(await t.k_.stop(),t.v_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Zd(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ef(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),ba(t))return new fe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=wo(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new yi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.q_=new dt(pe.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):we():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mi{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mi(e,n,yi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class yR{constructor(){this.queries=new zi(e=>tv(e),Sc),this.onlineState="Unknown",this.z_=new Set}}async function tf(t,e){const n=ke(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.W_()&&e.G_()&&(r=2):(i=new _R,r=e.G_()?0:1);try{switch(r){case 0:i.K_=await n.onListen(s,!0);break;case 1:i.K_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ef(o,`Initialization of query '${oi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.U_.push(e),e.j_(n.onlineState),i.K_&&e.H_(i.K_)&&rf(n)}async function nf(t,e){const n=ke(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.U_.indexOf(e);o>=0&&(i.U_.splice(o,1),i.U_.length===0?s=e.G_()?0:1:!i.W_()&&e.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vR(t,e){const n=ke(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.U_)a.H_(s)&&(r=!0);o.K_=s}}r&&rf(n)}function ER(t,e,n){const r=ke(t),s=r.queries.get(e);if(s)for(const i of s.U_)i.onError(n);r.queries.delete(e)}function rf(t){t.z_.forEach(e=>{e.next()})}var Ah,up;(up=Ah||(Ah={})).J_="default",up.Cache="cache";class sf{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Ah.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.key=e}}class Mv{constructor(e){this.key=e}}class IR{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Me(),this.mutatedKeys=Me(),this.Ia=nv(e),this.Ta=new yi(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new cp,s=n?n.Ta:this.Ta;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),p=Pc(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),A=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let N=!1;m&&p?m.data.isEqual(p.data)?E!==A&&(r.track({type:3,doc:p}),N=!0):this.Ra(m,p)||(r.track({type:2,doc:p}),N=!0,(l&&this.Ia(p,l)>0||u&&this.Ia(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),N=!0):m&&!p&&(r.track({type:1,doc:m}),N=!0,(l||u)&&(a=!0)),N&&(p?(o=o.add(p),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:i}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(p,E){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return A(p)-A(E)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),s=s!=null&&s;const a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Mi(this.query,e.Ta,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new cp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Me(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Mv(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Lv(r))}),n}pa(e){this.la=e.hs,this.Pa=Me();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Mi.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class wR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TR{constructor(e){this.key=e,this.wa=!1}}class bR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new zi(a=>tv(a),Sc),this.Da=new Map,this.Ca=new Set,this.va=new dt(pe.comparator),this.Fa=new Map,this.Ma=new Kd,this.xa={},this.Oa=new Map,this.Na=Li.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function AR(t,e,n=!0){const r=Bv(t);let s;const i=r.ba.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ya()):s=await xv(r,e,n,!0),s}async function CR(t,e){const n=Bv(t);await xv(n,e,!0,!1)}async function xv(t,e,n,r){const s=await zP(t.localStore,Jn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await SR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Pv(t.remoteStore,s),a}async function SR(t,e,n,r,s){t.Ba=(d,m,p)=>async function(A,N,O,k){let I=N.view.da(O);I.Xi&&(I=await ip(A.localStore,N.query,!1).then(({documents:y})=>N.view.da(y,I)));const S=k&&k.targetChanges.get(N.targetId),B=k&&k.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(I,A.isPrimaryClient,S,B);return dp(A,N.targetId,V.fa),V.snapshot}(t,d,m,p);const i=await ip(t.localStore,e,!0),o=new IR(e,i.hs),a=o.da(i.documents),l=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);dp(t,n,u.fa);const h=new wR(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot}async function PR(t,e,n){const r=ke(t),s=r.ba.get(e),i=r.Da.get(s.targetId);if(i.length>1)return r.Da.set(s.targetId,i.filter(o=>!Sc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Yd(r.remoteStore,s.targetId),Ch(r,s.targetId)}).catch(Ta)):(Ch(r,s.targetId),await bh(r.localStore,s.targetId,!0))}async function RR(t,e){const n=ke(t),r=n.ba.get(e),s=n.Da.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yd(n.remoteStore,r.targetId))}async function kR(t,e,n){const r=VR(t);try{const s=await function(o,a){const l=ke(o),u=bt.now(),h=a.reduce((p,E)=>p.add(E.key),Me());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=Cr(),A=Me();return l.os.getEntries(p,h).next(N=>{E=N,E.forEach((O,k)=>{k.isValidDocument()||(A=A.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,E)).next(N=>{d=N;const O=[];for(const k of a){const I=ZS(k,d.get(k.key).overlayedDocument);I!=null&&O.push(new ys(k.key,I,z0(I.value.mapValue),$n.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,O,a)}).next(N=>{m=N;const O=N.applyToLocalDocumentSet(d,A);return l.documentOverlayCache.saveOverlays(p,N.batchId,O)})}).then(()=>({batchId:m.batchId,changes:sv(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new dt(Ke)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,s.batchId,n),await Pa(r,s.changes),await Lc(r.remoteStore)}catch(s){const i=ef(s,"Failed to persist write");n.reject(i)}}async function Vv(t,e){const n=ke(t);try{const r=await WP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Fa.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?tt(o.wa):s.removedDocuments.size>0&&(tt(o.wa),o.wa=!1))}),await Pa(n,r,e)}catch(r){await Ta(r)}}function hp(t,e,n){const r=ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ba.forEach((i,o)=>{const a=o.view.j_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ke(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const m of d.U_)m.j_(a)&&(u=!0)}),u&&rf(l)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NR(t,e,n){const r=ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Fa.get(e),i=s&&s.key;if(i){let o=new dt(pe.comparator);o=o.insert(i,Qt.newNoDocument(i,Pe.min()));const a=Me().add(i),l=new Nc(Pe.min(),new Map,new dt(Ke),o,a);await Vv(r,l),r.va=r.va.remove(i),r.Fa.delete(e),of(r)}else await bh(r.localStore,e,!1).then(()=>Ch(r,e,n)).catch(Ta)}async function DR(t,e){const n=ke(t),r=e.batch.batchId;try{const s=await qP(n.localStore,e);Uv(n,r,null),Fv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pa(n,s)}catch(s){await Ta(s)}}async function OR(t,e,n){const r=ke(t);try{const s=await function(o,a){const l=ke(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(tt(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Uv(r,e,n),Fv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pa(r,s)}catch(s){await Ta(s)}}function Fv(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Uv(t,e,n){const r=ke(t);let s=r.xa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function Ch(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||$v(t,r)})}function $v(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Yd(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),of(t))}function dp(t,e,n){for(const r of n)r instanceof Lv?(t.Ma.addReference(r.key,e),LR(t,r)):r instanceof Mv?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||$v(t,r.key)):we()}function LR(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.Ca.add(r),of(t))}function of(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new pe(lt.fromString(e)),r=t.Na.next();t.Fa.set(r,new TR(n)),t.va=t.va.insert(n,r),Pv(t.remoteStore,new es(Jn(Cc(n.path)),r,"TargetPurposeLimboResolution",xd.oe))}}async function Pa(t,e,n){const r=ke(t),s=[],i=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=zd.Ki(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Sa.h_(s),await async function(l,u){const h=ke(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Z.forEach(u,m=>Z.forEach(m.qi,p=>h.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>Z.forEach(m.Qi,p=>h.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!ba(d))throw d;ue("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const p=h.ns.get(m),E=p.snapshotVersion,A=p.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(m,A)}}}(r.localStore,i))}async function MR(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await bv(n.localStore,e);n.currentUser=e,function(i,o){i.Oa.forEach(a=>{a.forEach(l=>{l.reject(new fe(X.CANCELLED,o))})}),i.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pa(n,r.us)}}function xR(t,e){const n=ke(t),r=n.Fa.get(e);if(r&&r.wa)return Me().add(r.key);{let s=Me();const i=n.Da.get(e);if(!i)return s;for(const o of i){const a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function Bv(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NR.bind(null,e),e.Sa.h_=vR.bind(null,e.eventManager),e.Sa.ka=ER.bind(null,e.eventManager),e}function VR(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OR.bind(null,e),e}class fp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return HP(this.persistence,new BP,e.initialUser,this.serializer)}createPersistence(e){return new FP(Gd.Hr,this.serializer)}createSharedClientState(e){return new QP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class FR{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MR.bind(null,this.syncEngine),await pR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yR}()}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),r=function(i){return new eR(i)}(e.databaseInfo);return function(i,o,a,l){return new rR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new iR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hp(this.syncEngine,n,0),function(){return ap.D()?new ap:new JP}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const d=new bR(s,i,o,a,l,u);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=ke(r);ue("RemoteStore","RemoteStore shutting down."),s.M_.add(5),await Sa(s),s.O_.shutdown(),s.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=W0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ue("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ue("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ef(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lu(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BR(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>lp(e.remoteStore,s)),t._onlineComponents=e}function $R(t){return t.name==="FirebaseError"?t.code===X.FAILED_PRECONDITION||t.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function BR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!$R(n))throw n;ki("Error using user provided cache. Falling back to memory cache: "+n),await Lu(t,new fp)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Lu(t,new fp);return t._offlineComponents}async function jv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await mp(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await mp(t,new FR))),t._onlineComponents}function jR(t){return jv(t).then(e=>e.syncEngine)}async function Wl(t){const e=await jv(t),n=e.eventManager;return n.onListen=AR.bind(null,e.syncEngine),n.onUnlisten=PR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RR.bind(null,e.syncEngine),n}function HR(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new af({next:m=>{o.enqueueAndForget(()=>nf(i,d));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new fe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new fe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new sf(Cc(a.path),h,{includeMetadataChanges:!0,ra:!0});return tf(i,d)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}function qR(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new af({next:m=>{o.enqueueAndForget(()=>nf(i,d)),m.fromCache&&l.source==="server"?u.reject(new fe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new sf(a,h,{includeMetadataChanges:!0,ra:!0});return tf(i,d)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e,n){if(!n)throw new fe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WR(t,e,n,r){if(e===!0&&r===!0)throw new fe(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pp(t){if(!pe.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _p(t){if(pe.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lf(t);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lS;switch(r.type){case"firstParty":return new dS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gp.get(n);r&&(ue("ComponentProvider","Removing Datastore"),gp.delete(n),r.terminate())}(this),Promise.resolve()}}function KR(t,e,n,r={}){var s;const i=(t=bn(t,Mc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=zt.MOCK_USER;else{a=$A(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new zt(u)}t._authCredentials=new cS(new q0(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ra(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class as extends Ra{constructor(e,n,r){super(e,n,Cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new pe(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Wv(t,e,...n){if(t=Ht(t),qv("collection","path",e),t instanceof Mc){const r=lt.fromString(e,...n);return _p(r),new as(t,null,r)}{if(!(t instanceof cn||t instanceof as))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return _p(r),new as(t.firestore,null,r)}}function Nt(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=W0.newId()),qv("doc","path",e),t instanceof Mc){const r=lt.fromString(e,...n);return pp(r),new cn(t,null,new pe(r))}{if(!(t instanceof cn||t instanceof as))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return pp(r),new cn(t.firestore,t instanceof as?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Cv(this,"async_queue_retry"),this.hu=()=>{const n=Ou();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Ou();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Ou();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new br;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ba(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const s=Zd.createAndSchedule(this,e,n,r,i=>this.Eu(i));return this._u.push(s),s}Pu(){this.au&&we()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function vp(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fs extends Mc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new GR}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kv(this),this._firestoreClient.terminate()}}function zR(t,e){const n=typeof t=="object"?t:L0(),r=typeof t=="string"?t:"(default)",s=Ld(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=FA("firestore");i&&KR(s,...i)}return s}function xc(t){return t._firestoreClient||Kv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kv(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new AS(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Hv(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new UR(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(Zt.fromBase64String(e))}catch(n){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/^__.*__$/;class QR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Aa(e,this.data,n,this.fieldTransforms)}}class Gv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class hf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new hf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Kl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(zv(this.fu)&&YR.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class JR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dc(e)}Fu(e,n,r,s=!1){return new hf({fu:e,methodName:n,vu:r,path:Ut.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yv(t){const e=t._freezeSettings(),n=Dc(t._databaseId);return new JR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XR(t,e,n,r,s,i={}){const o=t.Fu(i.merge||i.mergeFields?2:0,e,n,s);df("Data must be an object, but it was:",o,r);const a=Qv(r,o);let l,u;if(i.merge)l=new Tn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Sh(e,d,n);if(!o.contains(m))throw new fe(X.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Xv(h,m)||h.push(m)}l=new Tn(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new QR(new pn(a),l,u)}class Fc extends cf{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}function ZR(t,e,n,r){const s=t.Fu(1,e,n);df("Data must be an object, but it was:",s,r);const i=[],o=pn.empty();Js(r,(l,u)=>{const h=ff(e,l,n);u=Ht(u);const d=s.Su(h);if(u instanceof Fc)i.push(h);else{const m=Uc(u,d);m!=null&&(i.push(h),o.set(h,m))}});const a=new Tn(i);return new Gv(o,a,s.fieldTransforms)}function ek(t,e,n,r,s,i){const o=t.Fu(1,e,n),a=[Sh(e,r,n)],l=[s];if(i.length%2!=0)throw new fe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Sh(e,i[m])),l.push(i[m+1]);const u=[],h=pn.empty();for(let m=a.length-1;m>=0;--m)if(!Xv(u,a[m])){const p=a[m];let E=l[m];E=Ht(E);const A=o.Su(p);if(E instanceof Fc)u.push(p);else{const N=Uc(E,A);N!=null&&(u.push(p),h.set(p,N))}}const d=new Tn(u);return new Gv(h,d,o.fieldTransforms)}function Uc(t,e){if(Jv(t=Ht(t)))return df("Unsupported field value:",e,t),Qv(t,e);if(t instanceof cf)return function(r,s){if(!zv(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Uc(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=bt.fromDate(r);return{timestampValue:Hl(s.serializer,i)}}if(r instanceof bt){const i=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hl(s.serializer,i)}}if(r instanceof uf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:_v(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wd(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${lf(r)}`)}(t,e)}function Qv(t,e){const n={};return K0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(r,s)=>{const i=Uc(s,e.pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Jv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof uf||t instanceof xi||t instanceof cn||t instanceof cf)}function df(t,e,n){if(!Jv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Sh(t,e,n){if((e=Ht(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return ff(t,e);throw Kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const tk=new RegExp("[~\\*/\\[\\]]");function ff(t,e,n){if(e.search(tk)>=0)throw Kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vc(...e.split("."))._internalPath}catch{throw Kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new fe(X.INVALID_ARGUMENT,a+t+l)}function Xv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(e1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nk extends Zv{data(){return super.data()}}function e1(t,e){return typeof e=="string"?ff(t,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rk{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Js(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new uf(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){const n=hs(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);tt(Tv(r));const s=new ra(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||Ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class n1 extends Zv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new El(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(e1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class El extends n1{data(e={}){return super.data(e)}}class r1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new El(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new El(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new El(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ik(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ik(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){t=bn(t,cn);const e=bn(t.firestore,fs);return HR(xc(e),t._key).then(n=>s1(e,t,n))}class mf extends rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function ok(t){t=bn(t,Ra);const e=bn(t.firestore,fs),n=xc(e),r=new mf(e);return t1(t._query),qR(n,t._query).then(s=>new r1(e,r,t,s))}function Gr(t,e,n){t=bn(t,cn);const r=bn(t.firestore,fs),s=sk(t.converter,e);return gf(r,[XR(Yv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function Ep(t,e,n,...r){t=bn(t,cn);const s=bn(t.firestore,fs),i=Yv(s);let o;return o=typeof(e=Ht(e))=="string"||e instanceof Vc?ek(i,"updateDoc",t._key,e,n,r):ZR(i,"updateDoc",t._key,e),gf(s,[o.toMutation(t._key,$n.exists(!0))])}function Gl(t){return gf(bn(t.firestore,fs),[new jd(t._key,$n.none())])}function Ip(t,...e){var n,r,s;t=Ht(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vp(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(vp(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,u,h;if(t instanceof cn)u=bn(t.firestore,fs),h=Cc(t._key.path),l={next:d=>{e[o]&&e[o](s1(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=bn(t,Ra);u=bn(d.firestore,fs),h=d._query;const m=new mf(u);l={next:p=>{e[o]&&e[o](new r1(u,m,d,p))},error:e[o+1],complete:e[o+2]},t1(t._query)}return function(m,p,E,A){const N=new af(A),O=new sf(p,N,E);return m.asyncQueue.enqueueAndForget(async()=>tf(await Wl(m),O)),()=>{N.$a(),m.asyncQueue.enqueueAndForget(async()=>nf(await Wl(m),O))}}(xc(u),h,a,l)}function gf(t,e){return function(r,s){const i=new br;return r.asyncQueue.enqueueAndForget(async()=>kR(await jR(r),s,i)),i.promise}(xc(t),e)}function s1(t,e,n){const r=n.docs.get(e._key),s=new mf(t);return new n1(t,s,e._key,r,new bo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Gi=s})(Ki),Ri(new qs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new fs(new uS(r.getProvider("auth-internal")),new mS(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),os(Ug,"4.6.4",e),os(Ug,"4.6.4","esm2017")})();class ak{constructor(){ge(this,"sortedEvents",ln([]));ge(this,"events",ln([]));ge(this,"stages",ct([]));ge(this,"days",ct([]));ge(this,"eventsByDayUid",ct(new Map));ge(this,"eventsByStageUid",ct(new Map));ge(this,"eventByUid",ct(new Map));ge(this,"eventByUidNonRef",new Map);ge(this,"spaceMemberById",ln(new Map))}}class lk{constructor(e){ge(this,"data");ge(this,"start");ge(this,"end");ge(this,"_cardTitle","");ge(this,"suggestorIds",ln([]));ge(this,"likerIds",ln([]));ge(this,"columnSpan",1);this.data=e,this.start=parseInt(this.data.start),this.end=parseInt(this.data.end)}cardThumbnailUrl(){for(let e of this.data.artists)for(let n of e.assets)if(n.thumbnail!=null)return`https://wacken.com${n.thumbnail}`;return"https://www.metal-hammer.de/wp-content/uploads/2024/02/10/10/wacken-2024-725x1024.jpg"}cardTitle(){let e=()=>this.data.artists.map(r=>r.title).join(", ")+(this.data.title==null?" ":` ${this.data.title}`);return this._cardTitle=e(),this._cardTitle}cardDescription(){try{return this.data.artists[0].assets[0].biography}catch{}return""}isConcert(){return this.data.performance.title=="Concert"}}class i1{constructor(e,n,r,s){ge(this,"ctx");ge(this,"space");ge(this,"id");ge(this,"name","");ge(this,"color","");ge(this,"suggestions",[]);ge(this,"likes",[]);ge(this,"_data");ge(this,"offline",!1);this.ctx=e,this.space=n,this.id=r,this.parseData(s)}isOwner(){return this.id==this.space.id}isLiked(e){return this.likes.includes(e)}isSuggested(e){return this.suggestions.includes(e)}toggleLike(e){var n;if(this.offline){console.error("cannot execute request: member is cached");return}this.isLiked(e)?(this.likes=this.likes.filter(r=>r!==e),this.ctx.client.container.eventByUidNonRef.get(e).likerIds=this.ctx.client.container.eventByUidNonRef.get(e).likerIds.filter(r=>r!==this.id)):(this.likes.push(e),(n=this.ctx.client.container.eventByUidNonRef.get(e))==null||n.likerIds.push(this.id)),this.update()}toggleSuggested(e){var n;if(this.offline){console.error("cannot execute request: member is cached");return}this.isSuggested(e)?(this.suggestions=this.suggestions.filter(r=>r!==e),this.ctx.client.container.eventByUidNonRef.get(e).suggestorIds=this.ctx.client.container.eventByUidNonRef.get(e).suggestorIds.filter(r=>r!==this.id)):(this.suggestions.push(e),(n=this.ctx.client.container.eventByUidNonRef.get(e))==null||n.suggestorIds.push(this.id)),this.update()}calculateTasteMatch(e){let n=[...new Set([...this.likes,...this.suggestions])],r=[...new Set([...(e==null?void 0:e.likes)||[],...(e==null?void 0:e.suggestions)||[]])],s=n.length>r.length?r:n,i=n.length>r.length?n:r,o=0;for(let a of s)i.includes(a)&&o++;return o/s.length*100}async delete(){if(this.offline){console.error("cannot execute request: member is cached");return}try{(await ok(Wv(this.ctx.db,"spaces",this.space.id,"users"))).forEach(n=>{n.data().memberId===this.id&&Gl(Nt(this.ctx.db,"spaces",this.space.id,"users",n.id))}),await Gl(Nt(this.ctx.db,"spaces",this.space.id,"members",this.id))}catch(e){console.error("error while deleting SpaceMember",e)}}async update(){if(this.offline){console.error("cannot execute request: member is cached");return}try{await Gr(Nt(this.ctx.db,"spaces",this.space.id,"members",this.id),{name:this.name,color:this.color,suggestions:this.suggestions,likes:this.likes})}catch(e){console.error("error while updating SpaceMember",e)}}parseData(e){this.name=e.name,this.color=e.color,this.suggestions=e.suggestions,this.likes=e.likes,this._data=e}}class o1{constructor(e,n){ge(this,"ctx");ge(this,"space");if(this.ctx=e,n instanceof Bo)this.space=n;else if(typeof n=="string"){let r=JSON.parse(n);this.space=new Bo(e,r.id,()=>{},!0),this.space.name=r.name,this.space.authKey=r.authKey,this.space.self.value=this.createMember(r.self),this.space.selfMemberId=r.selfMemberId;for(let s of r.members)this.space.members.push(this.createMember(s));this.space.publishMembersToContainer(),this.space.loaded.value=!0,this.space.cached.value=!0}else throw"INVALID_DATA_VALUE"}serialize(){return JSON.stringify({id:this.space.id,name:this.space.name,authKey:this.space.authKey,self:this.serializeMember(this.space.self.value),selfMemberId:this.space.selfMemberId,members:this.space.members.map(e=>this.serializeMember(e))})}createMember(e){if(e==null)return;let n=new i1(this.ctx,this.space,e.id,e);return n.offline=!0,n}serializeMember(e){if(e!=null)return{id:e.id,...e._data}}}class Bo{constructor(e,n,r,s=!1){ge(this,"ctx");ge(this,"id");ge(this,"name","");ge(this,"authKey","");ge(this,"onLeave");ge(this,"selfMemberId");ge(this,"self",ct());ge(this,"members",ln([]));ge(this,"loaded",ct(!1));ge(this,"cached",ct(!1));ge(this,"_selfCache");this.ctx=e,this.id=n,this.onLeave=r,s||this.init(),this._selfCache=new o1(this.ctx,this)}generateInvite(e){var r,s;const n=new URLSearchParams({space:this.id,key:this.authKey,name:this.name,host:((r=this.self.value)==null?void 0:r.name)||((s=this.ctx.auth.currentUser)==null?void 0:s.displayName)||""});return{title:e("brand.name"),text:e("brand.share.invite"),url:`${window.location.origin}/join?${n.toString()}`}}async updateName(e){if(this.cached.value){console.error("cannot execute request: space is cached");return}try{await Ep(Nt(this.ctx.db,"spaces",this.id),{name:e})}catch(n){console.error("error while updating space name",n)}}async resetInvite(){if(this.cached.value){console.error("cannot execute request: space is cached");return}try{await Ep(Nt(this.ctx.db,"spaces",this.id),{authKey:window.crypto.randomUUID()})}catch(e){console.error("error while resetting invite key",e)}}async setMemberId(e,n){await Gr(Nt(this.ctx.db,"spaces",this.id,"users",e),{memberId:n}),this.selfMemberId=n,this.findSelf()}async createMember(e,n){let r=window.crypto.randomUUID();return await Gr(Nt(this.ctx.db,"spaces",this.id,"members",r),{name:e,color:n,likes:[],suggestions:[]}),r}async init(){try{let n=(await Ph(Nt(this.ctx.db,"spaces",this.id))).data();if(n==null)throw"DATA_UNDEFINED_ERROR";this.parseData(n),this.listenMembers();let s=(await Ph(Nt(this.ctx.db,"spaces",this.id,"users",this.ctx.currentUser.value.uid))).data();s!=null&&(this.selfMemberId=s.memberId,this.findSelf()),Ip(Nt(this.ctx.db,"spaces",this.id),i=>{i.data()!==void 0&&this.parseData(i.data())}),this.authKey.length<3&&this.resetInvite()}catch(e){e.code==="permission-denied"&&(this.onLeave(),console.error("leaving space due to permission-denied error")),console.error("could not fetch space info",e)}console.dir(this)}findSelf(){if(this.selfMemberId!=null)try{this.self.value=this.members.find(e=>e.id==this.selfMemberId),console.info("self",this.self.value)}catch(e){console.error(e)}}async listenMembers(){let e=Wv(this.ctx.db,"spaces",this.id,"members");Ip(e,n=>{console.info("users collection updated",n.size),this.members=[],n.forEach(r=>{this.members.push(new i1(this.ctx,this,r.id,r.data()))}),this.findSelf(),this.members=this.members.filter(r=>r.name!=null&&r.color!=null&&r.likes!=null&&r.suggestions!=null),this.publishMembersToContainer(),this.loaded.value=!0,this.updateCache()})}publishMembersToContainer(){this.members.forEach(e=>{this.ctx.client.container.spaceMemberById.set(e.id,e)});for(let e of this.ctx.client.container.events)e.suggestorIds=this.members.filter(n=>n.suggestions.includes(e.data.uid)).map(n=>n.id),e.likerIds=this.members.filter(n=>n.likes.includes(e.data.uid)).map(n=>n.id)}parseData(e){this.name=e.name,this.authKey=e.authKey,this.updateCache()}updateCache(){localStorage.setItem("cachedSpace",this._selfCache.serialize())}}class ck{constructor(e){ge(this,"ctx");ge(this,"container",new ak);ge(this,"hasSpace",ct(!1));ge(this,"space");ge(this,"offline",ct(!1));this.ctx=e,this.ctx.client=this,this.ctx.auth.onAuthStateChanged(async n=>{if(n!=null)try{let r=await this.getUserData();if(e.dontAutoCreateSpace!==!0&&(r==null||r.spaceId==null)){await this.createSpace();return}if(r==null)return;this.space=ln(new Bo(e,r.spaceId,()=>{this.leaveSpace()}))}catch(r){console.error("error while trying to fetch userdata",r),localStorage.getItem("cachedSpace")!=null&&(this.space=ln(new o1(e,localStorage.getItem("cachedSpace")).space)),this.offline.value=!0}})}async setUserData(e){await Gr(Nt(this.ctx.db,"users",this.ctx.currentUser.value.uid),{spaceId:e.spaceId})}async getUserData(){let n=(await Ph(Nt(this.ctx.db,"users",this.ctx.currentUser.value.uid))).data();if(n!=null)return{spaceId:n.spaceId}}async registerUser(e,n){if(this.ctx.currentUser.value==null)throw"UNDEFINED_USER";await Gr(Nt(this.ctx.db,"spaces",e,"users",this.ctx.currentUser.value.uid),{authKey:n}),await this.setUserData({spaceId:e}),setTimeout(()=>{this.space=ln(new Bo(this.ctx,e,()=>{this.leaveSpace()}))},500)}async createSpace(){var e;if(this.ctx.currentUser.value==null)throw"UNDEFINED_USER";console.info("creating new space"),await Gr(Nt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid),{name:"Our space",authKey:""}),await Gr(Nt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid,"members",this.ctx.currentUser.value.uid),{name:((e=this.ctx.currentUser.value)==null?void 0:e.displayName)||"Admin",color:"red",likes:[],suggestions:[]}),await this.setUserData({spaceId:this.ctx.currentUser.value.uid}),await Gr(Nt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid,"users",this.ctx.currentUser.value.uid),{memberId:this.ctx.currentUser.value.uid}),this.space=ln(new Bo(this.ctx,this.ctx.currentUser.value.uid,()=>{this.leaveSpace()}))}async leaveSpace(){console.info("leaving space, creating new private space ..."),this.space=void 0,await this.createSpace(),window.location.reload()}async deleteAccount(){var e;this.ctx.currentUser.value!=null&&(console.info("deleting account and data ..."),await Gl(Nt(this.ctx.db,"spaces",this.ctx.currentUser.value.uid)),await Gl(Nt(this.ctx.db,"users",this.ctx.currentUser.value.uid)),await((e=this.ctx.currentUser.value)==null?void 0:e.delete()))}async fetchEvents(){var s,i;let e=[],n=[];const r=await Hr(()=>import("./events-complete-8uMGVAUl.js"),[]);this.container.events=ln([]);for(let o of r.default){let a=new lk(o);this.container.events.push(a),this.container.eventByUid.value.set(a.data.uid,a),this.container.eventByUidNonRef.set(a.data.uid,a),e.includes(a.data.festivalday.uid)||(this.container.days.value.push(a.data.festivalday),e.push(a.data.festivalday.uid),this.container.eventsByDayUid.value.set(a.data.festivalday.uid,[])),this.container.eventsByStageUid.value.get(a.data.stage.uid)===void 0&&this.container.eventsByStageUid.value.set(a.data.stage.uid,[]),(s=this.container.eventsByStageUid.value.get(a.data.stage.uid))==null||s.push(a),(i=this.container.eventsByDayUid.value.get(a.data.festivalday.uid))==null||i.push(a),n.includes(a.data.stage.uid)||(this.container.stages.value.push(a.data.stage),n.push(a.data.stage.uid))}this.container.stages.value.sort((o,a)=>parseInt(o.sorting)-parseInt(a.sorting)),this.container.sortedEvents.push(...this.container.events.sort((o,a)=>o.cardTitle().localeCompare(a.cardTitle()))),this.ctx.authLoaded.value?this.ctx.loaded.value=!0:this.ctx.auth.onAuthStateChanged(o=>{this.ctx.loaded.value=!0})}}function pf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function a1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uk=a1,l1=new Ia("auth","Firebase",a1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Dd("@firebase/auth");function hk(t,...e){zl.logLevel<=Ve.WARN&&zl.warn(`Auth (${Ki}): ${t}`,...e)}function Il(t,...e){zl.logLevel<=Ve.ERROR&&zl.error(`Auth (${Ki}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw yf(t,...e)}function Bn(t,...e){return yf(t,...e)}function _f(t,e,n){const r=Object.assign(Object.assign({},uk()),{[e]:n});return new Ia("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return _f(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dk(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),_f(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return l1.create(t,...e)}function Ee(t,e,...n){if(!t)throw yf(e,...n)}function yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Il(e),new Error(e)}function Sr(t,e){t||yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fk(){return wp()==="http:"||wp()==="https:"}function wp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fk()||HA()||"connection"in navigator)?navigator.onLine:!0}function gk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=BA()||qA()}get(){return mk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new ka(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,n,r,s={}){return u1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=wa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),c1.fetch()(h1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function u1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},pk),e);try{const s=new vk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw al(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw al(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw al(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _f(t,h,u);Dn(t,h)}}catch(s){if(s instanceof Nr)throw s;Dn(t,"network-request-failed",{message:String(s)})}}async function Na(t,e,n,r,s={}){const i=await Dr(t,e,n,r,s);return"mfaPendingCredential"in i&&Dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function h1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?vf(t.config,s):`${t.config.apiScheme}://${s}`}function yk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),_k.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bn(t,e,r);return s.customData._tokenResponse=n,s}function Tp(t){return t!==void 0&&t.enterprise!==void 0}class Ek{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ik(t,e){return Dr(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function d1(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tk(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),s=Ef(r);Ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:jo(Mu(s.auth_time)),issuedAtTime:jo(Mu(s.iat)),expirationTime:jo(Mu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mu(t){return Number(t)*1e3}function Ef(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Il("JWT malformed, contained fewer than 3 sections"),null;try{const s=S0(n);return s?JSON.parse(s):(Il("Failed to decode base64 JWT payload"),null)}catch(s){return Il("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bp(t){const e=Ef(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nr&&bk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jo(this.lastLoginAt),this.creationTime=jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Vi(t,d1(n,{idToken:r}));Ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?f1(i.providerUserInfo):[],a=Sk(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new kh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Ck(t){const e=Ht(t);await Yl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function f1(t){return t.map(e=>{var{providerId:n}=e,r=pf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(t,e){const n=await u1(t,{},async()=>{const r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=h1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",c1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Rk(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=bp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Pk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new vi;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ak(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Vi(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tk(this,e)}reload(){return Ck(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Vi(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,O=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:S,isAnonymous:B,providerData:V,stsTokenManager:y}=n;Ee(I&&y,e,"internal-error");const _=vi.fromJSON(this.name,y);Ee(typeof I=="string",e,"internal-error"),Fr(d,e.name),Fr(m,e.name),Ee(typeof S=="boolean",e,"internal-error"),Ee(typeof B=="boolean",e,"internal-error"),Fr(p,e.name),Fr(E,e.name),Fr(A,e.name),Fr(N,e.name),Fr(O,e.name),Fr(k,e.name);const v=new vr({uid:I,auth:e,email:m,emailVerified:S,displayName:d,isAnonymous:B,photoURL:E,phoneNumber:p,tenantId:A,stsTokenManager:_,createdAt:O,lastLoginAt:k});return V&&Array.isArray(V)&&(v.providerData=V.map(D=>Object.assign({},D))),N&&(v._redirectEventId=N),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new vi;s.updateFromServerResponse(n);const i=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?f1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new vi;a.updateFromIdToken(r);const l=new vr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new kh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=new Map;function Er(t){Sr(t instanceof Function,"Expected a class definition");let e=Ap.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ap.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}m1.type="NONE";const Cp=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wl(this.userKey,s.apiKey,i),this.fullPersistenceKey=wl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei(Er(Cp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Er(Cp);const o=wl(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=vr._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ei(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(E1(e))return"Webos";if(If(e))return"Safari";if((e.includes("chrome/")||p1(e))&&!e.includes("edge/"))return"Chrome";if(y1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g1(t=jt()){return/firefox\//i.test(t)}function If(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p1(t=jt()){return/crios\//i.test(t)}function _1(t=jt()){return/iemobile/i.test(t)}function y1(t=jt()){return/android/i.test(t)}function v1(t=jt()){return/blackberry/i.test(t)}function E1(t=jt()){return/webos/i.test(t)}function $c(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kk(t=jt()){var e;return $c(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Nk(){return WA()&&document.documentMode===10}function I1(t=jt()){return $c(t)||y1(t)||E1(t)||v1(t)||/windows phone/i.test(t)||_1(t)}function Dk(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t,e=[]){let n;switch(t){case"Browser":n=Sp(jt());break;case"Worker":n=`${Sp(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ki}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lk(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=6;class xk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Mk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pp(this),this.idTokenSubscription=new Pp(this),this.beforeStateQueue=new Ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await d1(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Zn(this));const n=e?Ht(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lk(this),n=new xk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Or(t){return Ht(t)}class Pp{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fk(t){Bc=t}function T1(t){return Bc.loadJS(t)}function Uk(){return Bc.recaptchaEnterpriseScript}function $k(){return Bc.gapiScript}function Bk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const jk="recaptcha-enterprise",Hk="NO_RECAPTCHA";class qk{constructor(e){this.type=jk,this.auth=Or(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{Ik(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Ek(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Tp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Hk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Tp(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Uk();l.length!==0&&(l+=a),T1(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Rp(t,e,n,r=!1){const s=new qk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Rp(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rp(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t,e){const n=Ld(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(xl(i,e??{}))return s;Dn(s,"already-initialized")}return n.initialize({options:e})}function Kk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Gk(t,e,n){const r=Or(t);Ee(r._canInitEmulator,r,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=b1(e),{host:o,port:a}=zk(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Yk()}function b1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zk(t){const e=b1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:kp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:kp(o)}}}function kp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Yk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function Qk(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e){return Na(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function Zk(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends wf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",Jk);case"emailLink":return Xk(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,r,"signUpPassword",Qk);case"emailLink":return Zk(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return Na(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="http://localhost";class Ys extends wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=pf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ys(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:e2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n2(t){const e=vo(Eo(t)).link,n=e?vo(Eo(e)).deep_link_id:null,r=vo(Eo(t)).deep_link_id;return(r?vo(Eo(r)).link:null)||r||n||e||t}class Tf{constructor(e){var n,r,s,i,o,a;const l=vo(Eo(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=t2((s=l.mode)!==null&&s!==void 0?s:null);Ee(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=n2(e);try{return new Tf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,n){return aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tf.parseLink(n);return Ee(r,"argument-error"),aa._fromEmailAndCode(e,r.code,r.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Da{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ys._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Da{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Da{constructor(){super("twitter.com")}static credential(e,n){return Ys._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(t,e){return Na(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vr._fromIdTokenResponse(e,r,s),o=Np(r);return new Pr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Np(r);return new Pr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Np(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t){var e;if(kn(t.app))return Promise.reject(Zn(t));const n=Or(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await A1(n,{returnSecureToken:!0}),s=await Pr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ql.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ql(e,n,r,s)}}function C1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ql._fromErrorAndOperation(t,i,e,r):i})}async function s2(t,e,n=!1){const r=await Vi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await Vi(t,C1(r,s,e,t),n);Ee(i.idToken,r,"internal-error");const o=Ef(i.idToken);Ee(o,r,"internal-error");const{sub:a}=o;return Ee(t.uid===a,r,"user-mismatch"),Pr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t,e,n=!1){if(kn(t.app))return Promise.reject(Zn(t));const r="signIn",s=await C1(t,r,e),i=await Pr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function o2(t,e){return S1(Or(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t){const e=Or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function b5(t,e,n){if(kn(t.app))return Promise.reject(Zn(t));const r=Or(t),o=await Nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",A1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&P1(t),l}),a=await Pr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function A5(t,e,n){return kn(t.app)?Promise.reject(Zn(t)):o2(Ht(t),Qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e){return Dr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ht(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Vi(r,a2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function l2(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function c2(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}const Jl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jl,"1"),this.storage.removeItem(Jl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(){const t=jt();return If(t)||$c(t)}const h2=1e3,d2=10;class k1 extends R1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=u2()&&Dk(),this.fallbackToPolling=I1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Nk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,d2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k1.type="LOCAL";const f2=k1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends R1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}N1.type="SESSION";const D1=N1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await m2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Af("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function p2(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function _2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function v2(){return O1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firebaseLocalStorageDb",E2=1,Xl="firebaseLocalStorage",M1="fbase_key";class Oa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hc(t,e){return t.transaction([Xl],e?"readwrite":"readonly").objectStore(Xl)}function I2(){const t=indexedDB.deleteDatabase(L1);return new Oa(t).toPromise()}function Dh(){const t=indexedDB.open(L1,E2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xl,{keyPath:M1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xl)?e(r):(r.close(),await I2(),e(await Dh()))})})}async function Dp(t,e,n){const r=Hc(t,!0).put({[M1]:e,value:n});return new Oa(r).toPromise()}async function w2(t,e){const n=Hc(t,!1).get(e),r=await new Oa(n).toPromise();return r===void 0?null:r.value}function Op(t,e){const n=Hc(t,!0).delete(e);return new Oa(n).toPromise()}const T2=800,b2=3;class x1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>b2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(v2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _2(),!this.activeServiceWorker)return;this.sender=new g2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dh();return await Dp(e,Jl,"1"),await Op(e,Jl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>w2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Op(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hc(s,!1).getAll();return new Oa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),T2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x1.type="LOCAL";const A2=x1;new ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t,e){return e?Er(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C2(t){return S1(t.auth,new Cf(t),t.bypassAuthState)}function S2(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),i2(n,new Cf(t),t.bypassAuthState)}async function P2(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),s2(n,new Cf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C2;case"linkViaPopup":case"linkViaRedirect":return P2;case"reauthViaPopup":case"reauthViaRedirect":return S2;default:Dn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new ka(2e3,1e4);async function k2(t,e,n){if(kn(t.app))return Promise.reject(Bn(t,"operation-not-supported-in-this-environment"));const r=Or(t);dk(t,e,bf);const s=V1(r,n);return new xs(r,"signInViaPopup",e,s).executeNotNull()}class xs extends F1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R2.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="pendingRedirect",Tl=new Map;class D2 extends F1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tl.get(this.auth._key());if(!e){try{const r=await O2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tl.set(this.auth._key(),e)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O2(t,e){const n=x2(e),r=M2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function L2(t,e){Tl.set(t._key(),e)}function M2(t){return Er(t._redirectPersistence)}function x2(t){return wl(N2,t.config.apiKey,t.name)}async function V2(t,e,n=!1){if(kn(t.app))return Promise.reject(Zn(t));const r=Or(t),s=V1(r,e),o=await new D2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=10*60*1e3;class U2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!U1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lp(e))}saveEventToCache(e){this.cachedEventUids.add(Lp(e)),this.lastProcessedEventTime=Date.now()}}function Lp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function U1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H2=/^https?/;async function q2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B2(t);for(const n of e)try{if(W2(n))return}catch{}Dn(t,"unauthorized-domain")}function W2(t){const e=Rh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H2.test(n))return!1;if(j2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new ka(3e4,6e4);function Mp(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function G2(t){return new Promise((e,n)=>{var r,s,i;function o(){Mp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mp(),n(Bn(t,"network-request-failed"))},timeout:K2.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=Bk("iframefcb");return er()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},T1(`${$k()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bl=null,e})}let bl=null;function z2(t){return bl=bl||G2(t),bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new ka(5e3,15e3),Q2="__/auth/iframe",J2="emulator/auth/iframe",X2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vf(e,J2):`https://${t.config.authDomain}/${Q2}`,r={apiKey:e.apiKey,appName:t.name,v:Ki},s=Z2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wa(r).slice(1)}`}async function tN(t){const e=await z2(t),n=er().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:eN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},Y2.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rN=500,sN=600,iN="_blank",oN="http://localhost";class xp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(t,e,n,r=rN,s=sN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},nN),{width:r.toString(),height:s.toString(),top:i,left:o}),u=jt().toLowerCase();n&&(a=p1(u)?iN:n),g1(u)&&(e=e||oN,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[p,E])=>`${m}${p}=${E},`,"");if(kk(u)&&a!=="_self")return lN(e||"",a),new xp(null);const d=window.open(e||"",a,h);Ee(d,t,"popup-blocked");try{d.focus()}catch{}return new xp(d)}function lN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__/auth/handler",uN="emulator/auth/handler",hN=encodeURIComponent("fac");async function Vp(t,e,n,r,s,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ki,eventId:s};if(e instanceof bf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Da){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${hN}=${encodeURIComponent(l)}`:"";return`${dN(t)}?${wa(a).slice(1)}${u}`}function dN({config:t}){return t.emulator?vf(t,uN):`https://${t.authDomain}/${cN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D1,this._completeRedirectFn=V2,this._overrideRedirectResult=L2}async _openPopup(e,n,r,s){var i;Sr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Vp(e,n,r,Rh(),s);return aN(e,o,Af())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Vp(e,n,r,Rh(),s);return p2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tN(e),r=new U2(e);return n.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xu,{type:xu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xu];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I1()||If()||$c()}}const mN=fN;var Fp="@firebase/auth",Up="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _N(t){Ri(new qs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w1(t)},u=new Vk(r,s,i,l);return Kk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new qs("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(r=>new gN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),os(Fp,Up,pN(t)),os(Fp,Up,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=5*60,vN=k0("authIdTokenMaxAge")||yN;let $p=null;const EN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vN)return;const s=n==null?void 0:n.token;$p!==s&&($p=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IN(t=L0()){const e=Ld(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Wk(t,{popupRedirectResolver:mN,persistence:[A2,f2,D1]}),r=k0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=EN(i.toString());c2(n,o,()=>o(n.currentUser)),l2(n,a=>o(a))}}const s=P0("auth");return s&&Gk(n,`http://${s}`),n}function wN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Fk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",wN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_N("Browser");const Bp=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},TN=new WeakMap;function bN({clearTimeout:t,setTimeout:e}={}){return(n,{value:r,signal:s}={})=>{if(s!=null&&s.aborted)return Promise.reject(Bp());let i,o,a;const l=t??clearTimeout,u=()=>{l(i),a(Bp())},h=()=>{s&&s.removeEventListener("abort",u)},d=new Promise((m,p)=>{o=()=>{h(),m(r)},a=p,i=(e??setTimeout)(o,n)});return s&&s.addEventListener("abort",u,{once:!0}),TN.set(d,()=>{l(i),i=null,o()}),d}}const Zl=bN();class AN{constructor(e){ge(this,"client");ge(this,"db");ge(this,"auth");ge(this,"dontAutoCreateSpace",!1);ge(this,"currentUser",ct());ge(this,"darkMode",ct(!0));ge(this,"systemDarkMode",ct(!0));ge(this,"loaded",ct(!1));ge(this,"authLoaded",ct(!1));this.auth=IN(e),this.db=zR(e),this.auth.onAuthStateChanged(async n=>{this.currentUser.value=n||void 0,await Zl(50),this.authLoaded.value=!0})}}var CN="firebase",SN="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os(CN,SN,"app");/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ci=typeof document<"u";function PN(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Xe=Object.assign;function Vu(t,e){const n={};for(const r in e){const s=e[r];n[r]=Hn(s)?s.map(t):t(s)}return n}const Ho=()=>{},Hn=Array.isArray,$1=/#/g,RN=/&/g,kN=/\//g,NN=/=/g,DN=/\?/g,B1=/\+/g,ON=/%5B/g,LN=/%5D/g,j1=/%5E/g,MN=/%60/g,H1=/%7B/g,xN=/%7C/g,q1=/%7D/g,VN=/%20/g;function Sf(t){return encodeURI(""+t).replace(xN,"|").replace(ON,"[").replace(LN,"]")}function FN(t){return Sf(t).replace(H1,"{").replace(q1,"}").replace(j1,"^")}function Oh(t){return Sf(t).replace(B1,"%2B").replace(VN,"+").replace($1,"%23").replace(RN,"%26").replace(MN,"`").replace(H1,"{").replace(q1,"}").replace(j1,"^")}function UN(t){return Oh(t).replace(NN,"%3D")}function $N(t){return Sf(t).replace($1,"%23").replace(DN,"%3F")}function BN(t){return t==null?"":$N(t).replace(kN,"%2F")}function la(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const jN=/\/$/,HN=t=>t.replace(jN,"");function Fu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=GN(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:la(o)}}function qN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WN(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Fi(e.matched[r],n.matched[s])&&W1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Fi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function W1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!KN(t[n],e[n]))return!1;return!0}function KN(t,e){return Hn(t)?Hp(t,e):Hn(e)?Hp(e,t):t===e}function Hp(t,e){return Hn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function GN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Ur={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ca;(function(t){t.pop="pop",t.push="push"})(ca||(ca={}));var qo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(qo||(qo={}));function zN(t){if(!t)if(ci){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),HN(t)}const YN=/^[^#]+#/;function QN(t,e){return t.replace(YN,"#")+e}function JN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const qc=()=>({left:window.scrollX,top:window.scrollY});function XN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=JN(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qp(t,e){return(history.state?history.state.position-e:-1)+t}const Lh=new Map;function ZN(t,e){Lh.set(t,e)}function eD(t){const e=Lh.get(t);return Lh.delete(t),e}let tD=()=>location.protocol+"//"+location.host;function K1(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),jp(l,"")}return jp(n,t)+r+s}function nD(t,e,n,r){let s=[],i=[],o=null;const a=({state:m})=>{const p=K1(t,location),E=n.value,A=e.value;let N=0;if(m){if(n.value=p,e.value=m,o&&o===E){o=null;return}N=A?m.position-A.position:0}else r(p);s.forEach(O=>{O(n.value,E,{delta:N,type:ca.pop,direction:N?N>0?qo.forward:qo.back:qo.unknown})})};function l(){o=n.value}function u(m){s.push(m);const p=()=>{const E=s.indexOf(m);E>-1&&s.splice(E,1)};return i.push(p),p}function h(){const{history:m}=window;m.state&&m.replaceState(Xe({},m.state,{scroll:qc()}),"")}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Wp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?qc():null}}function rD(t){const{history:e,location:n}=window,r={value:K1(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:tD()+t+l;try{e[h?"replaceState":"pushState"](u,"",m),s.value=u}catch(p){console.error(p),n[h?"replace":"assign"](m)}}function o(l,u){const h=Xe({},e.state,Wp(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,h,!0),r.value=l}function a(l,u){const h=Xe({},s.value,e.state,{forward:l,scroll:qc()});i(h.current,h,!0);const d=Xe({},Wp(r.value,l,null),{position:h.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function sD(t){t=zN(t);const e=rD(t),n=nD(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Xe({location:"",base:t,go:r,createHref:QN.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function iD(t){return typeof t=="string"||t&&typeof t=="object"}function G1(t){return typeof t=="string"||typeof t=="symbol"}const z1=Symbol("");var Kp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Kp||(Kp={}));function Ui(t,e){return Xe(new Error,{type:t,[z1]:!0},e)}function ur(t,e){return t instanceof Error&&z1 in t&&(e==null||!!(t.type&e))}const Gp="[^/]+?",oD={sensitive:!1,strict:!1,start:!0,end:!0},aD=/[.+*?^${}()[\]/\\]/g;function lD(t,e){const n=Xe({},oD,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const m=u[d];let p=40+(n.sensitive?.25:0);if(m.type===0)d||(s+="/"),s+=m.value.replace(aD,"\\$&"),p+=40;else if(m.type===1){const{value:E,repeatable:A,optional:N,regexp:O}=m;i.push({name:E,repeatable:A,optional:N});const k=O||Gp;if(k!==Gp){p+=10;try{new RegExp(`(${k})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${E}" (${k}): `+S.message)}}let I=A?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(I=N&&u.length<2?`(?:/${I})`:"/"+I),N&&(I+="?"),s+=I,p+=20,N&&(p+=-8),A&&(p+=-20),k===".*"&&(p+=-50)}h.push(p)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const p=h[m]||"",E=i[m-1];d[E.name]=p&&E.repeatable?p.split("/"):p}return d}function l(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const p of m)if(p.type===0)h+=p.value;else if(p.type===1){const{value:E,repeatable:A,optional:N}=p,O=E in u?u[E]:"";if(Hn(O)&&!A)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const k=Hn(O)?O.join("/"):O;if(!k)if(N)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${E}"`);h+=k}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function cD(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Y1(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=cD(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(zp(r))return 1;if(zp(s))return-1}return s.length-r.length}function zp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const uD={type:0,value:""},hD=/[a-zA-Z0-9_]/;function dD(t){if(!t)return[[]];if(t==="/")return[[uD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${u}": ${p}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:hD.test(l)?m():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function fD(t,e,n){const r=lD(dD(t.path),n),s=Xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function mD(t,e){const n=[],r=new Map;e=Jp({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,m,p){const E=!p,A=gD(d);A.aliasOf=p&&p.record;const N=Jp(e,d),O=[A];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of S)O.push(Xe({},A,{components:p?p.record.components:A.components,path:B,aliasOf:p?p.record:A}))}let k,I;for(const S of O){const{path:B}=S;if(m&&B[0]!=="/"){const V=m.record.path,y=V[V.length-1]==="/"?"":"/";S.path=m.record.path+(B&&y+B)}if(k=fD(S,m,N),p?p.alias.push(k):(I=I||k,I!==k&&I.alias.push(k),E&&d.name&&!Qp(k)&&o(d.name)),Q1(k)&&l(k),A.children){const V=A.children;for(let y=0;y<V.length;y++)i(V[y],k,p&&p.children[y])}p=p||k}return I?()=>{o(I)}:Ho}function o(d){if(G1(d)){const m=r.get(d);m&&(r.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const m=yD(d,n);n.splice(m,0,d),d.record.name&&!Qp(d)&&r.set(d.record.name,d)}function u(d,m){let p,E={},A,N;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw Ui(1,{location:d});N=p.record.name,E=Xe(Yp(m.params,p.keys.filter(I=>!I.optional).concat(p.parent?p.parent.keys.filter(I=>I.optional):[]).map(I=>I.name)),d.params&&Yp(d.params,p.keys.map(I=>I.name))),A=p.stringify(E)}else if(d.path!=null)A=d.path,p=n.find(I=>I.re.test(A)),p&&(E=p.parse(A),N=p.record.name);else{if(p=m.name?r.get(m.name):n.find(I=>I.re.test(m.path)),!p)throw Ui(1,{location:d,currentLocation:m});N=p.record.name,E=Xe({},m.params,d.params),A=p.stringify(E)}const O=[];let k=p;for(;k;)O.unshift(k.record),k=k.parent;return{name:N,path:A,params:E,matched:O,meta:_D(O)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Yp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function gD(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:pD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function pD(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Qp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _D(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function Jp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function yD(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Y1(t,e[i])<0?r=i:n=i+1}const s=vD(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function vD(t){let e=t;for(;e=e.parent;)if(Q1(e)&&Y1(t,e)===0)return e}function Q1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function ED(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(B1," "),o=i.indexOf("="),a=la(o<0?i:i.slice(0,o)),l=o<0?null:la(i.slice(o+1));if(a in e){let u=e[a];Hn(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Xp(t){let e="";for(let n in t){const r=t[n];if(n=UN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Hn(r)?r.map(i=>i&&Oh(i)):[r&&Oh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ID(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Hn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const wD=Symbol(""),Zp=Symbol(""),Pf=Symbol(""),J1=Symbol(""),Mh=Symbol("");function po(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function qr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=m=>{m===!1?l(Ui(4,{from:n,to:e})):m instanceof Error?l(m):iD(m)?l(Ui(2,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function Uu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(TD(l)){const h=(l.__vccOpts||l)[e];h&&i.push(qr(h,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=PN(h)?h.default:h;o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&qr(p,n,r,o,a,s)()}))}}return i}function TD(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function e_(t){const e=Qn(Pf),n=Qn(J1),r=gt(()=>{const l=pi(t.to);return e.resolve(l)}),s=gt(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(Fi.bind(null,h));if(m>-1)return m;const p=t_(l[u-2]);return u>1&&t_(h)===p&&d[d.length-1].path!==p?d.findIndex(Fi.bind(null,l[u-2])):m}),i=gt(()=>s.value>-1&&SD(n.params,r.value.params)),o=gt(()=>s.value>-1&&s.value===n.matched.length-1&&W1(n.params,r.value.params));function a(l={}){return CD(l)?e[pi(t.replace)?"replace":"push"](pi(t.to)).catch(Ho):Promise.resolve()}return{route:r,href:gt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const bD=Wi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:e_,setup(t,{slots:e}){const n=ln(e_(t)),{options:r}=Qn(Pf),s=gt(()=>({[n_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[n_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:va("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),AD=bD;function CD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function SD(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Hn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function t_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const n_=(t,e,n)=>t??e??n,PD=Wi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Qn(Mh),s=gt(()=>t.route||r.value),i=Qn(Zp,0),o=gt(()=>{let u=pi(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=gt(()=>s.value.matched[o.value]);fl(Zp,gt(()=>o.value+1)),fl(wD,a),fl(Mh,s);const l=ct();return $s(()=>[l.value,a.value,t.name],([u,h,d],[m,p,E])=>{h&&(h.instances[d]=u,p&&p!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=p.leaveGuards),h.updateGuards.size||(h.updateGuards=p.updateGuards))),u&&h&&(!p||!Fi(h,p)||!m)&&(h.enterCallbacks[d]||[]).forEach(A=>A(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,m=d&&d.components[h];if(!m)return r_(n.default,{Component:m,route:u});const p=d.props[h],E=p?p===!0?u.params:typeof p=="function"?p(u):p:null,N=va(m,Xe({},E,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return r_(n.default,{Component:N,route:u})||N}}});function r_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RD=PD;function kD(t){const e=mD(t.routes,t),n=t.parseQuery||ED,r=t.stringifyQuery||Xp,s=t.history,i=po(),o=po(),a=po(),l=vd(Ur);let u=Ur;ci&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Vu.bind(null,z=>""+z),d=Vu.bind(null,BN),m=Vu.bind(null,la);function p(z,ie){let re,ce;return G1(z)?(re=e.getRecordMatcher(z),ce=ie):ce=z,e.addRoute(ce,re)}function E(z){const ie=e.getRecordMatcher(z);ie&&e.removeRoute(ie)}function A(){return e.getRoutes().map(z=>z.record)}function N(z){return!!e.getRecordMatcher(z)}function O(z,ie){if(ie=Xe({},ie||l.value),typeof z=="string"){const T=Fu(n,z,ie.path),$=e.resolve({path:T.path},ie),Y=s.createHref(T.fullPath);return Xe(T,$,{params:m($.params),hash:la(T.hash),redirectedFrom:void 0,href:Y})}let re;if(z.path!=null)re=Xe({},z,{path:Fu(n,z.path,ie.path).path});else{const T=Xe({},z.params);for(const $ in T)T[$]==null&&delete T[$];re=Xe({},z,{params:d(T)}),ie.params=d(ie.params)}const ce=e.resolve(re,ie),De=z.hash||"";ce.params=h(m(ce.params));const Be=qN(r,Xe({},z,{hash:FN(De),path:ce.path})),R=s.createHref(Be);return Xe({fullPath:Be,hash:De,query:r===Xp?ID(z.query):z.query||{}},ce,{redirectedFrom:void 0,href:R})}function k(z){return typeof z=="string"?Fu(n,z,l.value.path):Xe({},z)}function I(z,ie){if(u!==z)return Ui(8,{from:ie,to:z})}function S(z){return y(z)}function B(z){return S(Xe(k(z),{replace:!0}))}function V(z){const ie=z.matched[z.matched.length-1];if(ie&&ie.redirect){const{redirect:re}=ie;let ce=typeof re=="function"?re(z):re;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=k(ce):{path:ce},ce.params={}),Xe({query:z.query,hash:z.hash,params:ce.path!=null?{}:z.params},ce)}}function y(z,ie){const re=u=O(z),ce=l.value,De=z.state,Be=z.force,R=z.replace===!0,T=V(re);if(T)return y(Xe(k(T),{state:typeof T=="object"?Xe({},De,T.state):De,force:Be,replace:R}),ie||re);const $=re;$.redirectedFrom=ie;let Y;return!Be&&WN(r,ce,re)&&(Y=Ui(16,{to:$,from:ce}),Je(ce,ce,!0,!1)),(Y?Promise.resolve(Y):D($,ce)).catch(G=>ur(G)?ur(G,2)?G:mt(G):Ie(G,$,ce)).then(G=>{if(G){if(ur(G,2))return y(Xe({replace:R},k(G.to),{state:typeof G.to=="object"?Xe({},De,G.to.state):De,force:Be}),ie||$)}else G=L($,ce,!0,R,De);return M($,ce,G),G})}function _(z,ie){const re=I(z,ie);return re?Promise.reject(re):Promise.resolve()}function v(z){const ie=Mt.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(z):z()}function D(z,ie){let re;const[ce,De,Be]=ND(z,ie);re=Uu(ce.reverse(),"beforeRouteLeave",z,ie);for(const T of ce)T.leaveGuards.forEach($=>{re.push(qr($,z,ie))});const R=_.bind(null,z,ie);return re.push(R),ut(re).then(()=>{re=[];for(const T of i.list())re.push(qr(T,z,ie));return re.push(R),ut(re)}).then(()=>{re=Uu(De,"beforeRouteUpdate",z,ie);for(const T of De)T.updateGuards.forEach($=>{re.push(qr($,z,ie))});return re.push(R),ut(re)}).then(()=>{re=[];for(const T of Be)if(T.beforeEnter)if(Hn(T.beforeEnter))for(const $ of T.beforeEnter)re.push(qr($,z,ie));else re.push(qr(T.beforeEnter,z,ie));return re.push(R),ut(re)}).then(()=>(z.matched.forEach(T=>T.enterCallbacks={}),re=Uu(Be,"beforeRouteEnter",z,ie,v),re.push(R),ut(re))).then(()=>{re=[];for(const T of o.list())re.push(qr(T,z,ie));return re.push(R),ut(re)}).catch(T=>ur(T,8)?T:Promise.reject(T))}function M(z,ie,re){a.list().forEach(ce=>v(()=>ce(z,ie,re)))}function L(z,ie,re,ce,De){const Be=I(z,ie);if(Be)return Be;const R=ie===Ur,T=ci?history.state:{};re&&(ce||R?s.replace(z.fullPath,Xe({scroll:R&&T&&T.scroll},De)):s.push(z.fullPath,De)),l.value=z,Je(z,ie,re,R),mt()}let P;function Te(){P||(P=s.listen((z,ie,re)=>{if(!St.listening)return;const ce=O(z),De=V(ce);if(De){y(Xe(De,{replace:!0}),ce).catch(Ho);return}u=ce;const Be=l.value;ci&&ZN(qp(Be.fullPath,re.delta),qc()),D(ce,Be).catch(R=>ur(R,12)?R:ur(R,2)?(y(R.to,ce).then(T=>{ur(T,20)&&!re.delta&&re.type===ca.pop&&s.go(-1,!1)}).catch(Ho),Promise.reject()):(re.delta&&s.go(-re.delta,!1),Ie(R,ce,Be))).then(R=>{R=R||L(ce,Be,!1),R&&(re.delta&&!ur(R,8)?s.go(-re.delta,!1):re.type===ca.pop&&ur(R,20)&&s.go(-1,!1)),M(ce,Be,R)}).catch(Ho)}))}let We=po(),Re=po(),Ce;function Ie(z,ie,re){mt(z);const ce=Re.list();return ce.length?ce.forEach(De=>De(z,ie,re)):console.error(z),Promise.reject(z)}function ot(){return Ce&&l.value!==Ur?Promise.resolve():new Promise((z,ie)=>{We.add([z,ie])})}function mt(z){return Ce||(Ce=!z,Te(),We.list().forEach(([ie,re])=>z?re(z):ie()),We.reset()),z}function Je(z,ie,re,ce){const{scrollBehavior:De}=t;if(!ci||!De)return Promise.resolve();const Be=!re&&eD(qp(z.fullPath,0))||(ce||!re)&&history.state&&history.state.scroll||null;return Id().then(()=>De(z,ie,Be)).then(R=>R&&XN(R)).catch(R=>Ie(R,z,ie))}const Ue=z=>s.go(z);let He;const Mt=new Set,St={currentRoute:l,listening:!0,addRoute:p,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:N,getRoutes:A,resolve:O,options:t,push:S,replace:B,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Re.add,isReady:ot,install(z){const ie=this;z.component("RouterLink",AD),z.component("RouterView",RD),z.config.globalProperties.$router=ie,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>pi(l)}),ci&&!He&&l.value===Ur&&(He=!0,S(s.location).catch(De=>{}));const re={};for(const De in Ur)Object.defineProperty(re,De,{get:()=>l.value[De],enumerable:!0});z.provide(Pf,ie),z.provide(J1,vy(re)),z.provide(Mh,l);const ce=z.unmount;Mt.add(z),z.unmount=function(){Mt.delete(z),Mt.size<1&&(u=Ur,P&&P(),P=null,l.value=Ur,He=!1,Ce=!1),ce()}}};function ut(z){return z.reduce((ie,re)=>ie.then(()=>v(re)),Promise.resolve())}return St}function ND(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Fi(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Fi(u,l))||s.push(l))}return[n,r,s]}const DD={props:{navId:String,route:String,icon:String,label:String},mounted(){this.update()},watch:{$route(){this.update()}},data(){return{active:!1}},methods:{update(){this.active=this.$route.meta.navId==this.navId}}},vt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function OD(t,e,n,r,s,i){const o=ht("RouterLink");return ee(),Nn(o,{to:n.route||"",class:Ge({active:s.active})},{default:mc(()=>[x("i",null,he(n.icon),1),x("div",null,he(n.label),1)]),_:1},8,["to","class"])}const X1=vt(DD,[["render",OD]]),LD={data(){return{selectedPage:"home"}},components:{NavigationItem:X1}};function MD(t,e,n,r,s,i){const o=ht("NavigationItem");return ee(),oe(_e,null,[xe(o,{"selected-route":s.selectedPage,navId:"home",route:"/",icon:"home",label:t.$t("navigation.overview")},null,8,["selected-route","label"]),xe(o,{"selected-route":s.selectedPage,navId:"acts",route:"/acts",icon:"headphones",label:t.$t("navigation.acts")},null,8,["selected-route","label"]),t.$ctx.currentUser.value!=null?(ee(),oe(_e,{key:0},[xe(o,{"selected-route":s.selectedPage,navId:"members",route:"/members",icon:"group",label:t.$t("navigation.members")},null,8,["selected-route","label"]),xe(o,{"selected-route":s.selectedPage,navId:"settings",route:"/settings",icon:"settings",label:t.$t("navigation.settings")},null,8,["selected-route","label"])],64)):Le("",!0)],64)}const xD=vt(LD,[["render",MD]]),VD={components:{NavigationItems:xD,NavigationItem:X1}},FD={class:"left drawer l"},UD={class:"left m"},$D={class:"bottom s"};function BD(t,e,n,r,s,i){const o=ht("NavigationItems"),a=ht("NavigationItem");return ee(),oe(_e,null,[x("nav",FD,[xe(o),t.$ctx.currentUser.value==null?(ee(),Nn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Le("",!0)]),x("nav",UD,[xe(o),t.$ctx.currentUser.value==null?(ee(),Nn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Le("",!0)]),x("nav",$D,[xe(o),t.$ctx.currentUser.value==null?(ee(),Nn(a,{key:0,navId:"login",route:"/login",icon:"login",label:t.$t("common.signIn")},null,8,["label"])):Le("",!0)])],64)}const jD=vt(VD,[["render",BD]]),HD={props:{hideAnon:{type:Boolean,default:!1},reload:Boolean},methods:{googleAuth(){k2(this.$ctx.auth,new gr).then(()=>{this.reload?window.location.reload():window.location.href="/"}).catch(t=>{const e=t.code,n=t.message;console.error(e,n)})},mailAuth(){this.$router.push({path:"/login/mail",query:{callback:this.$route.fullPath}})},async anonAuth(){await r2(this.$ctx.auth),this.reload?window.location.reload():window.location.href="/"}}},qD=x("i",{class:"mdi mdi-google"},null,-1),WD=x("span",null,"Google",-1),KD=[qD,WD],GD=x("div",{class:"space"},null,-1),zD=x("i",null,"mail",-1),YD=x("div",{class:"space"},null,-1),QD=x("i",null,"password_2_off",-1);function JD(t,e,n,r,s,i){return ee(),oe(_e,null,[x("button",{class:"responsive large",onClick:e[0]||(e[0]=o=>i.googleAuth())},KD),GD,x("button",{class:"responsive large",onClick:e[1]||(e[1]=o=>i.mailAuth())},[zD,x("span",null,he(t.$t("common.mail")),1)]),n.hideAnon?Le("",!0):(ee(),oe(_e,{key:0},[YD,x("button",{class:"responsive fill large",onClick:e[2]||(e[2]=o=>i.anonAuth())},[QD,x("span",null,he(t.$t("common.anon")),1)])],64))],64)}const XD=vt(HD,[["render",JD]]),ZD={props:{plain:Boolean},data(){return{privacyPolicyUrl:void 0}},mounted(){this.privacyPolicyUrl="/privacy.html"}},eO={key:0,class:"link"},tO=["href"],nO={key:1,class:"center-align",style:{display:"fixed",bottom:"0",left:"0",width:"100%"}},rO={class:"link"},sO=["href"];function iO(t,e,n,r,s,i){return s.privacyPolicyUrl?(ee(),oe(_e,{key:0},[n.plain?(ee(),oe("p",eO,[x("a",{class:"link underline",href:s.privacyPolicyUrl},he(t.$t("privacyPolicy")),9,tO)])):Le("",!0),n.plain?Le("",!0):(ee(),oe("div",nO,[x("p",rO,[x("a",{class:"link underline",href:s.privacyPolicyUrl},he(t.$t("privacyPolicy")),9,sO)])]))],64)):Le("",!0)}const oO=vt(ZD,[["render",iO]]),aO={data(){return{openSignOutConfirmDialog:!1}},methods:{async signOut(t=!1){var e;if(!t&&((e=this.$ctx.currentUser.value)!=null&&e.isAnonymous)){this.openSignOutConfirmDialog=!0;return}await this.$ctx.auth.signOut(),window.location.reload()}},components:{LoginButtons:XD,PrivacyPolicyLink:oO}},lO={class:"responsive max"},cO={key:0,class:"middle-align",style:{height:"100%"}},uO={class:"large-padding center middle-align center-align"},hO={class:"large-padding"},dO=x("i",{class:"extra"},"login",-1),fO={class:"center-align"},mO=x("br",null,null,-1),gO=x("div",{class:"space"},null,-1),pO={class:"center-align"},_O={key:1,class:"middle-align",style:{height:"100%"}},yO={class:"medium center middle-align center-align"},vO={key:0,class:"extra"},EO=["src"],IO={class:"center-align"},wO={class:"link small-text"},TO=x("div",{class:"space"},null,-1),bO={class:"center-align"},AO=x("i",null,"logout",-1),CO={class:"right-align no-space"},SO=x("div",{class:"space"},null,-1);function PO(t,e,n,r,s,i){var l,u;const o=ht("LoginButtons"),a=ht("PrivacyPolicyLink");return ee(),oe(_e,null,[x("main",lO,[t.$ctx.currentUser.value==null?(ee(),oe("div",cO,[x("article",uO,[x("div",hO,[dO,x("h5",fO,he(t.$t("common.signIn")),1),x("p",null,[rh(he(t.$t("login.signIn.message[0]")),1),mO,rh(he(t.$t("login.signIn.message[1]")),1)]),gO,x("div",pO,[xe(o)])])])])):Le("",!0),t.$ctx.currentUser.value!=null?(ee(),oe("div",_O,[x("article",yO,[x("div",null,[t.$ctx.currentUser.value.photoURL==null?(ee(),oe("i",vO,"person")):Le("",!0),t.$ctx.currentUser.value.photoURL!=null?(ee(),oe("img",{key:1,class:"circle large",src:t.$ctx.currentUser.value.photoURL,referrerpolicy:"no-referrer"},null,8,EO)):Le("",!0),x("h5",IO,he(t.$t("common.greeting"))+" "+he(((u=(l=t.$client.space)==null?void 0:l.self)==null?void 0:u.name)||(t.$ctx.currentUser.value.isAnonymous?t.$t("common.anon"):t.$ctx.currentUser.value.displayName)),1),x("p",null,he(t.$t("login.alreadyLoggedIn")),1),x("span",wO,he(t.$ctx.currentUser.value.email||t.$ctx.currentUser.value.uid),1),TO,x("nav",bO,[x("button",{class:"large",onClick:e[0]||(e[0]=h=>i.signOut())},[AO,x("span",null,he(t.$t("common.logOut")),1)])])])])])):Le("",!0)]),xe(a),x("div",{class:Ge(["overlay",{active:s.openSignOutConfirmDialog}]),onClick:e[1]||(e[1]=h=>s.openSignOutConfirmDialog=!1)},null,2),x("dialog",{class:Ge(["error",{active:s.openSignOutConfirmDialog}])},[x("h5",null,he(t.$t("settings.dialog.anonLogOut.title")),1),x("div",null,he(t.$t("settings.dialog.anonLogOut.message")),1),x("nav",CO,[x("button",{class:"error transparent",onClick:e[2]||(e[2]=h=>s.openSignOutConfirmDialog=!1)},he(t.$t("common.abort")),1),SO,x("button",{class:"error-container no-elevate",onClick:e[3]||(e[3]=h=>{s.openSignOutConfirmDialog=!1,i.signOut(!0)})},he(t.$t("common.confirm")),1)])],2)],64)}const Z1=vt(aO,[["render",PO]]),RO=Object.freeze(Object.defineProperty({__proto__:null,default:Z1},Symbol.toStringTag,{value:"Module"})),kO={props:{event:{type:Object,required:!0}},methods:{showOnTimetable(){this.$router.push({path:"/",query:{eventId:this.event.data.uid.toString()}})}}},NO={class:"scroll hide-scrollbar",style:{"z-index":"10"}},DO=x("div",null,null,-1),OO={class:"chip fill"},LO={class:"chip fill"};function MO(t,e,n,r,s,i){return ee(),oe("nav",NO,[DO,x("a",OO,he(n.event.data.stage.title),1),x("a",LO,he(t.$t(n.event.data.performance.title)),1),x("a",{class:"chip fill",onClick:e[0]||(e[0]=o=>{o.stopPropagation(),i.showOnTimetable()})},he(t.$t(n.event.data.festivalday.title)),1),x("a",{class:"chip fill",onClick:e[1]||(e[1]=o=>{o.stopPropagation(),i.showOnTimetable()})},he(new Date(parseInt(n.event.data.start)*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"}))+" "+he(t.$t("common.until"))+" "+he(new Date(parseInt(n.event.data.end)*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"})),1)])}const Rf=vt(kO,[["render",MO]]),xO={props:{event:{type:Object,required:!0},lockSpotify:{type:Boolean,default:!1}},data(){return{spotifyController:void 0,spotifyEmbedHtml:"",showSpotifyUnlock:!1,spotifyLocked:!0}},methods:{update(){var e,n,r,s;this.showSpotifyUnlock=!1,this.spotifyLocked=!0;let t=window.matchMedia&&((n=(e=window.matchMedia)==null?void 0:e.call(window,"screen and (max-width: 994px)"))==null?void 0:n.matches);(s=(r=this.spotifyController)==null?void 0:r.destroy)==null||s.call(r),this.spotifyEmbedHtml="",setTimeout(()=>{var o,a;let i=crypto.randomUUID();this.spotifyEmbedHtml=`<div id="event-details-spotify-widget-${i}"></div>`;try{let l=(o=this.event.data.artists[0])==null?void 0:o.assets[0].spotifyartist,u=(a=this.event.data.artists[0])==null?void 0:a.assets[0].spotifyalbum;(l.length>2||u.length>2)&&(window.onSpotifyIframeApiReady=h=>{const d={uri:`spotify:${u.length>2?`album:${u}`:`artist:${l}`}`,height:t?void 0:180};h.createController(document.querySelector(`#event-details-spotify-widget-${i}`),d,m=>{this.spotifyController=m}),this.lockSpotify&&(this.showSpotifyUnlock=!0,this.spotifyLocked=!0)})}catch(l){console.error(l)}},1)}},mounted(){this.update()},watch:{event(){this.update()}},components:{EventDetailsChips:Rf}},VO={class:"no-padding"},FO={class:"padding",style:{"padding-bottom":"0 !important"}},UO=x("div",{class:"space"},null,-1),$O={class:"padding"},BO={class:"middle-align"},jO=x("i",{class:"fill"},"favorite",-1),HO={style:{"margin-block-start":"0","margin-left":"1rem"}},qO=x("div",{class:"space"},null,-1),WO={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",gap:"8px"}},KO=x("div",{class:"space"},null,-1),GO={class:"padding"},zO={class:"middle-align"},YO=x("i",{class:"fill"},"thumb_up",-1),QO={style:{"margin-block-start":"0","margin-left":"1rem"}},JO=x("div",{class:"space"},null,-1),XO={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",gap:"8px"}},ZO=x("div",{class:"space"},null,-1),eL={class:"padding"},tL={key:0,style:{width:"100%"}},nL=["innerHTML"],rL=["innerHTML"];function sL(t,e,n,r,s,i){const o=ht("EventDetailsChips");return ee(),oe("article",VO,[x("div",FO,[x("h5",null,he(n.event.cardTitle()),1)]),xe(o,{event:n.event},null,8,["event"]),UO,n.event.likerIds.length>0?(ee(),oe(_e,{key:0},[x("div",$O,[x("div",BO,[jO,x("h6",HO,he(t.$t("common.liked")),1)]),qO,x("div",WO,[(ee(!0),oe(_e,null,Yt(n.event.likerIds,a=>{var l,u;return ee(),oe("a",{class:Ge(["chip no-border",[`${(l=t.$client.container.spaceMemberById.get(a))==null?void 0:l.color}4`]]),style:{margin:0,color:"black"}},he((u=t.$client.container.spaceMemberById.get(a))==null?void 0:u.name),3)}),256))])]),KO],64)):Le("",!0),n.event.suggestorIds.length>0?(ee(),oe(_e,{key:1},[x("div",GO,[x("div",zO,[YO,x("h6",QO,he(t.$t("common.recommended")),1)]),JO,x("div",XO,[(ee(!0),oe(_e,null,Yt(n.event.suggestorIds,a=>{var l,u;return ee(),oe("a",{class:Ge(["chip no-border",[`${(l=t.$client.container.spaceMemberById.get(a))==null?void 0:l.color}4`]]),style:{margin:0,color:"black"}},he((u=t.$client.container.spaceMemberById.get(a))==null?void 0:u.name),3)}),256))])]),ZO],64)):Le("",!0),x("div",eL,[s.showSpotifyUnlock&&s.spotifyLocked?(ee(),oe("div",tL,[x("div",{class:"absolute spotify-unlocker",onClick:e[0]||(e[0]=a=>s.spotifyLocked=!1)})])):Le("",!0),x("div",{innerHTML:s.spotifyEmbedHtml},null,8,nL),x("div",{innerHTML:n.event.cardDescription()},null,8,rL)])])}const iL=vt(xO,[["render",sL]]),oL={props:{open:Boolean,event:{type:Object,required:!0}},methods:{toggleSuggested(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleSuggested(this.event.data.uid)},toggleLike(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleLike(this.event.data.uid)}},emits:["dismiss"],components:{EventDetailsDialogContent:iL,EventDetailsChips:Rf}},aL=["src"],lL={class:"blur",style:{"border-radius":"1.75rem",position:"sticky",top:"0","z-index":"100"}},cL=x("div",{class:"small-space"},null,-1),uL=x("i",null,"close",-1),hL=[uL],dL={class:"max"},fL=x("div",{class:"small-space"},null,-1),mL=["src"];function gL(t,e,n,r,s,i){var a,l,u,h,d,m,p,E;const o=ht("EventDetailsDialogContent");return ee(),oe(_e,null,[x("div",{class:Ge(["overlay",{active:n.open}]),onClick:e[0]||(e[0]=A=>t.$emit("dismiss"))},null,2),x("dialog",{class:Ge([{active:n.open},"max-s"])},[x("img",{class:"responsive large absolute top right",src:n.event.cardThumbnailUrl()},null,8,aL),x("header",lL,[x("nav",null,[cL,x("button",{class:"circle transparent",onClick:e[1]||(e[1]=A=>t.$emit("dismiss"))},hL),x("h5",dL,he(t.$t("common.details")),1),x("button",{class:"transparent circle",onClick:e[2]||(e[2]=A=>i.toggleSuggested())},[x("i",{class:Ge(["ignore-hover-fill",{fill:(l=(a=t.$client.space)==null?void 0:a.self)==null?void 0:l.isSuggested(n.event.data.uid),"primary-text":(h=(u=t.$client.space)==null?void 0:u.self)==null?void 0:h.isSuggested(n.event.data.uid)}])},"thumb_up",2)]),x("button",{class:"transparent circle",onClick:e[3]||(e[3]=A=>i.toggleLike())},[x("i",{class:Ge(["ignore-hover-fill",{fill:(m=(d=t.$client.space)==null?void 0:d.self)==null?void 0:m.isLiked(n.event.data.uid),"primary-text":(E=(p=t.$client.space)==null?void 0:p.self)==null?void 0:E.isLiked(n.event.data.uid)}])},"favorite",2)]),fL])]),x("img",{class:"responsive large",style:{opacity:"0"},src:n.event.cardThumbnailUrl()||"/"},null,8,mL),xe(o,{event:n.event,style:{"margin-top":"-112px"}},null,8,["event"])],2)],64)}const pL=vt(oL,[["render",gL]]),_L={data(){return{openEventDetailsDialog:!1,selectedEvent:void 0}},methods:{update(){let t=this.$route.query.details;if(t===void 0)this.openEventDetailsDialog=!1;else{let e=this.$client.container.eventByUid.value.get(parseInt(t+""));e!==void 0&&(this.selectedEvent=e),setTimeout(()=>{this.openEventDetailsDialog=!0},50)}},dismiss(){this.$router.back()}},mounted(){this.update()},watch:{$route(){this.update()}},components:{EventDetailsDialog:pL}};function yL(t,e,n,r,s,i){const o=ht("EventDetailsDialog");return s.selectedEvent!=null?(ee(),Nn(o,{key:0,open:s.openEventDetailsDialog,event:s.selectedEvent,onDismiss:e[0]||(e[0]=a=>i.dismiss())},null,8,["open","event"])):Le("",!0)}const vL=vt(_L,[["render",yL]]),EL={props:{event:{type:Object,required:!1},highlighted:{type:Boolean,default:!1}},methods:{openDialog(){var t;this.$router.push({query:{details:(t=this.event)==null?void 0:t.data.uid}})}}},IL={class:"round"},wL={class:"max"},TL={class:"small",style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"2.4em","line-height":"1.2em"}},bL={style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden",gap:"4px"}},AL={class:"surface-container round"},CL={class:"surface-container round"};function SL(t,e,n,r,s,i){var a,l;const o=Vy("lazy");return n.event!==void 0?(ee(),oe("a",{key:0,class:Ge(["row padding",[`${n.highlighted?"tertiary":(l=(a=t.$client.space)==null?void 0:a.self)!=null&&l.isLiked(n.event.data.uid)?"primary":n.event.likerIds.length>0||n.event.suggestorIds.length>0?t.$ctx.darkMode.value?"surface-variant":"secondary":"surface-container"}`]]),onClick:e[0]||(e[0]=u=>i.openDialog())},[Uy(t.$slots,"default"),ko(x("img",IL,null,512),[[o,{src:n.event.cardThumbnailUrl()}]]),x("div",wL,[x("h6",TL,he(n.event.cardTitle()),1),x("div",null,[x("div",bL,[(ee(!0),oe(_e,null,Yt(n.event.likerIds,u=>{var h;return ee(),oe("div",AL,[x("i",{class:Ge(["fill",[`${(h=t.$client.container.spaceMemberById.get(u))==null?void 0:h.color}-text`]]),style:{scale:.7}}," favorite ",2)])}),256)),(ee(!0),oe(_e,null,Yt(n.event.suggestorIds,u=>{var h;return ee(),oe("div",CL,[x("i",{class:Ge(["fill",[`${(h=t.$client.container.spaceMemberById.get(u))==null?void 0:h.color}-text`]]),style:{scale:.7}}," thumb_up ",2)])}),256))])])])],2)):Le("",!0)}const eE=vt(EL,[["render",SL]]),PL={props:{open:Boolean,member:{type:Object,required:!0}},methods:{update(){}},mounted(){this.update()},watch:{event(){this.update()}},emits:["dismiss"],components:{EventCard:eE}},RL={class:"surface-container fixed",style:{padding:"0 1rem"}},kL=x("i",null,"close",-1),NL=[kL],DL={class:"max"},OL={class:"padding"},LL={class:"middle-align"},ML=x("i",{class:"fill"},"favorite",-1),xL={style:{"margin-block-start":"0","margin-left":"1rem"}},VL=x("div",{class:"space"},null,-1),FL=x("div",{class:"large-space"},null,-1),UL={class:"middle-align"},$L=x("i",{class:"fill"},"thumb_up",-1),BL={style:{"margin-block-start":"0","margin-left":"1rem"}},jL=x("div",{class:"space"},null,-1);function HL(t,e,n,r,s,i){const o=ht("EventCard");return ee(),oe(_e,null,[x("div",{class:Ge(["overlay",{active:n.open}]),onClick:e[0]||(e[0]=a=>t.$emit("dismiss"))},null,2),x("dialog",{class:Ge([{active:n.open},"max-s no-padding"])},[x("header",RL,[x("nav",null,[x("button",{class:"circle transparent",onClick:e[1]||(e[1]=a=>t.$emit("dismiss"))},NL),x("h5",DL,he(n.member.name),1)])]),x("div",OL,[x("div",LL,[ML,x("h6",xL,he(t.$t("common.liked")),1)]),VL,(ee(!0),oe(_e,null,Yt(n.member.likes,a=>(ee(),Nn(o,{event:t.$client.container.eventByUid.value.get(a)},null,8,["event"]))),256)),FL,x("div",UL,[$L,x("h6",BL,he(t.$t("common.recommended")),1)]),jL,(ee(!0),oe(_e,null,Yt(n.member.suggestions,a=>(ee(),Nn(o,{event:t.$client.container.eventByUid.value.get(a)},null,8,["event"]))),256))])],2)],64)}const qL=vt(PL,[["render",HL]]),WL={data(){return{openDialog:!1,selectedMember:void 0}},methods:{update(){var e;let t=this.$route.query.member;if(t===void 0)this.openDialog=!1;else{let n=(e=this.$client.space)==null?void 0:e.members.find(r=>r.id==t+"");this.selectedMember=n,setTimeout(()=>{this.openDialog=!0},50)}},dismiss(){this.$router.back()}},mounted(){this.update()},watch:{$route(){this.update()}},components:{MemberDetailsDialog:qL}};function KL(t,e,n,r,s,i){const o=ht("MemberDetailsDialog");return s.selectedMember!=null?(ee(),Nn(o,{key:0,open:s.openDialog,member:s.selectedMember,onDismiss:e[0]||(e[0]=a=>i.dismiss())},null,8,["open","member"])):Le("",!0)}const GL=vt(WL,[["render",KL]]),zL={data(){return{active:!1,installPrompt:void 0}},mounted(){window.addEventListener("beforeinstallprompt",t=>{this.installPrompt=t,this.active=!0})},methods:{install(){this.installPrompt.prompt()}}},YL={class:"max"},QL=x("i",null,"add",-1),JL=[QL];function XL(t,e,n,r,s,i){return ee(),oe("div",{class:Ge(["snackbar primary",{active:s.active}]),onClick:e[1]||(e[1]=o=>i.install())},[x("div",YL,he(t.$t("pwaAdvert")),1),x("button",{class:"fill circle no-elevate",onClick:e[0]||(e[0]=o=>i.install())},JL)],2)}const ZL=vt(zL,[["render",XL]]),eM={data(){return{offlineCheckInterval:0,onlineAgain:!1}},methods:{updateThemeColor(){var n;let t=ui("mode"),e=ui("theme")[t].split("--surface-container:")[1].split(";")[0];(n=document.querySelector('meta[name="theme-color"]'))==null||n.setAttribute("content",e)},checkSystemTheme(){this.$ctx.systemDarkMode.value&&(this.$ctx.darkMode.value=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)},checkOffline(){clearInterval(this.offlineCheckInterval),this.$client.offline.value&&(this.offlineCheckInterval=setInterval(async()=>{try{await fetch(`/${crypto.randomUUID()}`,{signal:AbortSignal.timeout(3500)}),this.onlineAgain=!0}catch(t){console.error(t)}},4e3))},reloadPage(){window.location.reload()}},mounted(){this.$ctx.darkMode.value=(localStorage.getItem("darkMode")||"false")=="true",this.$ctx.systemDarkMode.value=(localStorage.getItem("systemDarkMode")||"true")=="true",this.checkSystemTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.$ctx.systemDarkMode.value&&(this.$ctx.darkMode.value=t.matches)}),setTimeout(()=>{this.updateThemeColor()},50),this.checkOffline()},watch:{"$ctx.systemDarkMode.value"(){this.checkSystemTheme(),localStorage.setItem("systemDarkMode",this.$ctx.systemDarkMode.value+"")},"$ctx.darkMode.value"(){ui("mode",this.$ctx.darkMode.value?"dark":"light"),this.updateThemeColor(),localStorage.setItem("darkMode",this.$ctx.darkMode.value+"")},"$client.offline.value"(){this.checkOffline()},"showOfflineReadyToast.value"(){this.showOfflineReadyToast.value&&setTimeout(()=>{this.showOfflineReadyToast.value=!1},4e3)}},components:{Navigation:jD,LoginView:Z1,RouteBasedEventDetailsDialog:vL,RouteBasedMemberDetailsDialog:GL,AdvertisePWA:ZL}},tM={key:0,class:"max responsive center-align middle-align"},nM=x("progress",{style:{"max-width":"300px"}},null,-1),rM=[nM],sM=x("div",{class:"space"},null,-1),iM={class:"right-align no-space"},oM=x("i",null,"globe",-1),aM=x("i",null,"offline_bolt",-1),lM=x("i",null,"offline_bolt",-1);function cM(t,e,n,r,s,i){const o=ht("Navigation"),a=ht("RouterView"),l=ht("LoginView"),u=ht("RouteBasedEventDetailsDialog"),h=ht("RouteBasedMemberDetailsDialog"),d=ht("AdvertisePWA");return ee(),oe(_e,null,[t.$ctx.loaded.value?Le("",!0):(ee(),oe("main",tM,rM)),t.$ctx.loaded.value?(ee(),oe(_e,{key:1},[t.$route.meta.requiresAuth===!1||t.$ctx.currentUser.value!=null?(ee(),oe(_e,{key:0},[t.$route.meta.hideNavigation!==!0?(ee(),Nn(o,{key:0})):Le("",!0),xe(a)],64)):Le("",!0),t.$route.meta.requiresAuth!==!1&&t.$ctx.currentUser.value==null?(ee(),Nn(l,{key:1})):Le("",!0),xe(u),xe(h),x("div",{class:Ge(["overlay",{active:t.openLoginNeededDialog.value}]),onClick:e[0]||(e[0]=m=>t.openLoginNeededDialog.value=!1)},null,2),x("dialog",{class:Ge({active:t.openLoginNeededDialog.value})},[x("h5",null,he(t.$t("dialog.login-needed.title")),1),x("div",null,he(t.$t("dialog.login-needed.message")),1),sM,x("nav",iM,[x("button",{class:"no-elevate",onClick:e[1]||(e[1]=m=>{t.$router.push("/login"),t.openLoginNeededDialog.value=!1})},he(t.$t("common.signIn")),1)])],2),xe(d),x("div",{class:Ge(["snackbar green center-align",{active:t.$client.offline.value&&s.onlineAgain}]),onClick:e[2]||(e[2]=m=>i.reloadPage())},[oM,x("div",null,he(t.$t("app.offline.onlineAgain.message")),1)],2),x("div",{class:Ge(["snackbar primary center-align",{active:t.$client.offline.value&&!s.onlineAgain}])},[aM,x("div",null,he(t.$t("app.offline.message")),1)],2),x("div",{class:Ge(["snackbar secondary center-align",{active:t.showOfflineReadyToast.value}]),onClick:e[3]||(e[3]=m=>t.showOfflineReadyToast.value=!1)},[lM,x("div",null,he(t.$t("app.offline.ready.message")),1)],2)],64)):Le("",!0)],64)}const uM=vt(eM,[["render",cM]]),hM={props:{label:{type:String}}},dM={class:"max center-align"},fM=x("i",{class:"ignore-hover-fill"},"sync",-1),mM=[fM],gM=x("i",{class:"ignore-hover-fill"},"light_mode",-1),pM=[gM],_M=x("i",{class:"ignore-hover-fill"},"dark_mode",-1),yM=[_M],vM=["src"];function EM(t,e,n,r,s,i){var o,a;return ee(),oe("header",null,[x("nav",null,[Uy(t.$slots,"prepend"),x("h5",dM,he(n.label),1),t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:0,class:"circle transparent",onClick:e[0]||(e[0]=l=>{t.$ctx.systemDarkMode.value=!1,t.$ctx.darkMode.value=!1})},mM)):Le("",!0),!t.$ctx.darkMode.value&&!t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:1,class:"circle transparent",onClick:e[1]||(e[1]=l=>t.$ctx.darkMode.value=!0)},pM)):Le("",!0),t.$ctx.darkMode.value&&!t.$ctx.systemDarkMode.value?(ee(),oe("button",{key:2,class:"circle transparent",onClick:e[2]||(e[2]=l=>t.$ctx.systemDarkMode.value=!0)},yM)):Le("",!0),(o=t.$ctx.currentUser.value)!=null&&o.photoURL?(ee(),oe("button",{key:3,class:"circle transparent",onClick:e[3]||(e[3]=l=>t.$router.push("/login"))},[x("img",{class:"responsive",src:(a=t.$ctx.currentUser.value)==null?void 0:a.photoURL},null,8,vM)])):Le("",!0)])])}const tE=vt(hM,[["render",EM]]),IM={props:{filterStages:{type:Object,default:[]}},data(){return{currentSec:0,selectedDay:void 0,highlightedEventId:-1,columns:[],timeCells:[],dateWasChosen:!1,menuActive:!1}},methods:{selectDay(t){this.selectedDay=t,this.dateWasChosen=!0,ui("#events-table-day-selector")},render(){var e;let t=[];for(let n of this.$client.container.events)n.data.festivalday.uid===((e=this.selectedDay)==null?void 0:e.uid)&&(n.end<this.currentSec&&!this.dateWasChosen||(t.includes(n.start)||t.push(n.start),t.includes(n.end)||t.push(n.end)));t.sort(),this.timeCells=t,this.columns=[];for(let n of this.$client.container.stages.value){if(this.filterStages.includes(n.uid))continue;let r={startOffset:0,label:n.title,eventEntryByRow:[]},s=this.$client.container.eventsByStageUid.value.get(n.uid);if(s===void 0)continue;s.sort((u,h)=>u.start-h.start);let i=new Map;for(let u of s)i.set(u.start,u);let o=new Map,a;for(let u of t)i.has(u)&&(a=i.get(u),a.columnSpan=0),a!=null&&a.end==u&&(a=void 0),a!=null&&(a.columnSpan++,o.set(u,a));let l=!1;for(let u of t)i.has(u)?(r.eventEntryByRow.push(i.get(u)),l=!0):o.has(u)||r.eventEntryByRow.push(null);l&&this.columns.push(r)}}},mounted(){let t=new Date;if(this.currentSec=t.getTime()/1e3,this.$route.query.eventId||this.$route.query.dayId){let e=(this.$route.query.eventId?()=>{let n=this.$client.container.eventByUid.value.get(parseInt(this.$route.query.eventId));return n==null?void 0:n.data.festivalday.uid}:()=>{var n;return parseInt(((n=this.$route.query.dayId)==null?void 0:n.toString())||"")})();if(this.selectedDay=this.$client.container.days.value.find(n=>n.uid==e),this.$route.query.eventId){let n=this.$client.container.eventByUid.value.get(parseInt(this.$route.query.eventId));setTimeout(()=>{let r=document.querySelector(`#event-${n==null?void 0:n.data.uid}`);r==null||r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),this.highlightedEventId=(n==null?void 0:n.data.uid)||-1,setTimeout(()=>{this.highlightedEventId=-1},2e3)},500)}}else{for(let e of this.$client.container.days.value)if(!(parseInt(e.end)<this.currentSec)){this.selectedDay=e;break}this.selectedDay===void 0&&(this.selectedDay=this.$client.container.days.value[this.$client.container.days.value.length-1])}this.render()},watch:{selectedDay(){var t;this.render(),this.$router.replace({query:{dayId:((t=this.selectedDay)==null?void 0:t.uid)||-1}})},filterStages(){this.render()}},components:{EventCard:eE}},wM={class:"center responsive s",style:{"z-index":"10"}},TM=x("i",null,"arrow_drop_down",-1),bM={id:"events-table-day-selector"},AM=["onClick"],CM={class:"l m no-space center-align"},SM=["onClick"],PM=x("div",{class:"space"},null,-1),RM={style:{height:"100%"}},kM={class:"scroll events-table",style:{display:"block","max-height":"100%","min-height":"100%"}},NM={class:"fixed"},DM={style:{"min-width":"150px"}},OM={style:{position:"sticky",left:"0","padding-bottom":"0"}},LM={class:"primary-text bold",style:{"margin-bottom":"0"}},MM=["colspan","id"],xM={key:1,class:"surface"};function VM(t,e,n,r,s,i){var a;const o=ht("EventCard");return ee(),oe(_e,null,[x("button",wM,[x("span",null,he(t.$t(((a=s.selectedDay)==null?void 0:a.title)||"")),1),TM,x("menu",bM,[(ee(!0),oe(_e,null,Yt(t.$client.container.days.value,l=>(ee(),oe("a",{onClick:u=>i.selectDay(l)},he(t.$t(l.title)),9,AM))),256))])]),x("nav",CM,[(ee(!0),oe(_e,null,Yt(t.$client.container.days.value.length,l=>(ee(),oe("button",{class:Ge(["border",[`${l==1?"left":l==t.$client.container.days.value.length?"right":"no"}-round`,{fill:s.selectedDay==t.$client.container.days.value[l-1]}]]),onClick:u=>i.selectDay(t.$client.container.days.value[l-1])},[x("span",null,he(t.$t(t.$client.container.days.value[l-1].title).substring(0,2)),1)],10,SM))),256))]),PM,x("div",RM,[x("table",kM,[x("thead",NM,[x("tr",null,[(ee(!0),oe(_e,null,Yt(s.timeCells,l=>(ee(),oe("th",DM,he(new Date(l*1e3).toLocaleTimeString("de",{hour:"2-digit",minute:"2-digit"})),1))),256))])]),x("tbody",null,[(ee(!0),oe(_e,null,Yt(s.columns,l=>(ee(),oe(_e,null,[x("tr",null,[x("td",OM,[x("p",LM,he(l.label),1)]),(ee(!0),oe(_e,null,Yt(s.timeCells.length-1,u=>(ee(),oe("td"))),256))]),x("tr",null,[(ee(!0),oe(_e,null,Yt(l.eventEntryByRow,u=>(ee(),oe(_e,null,[u!=null?(ee(),oe("td",{key:0,colspan:u.columnSpan,id:`event-${u.data.uid.toString()}`,class:"surface",style:{"min-width":"300px",position:"sticky",left:"0"}},[xe(o,{style:{"min-width":"300px",position:"sticky",left:"0"},event:u,highlighted:u.data.uid==s.highlightedEventId},null,8,["event","highlighted"])],8,MM)):Le("",!0),u==null?(ee(),oe("td",xM)):Le("",!0)],64))),256))])],64))),256))])])])],64)}const FM=vt(IM,[["render",VM]]),UM={data(){return{loaded:!1,filteredStageIds:[],finalFilteredStageIds:[],save:!1}},methods:{toggleFilter(t){this.filteredStageIds.includes(t)?this.filteredStageIds=this.filteredStageIds.filter(e=>e!=t):this.filteredStageIds.push(t)},openStageSelectionDialog(){this.$router.push({query:{dialogFilterStages:"true",...this.$route.query}})}},mounted(){if(localStorage.getItem("filterStages")!=null)try{let t=JSON.parse(localStorage.getItem("filterStages")||"");this.filteredStageIds=t,this.finalFilteredStageIds=t}catch(t){console.error(t)}(async()=>{var t;for(;((t=this.$client.space)==null?void 0:t.loaded)!=!0;)await Zl(50);this.loaded=!0})()},beforeRouteUpdate(t,e){e.query.dialogFilterStages&&!t.query.dialogFilterStages&&(console.info("closed filter stages dialog"),this.finalFilteredStageIds=[...this.filteredStageIds],this.save&&localStorage.setItem("filterStages",JSON.stringify(this.finalFilteredStageIds)))},components:{AppBar:tE,EventsTable:FM}},$M=x("i",null,"tune",-1),BM={key:0,class:"badge"},jM={class:"responsive max"},HM=x("div",{class:"space"},null,-1),qM=["onClick"],WM={class:"max"},KM={class:"switch"},GM=["checked","onClick"],zM=x("span",null,null,-1),YM=x("div",{class:"space"},null,-1),QM={class:"max"},JM={class:"switch"},XM=["checked"],ZM=x("span",null,null,-1),e4=x("div",{class:"space"},null,-1),t4={class:"right-align no-space"};function n4(t,e,n,r,s,i){var l,u;const o=ht("AppBar"),a=ht("EventsTable");return ee(),oe(_e,null,[xe(o,{label:s.loaded&&((l=t.$client.space)!=null&&l.name)?(u=t.$client.space)==null?void 0:u.name:t.$t("navigation.overview")},{prepend:mc(()=>[x("button",{class:"circle transparent",onClick:e[0]||(e[0]=h=>i.openStageSelectionDialog())},[$M,s.finalFilteredStageIds.length>0?(ee(),oe("div",BM,he(s.finalFilteredStageIds.length),1)):Le("",!0)])]),_:1},8,["label"]),x("main",jM,[xe(a,{filterStages:s.finalFilteredStageIds},null,8,["filterStages"])]),x("div",{class:Ge(["overlay",{active:t.$route.query.dialogFilterStages}]),onClick:e[1]||(e[1]=h=>t.$router.back())},null,2),x("dialog",{class:Ge({active:t.$route.query.dialogFilterStages})},[x("h5",null,he(t.$t("home.dialog.filterStages.title")),1),x("article",null,[(ee(!0),oe(_e,null,Yt(t.$client.container.stages.value,h=>(ee(),oe(_e,null,[HM,x("div",{class:"field middle-align",style:{cursor:"pointer","margin-block-end":"1rem"},onClick:d=>i.toggleFilter(h.uid)},[x("nav",null,[x("div",WM,[x("h6",null,he(h.title),1)]),x("label",KM,[x("input",{type:"checkbox",checked:!s.filteredStageIds.includes(h.uid),onClick:d=>i.toggleFilter(h.uid)},null,8,GM),zM])])],8,qM)],64))),256))]),YM,x("div",{class:"field middle-align",onClick:e[3]||(e[3]=h=>s.save=!s.save)},[x("nav",null,[x("div",QM,[x("h6",null,he(t.$t("home.dialog.filterStages.save.title")),1),x("div",null,he(t.$t("home.dialog.filterStages.save.description")),1)]),x("label",JM,[x("input",{type:"checkbox",checked:s.save,onClick:e[2]||(e[2]=h=>s.save=!s.save)},null,8,XM),ZM])])]),e4,x("nav",t4,[x("button",{class:"no-elevate",onClick:e[4]||(e[4]=h=>t.$router.back())},he(t.$t("common.ok")),1)])],2)],64)}const r4=vt(UM,[["render",n4]]);function s4(t){return(new DOMParser().parseFromString(t,"text/html").body.textContent||"").trim()}const i4={props:{event:{type:Object,required:!0},notLazy:{type:Boolean,default:!1}},methods:{removeHTMLTags(t){return s4(t)},openDialog(){this.$router.push({query:{details:this.event.data.uid}})},toggleSuggested(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleSuggested(this.event.data.uid)},toggleLike(){var t,e;if(this.$ctx.currentUser.value===void 0){this.openLoginNeededDialog.value=!0;return}(e=(t=this.$client.space)==null?void 0:t.self)==null||e.toggleLike(this.event.data.uid)}},components:{EventDetailsChips:Rf}},o4={class:"absolute top right right padding white-text",style:{"z-index":"10"}},a4={key:0,class:"responsive large"},l4=["src"],c4={key:2,class:"absolute bottom left padding white-text rounded",style:{"z-index":"10","max-width":"50%",overflow:"hidden"}},u4={class:"blur small-padding",style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden"}},h4={key:3,class:"absolute bottom right padding white-text rounded",style:{"z-index":"10","max-width":"50%",overflow:"hidden"}},d4={class:"blur small-padding",style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap",overflow:"hidden"}},f4={class:"padding",style:{"padding-bottom":"0 !important"}},m4={style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"3.6em","line-height":"1.2em"}},g4={class:"padding"},p4={style:{display:"block","text-overflow":"ellipsis","word-wrap":"break-word",overflow:"hidden","max-height":"5em","line-height":"1.8em"}};function _4(t,e,n,r,s,i){var l,u,h,d,m,p,E,A,N,O;const o=ht("EventDetailsChips"),a=Vy("lazy");return n.event!=null?(ee(),oe("article",{key:0,class:Ge(["no-padding",[(u=(l=t.$client.space)==null?void 0:l.self)!=null&&u.isLiked(n.event.data.uid)?"primary":n.event.likerIds.length>0||n.event.suggestorIds.length>0?"secondary":""]])},[x("div",o4,[x("button",{class:"blur circle",onClick:e[0]||(e[0]=k=>i.toggleSuggested())},[x("i",{class:Ge({fill:(d=(h=t.$client.space)==null?void 0:h.self)==null?void 0:d.isSuggested(n.event.data.uid),"primary-text":(p=(m=t.$client.space)==null?void 0:m.self)==null?void 0:p.isSuggested(n.event.data.uid)})},"thumb_up",2)]),x("button",{class:"blur circle",onClick:e[1]||(e[1]=k=>i.toggleLike())},[x("i",{class:Ge({fill:(A=(E=t.$client.space)==null?void 0:E.self)==null?void 0:A.isLiked(n.event.data.uid),"primary-text":(O=(N=t.$client.space)==null?void 0:N.self)==null?void 0:O.isLiked(n.event.data.uid)})},"favorite",2)])]),x("div",{onClick:e[2]||(e[2]=k=>i.openDialog()),class:"wave wave-big",style:{cursor:"pointer"}},[x("div",null,[n.notLazy?Le("",!0):ko((ee(),oe("img",a4,null,512)),[[a,{src:n.event.cardThumbnailUrl()}]]),n.notLazy?(ee(),oe("img",{key:1,class:"responsive large",src:n.event.cardThumbnailUrl()},null,8,l4)):Le("",!0),n.event.suggestorIds.length>0?(ee(),oe("div",c4,[x("div",u4,[(ee(!0),oe(_e,null,Yt(n.event.suggestorIds,k=>{var I;return ee(),oe("i",{class:Ge(["fill",[`${(I=t.$client.container.spaceMemberById.get(k))==null?void 0:I.color}-text`]]),style:{scale:.7}}," thumb_up ",2)}),256))])])):Le("",!0),n.event.likerIds.length>0?(ee(),oe("div",h4,[x("div",d4,[(ee(!0),oe(_e,null,Yt(n.event.likerIds,k=>{var I;return ee(),oe("i",{class:Ge(["fill",[`${(I=t.$client.container.spaceMemberById.get(k))==null?void 0:I.color}-text`]]),style:{scale:.7}}," favorite ",2)}),256))])])):Le("",!0)]),x("div",f4,[x("h5",m4,he(n.event.cardTitle()),1)]),xe(o,{event:n.event},null,8,["event"]),x("div",g4,[x("p",p4,he(i.removeHTMLTags(n.event.cardDescription())),1)])])],2)):Le("",!0)}const y4=vt(i4,[["render",_4]]);function Rr(t){return Array.isArray?Array.isArray(t):sE(t)==="[object Array]"}const v4=1/0;function E4(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-v4?"-0":e}function I4(t){return t==null?"":E4(t)}function zn(t){return typeof t=="string"}function nE(t){return typeof t=="number"}function w4(t){return t===!0||t===!1||T4(t)&&sE(t)=="[object Boolean]"}function rE(t){return typeof t=="object"}function T4(t){return rE(t)&&t!==null}function In(t){return t!=null}function $u(t){return!t.trim().length}function sE(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const b4="Incorrect 'index' type",A4=t=>`Invalid value for key ${t}`,C4=t=>`Pattern length exceeds max of ${t}.`,S4=t=>`Missing ${t} property in key`,P4=t=>`Property 'weight' in key '${t}' must be a positive integer`,s_=Object.prototype.hasOwnProperty;class R4{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=iE(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function iE(t){let e=null,n=null,r=null,s=1,i=null;if(zn(t)||Rr(t))r=t,e=i_(t),n=xh(t);else{if(!s_.call(t,"name"))throw new Error(S4("name"));const o=t.name;if(r=o,s_.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(P4(o));e=i_(o),n=xh(o),i=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:i}}function i_(t){return Rr(t)?t:t.split(".")}function xh(t){return Rr(t)?t.join("."):t}function k4(t,e){let n=[],r=!1;const s=(i,o,a)=>{if(In(i))if(!o[a])n.push(i);else{let l=o[a];const u=i[l];if(!In(u))return;if(a===o.length-1&&(zn(u)||nE(u)||w4(u)))n.push(I4(u));else if(Rr(u)){r=!0;for(let h=0,d=u.length;h<d;h+=1)s(u[h],o,a+1)}else o.length&&s(u,o,a+1)}};return s(t,zn(e)?e.split("."):e,0),r?n:n[0]}const N4={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},D4={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},O4={location:0,threshold:.6,distance:100},L4={useExtendedSearch:!1,getFn:k4,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var be={...D4,...N4,...O4,...L4};const M4=/[^ ]+/g;function x4(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(M4).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class kf{constructor({getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){this.norm=x4(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,zn(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();zn(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!In(e)||$u(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(In(o)){if(Rr(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:h}=l.pop();if(In(h))if(zn(h)&&!$u(h)){let d={v:h,i:u,n:this.norm.get(h)};a.push(d)}else Rr(h)&&h.forEach((d,m)=>{l.push({nestedArrIndex:m,value:d})})}r.$[i]=a}else if(zn(o)&&!$u(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function oE(t,e,{getFn:n=be.getFn,fieldNormWeight:r=be.fieldNormWeight}={}){const s=new kf({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(iE)),s.setSources(e),s.create(),s}function V4(t,{getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){const{keys:r,records:s}=t,i=new kf({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function ll(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=be.distance,ignoreLocation:i=be.ignoreLocation}={}){const o=e/t.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function F4(t=[],e=be.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let a=t[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}const Ls=32;function U4(t,e,n,{location:r=be.location,distance:s=be.distance,threshold:i=be.threshold,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,includeMatches:l=be.includeMatches,ignoreLocation:u=be.ignoreLocation}={}){if(e.length>Ls)throw new Error(C4(Ls));const h=e.length,d=t.length,m=Math.max(0,Math.min(r,d));let p=i,E=m;const A=a>1||l,N=A?Array(d):[];let O;for(;(O=t.indexOf(e,E))>-1;){let y=ll(e,{currentLocation:O,expectedLocation:m,distance:s,ignoreLocation:u});if(p=Math.min(y,p),E=O+h,A){let _=0;for(;_<h;)N[O+_]=1,_+=1}}E=-1;let k=[],I=1,S=h+d;const B=1<<h-1;for(let y=0;y<h;y+=1){let _=0,v=S;for(;_<v;)ll(e,{errors:y,currentLocation:m+v,expectedLocation:m,distance:s,ignoreLocation:u})<=p?_=v:S=v,v=Math.floor((S-_)/2+_);S=v;let D=Math.max(1,m-v+1),M=o?d:Math.min(m+v,d)+h,L=Array(M+2);L[M+1]=(1<<y)-1;for(let Te=M;Te>=D;Te-=1){let We=Te-1,Re=n[t.charAt(We)];if(A&&(N[We]=+!!Re),L[Te]=(L[Te+1]<<1|1)&Re,y&&(L[Te]|=(k[Te+1]|k[Te])<<1|1|k[Te+1]),L[Te]&B&&(I=ll(e,{errors:y,currentLocation:We,expectedLocation:m,distance:s,ignoreLocation:u}),I<=p)){if(p=I,E=We,E<=m)break;D=Math.max(1,2*m-E)}}if(ll(e,{errors:y+1,currentLocation:m,expectedLocation:m,distance:s,ignoreLocation:u})>p)break;k=L}const V={isMatch:E>=0,score:Math.max(.001,I)};if(A){const y=F4(N,a);y.length?l&&(V.indices=y):V.isMatch=!1}return V}function $4(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class aE{constructor(e,{location:n=be.location,threshold:r=be.threshold,distance:s=be.distance,includeMatches:i=be.includeMatches,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,isCaseSensitive:l=be.isCaseSensitive,ignoreLocation:u=be.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(m,p)=>{this.chunks.push({pattern:m,alphabet:$4(m),startIndex:p})},d=this.pattern.length;if(d>Ls){let m=0;const p=d%Ls,E=d-p;for(;m<E;)h(this.pattern.substr(m,Ls),m),m+=Ls;if(p){const A=d-Ls;h(this.pattern.substr(A),A)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let E={isMatch:!0,score:0};return r&&(E.indices=[[0,e.length-1]]),E}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],d=0,m=!1;this.chunks.forEach(({pattern:E,alphabet:A,startIndex:N})=>{const{isMatch:O,score:k,indices:I}=U4(e,E,A,{location:s+N,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});O&&(m=!0),d+=k,O&&I&&(h=[...h,...I])});let p={isMatch:m,score:m?d/this.chunks.length:1};return m&&r&&(p.indices=h),p}}class Es{constructor(e){this.pattern=e}static isMultiMatch(e){return o_(e,this.multiRegex)}static isSingleMatch(e){return o_(e,this.singleRegex)}search(){}}function o_(t,e){const n=t.match(e);return n?n[1]:null}class B4 extends Es{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class j4 extends Es{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class H4 extends Es{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class q4 extends Es{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class W4 extends Es{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class K4 extends Es{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class lE extends Es{constructor(e,{location:n=be.location,threshold:r=be.threshold,distance:s=be.distance,includeMatches:i=be.includeMatches,findAllMatches:o=be.findAllMatches,minMatchCharLength:a=be.minMatchCharLength,isCaseSensitive:l=be.isCaseSensitive,ignoreLocation:u=be.ignoreLocation}={}){super(e),this._bitapSearch=new aE(e,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class cE extends Es{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Vh=[B4,cE,H4,q4,K4,W4,j4,lE],a_=Vh.length,G4=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,z4="|";function Y4(t,e={}){return t.split(z4).map(n=>{let r=n.trim().split(G4).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let l=!1,u=-1;for(;!l&&++u<a_;){const h=Vh[u];let d=h.isMultiMatch(a);d&&(s.push(new h(d,e)),l=!0)}if(!l)for(u=-1;++u<a_;){const h=Vh[u];let d=h.isSingleMatch(a);if(d){s.push(new h(d,e));break}}}return s})}const Q4=new Set([lE.type,cE.type]);class J4{constructor(e,{isCaseSensitive:n=be.isCaseSensitive,includeMatches:r=be.includeMatches,minMatchCharLength:s=be.minMatchCharLength,ignoreLocation:i=be.ignoreLocation,findAllMatches:o=be.findAllMatches,location:a=be.location,threshold:l=be.threshold,distance:u=be.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:l,distance:u},this.pattern=n?e:e.toLowerCase(),this.query=Y4(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];o.length=0,i=0;for(let d=0,m=h.length;d<m;d+=1){const p=h[d],{isMatch:E,indices:A,score:N}=p.search(e);if(E){if(i+=1,a+=N,r){const O=p.constructor.type;Q4.has(O)?o=[...o,...A]:o.push(A)}}else{a=0,i=0,o.length=0;break}}if(i){let d={isMatch:!0,score:a/i};return r&&(d.indices=o),d}}return{isMatch:!1,score:1}}}const Fh=[];function X4(...t){Fh.push(...t)}function Uh(t,e){for(let n=0,r=Fh.length;n<r;n+=1){let s=Fh[n];if(s.condition(t,e))return new s(t,e)}return new aE(t,e)}const ec={AND:"$and",OR:"$or"},$h={PATH:"$path",PATTERN:"$val"},Bh=t=>!!(t[ec.AND]||t[ec.OR]),Z4=t=>!!t[$h.PATH],ex=t=>!Rr(t)&&rE(t)&&!Bh(t),l_=t=>({[ec.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function uE(t,e,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=Z4(s);if(!o&&i.length>1&&!Bh(s))return r(l_(s));if(ex(s)){const l=o?s[$h.PATH]:i[0],u=o?s[$h.PATTERN]:s[l];if(!zn(u))throw new Error(A4(l));const h={keyId:xh(l),pattern:u};return n&&(h.searcher=Uh(u,e)),h}let a={children:[],operator:i[0]};return i.forEach(l=>{const u=s[l];Rr(u)&&u.forEach(h=>{a.children.push(r(h))})}),a};return Bh(t)||(t=l_(t)),r(t)}function tx(t,{ignoreFieldNorm:e=be.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),n.score=r})}function nx(t,e){const n=t.matches;e.matches=[],In(n)&&n.forEach(r=>{if(!In(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function rx(t,e){e.score=t.score}function sx(t,e,{includeMatches:n=be.includeMatches,includeScore:r=be.includeScore}={}){const s=[];return n&&s.push(nx),r&&s.push(rx),t.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return s.length&&s.forEach(l=>{l(i,a)}),a})}class Ji{constructor(e,n={},r){this.options={...be,...n},this.options.useExtendedSearch,this._keyStore=new R4(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof kf))throw new Error(b4);this._myIndex=n||oE(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){In(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let l=zn(e)?zn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return tx(l,{ignoreFieldNorm:a}),i&&l.sort(o),nE(n)&&n>-1&&(l=l.slice(0,n)),sx(l,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const n=Uh(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!In(i))return;const{isMatch:l,score:u,indices:h}=n.searchIn(i);l&&s.push({item:i,idx:o,matches:[{score:u,value:i,norm:a,indices:h}]})}),s}_searchLogical(e){const n=uE(e,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:d,searcher:m}=a,p=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:m});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const h=[];for(let d=0,m=a.children.length;d<m;d+=1){const p=a.children[d],E=r(p,l,u);if(E.length)h.push(...E);else if(a.operator===ec.AND)return[]}return h},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:l})=>{if(In(a)){let u=r(n,a,l);u.length&&(i[l]||(i[l]={idx:l,item:a,matches:[]},o.push(i[l])),u.forEach(({matches:h})=>{i[l].matches.push(...h)}))}}),o}_searchObjectList(e){const n=Uh(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!In(o))return;let l=[];r.forEach((u,h)=>{l.push(...this._findMatches({key:u,value:o[h],searcher:n}))}),l.length&&i.push({idx:a,item:o,matches:l})}),i}_findMatches({key:e,value:n,searcher:r}){if(!In(n))return[];let s=[];if(Rr(n))n.forEach(({v:i,i:o,n:a})=>{if(!In(i))return;const{isMatch:l,score:u,indices:h}=r.searchIn(i);l&&s.push({score:u,key:e,value:i,idx:o,norm:a,indices:h})});else{const{v:i,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(i);a&&s.push({score:l,key:e,value:i,norm:o,indices:u})}return s}}Ji.version="7.0.0";Ji.createIndex=oE;Ji.parseIndex=V4;Ji.config=be;Ji.parseQuery=uE;X4(J4);const ix={data(){return{query:"",queryTimeout:0,queryResults:void 0,resultsShown:10,onlyConcerts:!1,sortTime:!1}},methods:{processQuery(){if(this.query.length<2){this.queryResults=[...this.$client.container.sortedEvents],this.sortTime&&this.sortQueryResultsAfterTime();return}const t=new Ji(this.$client.container.sortedEvents,{keys:["_cardTitle"],includeScore:!0});this.queryResults=[];for(let e of t.search(this.query))(e.score||0)>.5||this.queryResults.push(e.item);this.sortTime&&this.sortQueryResultsAfterTime()},sortQueryResultsAfterTime(){var e,n;let t=new Date().getTime()/1e3;this.queryResults=(e=this.queryResults)==null?void 0:e.filter(r=>r.end>t),(n=this.queryResults)==null||n.sort((r,s)=>r.start-s.start)},async showMore(){var t;this.resultsShown>(((t=this.queryResults)==null?void 0:t.length)||1/0)||(this.resultsShown=this.resultsShown+10,await Zl(50),this.mountObserver())},async mountObserver(){for(;;){if(await Zl(50),this.$refs["grid-end"]===void 0)continue;let t=this.$refs["grid-end"][0];new IntersectionObserver(n=>{n[0].isIntersecting&&this.showMore()}).observe(t);break}}},mounted(){this.processQuery(),this.mountObserver()},watch:{query(){clearTimeout(this.queryTimeout),this.queryTimeout=setTimeout(()=>{this.processQuery()},1e3)},sortTime(){this.processQuery()},"$refs.grid-end"(){console.log("chnges")}},components:{AppBar:tE,BigEventCard:y4}},ox=x("i",null,"swipe",-1),ax=[ox],lx={class:"responsive max"},cx={class:"field large prefix round fill"},ux=x("i",{class:"front"},"search",-1),hx=["placeholder"],dx=x("i",null,"headphones",-1),fx={class:"max"},mx={class:"switch"},gx=x("span",null,null,-1),px=x("i",null,"schedule",-1),_x={class:"max"},yx={class:"switch"},vx=x("span",null,null,-1),Ex={class:"grid"},Ix={key:0,class:"s12 m6 l4"};function wx(t,e,n,r,s,i){var l;const o=ht("AppBar"),a=ht("BigEventCard");return ee(),oe(_e,null,[xe(o,{label:t.$t("navigation.acts")},{prepend:mc(()=>[x("button",{class:"circle transparent",onClick:e[0]||(e[0]=u=>t.$router.push("/swiper"))},ax)]),_:1},8,["label"]),x("main",lx,[x("div",cx,[ux,ko(x("input",{class:"search",placeholder:t.$t("acts.search.placeholder"),"onUpdate:modelValue":e[1]||(e[1]=u=>s.query=u)},null,8,hx),[[vb,s.query]])]),x("div",{class:"field prefix middle-align",onClick:e[4]||(e[4]=u=>s.onlyConcerts=!s.onlyConcerts)},[x("nav",null,[dx,x("div",fx,[x("h6",null,he(t.$t("acts.filter.onlyConcerts.label")),1),x("div",null,he(t.$t("acts.filter.onlyConcerts.description")),1)]),x("label",mx,[ko(x("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=u=>s.onlyConcerts=u),onClick:e[3]||(e[3]=u=>s.onlyConcerts=!s.onlyConcerts)},null,512),[[pg,s.onlyConcerts]]),gx])])]),x("div",{class:"field prefix middle-align",onClick:e[7]||(e[7]=u=>s.sortTime=!s.sortTime)},[x("nav",null,[px,x("div",_x,[x("h6",null,he(t.$t("acts.filter.sortTime.label")),1),x("div",null,he(t.$t("acts.filter.sortTime.description")),1)]),x("label",yx,[ko(x("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=u=>s.sortTime=u),onClick:e[6]||(e[6]=u=>s.sortTime=!s.sortTime)},null,512),[[pg,s.sortTime]]),vx])])]),x("div",Ex,[(ee(!0),oe(_e,null,Yt((l=s.queryResults)==null?void 0:l.length,u=>(ee(),oe(_e,null,[u<s.resultsShown?(ee(),oe(_e,{key:0},[!s.onlyConcerts||s.queryResults[u-1].isConcert()?(ee(),oe("div",Ix,[xe(a,{event:s.queryResults[u-1]},null,8,["event"])])):Le("",!0),u==s.resultsShown-4?(ee(),oe("span",{key:1,ref_for:!0,ref:"grid-end"},null,512)):Le("",!0)],64)):Le("",!0)],64))),256))])])],64)}const Tx=vt(ix,[["render",wx]]),bx=kD({history:sD("/"),routes:[{path:"/",name:"overview",component:r4,meta:{navId:"home",requiresAuth:!1}},{path:"/acts",name:"acts",component:Tx,meta:{navId:"acts",requiresAuth:!1}},{path:"/swiper",name:"swiper",component:()=>Hr(()=>import("./SwiperView-0J94OEkH.js"),__vite__mapDeps([0,1]))},{path:"/members",name:"members",component:()=>Hr(()=>import("./MembersView-DF9jXu2S.js"),__vite__mapDeps([2,3])),meta:{navId:"members"}},{path:"/settings",name:"settings",component:()=>Hr(()=>import("./SettingsView-MvjfisYR.js"),[]),meta:{navId:"settings"}},{path:"/login",name:"login",component:()=>Hr(()=>Promise.resolve().then(()=>RO),void 0),meta:{navId:"login",requiresAuth:!1}},{path:"/login/mail",name:"login via mail",component:()=>Hr(()=>import("./LoginMailView-DioujYCS.js"),[]),meta:{navId:"login",requiresAuth:!1}},{path:"/join",name:"join",component:()=>Hr(()=>import("./JoinView-v1QVS6sq.js"),[]),meta:{requiresAuth:!1,hideNavigation:!0}}]});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const tc=typeof window<"u",Is=(t,e=!1)=>e?Symbol.for(t):Symbol(t),Ax=(t,e,n)=>Cx({l:t,k:e,s:n}),Cx=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Tt=t=>typeof t=="number"&&isFinite(t),Sx=t=>dE(t)==="[object Date]",ms=t=>dE(t)==="[object RegExp]",Wc=t=>Ae(t)&&Object.keys(t).length===0,Bt=Object.assign;let c_;const pr=()=>c_||(c_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function u_(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Px=Object.prototype.hasOwnProperty;function nc(t,e){return Px.call(t,e)}const it=Array.isArray,et=t=>typeof t=="function",le=t=>typeof t=="string",Oe=t=>typeof t=="boolean",Ye=t=>t!==null&&typeof t=="object",Rx=t=>Ye(t)&&et(t.then)&&et(t.catch),hE=Object.prototype.toString,dE=t=>hE.call(t),Ae=t=>{if(!Ye(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},kx=t=>t==null?"":it(t)||Ae(t)&&t.toString===hE?JSON.stringify(t,null,2):String(t);function Nx(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function Kc(t){let e=t;return()=>++e}function Dx(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const cl=t=>!Ye(t)||it(t);function Al(t,e){if(cl(t)||cl(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{cl(r[i])||cl(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Ox(t,e,n){return{line:t,column:e,offset:n}}function rc(t,e,n){return{start:t,end:e}}const Lx=/\{([0-9a-zA-Z]+)\}/g;function fE(t,...e){return e.length===1&&Mx(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(Lx,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const mE=Object.assign,h_=t=>typeof t=="string",Mx=t=>t!==null&&typeof t=="object";function gE(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Nf={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},xx={[Nf.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function Vx(t,e,...n){const r=fE(xx[t],...n||[]),s={message:String(r),code:t};return e&&(s.location=e),s}const ve={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Fx={[ve.EXPECTED_TOKEN]:"Expected token: '{0}'",[ve.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[ve.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[ve.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[ve.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[ve.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[ve.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[ve.EMPTY_PLACEHOLDER]:"Empty placeholder",[ve.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[ve.INVALID_LINKED_FORMAT]:"Invalid linked format",[ve.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[ve.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[ve.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[ve.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[ve.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[ve.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Xi(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=fE((s||Fx)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function Ux(t){throw t}const hr=" ",$x="\r",sn=`
`,Bx="\u2028",jx="\u2029";function Hx(t){const e=t;let n=0,r=1,s=1,i=0;const o=y=>e[y]===$x&&e[y+1]===sn,a=y=>e[y]===sn,l=y=>e[y]===jx,u=y=>e[y]===Bx,h=y=>o(y)||a(y)||l(y)||u(y),d=()=>n,m=()=>r,p=()=>s,E=()=>i,A=y=>o(y)||l(y)||u(y)?sn:e[y],N=()=>A(n),O=()=>A(n+i);function k(){return i=0,h(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function I(){return o(n+i)&&i++,i++,e[n+i]}function S(){n=0,r=1,s=1,i=0}function B(y=0){i=y}function V(){const y=n+i;for(;y!==n;)k();i=0}return{index:d,line:m,column:p,peekOffset:E,charAt:A,currentChar:N,currentPeek:O,next:k,peek:I,reset:S,resetPeek:B,skipToPeek:V}}const $r=void 0,qx=".",d_="'",Wx="tokenizer";function Kx(t,e={}){const n=e.location!==!1,r=Hx(t),s=()=>r.index(),i=()=>Ox(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:h}=e;function d(b,C,F,...K){const te=u();if(C.column+=F,C.offset+=F,h){const Q=n?rc(te.startLoc,C):null,U=Xi(b,Q,{domain:Wx,args:K});h(U)}}function m(b,C,F){b.endLoc=i(),b.currentType=C;const K={type:C};return n&&(K.loc=rc(b.startLoc,b.endLoc)),F!=null&&(K.value=F),K}const p=b=>m(b,14);function E(b,C){return b.currentChar()===C?(b.next(),C):(d(ve.EXPECTED_TOKEN,i(),0,C),"")}function A(b){let C="";for(;b.currentPeek()===hr||b.currentPeek()===sn;)C+=b.currentPeek(),b.peek();return C}function N(b){const C=A(b);return b.skipToPeek(),C}function O(b){if(b===$r)return!1;const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C===95}function k(b){if(b===$r)return!1;const C=b.charCodeAt(0);return C>=48&&C<=57}function I(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=O(b.currentPeek());return b.resetPeek(),K}function S(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=b.currentPeek()==="-"?b.peek():b.currentPeek(),te=k(K);return b.resetPeek(),te}function B(b,C){const{currentType:F}=C;if(F!==2)return!1;A(b);const K=b.currentPeek()===d_;return b.resetPeek(),K}function V(b,C){const{currentType:F}=C;if(F!==8)return!1;A(b);const K=b.currentPeek()===".";return b.resetPeek(),K}function y(b,C){const{currentType:F}=C;if(F!==9)return!1;A(b);const K=O(b.currentPeek());return b.resetPeek(),K}function _(b,C){const{currentType:F}=C;if(!(F===8||F===12))return!1;A(b);const K=b.currentPeek()===":";return b.resetPeek(),K}function v(b,C){const{currentType:F}=C;if(F!==10)return!1;const K=()=>{const Q=b.currentPeek();return Q==="{"?O(b.peek()):Q==="@"||Q==="%"||Q==="|"||Q===":"||Q==="."||Q===hr||!Q?!1:Q===sn?(b.peek(),K()):L(b,!1)},te=K();return b.resetPeek(),te}function D(b){A(b);const C=b.currentPeek()==="|";return b.resetPeek(),C}function M(b){const C=A(b),F=b.currentPeek()==="%"&&b.peek()==="{";return b.resetPeek(),{isModulo:F,hasSpace:C.length>0}}function L(b,C=!0){const F=(te=!1,Q="",U=!1)=>{const H=b.currentPeek();return H==="{"?Q==="%"?!1:te:H==="@"||!H?Q==="%"?!0:te:H==="%"?(b.peek(),F(te,"%",!0)):H==="|"?Q==="%"||U?!0:!(Q===hr||Q===sn):H===hr?(b.peek(),F(!0,hr,U)):H===sn?(b.peek(),F(!0,sn,U)):!0},K=F();return C&&b.resetPeek(),K}function P(b,C){const F=b.currentChar();return F===$r?$r:C(F)?(b.next(),F):null}function Te(b){const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C>=48&&C<=57||C===95||C===36}function We(b){return P(b,Te)}function Re(b){const C=b.charCodeAt(0);return C>=97&&C<=122||C>=65&&C<=90||C>=48&&C<=57||C===95||C===36||C===45}function Ce(b){return P(b,Re)}function Ie(b){const C=b.charCodeAt(0);return C>=48&&C<=57}function ot(b){return P(b,Ie)}function mt(b){const C=b.charCodeAt(0);return C>=48&&C<=57||C>=65&&C<=70||C>=97&&C<=102}function Je(b){return P(b,mt)}function Ue(b){let C="",F="";for(;C=ot(b);)F+=C;return F}function He(b){N(b);const C=b.currentChar();return C!=="%"&&d(ve.EXPECTED_TOKEN,i(),0,C),b.next(),"%"}function Mt(b){let C="";for(;;){const F=b.currentChar();if(F==="{"||F==="}"||F==="@"||F==="|"||!F)break;if(F==="%")if(L(b))C+=F,b.next();else break;else if(F===hr||F===sn)if(L(b))C+=F,b.next();else{if(D(b))break;C+=F,b.next()}else C+=F,b.next()}return C}function St(b){N(b);let C="",F="";for(;C=Ce(b);)F+=C;return b.currentChar()===$r&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F}function ut(b){N(b);let C="";return b.currentChar()==="-"?(b.next(),C+=`-${Ue(b)}`):C+=Ue(b),b.currentChar()===$r&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),C}function z(b){return b!==d_&&b!==sn}function ie(b){N(b),E(b,"'");let C="",F="";for(;C=P(b,z);)C==="\\"?F+=re(b):F+=C;const K=b.currentChar();return K===sn||K===$r?(d(ve.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),K===sn&&(b.next(),E(b,"'")),F):(E(b,"'"),F)}function re(b){const C=b.currentChar();switch(C){case"\\":case"'":return b.next(),`\\${C}`;case"u":return ce(b,C,4);case"U":return ce(b,C,6);default:return d(ve.UNKNOWN_ESCAPE_SEQUENCE,i(),0,C),""}}function ce(b,C,F){E(b,C);let K="";for(let te=0;te<F;te++){const Q=Je(b);if(!Q){d(ve.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${C}${K}${b.currentChar()}`);break}K+=Q}return`\\${C}${K}`}function De(b){return b!=="{"&&b!=="}"&&b!==hr&&b!==sn}function Be(b){N(b);let C="",F="";for(;C=P(b,De);)F+=C;return F}function R(b){let C="",F="";for(;C=We(b);)F+=C;return F}function T(b){const C=F=>{const K=b.currentChar();return K==="{"||K==="%"||K==="@"||K==="|"||K==="("||K===")"||!K||K===hr?F:(F+=K,b.next(),C(F))};return C("")}function $(b){N(b);const C=E(b,"|");return N(b),C}function Y(b,C){let F=null;switch(b.currentChar()){case"{":return C.braceNest>=1&&d(ve.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),b.next(),F=m(C,2,"{"),N(b),C.braceNest++,F;case"}":return C.braceNest>0&&C.currentType===2&&d(ve.EMPTY_PLACEHOLDER,i(),0),b.next(),F=m(C,3,"}"),C.braceNest--,C.braceNest>0&&N(b),C.inLinked&&C.braceNest===0&&(C.inLinked=!1),F;case"@":return C.braceNest>0&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F=G(b,C)||p(C),C.braceNest=0,F;default:{let te=!0,Q=!0,U=!0;if(D(b))return C.braceNest>0&&d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),F=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,F;if(C.braceNest>0&&(C.currentType===5||C.currentType===6||C.currentType===7))return d(ve.UNTERMINATED_CLOSING_BRACE,i(),0),C.braceNest=0,J(b,C);if(te=I(b,C))return F=m(C,5,St(b)),N(b),F;if(Q=S(b,C))return F=m(C,6,ut(b)),N(b),F;if(U=B(b,C))return F=m(C,7,ie(b)),N(b),F;if(!te&&!Q&&!U)return F=m(C,13,Be(b)),d(ve.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,F.value),N(b),F;break}}return F}function G(b,C){const{currentType:F}=C;let K=null;const te=b.currentChar();switch((F===8||F===9||F===12||F===10)&&(te===sn||te===hr)&&d(ve.INVALID_LINKED_FORMAT,i(),0),te){case"@":return b.next(),K=m(C,8,"@"),C.inLinked=!0,K;case".":return N(b),b.next(),m(C,9,".");case":":return N(b),b.next(),m(C,10,":");default:return D(b)?(K=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,K):V(b,C)||_(b,C)?(N(b),G(b,C)):y(b,C)?(N(b),m(C,12,R(b))):v(b,C)?(N(b),te==="{"?Y(b,C)||K:m(C,11,T(b))):(F===8&&d(ve.INVALID_LINKED_FORMAT,i(),0),C.braceNest=0,C.inLinked=!1,J(b,C))}}function J(b,C){let F={type:14};if(C.braceNest>0)return Y(b,C)||p(C);if(C.inLinked)return G(b,C)||p(C);switch(b.currentChar()){case"{":return Y(b,C)||p(C);case"}":return d(ve.UNBALANCED_CLOSING_BRACE,i(),0),b.next(),m(C,3,"}");case"@":return G(b,C)||p(C);default:{if(D(b))return F=m(C,1,$(b)),C.braceNest=0,C.inLinked=!1,F;const{isModulo:te,hasSpace:Q}=M(b);if(te)return Q?m(C,0,Mt(b)):m(C,4,He(b));if(L(b))return m(C,0,Mt(b));break}}return F}function se(){const{currentType:b,offset:C,startLoc:F,endLoc:K}=l;return l.lastType=b,l.lastOffset=C,l.lastStartLoc=F,l.lastEndLoc=K,l.offset=s(),l.startLoc=i(),r.currentChar()===$r?m(l,14):J(r,l)}return{nextToken:se,currentOffset:s,currentPosition:i,context:u}}const Gx="parser",zx=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Yx(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function Qx(t={}){const e=t.location!==!1,{onError:n,onWarn:r}=t;function s(I,S,B,V,...y){const _=I.currentPosition();if(_.offset+=V,_.column+=V,n){const v=e?rc(B,_):null,D=Xi(S,v,{domain:Gx,args:y});n(D)}}function i(I,S,B,V,...y){const _=I.currentPosition();if(_.offset+=V,_.column+=V,r){const v=e?rc(B,_):null;r(Vx(S,v,y))}}function o(I,S,B){const V={type:I};return e&&(V.start=S,V.end=S,V.loc={start:B,end:B}),V}function a(I,S,B,V){e&&(I.end=S,I.loc&&(I.loc.end=B))}function l(I,S){const B=I.context(),V=o(3,B.offset,B.startLoc);return V.value=S,a(V,I.currentOffset(),I.currentPosition()),V}function u(I,S){const B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(5,V,y);return _.index=parseInt(S,10),I.nextToken(),a(_,I.currentOffset(),I.currentPosition()),_}function h(I,S,B){const V=I.context(),{lastOffset:y,lastStartLoc:_}=V,v=o(4,y,_);return v.key=S,B===!0&&(v.modulo=!0),I.nextToken(),a(v,I.currentOffset(),I.currentPosition()),v}function d(I,S){const B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(9,V,y);return _.value=S.replace(zx,Yx),I.nextToken(),a(_,I.currentOffset(),I.currentPosition()),_}function m(I){const S=I.nextToken(),B=I.context(),{lastOffset:V,lastStartLoc:y}=B,_=o(8,V,y);return S.type!==12?(s(I,ve.UNEXPECTED_EMPTY_LINKED_MODIFIER,B.lastStartLoc,0),_.value="",a(_,V,y),{nextConsumeToken:S,node:_}):(S.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,Mn(S)),_.value=S.value||"",a(_,I.currentOffset(),I.currentPosition()),{node:_})}function p(I,S){const B=I.context(),V=o(7,B.offset,B.startLoc);return V.value=S,a(V,I.currentOffset(),I.currentPosition()),V}function E(I){const S=I.context(),B=o(6,S.offset,S.startLoc);let V=I.nextToken();if(V.type===9){const y=m(I);B.modifier=y.node,V=y.nextConsumeToken||I.nextToken()}switch(V.type!==10&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),V=I.nextToken(),V.type===2&&(V=I.nextToken()),V.type){case 11:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=p(I,V.value||"");break;case 5:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=h(I,V.value||"");break;case 6:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=u(I,V.value||"");break;case 7:V.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(V)),B.key=d(I,V.value||"");break;default:{s(I,ve.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const y=I.context(),_=o(7,y.offset,y.startLoc);return _.value="",a(_,y.offset,y.startLoc),B.key=_,a(B,y.offset,y.startLoc),{nextConsumeToken:V,node:B}}}return a(B,I.currentOffset(),I.currentPosition()),{node:B}}function A(I){const S=I.context(),B=S.currentType===1?I.currentOffset():S.offset,V=S.currentType===1?S.endLoc:S.startLoc,y=o(2,B,V);y.items=[];let _=null,v=null;do{const L=_||I.nextToken();switch(_=null,L.type){case 0:L.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(L)),y.items.push(l(I,L.value||""));break;case 6:L.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(L)),y.items.push(u(I,L.value||""));break;case 4:v=!0;break;case 5:L.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(L)),y.items.push(h(I,L.value||"",!!v)),v&&(i(I,Nf.USE_MODULO_SYNTAX,S.lastStartLoc,0,Mn(L)),v=null);break;case 7:L.value==null&&s(I,ve.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Mn(L)),y.items.push(d(I,L.value||""));break;case 8:{const P=E(I);y.items.push(P.node),_=P.nextConsumeToken||null;break}}}while(S.currentType!==14&&S.currentType!==1);const D=S.currentType===1?S.lastOffset:I.currentOffset(),M=S.currentType===1?S.lastEndLoc:I.currentPosition();return a(y,D,M),y}function N(I,S,B,V){const y=I.context();let _=V.items.length===0;const v=o(1,S,B);v.cases=[],v.cases.push(V);do{const D=A(I);_||(_=D.items.length===0),v.cases.push(D)}while(y.currentType!==14);return _&&s(I,ve.MUST_HAVE_MESSAGES_IN_PLURAL,B,0),a(v,I.currentOffset(),I.currentPosition()),v}function O(I){const S=I.context(),{offset:B,startLoc:V}=S,y=A(I);return S.currentType===14?y:N(I,B,V,y)}function k(I){const S=Kx(I,mE({},t)),B=S.context(),V=o(0,B.offset,B.startLoc);return e&&V.loc&&(V.loc.source=I),V.body=O(S),t.onCacheKey&&(V.cacheKey=t.onCacheKey(I)),B.currentType!==14&&s(S,ve.UNEXPECTED_LEXICAL_ANALYSIS,B.lastStartLoc,0,I[B.offset]||""),a(V,S.currentOffset(),S.currentPosition()),V}return{parse:k}}function Mn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function Jx(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function f_(t,e){for(let n=0;n<t.length;n++)Df(t[n],e)}function Df(t,e){switch(t.type){case 1:f_(t.cases,e),e.helper("plural");break;case 2:f_(t.items,e);break;case 6:{Df(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function Xx(t,e={}){const n=Jx(t);n.helper("normalize"),t.body&&Df(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function Zx(t){const e=t.body;return e.type===2?m_(e):e.cases.forEach(n=>m_(n)),t}function m_(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=gE(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const eV="minifier";function hi(t){switch(t.t=t.type,t.type){case 0:{const e=t;hi(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)hi(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)hi(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;hi(e.key),e.k=e.key,delete e.key,e.modifier&&(hi(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Xi(ve.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:eV,args:[t.type]})}delete t.type}const tV="parser";function nV(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const l=()=>a;function u(N,O){a.code+=N}function h(N,O=!0){const k=O?s:"";u(i?k+"  ".repeat(N):k)}function d(N=!0){const O=++a.indentLevel;N&&h(O)}function m(N=!0){const O=--a.indentLevel;N&&h(O)}function p(){h(a.indentLevel)}return{context:l,push:u,indent:d,deindent:m,newline:p,helper:N=>`_${N}`,needIndent:()=>a.needIndent}}function rV(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),$i(t,e.key),e.modifier?(t.push(", "),$i(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function sV(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&($i(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function iV(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&($i(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function oV(t,e){e.body?$i(t,e.body):t.push("null")}function $i(t,e){const{helper:n}=t;switch(e.type){case 0:oV(t,e);break;case 1:iV(t,e);break;case 2:sV(t,e);break;case 6:rV(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Xi(ve.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:tV,args:[e.type]})}}const aV=(t,e={})=>{const n=h_(e.mode)?e.mode:"normal",r=h_(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=nV(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${gE(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),$i(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:u,map:h}=l.context();return{ast:t,code:u,map:h?h.toJSON():void 0}};function lV(t,e={}){const n=mE({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=Qx(n).parse(t);return r?(i&&Zx(a),s&&hi(a),{ast:a,code:""}):(Xx(a,n),aV(a,n))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function cV(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(pr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(pr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(pr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const ws=[];ws[0]={w:[0],i:[3,0],"[":[4],o:[7]};ws[1]={w:[1],".":[2],"[":[4],o:[7]};ws[2]={w:[2],i:[3,0],0:[3,0]};ws[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ws[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ws[5]={"'":[4,0],o:8,l:[5,0]};ws[6]={'"':[4,0],o:8,l:[6,0]};const uV=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function hV(t){return uV.test(t)}function dV(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function fV(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function mV(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:hV(e)?dV(e):"*"+e}function gV(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,u,h,d;const m=[];m[0]=()=>{o===void 0?o=a:o+=a},m[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},m[2]=()=>{m[0](),s++},m[3]=()=>{if(s>0)s--,r=4,m[0]();else{if(s=0,o===void 0||(o=mV(o),o===!1))return!1;m[1]()}};function p(){const E=t[n+1];if(r===5&&E==="'"||r===6&&E==='"')return n++,a="\\"+E,m[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&p())){if(l=fV(i),d=ws[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=m[u[1]],h&&(a=i,h()===!1))))return;if(r===7)return e}}const g_=new Map;function pV(t,e){return Ye(t)?t[e]:null}function _V(t,e){if(!Ye(t))return null;let n=g_.get(e);if(n||(n=gV(e),n&&g_.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||et(s))return null;s=o,i++}return s}const yV=t=>t,vV=t=>"",EV="text",IV=t=>t.length===0?"":Nx(t),wV=kx;function p_(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function TV(t){const e=Tt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Tt(t.named.count)||Tt(t.named.n))?Tt(t.named.count)?t.named.count:Tt(t.named.n)?t.named.n:e:e}function bV(t,e){e.count||(e.count=t),e.n||(e.n=t)}function AV(t={}){const e=t.locale,n=TV(t),r=Ye(t.pluralRules)&&le(e)&&et(t.pluralRules[e])?t.pluralRules[e]:p_,s=Ye(t.pluralRules)&&le(e)&&et(t.pluralRules[e])?p_:void 0,i=O=>O[r(n,O.length,s)],o=t.list||[],a=O=>o[O],l=t.named||{};Tt(t.pluralIndex)&&bV(n,l);const u=O=>l[O];function h(O){const k=et(t.messages)?t.messages(O):Ye(t.messages)?t.messages[O]:!1;return k||(t.parent?t.parent.message(O):vV)}const d=O=>t.modifiers?t.modifiers[O]:yV,m=Ae(t.processor)&&et(t.processor.normalize)?t.processor.normalize:IV,p=Ae(t.processor)&&et(t.processor.interpolate)?t.processor.interpolate:wV,E=Ae(t.processor)&&le(t.processor.type)?t.processor.type:EV,N={list:a,named:u,plural:i,linked:(O,...k)=>{const[I,S]=k;let B="text",V="";k.length===1?Ye(I)?(V=I.modifier||V,B=I.type||B):le(I)&&(V=I||V):k.length===2&&(le(I)&&(V=I||V),le(S)&&(B=S||B));const y=h(O)(N),_=B==="vnode"&&it(y)&&V?y[0]:y;return V?d(V)(_,B):_},message:h,type:E,interpolate:p,normalize:m,values:Bt({},o,l)};return N}let ua=null;function CV(t){ua=t}function SV(t,e,n){ua&&ua.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const PV=RV("function:translate");function RV(t){return e=>ua&&ua.emit(t,e)}const pE=Nf.__EXTEND_POINT__,ks=Kc(pE),kV={NOT_FOUND_KEY:pE,FALLBACK_TO_TRANSLATE:ks(),CANNOT_FORMAT_NUMBER:ks(),FALLBACK_TO_NUMBER_FORMAT:ks(),CANNOT_FORMAT_DATE:ks(),FALLBACK_TO_DATE_FORMAT:ks(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:ks(),__EXTEND_POINT__:ks()},_E=ve.__EXTEND_POINT__,Ns=Kc(_E),Fn={INVALID_ARGUMENT:_E,INVALID_DATE_ARGUMENT:Ns(),INVALID_ISO_DATE_ARGUMENT:Ns(),NOT_SUPPORT_NON_STRING_MESSAGE:Ns(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Ns(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Ns(),NOT_SUPPORT_LOCALE_TYPE:Ns(),__EXTEND_POINT__:Ns()};function Yn(t){return Xi(t,null,void 0)}function Of(t,e){return e.locale!=null?__(e.locale):__(t.locale)}let Bu;function __(t){if(le(t))return t;if(et(t)){if(t.resolvedOnce&&Bu!=null)return Bu;if(t.constructor.name==="Function"){const e=t();if(Rx(e))throw Yn(Fn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Bu=e}else throw Yn(Fn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Yn(Fn.NOT_SUPPORT_LOCALE_TYPE)}function NV(t,e,n){return[...new Set([n,...it(e)?e:Ye(e)?Object.keys(e):le(e)?[e]:[n]])]}function yE(t,e,n){const r=le(n)?n:Bi,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;it(o);)o=y_(i,o,e);const a=it(e)||!Ae(e)?e:e.default?e.default:null;o=le(a)?[a]:a,it(o)&&y_(i,o,!1),s.__localeChainCache.set(r,i)}return i}function y_(t,e,n){let r=!0;for(let s=0;s<e.length&&Oe(r);s++){const i=e[s];le(i)&&(r=DV(t,e[s],n))}return r}function DV(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=OV(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function OV(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(it(n)||Ae(n))&&n[s]&&(r=n[s])}return r}const LV="9.13.1",Gc=-1,Bi="en-US",v_="",E_=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function MV(){return{upper:(t,e)=>e==="text"&&le(t)?t.toUpperCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&le(t)?t.toLowerCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&le(t)?E_(t):e==="vnode"&&Ye(t)&&"__v_isVNode"in t?E_(t.children):t}}let vE;function I_(t){vE=t}let EE;function xV(t){EE=t}let IE;function VV(t){IE=t}let wE=null;const FV=t=>{wE=t},UV=()=>wE;let TE=null;const w_=t=>{TE=t},$V=()=>TE;let T_=0;function BV(t={}){const e=et(t.onWarn)?t.onWarn:Dx,n=le(t.version)?t.version:LV,r=le(t.locale)||et(t.locale)?t.locale:Bi,s=et(r)?Bi:r,i=it(t.fallbackLocale)||Ae(t.fallbackLocale)||le(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Ae(t.messages)?t.messages:{[s]:{}},a=Ae(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},l=Ae(t.numberFormats)?t.numberFormats:{[s]:{}},u=Bt({},t.modifiers||{},MV()),h=t.pluralRules||{},d=et(t.missing)?t.missing:null,m=Oe(t.missingWarn)||ms(t.missingWarn)?t.missingWarn:!0,p=Oe(t.fallbackWarn)||ms(t.fallbackWarn)?t.fallbackWarn:!0,E=!!t.fallbackFormat,A=!!t.unresolving,N=et(t.postTranslation)?t.postTranslation:null,O=Ae(t.processor)?t.processor:null,k=Oe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,I=!!t.escapeParameter,S=et(t.messageCompiler)?t.messageCompiler:vE,B=et(t.messageResolver)?t.messageResolver:EE||pV,V=et(t.localeFallbacker)?t.localeFallbacker:IE||NV,y=Ye(t.fallbackContext)?t.fallbackContext:void 0,_=t,v=Ye(_.__datetimeFormatters)?_.__datetimeFormatters:new Map,D=Ye(_.__numberFormatters)?_.__numberFormatters:new Map,M=Ye(_.__meta)?_.__meta:{};T_++;const L={version:n,cid:T_,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:h,missing:d,missingWarn:m,fallbackWarn:p,fallbackFormat:E,unresolving:A,postTranslation:N,processor:O,warnHtmlMessage:k,escapeParameter:I,messageCompiler:S,messageResolver:B,localeFallbacker:V,fallbackContext:y,onWarn:e,__meta:M};return L.datetimeFormats=a,L.numberFormats=l,L.__datetimeFormatters=v,L.__numberFormatters=D,__INTLIFY_PROD_DEVTOOLS__&&SV(L,n,M),L}function Lf(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return le(a)?a:e}else return e}function _o(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function jV(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function HV(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(jV(t,e[r]))return!0;return!1}function ju(t){return n=>qV(n,t)}function qV(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,b_(t,o)],[]))}else return b_(t,n)}function b_(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,jh(t,i)],[]);return t.normalize(r)}}function jh(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(jh(t,r.k||r.key),s?jh(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const bE=t=>t;let fi=Object.create(null);const ji=t=>Ye(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function AE(t,e={}){let n=!1;const r=e.onError||Ux;return e.onError=s=>{n=!0,r(s)},{...lV(t,e),detectError:n}}const WV=(t,e)=>{if(!le(t))throw Yn(Fn.NOT_SUPPORT_NON_STRING_MESSAGE);{Oe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||bE)(t),s=fi[r];if(s)return s;const{code:i,detectError:o}=AE(t,e),a=new Function(`return ${i}`)();return o?a:fi[r]=a}};function KV(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&le(t)){Oe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||bE)(t),s=fi[r];if(s)return s;const{ast:i,detectError:o}=AE(t,{...e,location:!1,jit:!0}),a=ju(i);return o?a:fi[r]=a}else{const n=t.cacheKey;if(n){const r=fi[n];return r||(fi[n]=ju(t))}else return ju(t)}}const A_=()=>"",Pn=t=>et(t);function C_(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,u]=Hh(...e),h=Oe(u.missingWarn)?u.missingWarn:t.missingWarn,d=Oe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,m=Oe(u.escapeParameter)?u.escapeParameter:t.escapeParameter,p=!!u.resolvedMessage,E=le(u.default)||Oe(u.default)?Oe(u.default)?i?l:()=>l:u.default:n?i?l:()=>l:"",A=n||E!=="",N=Of(t,u);m&&GV(u);let[O,k,I]=p?[l,N,a[N]||{}]:CE(t,l,N,o,d,h),S=O,B=l;if(!p&&!(le(S)||ji(S)||Pn(S))&&A&&(S=E,B=S),!p&&(!(le(S)||ji(S)||Pn(S))||!le(k)))return s?Gc:l;let V=!1;const y=()=>{V=!0},_=Pn(S)?S:SE(t,l,k,S,B,y);if(V)return S;const v=QV(t,k,I,u),D=AV(v),M=zV(t,_,D),L=r?r(M,l):M;if(__INTLIFY_PROD_DEVTOOLS__){const P={timestamp:Date.now(),key:le(l)?l:Pn(S)?S.key:"",locale:k||(Pn(S)?S.locale:""),format:le(S)?S:Pn(S)?S.source:"",message:L};P.meta=Bt({},t.__meta,UV()||{}),PV(P)}return L}function GV(t){it(t.list)?t.list=t.list.map(e=>le(e)?u_(e):e):Ye(t.named)&&Object.keys(t.named).forEach(e=>{le(t.named[e])&&(t.named[e]=u_(t.named[e]))})}function CE(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,h=u(t,r,n);let d={},m,p=null;const E="translate";for(let A=0;A<h.length&&(m=h[A],d=o[m]||{},(p=l(d,e))===null&&(p=d[e]),!(le(p)||ji(p)||Pn(p)));A++)if(!HV(m,h)){const N=Lf(t,e,m,i,E);N!==e&&(p=N)}return[p,m,d]}function SE(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Pn(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=n,u.key=e,u}const l=o(r,YV(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function zV(t,e,n){return e(n)}function Hh(...t){const[e,n,r]=t,s={};if(!le(e)&&!Tt(e)&&!Pn(e)&&!ji(e))throw Yn(Fn.INVALID_ARGUMENT);const i=Tt(e)?String(e):(Pn(e),e);return Tt(n)?s.plural=n:le(n)?s.default=n:Ae(n)&&!Wc(n)?s.named=n:it(n)&&(s.list=n),Tt(r)?s.plural=r:le(r)?s.default=r:Ae(r)&&Bt(s,r),[i,s]}function YV(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>Ax(e,n,o)}}function QV(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:h}=t,m={locale:e,modifiers:s,pluralRules:i,messages:p=>{let E=o(n,p);if(E==null&&h){const[,,A]=CE(h,p,e,a,l,u);E=o(A,p)}if(le(E)||ji(E)){let A=!1;const O=SE(t,p,e,E,p,()=>{A=!0});return A?A_:O}else return Pn(E)?E:A_}};return t.processor&&(m.processor=t.processor),r.list&&(m.list=r.list),r.named&&(m.named=r.named),Tt(r.plural)&&(m.pluralIndex=r.plural),m}function S_(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,h,d]=qh(...e),m=Oe(h.missingWarn)?h.missingWarn:t.missingWarn;Oe(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const p=!!h.part,E=Of(t,h),A=o(t,s,E);if(!le(l)||l==="")return new Intl.DateTimeFormat(E,d).format(u);let N={},O,k=null;const I="datetime format";for(let V=0;V<A.length&&(O=A[V],N=n[O]||{},k=N[l],!Ae(k));V++)Lf(t,l,O,m,I);if(!Ae(k)||!le(O))return r?Gc:l;let S=`${O}__${l}`;Wc(d)||(S=`${S}__${JSON.stringify(d)}`);let B=a.get(S);return B||(B=new Intl.DateTimeFormat(O,Bt({},k,d)),a.set(S,B)),p?B.formatToParts(u):B.format(u)}const PE=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function qh(...t){const[e,n,r,s]=t,i={};let o={},a;if(le(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Yn(Fn.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Yn(Fn.INVALID_ISO_DATE_ARGUMENT)}}else if(Sx(e)){if(isNaN(e.getTime()))throw Yn(Fn.INVALID_DATE_ARGUMENT);a=e}else if(Tt(e))a=e;else throw Yn(Fn.INVALID_ARGUMENT);return le(n)?i.key=n:Ae(n)&&Object.keys(n).forEach(l=>{PE.includes(l)?o[l]=n[l]:i[l]=n[l]}),le(r)?i.locale=r:Ae(r)&&(o=r),Ae(s)&&(o=s),[i.key||"",a,i,o]}function P_(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function R_(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,h,d]=Wh(...e),m=Oe(h.missingWarn)?h.missingWarn:t.missingWarn;Oe(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const p=!!h.part,E=Of(t,h),A=o(t,s,E);if(!le(l)||l==="")return new Intl.NumberFormat(E,d).format(u);let N={},O,k=null;const I="number format";for(let V=0;V<A.length&&(O=A[V],N=n[O]||{},k=N[l],!Ae(k));V++)Lf(t,l,O,m,I);if(!Ae(k)||!le(O))return r?Gc:l;let S=`${O}__${l}`;Wc(d)||(S=`${S}__${JSON.stringify(d)}`);let B=a.get(S);return B||(B=new Intl.NumberFormat(O,Bt({},k,d)),a.set(S,B)),p?B.formatToParts(u):B.format(u)}const RE=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Wh(...t){const[e,n,r,s]=t,i={};let o={};if(!Tt(e))throw Yn(Fn.INVALID_ARGUMENT);const a=e;return le(n)?i.key=n:Ae(n)&&Object.keys(n).forEach(l=>{RE.includes(l)?o[l]=n[l]:i[l]=n[l]}),le(r)?i.locale=r:Ae(r)&&(o=r),Ae(s)&&(o=s),[i.key||"",a,i,o]}function k_(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}cV();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const JV="9.13.1";function XV(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(pr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(pr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(pr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(pr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(pr().__INTLIFY_PROD_DEVTOOLS__=!1)}const kE=kV.__EXTEND_POINT__,dr=Kc(kE);dr(),dr(),dr(),dr(),dr(),dr(),dr(),dr(),dr();const NE=Fn.__EXTEND_POINT__,hn=Kc(NE),At={UNEXPECTED_RETURN_TYPE:NE,INVALID_ARGUMENT:hn(),MUST_BE_CALL_SETUP_TOP:hn(),NOT_INSTALLED:hn(),NOT_AVAILABLE_IN_LEGACY_MODE:hn(),REQUIRED_VALUE:hn(),INVALID_VALUE:hn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:hn(),NOT_INSTALLED_WITH_PROVIDE:hn(),UNEXPECTED_ERROR:hn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:hn(),BRIDGE_SUPPORT_VUE_2_ONLY:hn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:hn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:hn(),__EXTEND_POINT__:hn()};function Lt(t,...e){return Xi(t,null,void 0)}const Kh=Is("__translateVNode"),Gh=Is("__datetimeParts"),zh=Is("__numberParts"),DE=Is("__setPluralRules"),OE=Is("__injectWithOption"),Yh=Is("__dispose");function ha(t){if(!Ye(t))return t;for(const e in t)if(nc(t,e))if(!e.includes("."))Ye(t[e])&&ha(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ye(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),Ye(s[n[r]])&&ha(s[n[r]])}return t}function zc(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Ae(n)?n:it(r)?{}:{[t]:{}};if(it(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||{},Al(u,o[l])):Al(u,o)}else le(a)&&Al(JSON.parse(a),o)}),s==null&&i)for(const a in o)nc(o,a)&&ha(o[a]);return o}function LE(t){return t.type}function ME(t,e,n){let r=Ye(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=zc(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(Ye(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ye(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function N_(t){return xe(_a,null,t,0)}const D_="__INTLIFY_META__",O_=()=>[],ZV=()=>!1;let L_=0;function M_(t){return(e,n,r,s)=>t(n,r,Jo()||void 0,s)}const e6=()=>{const t=Jo();let e=null;return t&&(e=LE(t)[D_])?{[D_]:e}:null};function Mf(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=tc?ct:vd,a=!!t.translateExistCompatible;let l=Oe(t.inheritLocale)?t.inheritLocale:!0;const u=o(n&&l?n.locale.value:le(t.locale)?t.locale:Bi),h=o(n&&l?n.fallbackLocale.value:le(t.fallbackLocale)||it(t.fallbackLocale)||Ae(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),d=o(zc(u.value,t)),m=o(Ae(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),p=o(Ae(t.numberFormats)?t.numberFormats:{[u.value]:{}});let E=n?n.missingWarn:Oe(t.missingWarn)||ms(t.missingWarn)?t.missingWarn:!0,A=n?n.fallbackWarn:Oe(t.fallbackWarn)||ms(t.fallbackWarn)?t.fallbackWarn:!0,N=n?n.fallbackRoot:Oe(t.fallbackRoot)?t.fallbackRoot:!0,O=!!t.fallbackFormat,k=et(t.missing)?t.missing:null,I=et(t.missing)?M_(t.missing):null,S=et(t.postTranslation)?t.postTranslation:null,B=n?n.warnHtmlMessage:Oe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,V=!!t.escapeParameter;const y=n?n.modifiers:Ae(t.modifiers)?t.modifiers:{};let _=t.pluralRules||n&&n.pluralRules,v;v=(()=>{s&&w_(null);const U={version:JV,locale:u.value,fallbackLocale:h.value,messages:d.value,modifiers:y,pluralRules:_,missing:I===null?void 0:I,missingWarn:E,fallbackWarn:A,fallbackFormat:O,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:B,escapeParameter:V,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};U.datetimeFormats=m.value,U.numberFormats=p.value,U.__datetimeFormatters=Ae(v)?v.__datetimeFormatters:void 0,U.__numberFormatters=Ae(v)?v.__numberFormatters:void 0;const H=BV(U);return s&&w_(H),H})(),_o(v,u.value,h.value);function M(){return[u.value,h.value,d.value,m.value,p.value]}const L=gt({get:()=>u.value,set:U=>{u.value=U,v.locale=u.value}}),P=gt({get:()=>h.value,set:U=>{h.value=U,v.fallbackLocale=h.value,_o(v,u.value,U)}}),Te=gt(()=>d.value),We=gt(()=>m.value),Re=gt(()=>p.value);function Ce(){return et(S)?S:null}function Ie(U){S=U,v.postTranslation=U}function ot(){return k}function mt(U){U!==null&&(I=M_(U)),k=U,v.missing=I}const Je=(U,H,de,me,ze,Pt)=>{M();let Et;try{__INTLIFY_PROD_DEVTOOLS__,s||(v.fallbackContext=n?$V():void 0),Et=U(v)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(v.fallbackContext=void 0)}if(de!=="translate exists"&&Tt(Et)&&Et===Gc||de==="translate exists"&&!Et){const[Ts,or]=H();return n&&N?me(n):ze(Ts)}else{if(Pt(Et))return Et;throw Lt(At.UNEXPECTED_RETURN_TYPE)}};function Ue(...U){return Je(H=>Reflect.apply(C_,null,[H,...U]),()=>Hh(...U),"translate",H=>Reflect.apply(H.t,H,[...U]),H=>H,H=>le(H))}function He(...U){const[H,de,me]=U;if(me&&!Ye(me))throw Lt(At.INVALID_ARGUMENT);return Ue(H,de,Bt({resolvedMessage:!0},me||{}))}function Mt(...U){return Je(H=>Reflect.apply(S_,null,[H,...U]),()=>qh(...U),"datetime format",H=>Reflect.apply(H.d,H,[...U]),()=>v_,H=>le(H))}function St(...U){return Je(H=>Reflect.apply(R_,null,[H,...U]),()=>Wh(...U),"number format",H=>Reflect.apply(H.n,H,[...U]),()=>v_,H=>le(H))}function ut(U){return U.map(H=>le(H)||Tt(H)||Oe(H)?N_(String(H)):H)}const ie={normalize:ut,interpolate:U=>U,type:"vnode"};function re(...U){return Je(H=>{let de;const me=H;try{me.processor=ie,de=Reflect.apply(C_,null,[me,...U])}finally{me.processor=null}return de},()=>Hh(...U),"translate",H=>H[Kh](...U),H=>[N_(H)],H=>it(H))}function ce(...U){return Je(H=>Reflect.apply(R_,null,[H,...U]),()=>Wh(...U),"number format",H=>H[zh](...U),O_,H=>le(H)||it(H))}function De(...U){return Je(H=>Reflect.apply(S_,null,[H,...U]),()=>qh(...U),"datetime format",H=>H[Gh](...U),O_,H=>le(H)||it(H))}function Be(U){_=U,v.pluralRules=_}function R(U,H){return Je(()=>{if(!U)return!1;const de=le(H)?H:u.value,me=Y(de),ze=v.messageResolver(me,U);return a?ze!=null:ji(ze)||Pn(ze)||le(ze)},()=>[U],"translate exists",de=>Reflect.apply(de.te,de,[U,H]),ZV,de=>Oe(de))}function T(U){let H=null;const de=yE(v,h.value,u.value);for(let me=0;me<de.length;me++){const ze=d.value[de[me]]||{},Pt=v.messageResolver(ze,U);if(Pt!=null){H=Pt;break}}return H}function $(U){const H=T(U);return H??(n?n.tm(U)||{}:{})}function Y(U){return d.value[U]||{}}function G(U,H){if(i){const de={[U]:H};for(const me in de)nc(de,me)&&ha(de[me]);H=de[U]}d.value[U]=H,v.messages=d.value}function J(U,H){d.value[U]=d.value[U]||{};const de={[U]:H};if(i)for(const me in de)nc(de,me)&&ha(de[me]);H=de[U],Al(H,d.value[U]),v.messages=d.value}function se(U){return m.value[U]||{}}function b(U,H){m.value[U]=H,v.datetimeFormats=m.value,P_(v,U,H)}function C(U,H){m.value[U]=Bt(m.value[U]||{},H),v.datetimeFormats=m.value,P_(v,U,H)}function F(U){return p.value[U]||{}}function K(U,H){p.value[U]=H,v.numberFormats=p.value,k_(v,U,H)}function te(U,H){p.value[U]=Bt(p.value[U]||{},H),v.numberFormats=p.value,k_(v,U,H)}L_++,n&&tc&&($s(n.locale,U=>{l&&(u.value=U,v.locale=U,_o(v,u.value,h.value))}),$s(n.fallbackLocale,U=>{l&&(h.value=U,v.fallbackLocale=U,_o(v,u.value,h.value))}));const Q={id:L_,locale:L,fallbackLocale:P,get inheritLocale(){return l},set inheritLocale(U){l=U,U&&n&&(u.value=n.locale.value,h.value=n.fallbackLocale.value,_o(v,u.value,h.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:Te,get modifiers(){return y},get pluralRules(){return _||{}},get isGlobal(){return s},get missingWarn(){return E},set missingWarn(U){E=U,v.missingWarn=E},get fallbackWarn(){return A},set fallbackWarn(U){A=U,v.fallbackWarn=A},get fallbackRoot(){return N},set fallbackRoot(U){N=U},get fallbackFormat(){return O},set fallbackFormat(U){O=U,v.fallbackFormat=O},get warnHtmlMessage(){return B},set warnHtmlMessage(U){B=U,v.warnHtmlMessage=U},get escapeParameter(){return V},set escapeParameter(U){V=U,v.escapeParameter=U},t:Ue,getLocaleMessage:Y,setLocaleMessage:G,mergeLocaleMessage:J,getPostTranslationHandler:Ce,setPostTranslationHandler:Ie,getMissingHandler:ot,setMissingHandler:mt,[DE]:Be};return Q.datetimeFormats=We,Q.numberFormats=Re,Q.rt=He,Q.te=R,Q.tm=$,Q.d=Mt,Q.n=St,Q.getDateTimeFormat=se,Q.setDateTimeFormat=b,Q.mergeDateTimeFormat=C,Q.getNumberFormat=F,Q.setNumberFormat=K,Q.mergeNumberFormat=te,Q[OE]=r,Q[Kh]=re,Q[Gh]=De,Q[zh]=ce,Q}function t6(t){const e=le(t.locale)?t.locale:Bi,n=le(t.fallbackLocale)||it(t.fallbackLocale)||Ae(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=et(t.missing)?t.missing:void 0,s=Oe(t.silentTranslationWarn)||ms(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Oe(t.silentFallbackWarn)||ms(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Oe(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Ae(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,h=et(t.postTranslation)?t.postTranslation:void 0,d=le(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,m=!!t.escapeParameterHtml,p=Oe(t.sync)?t.sync:!0;let E=t.messages;if(Ae(t.sharedMessages)){const V=t.sharedMessages;E=Object.keys(V).reduce((_,v)=>{const D=_[v]||(_[v]={});return Bt(D,V[v]),_},E||{})}const{__i18n:A,__root:N,__injectWithOption:O}=t,k=t.datetimeFormats,I=t.numberFormats,S=t.flatJson,B=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:E,flatJson:S,datetimeFormats:k,numberFormats:I,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:h,warnHtmlMessage:d,escapeParameter:m,messageResolver:t.messageResolver,inheritLocale:p,translateExistCompatible:B,__i18n:A,__root:N,__injectWithOption:O}}function Qh(t={},e){{const n=Mf(t6(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Oe(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Oe(i)?!i:i},get silentFallbackWarn(){return Oe(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Oe(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,l]=i,u={};let h=null,d=null;if(!le(o))throw Lt(At.INVALID_ARGUMENT);const m=o;return le(a)?u.locale=a:it(a)?h=a:Ae(a)&&(d=a),it(l)?h=l:Ae(l)&&(d=l),Reflect.apply(n.t,n,[m,h||d||{},u])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,l]=i,u={plural:1};let h=null,d=null;if(!le(o))throw Lt(At.INVALID_ARGUMENT);const m=o;return le(a)?u.locale=a:Tt(a)?u.plural=a:it(a)?h=a:Ae(a)&&(d=a),le(l)?u.locale=l:it(l)?h=l:Ae(l)&&(d=l),Reflect.apply(n.t,n,[m,h||d||{},u])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const xf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function n6({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===_e?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function xE(t){return _e}const r6=Wi({name:"i18n-t",props:Bt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Tt(t)||!isNaN(t)}},xf),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Vf({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=le(t.plural)?+t.plural:t.plural);const a=n6(e,i),l=s[Kh](t.keypath,a,o),u=Bt({},r),h=le(t.tag)||Ye(t.tag)?t.tag:xE();return va(h,u,l)}}}),x_=r6;function s6(t){return it(t)&&!le(t[0])}function VE(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),le(t.format)?o.key=t.format:Ye(t.format)&&(le(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((m,p)=>n.includes(p)?Bt({},m,{[p]:t.format[p]}):m,{}));const l=r(t.value,o,a);let u=[o.key];it(l)?u=l.map((m,p)=>{const E=s[m.type],A=E?E({[m.type]:m.value,index:p,parts:l}):[m.value];return s6(A)&&(A[0].key=`${m.type}-${p}`),A}):le(l)&&(u=[l]);const h=Bt({},i),d=le(t.tag)||Ye(t.tag)?t.tag:xE();return va(d,h,u)}}const i6=Wi({name:"i18n-n",props:Bt({value:{type:Number,required:!0},format:{type:[String,Object]}},xf),setup(t,e){const n=t.i18n||Vf({useScope:t.scope,__useComponent:!0});return VE(t,e,RE,(...r)=>n[zh](...r))}}),V_=i6,o6=Wi({name:"i18n-d",props:Bt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},xf),setup(t,e){const n=t.i18n||Vf({useScope:t.scope,__useComponent:!0});return VE(t,e,PE,(...r)=>n[Gh](...r))}}),F_=o6;function a6(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function l6(t){const e=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw Lt(At.UNEXPECTED_ERROR);const h=a6(t,a.$),d=U_(u);return[Reflect.apply(h.t,h,[...$_(d)]),h]};return{created:(o,a)=>{const[l,u]=e(a);tc&&t.global===u&&(o.__i18nWatcher=$s(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{tc&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=U_(a);o.textContent=Reflect.apply(l.t,l,[...$_(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function U_(t){if(le(t))return{path:t};if(Ae(t)){if(!("path"in t))throw Lt(At.REQUIRED_VALUE,"path");return t}else throw Lt(At.INVALID_VALUE)}function $_(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return le(n)&&(o.locale=n),Tt(s)&&(o.plural=s),Tt(i)&&(o.plural=i),[e,a,o]}function c6(t,e,...n){const r=Ae(n[0])?n[0]:{},s=!!r.useI18nComponentName;(Oe(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":x_.name,"I18nT"].forEach(o=>t.component(o,x_)),[V_.name,"I18nN"].forEach(o=>t.component(o,V_)),[F_.name,"I18nD"].forEach(o=>t.component(o,F_))),t.directive("t",l6(e))}function u6(t,e,n){return{beforeCreate(){const r=Jo();if(!r)throw Lt(At.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=B_(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=Qh(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=B_(t,s);else{this.$i18n=Qh({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&ME(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=Jo();if(!r)throw Lt(At.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function B_(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[DE](e.pluralizationRules||t.pluralizationRules);const n=zc(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const h6=Is("global-vue-i18n");function d6(t={},e){const n=__VUE_I18N_LEGACY_API__&&Oe(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Oe(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=f6(t,n),l=Is("");function u(m){return i.get(m)||null}function h(m,p){i.set(m,p)}function d(m){i.delete(m)}{const m={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(p,...E){if(p.__VUE_I18N_SYMBOL__=l,p.provide(p.__VUE_I18N_SYMBOL__,m),Ae(E[0])){const O=E[0];m.__composerExtend=O.__composerExtend,m.__vueI18nExtend=O.__vueI18nExtend}let A=null;!n&&r&&(A=w6(p,m.global)),__VUE_I18N_FULL_INSTALL__&&c6(p,m,...E),__VUE_I18N_LEGACY_API__&&n&&p.mixin(u6(a,a.__composer,m));const N=p.unmount;p.unmount=()=>{A&&A(),m.dispose(),N()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:u,__setInstance:h,__deleteInstance:d};return m}}function Vf(t={}){const e=Jo();if(e==null)throw Lt(At.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Lt(At.NOT_INSTALLED);const n=m6(e),r=p6(n),s=LE(e),i=g6(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Lt(At.NOT_AVAILABLE_IN_LEGACY_MODE);return E6(e,i,r,t)}if(i==="global")return ME(r,t,s),r;if(i==="parent"){let l=_6(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=Bt({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=Mf(l),o.__composerExtend&&(a[Yh]=o.__composerExtend(a)),v6(o,e,a),o.__setInstance(e,a)}return a}function f6(t,e,n){const r=yw();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>Qh(t)):r.run(()=>Mf(t));if(s==null)throw Lt(At.UNEXPECTED_ERROR);return[r,s]}}function m6(t){{const e=Qn(t.isCE?h6:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Lt(t.isCE?At.NOT_INSTALLED_WITH_PROVIDE:At.UNEXPECTED_ERROR);return e}}function g6(t,e){return Wc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function p6(t){return t.mode==="composition"?t.global:t.global.__composer}function _6(t,e,n=!1){let r=null;const s=e.root;let i=y6(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[OE]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function y6(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function v6(t,e,n){My(()=>{},e),Td(()=>{const r=n;t.__deleteInstance(e);const s=r[Yh];s&&(s(),delete r[Yh])},e)}function E6(t,e,n,r={}){const s=e==="local",i=vd(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Lt(At.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Oe(r.inheritLocale)?r.inheritLocale:!le(r.locale),a=ct(!s||o?n.locale.value:le(r.locale)?r.locale:Bi),l=ct(!s||o?n.fallbackLocale.value:le(r.fallbackLocale)||it(r.fallbackLocale)||Ae(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=ct(zc(a.value,r)),h=ct(Ae(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),d=ct(Ae(r.numberFormats)?r.numberFormats:{[a.value]:{}}),m=s?n.missingWarn:Oe(r.missingWarn)||ms(r.missingWarn)?r.missingWarn:!0,p=s?n.fallbackWarn:Oe(r.fallbackWarn)||ms(r.fallbackWarn)?r.fallbackWarn:!0,E=s?n.fallbackRoot:Oe(r.fallbackRoot)?r.fallbackRoot:!0,A=!!r.fallbackFormat,N=et(r.missing)?r.missing:null,O=et(r.postTranslation)?r.postTranslation:null,k=s?n.warnHtmlMessage:Oe(r.warnHtmlMessage)?r.warnHtmlMessage:!0,I=!!r.escapeParameter,S=s?n.modifiers:Ae(r.modifiers)?r.modifiers:{},B=r.pluralRules||s&&n.pluralRules;function V(){return[a.value,l.value,u.value,h.value,d.value]}const y=gt({get:()=>i.value?i.value.locale.value:a.value,set:T=>{i.value&&(i.value.locale.value=T),a.value=T}}),_=gt({get:()=>i.value?i.value.fallbackLocale.value:l.value,set:T=>{i.value&&(i.value.fallbackLocale.value=T),l.value=T}}),v=gt(()=>i.value?i.value.messages.value:u.value),D=gt(()=>h.value),M=gt(()=>d.value);function L(){return i.value?i.value.getPostTranslationHandler():O}function P(T){i.value&&i.value.setPostTranslationHandler(T)}function Te(){return i.value?i.value.getMissingHandler():N}function We(T){i.value&&i.value.setMissingHandler(T)}function Re(T){return V(),T()}function Ce(...T){return i.value?Re(()=>Reflect.apply(i.value.t,null,[...T])):Re(()=>"")}function Ie(...T){return i.value?Reflect.apply(i.value.rt,null,[...T]):""}function ot(...T){return i.value?Re(()=>Reflect.apply(i.value.d,null,[...T])):Re(()=>"")}function mt(...T){return i.value?Re(()=>Reflect.apply(i.value.n,null,[...T])):Re(()=>"")}function Je(T){return i.value?i.value.tm(T):{}}function Ue(T,$){return i.value?i.value.te(T,$):!1}function He(T){return i.value?i.value.getLocaleMessage(T):{}}function Mt(T,$){i.value&&(i.value.setLocaleMessage(T,$),u.value[T]=$)}function St(T,$){i.value&&i.value.mergeLocaleMessage(T,$)}function ut(T){return i.value?i.value.getDateTimeFormat(T):{}}function z(T,$){i.value&&(i.value.setDateTimeFormat(T,$),h.value[T]=$)}function ie(T,$){i.value&&i.value.mergeDateTimeFormat(T,$)}function re(T){return i.value?i.value.getNumberFormat(T):{}}function ce(T,$){i.value&&(i.value.setNumberFormat(T,$),d.value[T]=$)}function De(T,$){i.value&&i.value.mergeNumberFormat(T,$)}const Be={get id(){return i.value?i.value.id:-1},locale:y,fallbackLocale:_,messages:v,datetimeFormats:D,numberFormats:M,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(T){i.value&&(i.value.inheritLocale=T)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(u.value)},get modifiers(){return i.value?i.value.modifiers:S},get pluralRules(){return i.value?i.value.pluralRules:B},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:m},set missingWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackWarn(){return i.value?i.value.fallbackWarn:p},set fallbackWarn(T){i.value&&(i.value.missingWarn=T)},get fallbackRoot(){return i.value?i.value.fallbackRoot:E},set fallbackRoot(T){i.value&&(i.value.fallbackRoot=T)},get fallbackFormat(){return i.value?i.value.fallbackFormat:A},set fallbackFormat(T){i.value&&(i.value.fallbackFormat=T)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:k},set warnHtmlMessage(T){i.value&&(i.value.warnHtmlMessage=T)},get escapeParameter(){return i.value?i.value.escapeParameter:I},set escapeParameter(T){i.value&&(i.value.escapeParameter=T)},t:Ce,getPostTranslationHandler:L,setPostTranslationHandler:P,getMissingHandler:Te,setMissingHandler:We,rt:Ie,d:ot,n:mt,tm:Je,te:Ue,getLocaleMessage:He,setLocaleMessage:Mt,mergeLocaleMessage:St,getDateTimeFormat:ut,setDateTimeFormat:z,mergeDateTimeFormat:ie,getNumberFormat:re,setNumberFormat:ce,mergeNumberFormat:De};function R(T){T.locale.value=a.value,T.fallbackLocale.value=l.value,Object.keys(u.value).forEach($=>{T.mergeLocaleMessage($,u.value[$])}),Object.keys(h.value).forEach($=>{T.mergeDateTimeFormat($,h.value[$])}),Object.keys(d.value).forEach($=>{T.mergeNumberFormat($,d.value[$])}),T.escapeParameter=I,T.fallbackFormat=A,T.fallbackRoot=E,T.fallbackWarn=p,T.missingWarn=m,T.warnHtmlMessage=k}return Ly(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Lt(At.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const T=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=T.locale.value,l.value=T.fallbackLocale.value,u.value=T.messages.value,h.value=T.datetimeFormats.value,d.value=T.numberFormats.value):s&&R(T)}),Be}const I6=["locale","fallbackLocale","availableLocales"],j_=["t","rt","d","n","tm","te"];function w6(t,e){const n=Object.create(null);return I6.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Lt(At.UNEXPECTED_ERROR);const o=un(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,j_.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Lt(At.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,j_.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}XV();__INTLIFY_JIT_COMPILATION__?I_(KV):I_(WV);xV(_V);VV(yE);if(__INTLIFY_PROD_DEVTOOLS__){const t=pr();t.__INTLIFY__=!0,CV(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const T6={name:"Wacken GLUP",share:{invite:"Let us plan together with Wacken Group Line Up Planner"}},b6={offline:{message:"You are offline. No changes can be made.",ready:{message:"The app can now work offline."},onlineAgain:{message:"You are back online. Click me to reload."}}},A6={overview:"Overview",acts:"Acts",members:"Members",settings:"Settings"},C6={ok:"Okay",confirm:"Confirm",finish:"Finish",abort:"Abort",signIn:"Sign in",signUp:"Sign up",logOut:"Log out",join:"Join",name:"Name",color:"Color",mail:"Mail",mailAddress:"Mail address",password:"Password",invite:"Invite",invitationLink:"Invitation link",leave:"Leave",delete:"Delete",add:"Add",select:"Select",greeting:"Hello",anon:"Anonymous",likes:"no likes | one like | {count} likes",recommendations:"no recommendations | one recommendation | {count} recommendations",and:" & ",someone:"Someone",liked:"Liked",recommended:"Recommended",details:"Details",until:"until"},S6={title:"Join space",message:{generic:"{n} has invited you to join their space.",specific:'{n} has invited you to join a space called "{s}".'},button:{joinWithoutAccount:"Join (without Account)"},whoAreYou:{title:"Who are you?",message:["You can add yourself to the members of this space","or choose an already created persona from the list."]},dialog:{error:{title:"Error",message:"An error occurred whilst joining:"}}},P6={alreadyLoggedIn:"You are already logged in.",signIn:{message:["Sign in to create and edit your plan","and share it with your friends."]},mail:{title:"Login via mail",message:["Sign in to create and edit your plan","and share it with your friends."]}},R6={dialog:{filterStages:{title:"Filter stages",save:{title:"Save",description:"Also apply on next visit"}}}},k6={search:{placeholder:"Search for acts"},filter:{onlyConcerts:{label:"Only concerts",description:"Hide all other acts"},sortTime:{label:"Sort chronological",description:"Show upcoming acts at the top"}}},N6={done:{title:"no more acts",message:"You have marked {count} acts | You have marked one act | You have marked {count} acts"},dialog:{introduction:{title:"The swiper",message:"If you like the act, swipe right. If you don't, swipe left."}}},D6={tasteMatch:"matches {n}",dialog:{removeMember:{title:"Delete forever",message:"Do you really want to remove this member?"},charts:{title:"Charts"}}},O6={spaceSettings:{title:"Space settings"},dialog:{leaveSpace:{title:"Leave space",message:"Du you really want to leave this space? Your data will be deleted."},anonLogOut:{title:"Log out forever",message:"If you sign out of your anonymous account, your favorites can only be managed with the invitation link. Do you really want to log out? You'll never be able to log in again."},deleteAccount:{title:"Delete forever",message:"Du you really want to delete your account? All data associated with your account is going to be deleted aswell."},relogin:{title:"Log in again",message:"You need to log in again to be able to delete your account."},invitationLink:{title:"Share invitation link",message:"Your friends can join your space with the following link:"}}},L6={"login-needed":{title:"Login required",message:"Log in or ask for a invitation link for an existing space to save your favorites."}},M6="Install to your homescreen",x6="About privacy",V6={brand:T6,app:b6,navigation:A6,common:C6,join:S6,login:P6,home:R6,acts:k6,swiper:N6,members:D6,settings:O6,dialog:L6,pwaAdvert:M6,privacyPolicy:x6},F6={name:"Wacken GLUP",share:{invite:"Lass uns zusammen planen mit Wacken Group Line Up Planner"}},U6={offline:{message:"Du bist offline, keine Änderungen werden übernommen.",ready:{message:"Die App funktioniert nun auch offline."},onlineAgain:{message:"Du bist wieder online. Klicke, um neu zu laden."}}},$6={overview:"Überblick",acts:"Acts",members:"Mitglieder",settings:"Einstellungen"},B6={ok:"Okay",confirm:"Bestätigen",finish:"Abschließen",abort:"Abbrechen",signIn:"Anmelden",signUp:"Registrieren",logOut:"Abmelden",join:"Beitreten",name:"Name",color:"Farbe",mail:"E-Mail",mailAddress:"E-Mail Adresse",password:"Passwort",invite:"Einladen",invitationLink:"Einladungslink",leave:"Verlassen",delete:"Löschen",add:"Hinzufügen",select:"Auswählen",greeting:"Moin",anon:"Anonym",likes:"keine Likes | ein Like | {count} Likes",recommendations:"keine Vorschläge | ein Vorschlag | {count} Vorschläge",and:" & ",someone:"Jemand",liked:"Vorgemerkt",recommended:"Vorgeschlagen",details:"Details",until:"bis"},j6={title:"Space beitreten",message:{generic:"{n} hat dich eingeladen, einem Space beizutreten.",specific:'{n} hat dich eingeladen, dem Space "{s}" beizutreten.'},button:{joinWithoutAccount:"Beitreten (ohne Konto)"},whoAreYou:{title:"Wer bist du?",message:["Du kannst entweder dich als neue Person hinzufügen oder,","falls du dies bereits getan hast, deine bestehende Person auswählen."]},dialog:{error:{title:"Fehler beim Beitreten",message:"Beim Beitreten ist ein Fehler aufgetreten:"}}},H6={alreadyLoggedIn:"Du bist bereits angemeldet.",signIn:{message:["Melde dich an, um einen Plan zu erstellen","und ihn mit deinen Freunden zu teilen."]},mail:{title:"per Mail anmelden",message:["Melde dich an, um einen Plan zu erstellen","und ihn mit deinen Freunden zu teilen."]}},q6={dialog:{filterStages:{title:"Stages filtern",save:{title:"Speichern",description:"Auch beim nächsten Besuch anwenden"}}}},W6={search:{placeholder:"Nach Acts suchen"},filter:{onlyConcerts:{label:"Nur Konzerte",description:"Alle anderen Auftritte ausblenden"},sortTime:{label:"Zeitlich sortieren",description:"Anstehende Acts oben anzeigen"}}},K6={done:{title:"keine weiteren Acts",message:"Du hast {count} Acts markiert | Du hast einen Act markiert | Du hast {count} Acts markiert"},dialog:{introduction:{title:"Der Swiper",message:"Wische nach rechts, wenn du den Act magst und nach links, wenn nicht."}}},G6={tasteMatch:"{n} Übereinstimmung",dialog:{removeMember:{title:"Entgültig löschen",message:"Möchtest du dieses Mitglied wirklich entfernen?"},charts:{title:"Charts"}}},z6={spaceSettings:{title:"Space-Einstellungen"},dialog:{leaveSpace:{title:"Space verlassen",message:"Möchtest du diesen Space verlassen? Deine Daten werden gelöscht!"},anonLogOut:{title:"Entgültig abmelden",message:"Wenn du dich von deinem annonymen Konto abmeldest, können die gespeicherten Daten nur über den Einladungslink verwaltet werden. Möchtest du dich dennoch abmelden? Du wirst dich nie wieder mit diesem Konto anmelden können."},deleteAccount:{title:"Entgültig löschen",message:"Möchtest du deinen Account löschen? Alle Daten, die mit deinem Konto verknüpft sind werden ebenfalls gelöscht."},relogin:{title:"Erneut anmelden",message:"Bitte melde dich erneut mit deinen Anmeldedaten an um deinen Account löschen zu können."},invitationLink:{title:"Einladungslink teilen",message:"Über den folgenen Link können deine Freunde beitreten:"}}},Y6={"login-needed":{title:"Anmeldung erforderlich",message:"Melde dich an oder frage nach einem Einladungslink zu einem bestehenden Space um deine Favoriten zu speichern."}},Q6="Installiere die App auf deinem Homescreen",J6="Informationen zum Datenschutz",X6="LITERAL TRANSLATIONS",Z6="Montag",e5="Dienstag",t5="Mittwoch",n5="Donnerstag",r5="Freitag",s5="Samstag",i5="Sonntag",o5="Konzert",a5={brand:F6,app:U6,navigation:$6,common:B6,join:j6,login:H6,home:q6,acts:W6,swiper:K6,members:G6,settings:z6,dialog:Y6,pwaAdvert:Q6,privacyPolicy:J6,__comment:X6,Monday:Z6,Tuesday:e5,Wednesday:t5,Thursday:n5,Friday:r5,Saturday:s5,Sunday:i5,Concert:o5,"Spoken Word":"Rede"};var l5={VITE_FB_API_KEY:"AIzaSyD17IQgWZmP3iCaXGeeQq71o09hh3DcwUE",VITE_FB_AUTH_DOMAIN:"wacken-glup.firebaseapp.com",VITE_FB_PROJECT_ID:"wacken-glup",VITE_FB_STORAGE_BUCKET:"wacken-glup.appspot.com",VITE_FB_MESSAGING_SENDER_ID:"708544587822",VITE_FB_APP_ID:"1:708544587822:web:184cc869ae7b53167057bf",VITE_PRIVACY_POLICY:"/privacy.html",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};ui("theme",l5.VITE_THEME_COLOR||"#F90323");const c5={apiKey:"AIzaSyD17IQgWZmP3iCaXGeeQq71o09hh3DcwUE",authDomain:"wacken-glup.firebaseapp.com",projectId:"wacken-glup",storageBucket:"wacken-glup.appspot.com",messagingSenderId:"708544587822",appId:"1:708544587822:web:184cc869ae7b53167057bf"},u5=O0(c5),FE=new AN(u5),h5=d6({locale:navigator.language.substring(0,2),fallbackLocale:"en",messages:{en:V6,de:a5}}),ir=wb(uM),UE=new ck(FE);ir.config.globalProperties.$client=UE;ir.config.globalProperties.$ctx=FE;ir.config.globalProperties.openLoginNeededDialog=ct(!1);ir.config.globalProperties.showOfflineReadyToast=ct(!1);UE.fetchEvents();ir.use(h5);ir.use(bx);ir.use(SA,{});ir.component(bg.name||"",bg);ir.mount("body");"serviceWorker"in navigator&&kA({immediate:!0,onOfflineReady(){ir.config.globalProperties.showOfflineReadyToast.value=!0}});export{tE as A,vb as B,A5 as C,b5 as D,iL as E,_e as F,C5 as G,r2 as H,E5 as I,XD as L,oO as P,vt as _,x as a,xe as b,oe as c,ct as d,Zw as e,My as f,eT as g,va as h,Xw as i,gt as j,Zl as k,ud as l,Le as m,Id as n,ee as o,fl as p,mc as q,ht as r,Ge as s,he as t,Yt as u,eE as v,$s as w,Nn as x,rh as y,ko as z};

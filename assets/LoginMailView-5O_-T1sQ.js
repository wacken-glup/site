import{s as h,j as v,u as _,P as w,_ as S,c as r,a as s,F as u,k as p,t as o,b as a,n as c,w as m,v as d,d as b,o as t,e as y}from"./index-Sxu-8l9n.js";const U={data(){return{activePage:0,formSignIn:{name:"",mail:"",password:"",error:null,loading:!1},formSignUp:{name:"",mail:"",password:"",error:null,loading:!1}}},methods:{forward(){console.info("callback",this.$route.query.callback+""),this.$route.query.callback==null?window.location.href="/":window.location.href=this.$route.query.callback+""},async signIn(){this.formSignIn.loading=!0;try{await h(this.$ctx.auth,this.formSignIn.mail,this.formSignIn.password),this.forward()}catch(e){this.formSignIn.error=e.code}this.formSignIn.loading=!1},async signUp(){this.formSignUp.loading=!0;try{let e=await v(this.$ctx.auth,this.formSignUp.mail,this.formSignUp.password);await _(e.user,{displayName:this.formSignUp.name}),this.forward()}catch(e){this.formSignUp.error=e.code}this.formSignUp.loading=!1}},components:{PrivacyPolicyLink:w}},k={class:"responsive max"},I={key:1,class:"middle-align",style:{height:"100%"}},P={class:"large-padding center middle-align center-align"},V={class:"large-padding"},C=s("i",{class:"extra"},"mail",-1),N={class:"center-align"},$=s("br",null,null,-1),q=s("div",{class:"space"},null,-1),A={class:"tabbed"},D=s("i",null,"login",-1),L=s("i",null,"draw",-1),B=s("div",{class:"space"},null,-1),E=s("div",{class:"space"},null,-1),x={id:"mail-signin-form",onsubmit:"event.preventDefault()"},F={class:"field label prefix border"},M=s("i",null,"mail",-1),T={class:"field label prefix border"},W=s("i",null,"password",-1),j={key:0,class:"error"},z={class:"right-align"},G={key:0,class:"max"},H={id:"mail-signup-form",onsubmit:"event.preventDefault()"},J={class:"field label prefix border"},K=s("i",null,"label",-1),O={class:"field label prefix border"},Q=s("i",null,"mail",-1),R={class:"field label prefix border"},X=s("i",null,"password",-1),Y={key:0,class:"error"},Z={class:"right-align"},ss={key:0,class:"max"};function es(e,i,ns,is,n,g){const f=y("PrivacyPolicyLink");return t(),r(u,null,[s("main",k,[e.$ctx.currentUser.value!=null&&e.$route.query.callback===void 0?(t(),r(u,{key:0},[p(o(e.$router.push("/login")),1)],64)):a("",!0),e.$ctx.currentUser.value==null?(t(),r("div",I,[s("article",P,[s("div",V,[C,s("h5",N,o(e.$t("login.mail.title")),1),s("p",null,[p(o(e.$t("login.mail.message[0]")),1),$,p(o(e.$t("login.mail.message[1]")),1)]),q,s("nav",A,[s("a",{class:c({active:n.activePage==0}),onClick:i[0]||(i[0]=l=>n.activePage=0)},[D,s("span",null,o(e.$t("common.signIn")),1)],2),s("a",{class:c({active:n.activePage==1}),onClick:i[1]||(i[1]=l=>n.activePage=1)},[L,s("span",null,o(e.$t("common.signUp")),1)],2)]),B,E,s("div",{class:c(["page left center-align",{active:n.activePage==0}])},[s("form",x,[s("div",F,[M,m(s("input",{type:"mail","onUpdate:modelValue":i[2]||(i[2]=l=>n.formSignIn.mail=l)},null,512),[[d,n.formSignIn.mail]]),s("label",null,o(e.$t("common.mailAddress")),1)]),s("div",T,[W,m(s("input",{type:"password","onUpdate:modelValue":i[3]||(i[3]=l=>n.formSignIn.password=l)},null,512),[[d,n.formSignIn.password]]),s("label",null,o(e.$t("common.password")),1)])]),n.formSignIn.error!=null?(t(),r("p",j,o(n.formSignIn.error),1)):a("",!0),s("nav",z,[s("button",{form:"mail-signin-form",onClick:i[4]||(i[4]=l=>g.signIn())},[s("span",null,o(e.$t("common.signIn")),1),n.formSignIn.loading?(t(),r("progress",G)):a("",!0)])])],2),s("div",{class:c(["page right center-align",{active:n.activePage==1}])},[s("form",H,[s("div",J,[K,m(s("input",{type:"name","onUpdate:modelValue":i[5]||(i[5]=l=>n.formSignUp.name=l)},null,512),[[d,n.formSignUp.name]]),s("label",null,o(e.$t("common.name")),1)]),s("div",O,[Q,m(s("input",{type:"mail","onUpdate:modelValue":i[6]||(i[6]=l=>n.formSignUp.mail=l)},null,512),[[d,n.formSignUp.mail]]),s("label",null,o(e.$t("common.mailAddress")),1)]),s("div",R,[X,m(s("input",{type:"password","onUpdate:modelValue":i[7]||(i[7]=l=>n.formSignUp.password=l)},null,512),[[d,n.formSignUp.password]]),s("label",null,o(e.$t("common.password")),1)])]),n.formSignUp.error!=null?(t(),r("p",Y,o(n.formSignUp.error),1)):a("",!0),s("nav",Z,[s("button",{form:"mail-signup-form",onClick:i[8]||(i[8]=l=>g.signUp())},[s("span",null,o(e.$t("common.signUp")),1),n.formSignUp.loading?(t(),r("progress",ss)):a("",!0)])])],2)])])])):a("",!0)]),b(f)],64)}const ls=S(U,[["render",es]]);export{ls as default};
